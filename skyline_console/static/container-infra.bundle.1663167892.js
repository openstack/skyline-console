(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1312:function(e,t,a){"use strict";var l=a(33),r=a(44),n=a(32),i=a(25),s=a(27),o=a(45),u=a(46),d=a(19),c=a(21);d(t,"__esModule",{value:!0}),t.default=t.ClustersStore=void 0;var f,p=c(a(25)),m=c(a(36)),v=c(a(51)),b=c(a(54)),g=c(a(53)),h=c(a(48)),_=a(34);function y(e,t){var a=l(e);if(r){var s=r(e);t&&(s=n(s).call(s,(function(t){return i(e,t).enumerable}))),a.push.apply(a,s)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a,l=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=y(Object(l),!0)).call(a,(function(t){(0,m.default)(e,t,l[t])}));else if(o)u(e,o(l));else{var r;s(r=y(Object(l))).call(r,(function(t){d(e,t,i(l,t))}))}}return e}var x=(f=class extends g.default{get client(){return h.default.magnum.clusters}get templateClient(){return h.default.magnum.clusterTemplates}get listWithDetail(){return!0}create(e){var t=this;return(0,v.default)((function*(){return t.submitting(t.client.create(e))}))()}delete(e){var t=this;return(0,v.default)((function*(){var{id:a}=e;return t.client.delete(a)}))()}resize(e,t){var a=this;return(0,v.default)((function*(){var{id:l}=e;return a.client.resize(l,t)}))()}detailDidFetch(e){var t=this;return(0,v.default)((function*(){var{cluster_template_id:a}=e||{},l=yield t.templateClient.show(a);return e.template=l,e}))()}get mapper(){return e=>k(k({},e),{},{id:e.uuid})}},(0,b.default)(f.prototype,"create",[_.action],(0,p.default)(f.prototype,"create"),f.prototype),(0,b.default)(f.prototype,"delete",[_.action],(0,p.default)(f.prototype,"delete"),f.prototype),(0,b.default)(f.prototype,"resize",[_.action],(0,p.default)(f.prototype,"resize"),f.prototype),f);t.ClustersStore=x;var C=new x;t.default=C},1313:function(e,t,a){"use strict";var l=a(33),r=a(44),n=a(32),i=a(25),s=a(27),o=a(45),u=a(46),d=a(19),c=a(21);d(t,"__esModule",{value:!0}),t.default=t.ClusterTemplatesStore=void 0;var f,p=c(a(57)),m=c(a(32)),v=c(a(33)),b=c(a(198)),g=c(a(335)),h=c(a(25)),_=c(a(36)),y=c(a(51)),k=c(a(54)),x=c(a(53)),C=c(a(48)),S=a(34);function I(e,t){var a=l(e);if(r){var s=r(e);t&&(s=n(s).call(s,(function(t){return i(e,t).enumerable}))),a.push.apply(a,s)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a,l=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=I(Object(l),!0)).call(a,(function(t){(0,_.default)(e,t,l[t])}));else if(o)u(e,o(l));else{var r;s(r=I(Object(l))).call(r,(function(t){d(e,t,i(l,t))}))}}return e}var E=(f=class extends x.default{get client(){return C.default.magnum.clusterTemplates}create(e){var t=this;return(0,y.default)((function*(){return t.submitting(t.client.create(e))}))()}delete(e){var t=this;return(0,y.default)((function*(){var{id:a}=e;return t.client.delete(a)}))()}update(e,t){var a=this;return(0,y.default)((function*(){var l,r,{id:n}=e,i=(0,p.default)(l=(0,m.default)(r=(0,v.default)(t)).call(r,(e=>{var a;return!((0,b.default)(a=["network_driver","external_network_id"]).call(a,e)&&!t[e])}))).call(l,(e=>{var a;return{path:"/".concat(e),value:"labels"===e?(0,g.default)(t[e]||{}):t[e],op:(0,b.default)(a=[null,void 0,""]).call(a,t[e])?"remove":"replace"}}));return a.submitting(a.client.patch(n,i))}))()}get mapper(){return e=>w(w({},e),{},{id:e.uuid})}},(0,k.default)(f.prototype,"create",[S.action],(0,h.default)(f.prototype,"create"),f.prototype),(0,k.default)(f.prototype,"delete",[S.action],(0,h.default)(f.prototype,"delete"),f.prototype),(0,k.default)(f.prototype,"update",[S.action],(0,h.default)(f.prototype,"update"),f.prototype),f);t.ClusterTemplatesStore=E;var L=new E;t.default=L},1364:function(e,a,l){"use strict";l(19)(a,"__esModule",{value:!0}),a.getBaseTemplateColumns=a.admission_control_list=void 0;a.admission_control_list="NodeRestriction,NamespaceLifecycle,LimitRanger,ServiceAccount,ResourceQuota,TaintNodesByCondition,Priority,DefaultTolerationSeconds,DefaultStorageClass,StorageObjectInUseProtection,PersistentVolumeClaimResize,MutatingAdmissionWebhook,ValidatingAdmissionWebhook,RuntimeClass";a.getBaseTemplateColumns=e=>[{title:t("ID/Name"),dataIndex:"name",routeName:e.getRouteName("containerInfraClusterTemplateDetail")},{title:t("COE"),isHideable:!0,dataIndex:"coe"},{title:t("Network Driver"),isHideable:!0,dataIndex:"network_driver"},{title:t("Keypair"),isHideable:!0,dataIndex:"keypair_id",render:t=>t?e.getLinkRender("keypairDetail",t,{id:t}):"-"}]},1422:function(e,a,l){"use strict";var r=l(33),n=l(44),i=l(32),s=l(25),o=l(27),u=l(45),d=l(46),c=l(19),f=l(21);c(a,"__esModule",{value:!0}),a.default=a.StepCreate=void 0;var p=f(l(27)),m=f(l(427)),v=f(l(65)),b=f(l(198)),g=f(l(51)),h=f(l(62)),_=f(l(36)),y=l(406),k=l(1193),x=f(l(1313)),C=l(34),S=f(l(4191)),I=f(l(4192)),w=f(l(4193)),E=f(l(4194));function L(e,t){var a=r(e);if(n){var l=n(e);t&&(l=i(l).call(l,(function(t){return s(e,t).enumerable}))),a.push.apply(a,l)}return a}class N extends k.StepAction{constructor(){super(...arguments),(0,_.default)(this,"onSubmit",(e=>{var{flavor:t,masterFlavor:a,additionalLabels:l,images:r,keypairs:n,externalNetwork:i,fixedNetwork:f,fixedSubnet:v}=e,b=(0,h.default)(e,["flavor","masterFlavor","additionalLabels","images","keypairs","externalNetwork","fixedNetwork","fixedSubnet"]),g={};l&&(0,p.default)(l).call(l,(e=>{var t,a,l=(0,m.default)(t=e.value.key.toLowerCase()).call(t),r=(0,m.default)(a=e.value.value.toLowerCase()).call(a);g[l]=r}));var y=function(e){for(var t=1;t<arguments.length;t++){var a,l=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=L(Object(l),!0)).call(a,(function(t){(0,_.default)(e,t,l[t])}));else if(u)d(e,u(l));else{var r;o(r=L(Object(l))).call(r,(function(t){c(e,t,s(l,t))}))}}return e}({labels:g,external_network_id:i.selectedRowKeys[0]},b);return t&&(y.flavor_id=t.selectedRowKeys[0]),a&&(y.master_flavor_id=a.selectedRowKeys[0]),r&&(y.image_id=r.selectedRowKeys[0]),n&&(y.keypair_id=n.selectedRowKeys[0]),f&&(y.fixed_network=f.selectedRowKeys[0]),v&&(y.fixed_subnet=v.selectedRowKeys[0]),this.isEdit?this.store.update({id:this.params.id},y):this.store.create(y)}))}init(){this.store=x.default,this.getDetail()}static allowed(){return v.default.resolve(!0)}get name(){return t("Create Cluster Template")}get listUrl(){return this.getRoutePath("clusterTemplate")}get isEdit(){var e;return(0,b.default)(e=this.path).call(e,"update")}get hasExtraProps(){return this.isEdit}get hasConfirmStep(){return!1}get params(){var{id:e}=this.props.match.params;return{id:e}}getDetail(){var e=this;return(0,g.default)((function*(){if(e.isEdit){var t=yield x.default.fetchDetail(e.params);e.setState({extra:(0,C.toJS)(t)})}}))()}get steps(){return[{title:t("Info *"),component:S.default},{title:t("Node Spec *"),component:I.default},{title:t("Network"),component:w.default},{title:t("Labels"),component:E.default}]}}a.StepCreate=N,(0,_.default)(N,"id","create-cluster-template"),(0,_.default)(N,"title",t("Create Cluster Template")),(0,_.default)(N,"path","/container-infra/cluster-template/create"),(0,_.default)(N,"policy","clustertemplate:create");var T=(0,y.inject)("rootStore")((0,y.observer)(N));a.default=T},1621:function(e,a,l){"use strict";l(19)(a,"__esModule",{value:!0}),a.healthStatus=a.clusterStatus=void 0;var r={CREATE_IN_PROGRESS:t("CREATE IN PROGRESS"),CREATE_COMPLETE:t("CREATE COMPLETE"),CREATE_FAILED:t("CREATE FAILED"),UPDATE_IN_PROGRESS:t("UPDATE IN PROGRESS"),UPDATE_COMPLETE:t("UPDATE COMPLETE"),UPDATE_FAILED:t("UPDATE FAILED"),DELETE_IN_PROGRESS:t("DELETE_IN PROGRESS"),DELETE_COMPLETE:t("DELETE COMPLETE"),DELETE_FAILED:t("DELETE FAILED"),RESUME_COMPLETE:t("RESUME COMPLETE"),RESUME_FAILED:t("RESUME FAILED"),RESTORE_COMPLETE:t("RESTORE COMPLETE"),ROLLBACK_IN_PROGRESS:t("ROLLBACK IN PROGRESS"),ROLLBACK_COMPLETE:t("ROLLBACK COMPLETE"),ROLLBACK_FAILED:t("ROLLBACK FAILED"),SNAPSHOT_COMPLETE:t("SNAPSHOT COMPLETE"),CHECK_COMPLETE:t("CHECK COMPLETE"),ADOPT_COMPLETE:t("ADOPT COMPLETE")};a.clusterStatus=r;var n={HEALTHY:t("HEALTHY"),UNHEALTHY:t("UNHEALTHY"),UNKNOWN:t("UNKNOWN")};a.healthStatus=n},1622:function(e,t,a){"use strict";var l=a(19),r=a(21);l(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(4181)),i=r(a(4182)),s=r(a(1623)),o={rowActions:{firstAction:n.default,moreActions:[{action:i.default}]},batchActions:[n.default],primaryActions:[s.default]};t.default=o},1623:function(e,a,l){"use strict";var r=l(33),n=l(44),i=l(32),s=l(25),o=l(27),u=l(45),d=l(46),c=l(19),f=l(21);c(a,"__esModule",{value:!0}),a.default=a.StepCreate=void 0;var p=f(l(27)),m=f(l(427)),v=f(l(65)),b=f(l(62)),g=f(l(36)),h=l(406),_=l(1193),y=f(l(1312)),k=f(l(4183)),x=f(l(4184)),C=f(l(4185)),S=f(l(4186)),I=f(l(4187));function w(e,t){var a=r(e);if(n){var l=n(e);t&&(l=i(l).call(l,(function(t){return s(e,t).enumerable}))),a.push.apply(a,l)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a,l=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=w(Object(l),!0)).call(a,(function(t){(0,g.default)(e,t,l[t])}));else if(u)d(e,u(l));else{var r;o(r=w(Object(l))).call(r,(function(t){c(e,t,s(l,t))}))}}return e}class L extends _.StepAction{constructor(){super(...arguments),(0,g.default)(this,"onSubmit",(e=>{var{additionalLabels:t,clusterTemplate:a,keypair:l,auto_healing_enabled:r,auto_scaling_enabled:n,newNetwork:i,fixed_network:s,flavor:o,masterFlavor:u}=e,d=(0,b.default)(e,["additionalLabels","clusterTemplate","keypair","auto_healing_enabled","auto_scaling_enabled","newNetwork","fixed_network","flavor","masterFlavor"]),c={};t&&(0,p.default)(t).call(t,(e=>{var t,a,l=(0,m.default)(t=e.value.key.toLowerCase()).call(t),r=(0,m.default)(a=e.value.value.toLowerCase()).call(a);c[l]=r}));var f=E({name:e.name,labels:E(E({},c),{},{auto_healing_enabled:"".concat(r),auto_scaling_enabled:"".concat(n)}),master_flavor_id:u.selectedRowKeys[0],flavor_id:o.selectedRowKeys[0],cluster_template_id:a.selectedRowKeys[0],keypair:l.selectedRowKeys[0]},d);if(!i&&s){var{selectedRowKeys:v=[]}=s;f.fixed_network=v[0]}return this.store.create(f)}))}init(){this.store=y.default}static allowed(){return v.default.resolve(!0)}get name(){return t("Create Instance")}get listUrl(){return this.getRoutePath("containerInfraClusters")}get hasConfirmStep(){return!1}get steps(){return[{title:t("Info *"),component:k.default},{title:t("Node Spec *"),component:x.default},{title:t("Networks"),component:C.default},{title:t("Management"),component:S.default},{title:t("Labels"),component:I.default}]}}a.StepCreate=L,(0,g.default)(L,"id","create-cluster"),(0,g.default)(L,"title",t("Create Cluster")),(0,g.default)(L,"path","/container-infra/clusters/create"),(0,g.default)(L,"policy","cluster:create");var N=(0,h.inject)("rootStore")((0,h.observer)(L));a.default=N},1624:function(e,t,a){"use strict";var l=a(19),r=a(21);l(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(1422)),i=r(a(4195)),s=r(a(1625)),o={rowActions:{firstAction:i.default,moreActions:[{action:s.default}]},batchActions:[i.default],primaryActions:[n.default]};t.default=o},1625:function(e,a,l){"use strict";var r=l(19),n=l(21);r(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var i=n(l(65)),s=n(l(36)),o=l(406),u=l(558),d=l(1422);class c extends d.StepCreate{get name(){return t("Update Cluster Template")}get listUrl(){return this.getRoutePath("clusterTemplate")}static allowed(){return i.default.resolve(!0)}}a.Edit=c,(0,s.default)(c,"id","update-cluster-template"),(0,s.default)(c,"title",t("Edit")),(0,s.default)(c,"policy","clustertemplate:update"),(0,s.default)(c,"path",(e=>{var{id:t}=e;return(0,u.getPath)({key:"containerInfraUpdateClusterTemplate",params:{id:t}})}));var f=(0,o.inject)("rootStore")((0,o.observer)(c));a.default=f},4178:function(e,t,a){"use strict";var l=a(19),r=a(21);l(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(413)),i=r(a(4179)),s=e=>(0,n.default)(i.default,e);t.default=s},4179:function(e,t,a){"use strict";var l=a(19),r=a(21);l(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(1212)),i=r(a(567)),s=r(a(4180)),o=r(a(4188)),u=r(a(4190)),d=r(a(4196)),c=r(a(1623)),f=r(a(1422)),p=r(a(1625)),m="/container-infra",v=[{path:m,component:n.default,routes:[{path:"".concat(m,"/clusters"),component:s.default,exact:!0},{path:"".concat(m,"/clusters/detail/:id"),component:o.default,exact:!0},{path:"".concat(m,"/clusters/create"),component:c.default,exact:!0},{path:"".concat(m,"/cluster-template"),component:u.default,exact:!0},{path:"".concat(m,"/cluster-template/detail/:id"),component:d.default,exact:!0},{path:"".concat(m,"/cluster-template/create"),component:f.default,exact:!0},{path:"".concat(m,"/cluster-template/update/:id"),component:p.default,exact:!0},{path:"*",component:i.default}]}];t.default=v},4180:function(e,a,l){"use strict";var r=l(19),n=l(21);r(a,"__esModule",{value:!0}),a.default=a.Clusters=void 0;var i=n(l(36)),s=n(l(1194)),o=l(406),u=l(1621),d=n(l(1312)),c=n(l(1622));class f extends s.default{constructor(){super(...arguments),(0,i.default)(this,"getColumns",(()=>[{title:t("ID/Name"),dataIndex:"name",routeName:this.getRouteName("containerInfraClusterDetail")},{title:t("Status"),isHideable:!0,dataIndex:"status",valueMap:u.clusterStatus},{title:t("Health Status"),isHideable:!0,dataIndex:"health_status",valueMap:u.healthStatus},{title:t("Keypair"),isHideable:!0,dataIndex:"keypair",render:e=>e?this.getLinkRender("keypairDetail",e,{id:e}):"-"}]))}init(){this.store=d.default,this.downloadStore=d.default}get name(){return t("clusters")}get policy(){return"cluster:get_all"}get actionConfigs(){return c.default}}a.Clusters=f;var p=(0,o.inject)("rootStore")((0,o.observer)(f));a.default=p},4181:function(e,a,l){"use strict";var r=l(19),n=l(21);r(a,"__esModule",{value:!0}),a.default=void 0;var i=n(l(36)),s=l(1193),o=n(l(1312));class u extends s.ConfirmAction{constructor(){super(...arguments),(0,i.default)(this,"policy","cluster:delete"),(0,i.default)(this,"allowedCheckFunc",(()=>!0)),(0,i.default)(this,"onSubmit",(e=>o.default.delete({id:e.id})))}get id(){return"delete"}get title(){return t("Delete Clusters")}get actionName(){return t("Delete Clusters")}get buttonText(){return t("Delete")}get isDanger(){return!0}}a.default=u},4182:function(e,a,l){"use strict";var r=l(19),n=l(21);r(a,"__esModule",{value:!0}),a.default=a.Resize=void 0;var i=n(l(65)),s=n(l(36)),o=l(406),u=l(1193),d=n(l(1312));class c extends u.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"policy","cluster:resize"),(0,s.default)(this,"onSubmit",(e=>{this.store.resize({id:this.item.id},e)}))}init(){this.store=d.default}static allowed(){return i.default.resolve(!0)}get name(){return t("Resize Cluster")}get defaultValue(){var{node_count:e}=this.item;return{node_count:e||1}}get formItems(){return[{name:"node_count",label:t("Node Count"),type:"input-int",min:1,required:!0}]}}a.Resize=c,(0,s.default)(c,"id","resize-cluster"),(0,s.default)(c,"title",t("Resize Cluster")),(0,s.default)(c,"buttonText",t("Resize"));var f=(0,o.inject)("rootStore")((0,o.observer)(c));a.default=f},4183:function(e,a,l){"use strict";var r=l(19),n=l(21);r(a,"__esModule",{value:!0}),a.default=a.StepInfo=void 0;var i=n(l(51)),s=n(l(1201)),o=l(406),u=n(l(1313)),d=n(l(420)),c=l(1364);class f extends s.default{init(){this.getClustertemplates(),this.getKeypairs()}get title(){return t("Info")}get name(){return t("Info")}getClustertemplates(){return(0,i.default)((function*(){yield u.default.fetchList()}))()}get clusterTemplates(){return u.default.list.data||[]}getKeypairs(){return(0,i.default)((function*(){yield d.default.fetchList()}))()}get keypairs(){return d.default.list.data||[]}get formItems(){return[{name:"name",label:t("Cluster Name"),type:"input",placeholder:t("Cluster Name"),required:!0},{name:"clusterTemplate",label:t("Cluster Template"),type:"select-table",data:this.clusterTemplates,isLoading:u.default.list.isLoading,required:!0,filterParams:[{label:t("Name"),name:"name"}],columns:(0,c.getBaseTemplateColumns)(this)},{name:"keypair",label:t("Keypair"),type:"select-table",required:!0,data:this.keypairs,isLoading:d.default.list.isLoading,tip:t("The SSH key is a way to remotely log in to the instance. The cloud platform only helps to keep the public key. Please keep your private key properly."),filterParams:[{label:t("Name"),name:"name"}],columns:[{title:t("Name"),dataIndex:"name"},{title:t("Fingerprint"),dataIndex:"fingerprint"}]}]}}a.StepInfo=f;var p=(0,o.inject)("rootStore")((0,o.observer)(f));a.default=p},4184:function(e,a,l){"use strict";var r=l(19),n=l(21);r(a,"__esModule",{value:!0}),a.default=a.StepNodeSpec=void 0;var i=n(l(65)),s=n(l(36)),o=n(l(0)),u=l(406),d=n(l(1201)),c=n(l(1275));class f extends d.default{constructor(){super(...arguments),(0,s.default)(this,"allowed",(()=>i.default.resolve())),(0,s.default)(this,"onFlavorChange",(e=>{this.updateContext({flavor:e})}))}get title(){return t("Node Spec")}get name(){return t("Node Spec")}getFlavorComponent(){return o.default.createElement(c.default,{onChange:this.onFlavorChange})}get defaultValue(){return{master_count:1,node_count:1}}get formItems(){return[{name:"master_count",label:t("Number of Master Nodes"),type:"input-int",min:1,required:!0},{name:"masterFlavor",label:t("Flavor of Master Nodes"),type:"select-table",component:this.getFlavorComponent(),required:!0},{type:"divider"},{name:"node_count",label:t("Number of Worker Nodes"),type:"input-int",min:1,required:!0},{name:"flavor",label:t("Flavor of Worker Nodes"),type:"select-table",component:this.getFlavorComponent(),required:!0}]}}a.StepNodeSpec=f;var p=(0,u.inject)("rootStore")((0,u.observer)(f));a.default=p},4185:function(e,a,l){"use strict";var r=l(19),n=l(21);r(a,"__esModule",{value:!0}),a.default=a.StepNetworks=void 0;var i=n(l(65)),s=n(l(36)),o=n(l(1201)),u=l(406);class d extends o.default{constructor(){super(...arguments),(0,s.default)(this,"allowed",(()=>i.default.resolve()))}get title(){return t("Cluster Network")}get name(){return t("Cluster Network")}get defaultValue(){return{newNetwork:!0}}get nameForStateUpdate(){return["newNetwork"]}get formItems(){var{newNetwork:e}=this.state;return[{name:"master_lb_enabled",label:t("Enable Load Balancer"),type:"check",content:t("Enabled Load Balancer for Master Nodes")},{name:"newNetwork",label:t("Enabled Network"),type:"check",content:t("Create New Network")},{name:"fixed_network",label:t("Use an Existing Network"),type:"network-select-table",hidden:e},{type:"divider"},{name:"floating_ip_enabled",label:t("Enable Floating IP"),type:"check",tip:t("Whether enable or not using the floating IP of cloud provider. If itâ€™s not set, the value of this in template will be used.")}]}}a.StepNetworks=d;var c=(0,u.inject)("rootStore")((0,u.observer)(d));a.default=c},4186:function(e,a,l){"use strict";var r=l(19),n=l(21);r(a,"__esModule",{value:!0}),a.default=a.StepManagement=void 0;var i=n(l(1201)),s=l(406);class o extends i.default{get title(){return t("Cluster Management")}get name(){return t("Cluster Management")}get defaultValue(){return{create_timeout:60}}get formItems(){return[{name:"auto_healing_enabled",label:t("Auto Healing"),type:"check",content:t("Automatically repair unhealhty nodes")},{type:"divider"},{name:"auto_scaling_enabled",label:t("Auto Scaling"),type:"check",content:t("Auto scaling feature will be enabled")},{type:"divider"},{name:"create_timeout",label:t("Timeout(Minute)"),type:"input-int",min:1,tip:t("The timeout for cluster creation in minutes.")}]}}a.StepManagement=o;var u=(0,s.inject)("rootStore")((0,s.observer)(o));a.default=u},4187:function(e,a,l){"use strict";var r=l(19),n=l(21);r(a,"__esModule",{value:!0}),a.default=a.StepLabel=void 0;var i=n(l(1201)),s=l(406),o=n(l(1214)),u=l(1364);class d extends i.default{get title(){return t("Labels")}get name(){return t("Labels")}get defaultValue(){return{additionalLabels:[{value:{key:"admission_control_list",value:u.admission_control_list}}]}}get formItems(){return[{name:"additionalLabels",label:t("Additional Labels"),type:"add-select",itemComponent:o.default,addText:t("Add Label")}]}}a.StepLabel=d;var c=(0,s.inject)("rootStore")((0,s.observer)(d));a.default=c},4188:function(e,a,l){"use strict";var r=l(19),n=l(21);r(a,"__esModule",{value:!0}),a.default=a.ClustersDetail=void 0;var i=n(l(335)),s=n(l(199)),o=l(406),u=n(l(1200)),d=l(1621),c=n(l(1312)),f=n(l(4189)),p=n(l(1622));class m extends u.default{init(){this.store=c.default}get name(){return t("Cluster Detail")}get listUrl(){return this.getRoutePath("containerInfraClusters")}get policy(){return"cluster:detail"}get actionConfigs(){return p.default}get detailInfos(){return[{title:t("Name"),dataIndex:"name"},{title:t("Created"),dataIndex:"created_at",valueRender:"toLocalTime"},{title:t("Updated"),dataIndex:"updated_at",valueRender:"toLocalTime"},{title:t("Status"),dataIndex:"status",valueMap:d.clusterStatus},{title:t("Status Reason"),dataIndex:"status_reason"},{title:t("Health Status"),dataIndex:"health_status",valueMap:d.healthStatus},{title:t("Health Status Reason"),dataIndex:"health_status_reason",render:e=>(0,s.default)(e)?"-":(0,i.default)(e)}]}get tabs(){return[{title:t("Detail"),key:"general_info",component:f.default}]}}a.ClustersDetail=m;var v=(0,o.inject)("rootStore")((0,o.observer)(m));a.default=v},4189:function(e,a,l){"use strict";var r=l(19),n=l(21);r(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var i=n(l(57)),s=n(l(1265)),o=n(l(199)),u=n(l(1202)),d=l(406),c=n(l(0));class f extends u.default{get leftCards(){return[this.baseInfoCard,this.miscellaneousCard]}get rightCards(){return[this.nodesCard,this.labelCard,this.stackCard]}get baseInfoCard(){var{template:e={}}=this.detailData,a=e?this.getLinkRender("containerInfraClusterTemplateDetail",e.name,{id:e.uuid}):"-",l=[{label:t("Name"),dataIndex:"template.name",content:a},{label:t("ID"),dataIndex:"template.uuid"},{label:t("COE"),dataIndex:"template.coe"},{label:t("Image ID"),dataIndex:"template.image_id"}];return{title:t("Cluster Template"),options:l,labelCol:6,contentCol:18}}get miscellaneousCard(){var{master_flavor_id:e,flavor_id:a,keypair:l}=this.detailData,r=e?this.getLinkRender("flavorDetail",e,{id:e}):"-",n=a?this.getLinkRender("flavorDetail",a,{id:a}):"-",i=l?this.getLinkRender("keypairDetail",l,{id:l}):"-",s=[{label:t("Discovery URL"),dataIndex:"discovery_url",render:e=>e?c.default.createElement("a",{href:e,target:"blank"},e):"-"},{label:t("Timeout(Minute)"),dataIndex:"create_timeout"},{label:t("Keypair"),content:i},{label:t("Docker Volume Size"),dataIndex:"docker_volume_size"},{label:t("Master Flavor ID"),content:r},{label:t("Node Flavor ID"),content:n},{label:t("COE Version"),dataIndex:"coe_version"},{label:t("Container Version"),dataIndex:"container_version"}];return{title:t("Miscellaneous"),options:s}}get nodesCard(){var e=[{label:t("Master Count"),dataIndex:"master_count"},{label:t("Node Count"),dataIndex:"node_count"},{label:t("API Address"),dataIndex:"api_address"},{label:t("Master Addresses"),dataIndex:"master_addresses",render:e=>e&&e.length?(0,i.default)(e).call(e,(e=>c.default.createElement("div",null,e))):"-"},{label:t("Node Addresses"),dataIndex:"node_addresses",render:e=>e&&e.length?(0,i.default)(e).call(e,(e=>c.default.createElement("div",null,e))):"-"}];return{title:t("Nodes"),labelCol:3,options:e}}get labelCard(){var e=[{label:t("Labels"),dataIndex:"labels",render:e=>{var t;return(0,o.default)(e)?"-":c.default.createElement("ul",null,(0,i.default)(t=(0,s.default)(e)).call(t,(e=>{var[t,a]=e;return c.default.createElement("li",{key:t},t," : ",a)})))}}];return{title:t("Labels"),labelCol:2,options:e}}get stackCard(){var e=[{label:t("Stack ID"),dataIndex:"stack_id"},{label:t("Stack Faults"),dataIndex:"faults",render:e=>{var t;return(0,o.default)(e)?"-":c.default.createElement("ul",null,(0,i.default)(t=(0,s.default)(e)).call(t,(e=>{var[t,a]=e;return c.default.createElement("li",{key:t},t," : ",a)})))}}];return{title:t("Stack"),labelCol:2,options:e}}}a.BaseDetail=f;var p=(0,d.inject)("rootStore")((0,d.observer)(f));a.default=p},4190:function(e,a,l){"use strict";var r=l(19),n=l(21);r(a,"__esModule",{value:!0}),a.default=a.ClusterTemplates=void 0;var i=n(l(36)),s=n(l(1194)),o=l(406),u=n(l(1313)),d=l(1364),c=n(l(1624));class f extends s.default{constructor(){super(...arguments),(0,i.default)(this,"getColumns",(()=>(0,d.getBaseTemplateColumns)(this)))}init(){this.store=u.default,this.downloadStore=u.default}get name(){return t("clustertemplates")}get policy(){return"clustertemplate:get_all"}get actionConfigs(){return c.default}}a.ClusterTemplates=f;var p=(0,o.inject)("rootStore")((0,o.observer)(f));a.default=p},4191:function(e,a,l){"use strict";var r=l(19),n=l(21);r(a,"__esModule",{value:!0}),a.default=a.StepInfo=void 0;var i=n(l(1201)),s=l(406);class o extends i.default{get title(){return t("Info")}get name(){return t("Info")}get isEdit(){return!!this.props.extra}get isStep(){return!0}get defaultValue(){var e={};if(this.isEdit){var{extra:{name:t,coe:a,public:l,hidden:r,registry_enabled:n,tls_disabled:i}={}}=this.props;e={name:t,coe:a,public:l,hidden:r,registry_enabled:n,tls_disabled:i}}return e}get formItems(){return[{name:"name",label:t("Cluster Template Name"),type:"input",placeholder:t("Cluster Template Name")},{name:"coe",label:t("Container Orchestration Engine"),type:"select",options:[{label:t("Kubernetes"),value:"kubernetes"},{label:t("Docker Swarm"),value:"swarm"},{label:t("Docker Swarm Mode"),value:"swarm-mode"},{label:t("Mesos"),value:"mesos"},{label:t("DC/OS"),value:"dcos"}],required:!0},{name:"public",label:t("Public"),type:"check"},{name:"hidden",label:t("Hidden"),type:"check"},{name:"registry_enabled",label:t("Enable Registry"),type:"check"},{name:"tls_disabled",label:t("Disable TLS"),type:"check"}]}}a.StepInfo=o;var u=(0,s.inject)("rootStore")((0,s.observer)(o));a.default=u},4192:function(e,a,l){"use strict";var r=l(19),n=l(21);r(a,"__esModule",{value:!0}),a.default=a.StepNodeSpec=void 0;var i=n(l(198)),s=n(l(32)),o=n(l(65)),u=n(l(51)),d=n(l(36)),c=n(l(0)),f=l(406),p=n(l(1201)),m=n(l(565)),v=n(l(420)),b=n(l(1275)),g=l(563);class h extends p.default{constructor(){super(...arguments),(0,d.default)(this,"onImageTabChange",(e=>{this.setState({imageTab:e})})),(0,d.default)(this,"onFlavorChange",(e=>{this.updateContext({flavor:e})}))}init(){this.getImageList()}get title(){return t("Node Spec")}get name(){return t("Node Spec")}get isStep(){return!0}get isEdit(){return!!this.props.extra}getImageList(){var e=this;return(0,u.default)((function*(){yield m.default.fetchList(),e.updateDefaultValue()}))()}get acceptedImageOs(){var e,t,{context:{coe:a=""}={}}=this.props,l=[];return"kubernetes"===a?l=["fedora","coreos"]:(0,i.default)(e=["swarm","swarm-mode"]).call(e,a)?l=["fedora"]:(0,i.default)(t=["mesos","dcos"]).call(t,a)&&(l=["ubuntu"]),l}get imageColumns(){return(0,g.getImageColumns)(this)}get systemTabs(){var e=(0,g.getImageSystemTabs)();return(0,s.default)(e).call(e,(e=>{var t;return(0,i.default)(t=this.acceptedImageOs).call(t,e.value)}))}get imageList(){var e,t,{imageTab:a}=this.state;return(0,s.default)(e=(0,s.default)(t=m.default.list.data||[]).call(t,(e=>{var t;return e.owner===this.currentProjectId&&(0,i.default)(t=this.acceptedImageOs).call(t,e.os_distro)}))).call(e,(e=>(0,g.getImageOS)(e)===a))}get volumeDrivers(){var e,{context:{coe:t=""}={}}=this.props,a=[];return"kubernetes"===t?a=[{value:"cinder",label:"Cinder"}]:(0,i.default)(e=["swarm","mesos"]).call(e,t)&&(a=[{value:"rexray",label:"Rexray"}]),a}get defaultValue(){var e={};if(this.isEdit){var{extra:{image_id:t,keypair_id:a,flavor_id:l,master_flavor_id:r,volume_driver:n,docker_storage_driver:i,docker_volume_size:s}={}}=this.props;e={volume_driver:n,docker_storage_driver:i,docker_volume_size:s},l&&(e.flavor={selectedRowKeys:[l]}),r&&(e.masterFlavor={selectedRowKeys:[r]}),t&&(e.images={selectedRowKeys:[t]}),a&&(e.keypairs={selectedRowKeys:[a]})}return e}get minVolumeSize(){var{docker_storage_driver:e}=this.state;return"devicemapper"===e?3:1}get nameForStateUpdate(){return["docker_storage_driver"]}get formItems(){return[{name:"images",label:t("Image"),type:"select-table",data:this.imageList,required:!0,isLoading:m.default.list.isLoading,filterParams:[{label:t("Name"),name:"name"}],columns:this.imageColumns,tabs:this.systemTabs,defaultTabValue:this.systemTabs[0].value,onTabChange:this.onImageTabChange,imageTabAuto:!0},{name:"keypairs",label:t("Keypair"),type:"select-table",data:this.keypairsList,isLoading:v.default.list.isLoading,tip:t("The SSH key is a way to remotely log in to the instance. The cloud platform only helps to keep the public key. Please keep your private key properly."),filterParams:[{label:t("Name"),name:"name"}],columns:[{title:t("Name"),dataIndex:"name"},{title:t("Fingerprint"),dataIndex:"fingerprint"}]},{name:"flavor",label:t("Flavor"),type:"select-table",component:c.default.createElement(b.default,{onChange:this.onFlavorChange})},{name:"masterFlavor",label:t("Master Flavor"),type:"select-table",component:c.default.createElement(b.default,{onChange:this.onFlavorChange})},{name:"volume_driver",label:t("Volume Driver"),type:"select",options:this.volumeDrivers},{name:"docker_storage_driver",label:t("Docker Storage Driver"),type:"select",options:[{label:t("Devicemapper"),value:"devicemapper"},{label:t("Overlay"),value:"overlay"},{label:t("Overlay2"),value:"overlay2"}],onChange:()=>{this.resetFormValue(["docker_volume_size"])}},{name:"docker_volume_size",label:t("Docker Volume Size (GiB)"),type:"input-int",min:this.minVolumeSize,required:3===this.minVolumeSize,placeholder:t("Spec"),validator:(e,a)=>3===this.minVolumeSize&&(!a||a<this.minVolumeSize)?o.default.reject(new Error(t("The min size is {size} GiB",{size:this.minVolumeSize}))):o.default.resolve()}]}}a.StepNodeSpec=h;var _=(0,f.inject)("rootStore")((0,f.observer)(h));a.default=_},4193:function(e,a,l){"use strict";var r=l(19),n=l(21);r(a,"__esModule",{value:!0}),a.default=a.StepNetwork=void 0;var i=n(l(32)),s=n(l(198)),o=n(l(51)),u=n(l(0)),d=n(l(1201)),c=l(406),f=l(228),p=l(414),m=l(558),v=l(564);class b extends d.default{init(){var e=this;return(0,o.default)((function*(){e.externalNetworkStore=new f.NetworkStore,e.privateNetworkStore=new f.NetworkStore,e.subnetNetworkStore=new p.SubnetStore,e.getSubnetList()}))()}get title(){return t("Network")}get name(){return t("Network")}get isStep(){return!0}get isEdit(){return!!this.props.extra}getSubnetList(){var e=this;return(0,o.default)((function*(){yield e.subnetNetworkStore.fetchList(),e.updateDefaultValue()}))()}get subnetList(){var e,{fixedNetwork:{selectedRowKeys:t=[]}={}}=this.state;return(0,i.default)(e=this.subnetNetworkStore.list.data||[]).call(e,(e=>t[0]===e.network_id))}get networkDrivers(){var e,t,{context:{coe:a=""}={}}=this.props,l=[];return"kubernetes"===a?l=[{value:"calico",label:"Calico"},{value:"flannel",label:"Flannel"}]:(0,s.default)(e=["swarm","swarm-mode"]).call(e,a)?l=[{value:"docker",label:"Docker"},{value:"flannel",label:"Flannel"}]:(0,s.default)(t=["mesos","dcos"]).call(t,a)&&(l=[{value:"docker",label:"Docker"}]),l}get nameForStateUpdate(){return["fixedNetwork"]}get defaultValue(){var e={};if(this.isEdit){var{extra:{network_driver:t,http_proxy:a,https_proxy:l,no_proxy:r,external_network_id:n,fixed_network:i,fixed_subnet:s,dns_nameserver:o,master_lb_enabled:u,floating_ip_enabled:d}={}}=this.props;if(e={network_driver:t,http_proxy:a,https_proxy:l,no_proxy:r,externalNetwork:{selectedRowKeys:[n]},fixed_network:i,fixed_subnet:s,dns_nameserver:o,master_lb_enabled:u,floating_ip_enabled:d},i&&(e.fixedNetwork={selectedRowKeys:[i]}),s){var{subnetInitValue:c}=this.state;e.fixedSubnet=c||{selectedRowKeys:[s]}}}return e}get formItems(){var{extra:{network_driver:e}={}}=this.props,{subnetInitValue:a}=this.state;return[{name:"network_driver",label:t("Network Driver"),placeholder:t("Choose a Network Driver"),type:"select",options:this.networkDrivers,disabled:e&&this.isEdit},{name:"http_proxy",label:t("HTTP Proxy"),placeholder:t("The http_proxy address to use for nodes in cluster"),type:"input"},{name:"https_proxy",label:t("HTTPS Proxy"),placeholder:t("The https_proxy address to use for nodes in cluster"),type:"input"},{name:"no_proxy",label:t("No Proxy"),placeholder:t("The no_proxy address to use for nodes in cluster"),type:"input"},{name:"externalNetwork",label:t("External Network"),type:"select-table",backendPageStore:this.externalNetworkStore,extraParams:{"router:external":!0,project_id:this.currentProjectId},required:!0,loading:this.externalNetworkStore.list.isLoading,filterParams:[{label:t("Name"),name:"name"}],columns:(0,v.networkColumns)(this)},{name:"fixedNetwork",label:t("Fixed Network"),type:"select-table",backendPageStore:this.privateNetworkStore,extraParams:{"router:external":!1,project_id:this.currentProjectId},loading:this.privateNetworkStore.list.isLoading,header:u.default.createElement("div",null,t(" You can go to the console to "),(0,m.getLinkRender)({key:"network",value:"".concat(t("create a new network/subnet")," > ")})),filterParams:[{label:t("Name"),name:"name"}],columns:(0,v.networkColumns)(this),onChange:e=>{this.setState({fixedNetwork:e,subnetInitValue:{selectedRowKeys:[],selectedRows:[]}},(()=>{this.formRef.current.resetFields(["fixedSubnet"])}))}},{name:"fixedSubnet",label:t("Fixed Subnet"),type:"select-table",data:this.subnetList,initValue:a,filterParams:[{label:t("Name"),name:"name"}],columns:[{title:t("Name"),dataIndex:"name"},{title:t("CIDR"),dataIndex:"cidr"},{title:t("Gateway IP"),dataIndex:"gateway_ip"},{title:t("IP Version"),dataIndex:"ip_version"},{title:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime"}]},{name:"dns_nameserver",label:t("DNS"),placeholder:t("The DNS nameserver to use for this cluster template"),type:"input"},{name:"master_lb_enabled",label:t("Master LB"),type:"check"},{name:"floating_ip_enabled",label:t("Floating IP"),type:"check"}]}}a.StepNetwork=b;var g=(0,c.inject)("rootStore")((0,c.observer)(b));a.default=g},4194:function(e,a,l){"use strict";var r=l(19),n=l(21);r(a,"__esModule",{value:!0}),a.default=a.StepLabel=void 0;var i=n(l(57)),s=n(l(33)),o=n(l(1201)),u=l(406),d=n(l(1214)),c=l(1364);class f extends o.default{get title(){return t("Labels")}get name(){return t("Labels")}get isStep(){return!0}get isEdit(){return!!this.props.extra}get defaultValue(){var e={additionalLabels:[{value:{key:"admission_control_list",value:c.admission_control_list}}]};if(this.isEdit){var t,{extra:{labels:a}}=this.props;e.additionalLabels=(0,i.default)(t=(0,s.default)(a||{})).call(t,(e=>({value:{key:e,value:a[e]}})))}return e}get formItems(){return[{name:"additionalLabels",label:t("Additional Labels"),type:"add-select",itemComponent:d.default,addText:t("Add Label")}]}}a.StepLabel=f;var p=(0,u.inject)("rootStore")((0,u.observer)(f));a.default=p},4195:function(e,a,l){"use strict";var r=l(19),n=l(21);r(a,"__esModule",{value:!0}),a.default=void 0;var i=n(l(36)),s=l(1193),o=n(l(1313));class u extends s.ConfirmAction{constructor(){super(...arguments),(0,i.default)(this,"policy","clustertemplate:delete"),(0,i.default)(this,"allowedCheckFunc",(()=>!0)),(0,i.default)(this,"onSubmit",(e=>o.default.delete({id:e.uuid})))}get id(){return"delete"}get title(){return t("Delete Template")}get actionName(){return t("Delete Clusters Templates")}get isDanger(){return!0}get buttonText(){return t("Delete")}}a.default=u},4196:function(e,a,l){"use strict";var r=l(19),n=l(21);r(a,"__esModule",{value:!0}),a.default=a.ClusterTemplateDetail=void 0;var i=l(406),s=n(l(1200)),o=n(l(1313)),u=n(l(4197)),d=n(l(1624));class c extends s.default{init(){this.store=o.default}get name(){return t("Cluster Template Detail")}get listUrl(){return this.getRoutePath("clusterTemplate")}get policy(){return"clustertemplate:detail"}get actionConfigs(){return d.default}get detailInfos(){return[{title:t("Name"),dataIndex:"name"},{title:t("Created"),dataIndex:"created_at",valueRender:"toLocalTime"},{title:t("Updated"),dataIndex:"updated_at",valueRender:"toLocalTime"}]}get tabs(){return[{title:t("Detail"),key:"general_info",component:u.default}]}}a.ClusterTemplateDetail=c;var f=(0,i.inject)("rootStore")((0,i.observer)(c));a.default=f},4197:function(e,a,l){"use strict";var r=l(19),n=l(21);r(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var i=n(l(57)),s=n(l(1265)),o=n(l(199)),u=n(l(0)),d=n(l(1202)),c=l(406);class f extends d.default{get leftCards(){return[this.baseInfoCard,this.networkCard]}get leftCardsStyle(){return{flex:1}}get rightCards(){return[this.specCard,this.labelCard]}get baseInfoCard(){var e=[{label:t("COE"),dataIndex:"coe"},{label:t("Cluster Distro"),dataIndex:"cluster_distro"},{label:t("Server Type"),dataIndex:"server_type"},{label:t("Public"),dataIndex:"public",valueRender:"yesNo"},{label:t("Registry Enabled"),dataIndex:"registry_enabled",valueRender:"yesNo"},{label:t("TLS Disabled"),dataIndex:"tls_disabled",valueRender:"yesNo"}];return{title:t("Cluster Type"),options:e}}get networkCard(){var{external_network_id:e,fixed_network:a}=this.detailData||{},l=e?this.getLinkRender("networkDetail",e,{id:e}):"-",r=a?this.getLinkRender("networkDetail",a,{id:a}):"-",n=[{label:t("Network Driver"),dataIndex:"network_driver"},{label:t("HTTP Proxy"),dataIndex:"http_proxy"},{label:t("HTTPS Proxy"),dataIndex:"https_proxy"},{label:t("No Proxy"),dataIndex:"no_proxy"},{label:t("External Network ID"),content:l},{label:t("Fixed Network ID"),content:r},{label:t("Fixed Subnet ID"),dataIndex:"fixed_subnet"},{label:t("DNS"),dataIndex:"dns_nameserver"},{label:t("Master LB Enabled"),dataIndex:"master_lb_enabled",valueRender:"yesNo"},{label:t("Floating IP Enabled"),dataIndex:"floating_ip_enabled",valueRender:"yesNo"}];return{title:t("Network"),options:n}}get specCard(){var{image_id:e,keypair_id:a,flavor_id:l,master_flavor_id:r}=this.detailData,n=e?this.getLinkRender("imageDetail",e,{id:e}):"-",i=a?this.getLinkRender("keypairDetail",a,{id:a}):"-",s=l?this.getLinkRender("flavorDetail",l,{id:l}):"-",o=r?this.getLinkRender("flavorDetail",r,{id:r}):"-",u=[{label:t("Image ID"),content:n},{label:t("Keypair"),content:i},{label:t("Flavor ID"),content:s},{label:t("Master Flavor ID"),content:o},{label:t("Volume Driver"),dataIndex:"volume_driver"},{label:t("Docker Storage Driver"),dataIndex:"docker_storage_driver"},{label:t("Docker Volume Size"),dataIndex:"docker_volume_size"},{label:t("Insecure Registry"),dataIndex:"insecure_registry"}];return{title:t("Node Spec"),options:u}}get labelCard(){var e=[{label:t("labels"),dataIndex:"labels",render:e=>{var t;return(0,o.default)(e)?"-":(0,i.default)(t=(0,s.default)(e)).call(t,(e=>{var[t,a]=e;return u.default.createElement("div",{key:t},u.default.createElement("ul",null,u.default.createElement("li",null,t," : ",a)))}))}}];return{title:t("Labels"),labelCol:2,options:e}}}a.BaseDetail=f;var p=(0,c.inject)("rootStore")((0,c.observer)(f));a.default=p}}]);