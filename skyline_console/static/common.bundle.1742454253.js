(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1242:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.default=void 0;var p=f(r(588)),h=f(r(77)),m=f(r(86)),g=f(r(32)),v=f(r(1387)),y=f(r(91)),b=f(r(29)),_=f(r(232)),S=f(r(203)),x=f(r(28)),w=f(r(164)),I=f(r(54)),C=f(r(1277)),k=f(r(3510));r(3516);var D=f(r(1586));r(1276);var P=f(r(421));r(3521);var T=f(r(3524));r(585);var A=f(r(424));r(231);var M=f(r(341)),N=f(r(58)),E=f(r(343)),R=f(r(49)),j=f(r(35)),F=f(r(169)),L=f(r(570)),O=f(r(92)),z=f(r(205)),B=f(r(134)),V=f(r(119)),U=f(r(352)),Q=f(r(177)),q=f(r(0)),G=r(349),K=f(r(4)),H=r(36),W=(r(161),f(r(1587))),Y=r(163),J=f(r(1270)),Z=r(580),X=f(r(1251)),$=f(r(1351)),ee=r(567),te=f(r(3543));function ae(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function re(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=ae(Object(r),!0)).call(a,(function(t){(0,j.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=ae(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}class ne extends q.default.Component{constructor(e){var a,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),a=this,(0,j.default)(this,"setRefreshDataTimerTransition",(()=>{this.stopRefreshAuto(),this.dataTimerTransition||(this.dataTimerTransition=(0,p.default)((()=>{this.handleRefresh(),this.dataTimerTransition=null}),1e3*this.dataDurationTransition))})),(0,j.default)(this,"setRefreshDataTimerAuto",(()=>{if(this.stopRefreshTransition(),this.ableAutoFresh){var{autoRefresh:e}=this.state;e&&!this.dataTimerAuto&&(this.dataTimerAuto=(0,p.default)((()=>{this.autoRefreshCount+=1,this.handleRefresh(),this.dataTimerAuto=null}),1e3*this.dataDurationAuto))}})),(0,j.default)(this,"onStopRefreshAuto",(()=>{this.setState({autoRefresh:!1}),this.stopRefreshAuto()})),(0,j.default)(this,"onClickAction",(()=>{this.inAction=!0,this.autoRefreshCount=0})),(0,j.default)(this,"onFinishAction",(()=>{this.inAction=!1,this.handleSelectRowKeys([]),this.handleRefresh(!0)})),(0,j.default)(this,"onCancelAction",(()=>{this.inAction=!1,this.getDataSource()})),(0,j.default)(this,"handleInputFocus",(e=>{this.inAction=e,e||this.setRefreshDataTimerAuto()})),(0,j.default)(this,"fetchListWithTry",function(){var e=(0,R.default)((function*(e){try{e&&(yield e())}catch(e){var{message:r="",data:n,status:i}=(e||{}).response||e||{};if(401===i){var l=t("The session has expired, please log in again.");J.default.errorWithDetail(null,l)}else if(500===i){var o,s=t("System is error, please try again later."),u=(0,h.default)(o="".concat(t("Get {name} error.",{name:a.name.toLowerCase()})," ")).call(o,s);J.default.errorWithDetail(null,u)}else{var d={message:n||r||e||"",status:i};J.default.errorWithDetail(d,t("Get {name} error.",{name:a.name.toLowerCase()}))}a.list.isLoading=!1,a.list.silent=!1}}));return function(t){return e.apply(this,arguments)}}()),(0,j.default)(this,"updateFetchParamsByPage",(e=>e)),(0,j.default)(this,"updateFetchParams",(e=>e)),(0,j.default)(this,"fetchDataByPage",function(){var e=(0,R.default)((function*(e){yield a.store.fetchListByPage(e),a.list.silent=!1}));return function(t){return e.apply(this,arguments)}}()),(0,j.default)(this,"fetchData",function(){var e=(0,R.default)((function*(e){yield a.store.fetchList(e),a.list.silent=!1}));return function(t){return e.apply(this,arguments)}}()),(0,j.default)(this,"fetchDownloadData",function(){var e=(0,R.default)((function*(e){return a.isFilterByBackend?yield a.downloadStore.fetchListByPage(a.updateFetchParamsByPage(e)):yield a.downloadStore.fetchList(a.updateFetchParams(e))}));return function(t){return e.apply(this,arguments)}}()),(0,j.default)(this,"getDownloadData",(0,R.default)((function*(){var e=(0,E.default)({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{filters:t}=a.state,r=re(re(re(re({},a.props.match.params),e),t),{},{sortKey:e.sortKey||a.isSortByBackend&&a.defaultSortKey||"",sortOrder:e.sortOrder||a.isSortByBackend&&a.defaultSortOrder||""});!a.isAdminPage&&a.fetchDataByCurrentProject?r.project_id=a.currentProjectId:a.isAdminPage&&a.fetchDataByAllProjects&&a.allProjectsKey&&(r[a.allProjectsKey]=!0);var n=yield a.fetchDownloadData(r);return n}))),(0,j.default)(this,"startRefreshAuto",(()=>{this.autoRefreshCount=0,this.setState({autoRefresh:!0}),this.handleRefresh()})),(0,j.default)(this,"stopRefreshAuto",(()=>{clearTimeout(this.dataTimerAuto),this.dataTimerAuto=null})),(0,j.default)(this,"stopRefreshTransition",(()=>{clearTimeout(this.dataTimerTransition),this.dataTimerTransition=null})),(0,j.default)(this,"getFilteredValue",(e=>this.list.filters[e])),(0,j.default)(this,"checkIsProjectFilter",(e=>e.name===this.projectFilterKey)),(0,j.default)(this,"getSearchFilters",(()=>{var e=this.searchFilters;return this.isAdminPage&&this.adminPageHasProjectFilter?(0,m.default)(e).call(e,(e=>this.checkIsProjectFilter(e)))?e:[...e,{label:t("Project ID"),name:this.projectFilterKey}]:e})),(0,j.default)(this,"filterDataByTime",(e=>{if(!this.filterTimeKey)return!0;var{timeFilter:{value:t=0,start:a,end:r}={}}=this.state;if(0===t)return!0;var n=(0,V.default)(e,this.filterTimeKey,0);return 1!==t?(0,Z.checkTimeIn)(n,(new Date).getTime()-t,null):(0,Z.checkTimeIn)(n,a,r)})),(0,j.default)(this,"checkFilterInclude",(e=>{var t,a=(0,m.default)(t=this.searchFilters).call(t,(t=>t.name===e));return(0,L.default)(a,"include")?a.include:!(0,L.default)(a,"options")})),(0,j.default)(this,"filterData",(e=>{var t;if(!this.filterDataByTime(e))return!1;var{filters:a}=this.state;if(1===(0,g.default)(a).length&&a.keywords){var r,{keywords:n}=a;return!!(0,m.default)(r=(0,v.default)(e)).call(r,(e=>((0,B.default)(e)||(0,O.default)(e))&&(0,y.default)(e).call(e,n)>=0))}return!(0,m.default)(t=(0,g.default)(a)).call(t,(t=>{var r,n=(0,V.default)(e,t),i=a[t],{filterFunc:l}=(0,m.default)(r=this.getSearchFilters()).call(r,(e=>e.name===t));if(l)return!l(n,i,e);var o,s=this.checkFilterInclude(t);return(0,B.default)(n)&&(0,B.default)(i)?s?(0,y.default)(o=n.toLowerCase()).call(o,i.toLowerCase())<0:n.toLowerCase()!==i.toLowerCase():!(0,z.default)(n,i)}))})),(0,j.default)(this,"getDataSource",(()=>{var e,{data:t,filters:a={}}=this.list,{timeFilter:r={}}=this.state,{id:n,tab:i}=a,l=(0,N.default)(a,["id","tab"]),o=[];this.isFilterByBackend?o=(0,H.toJS)(t):(o=(0,b.default)(e=(0,H.toJS)(t)||[]).call(e,(e=>this.filterData(e,(0,H.toJS)(l),(0,H.toJS)(r)))),this.updateList({total:o.length}));return(0,_.default)(o).call(o,(e=>this.itemInTransitionFunction(e)))?this.setRefreshDataTimerTransition():this.setRefreshDataTimerAuto(),this.updateHintsByData(o),this.setTableHeight(),o})),(0,j.default)(this,"getFilters",(()=>{var e,{filters:t}=this.list;return re(re({},(0,G.parse)((0,S.default)(e=this.location.search).call(e,1))),(0,H.toJS)(t))})),(0,j.default)(this,"handleMoreMenuClick",(e=>(t,a)=>{var r,n=(0,m.default)(r=this.enabledItemActions).call(r,(e=>e.key===a));n&&n.onClick&&n.onClick(e)})),(0,j.default)(this,"refreshDetailData",(()=>{var{refreshDetail:e}=this.props;e&&e(this.refreshDetailDataWithSilence)})),(0,j.default)(this,"handleRefresh",(e=>{var{inAction:t,inSelect:a}=this;if((!this.inDetailPage||!this.inDetailAction)&&!(t||a&&!e)&&(e||!(this.autoRefreshCount>=this.autoRefreshCountMax))){e&&(this.autoRefreshCount=0);var{page:r,limit:n,sortKey:i,sortOrder:l,filters:o}=this.list,s=re(re({page:r,limit:n,sortKey:i,sortOrder:l},(0,H.toJS)(o)),{},{silent:!e});this.handleFetch(s,!0),this.inDetailPage&&(e||this.forceRefreshTopDetailWhenListRefresh)&&this.shouldRefreshDetail&&this.refreshDetailData()}})),(0,j.default)(this,"updateList",(e=>{var t;this.list&&(this.list.update?this.list.update(e):(0,x.default)(t=(0,g.default)(e)).call(t,(t=>{this.list[t]=e[t]})))})),(0,j.default)(this,"getPureParamsByFrontend",(e=>{var t,{page:a,limit:r,sortKey:n,sortOrder:i}=e,l=(0,N.default)(e,["page","limit","sortKey","sortOrder"]),o={page:a,limit:r};if(this.isSortByBackend&&(o.sortKey=n,o.sortOrder=i),!this.searchFilters.length){var{keywords:s}=l,u=(0,N.default)(l,["keywords"]);return re(re({},o),u)}return(0,x.default)(t=(0,g.default)(l)).call(t,(e=>{var t;(0,m.default)(t=this.searchFilters).call(t,(t=>t.name===e))||(o[e]=l[e])})),o})),(0,j.default)(this,"handleFetch",((e,t)=>{if(!t||this.isFilterByBackend){var{sortKey:a,limit:r,page:n,current:i,sortOrder:l}=e;(0,N.default)(e,["sortKey","limit","page","current","sortOrder"]);n===this.list.page&&r===this.list.limit||(this.autoRefreshCount=0),this.isFilterByBackend?this.getDataWithPolicy(re(re({},e),this.list.filters||{})):this.updateList({page:n,limit:r,sortKey:a,sortOrder:l})}else this.getDataWithPolicy(this.getPureParamsByFrontend(e))})),(0,j.default)(this,"handleFetchBySort",(e=>{if(this.isSortByBackend){var t=re(re({},e),{},{page:1});this.handleFetch(t,!0)}else{var{sortKey:a,limit:r,page:n,sortOrder:i}=e;this.updateList({page:n,limit:r,sortKey:a,sortOrder:i})}})),(0,j.default)(this,"handleFilterChange",((e,t)=>{var{page:a,limit:r,sortKey:n,sortOrder:i}=e,l=(0,N.default)(e,["page","limit","sortKey","sortOrder"]);this.isFilterByBackend?(this.list.filters=e,this.setState({filters:l,timeFilter:t},(()=>{this.handleFetch(e,!0)}))):(this.updateList({page:a,sortKey:n,sortOrder:i,filters:l}),this.setState({filters:l,timeFilter:t}))})),(0,j.default)(this,"handleSelectRowKeys",(e=>{this.store.setSelectRowKeys("list",e),e&&0!==e.length?(this.inSelect=!0,this.autoRefreshCount=0):(this.inSelect=!1,this.getDataSource())})),(0,j.default)(this,"onCloseSuccessHint",(()=>{})),(0,j.default)(this,"getTablePageSize",(e=>{var t=[10,20,50,100],a=this.pageSizeOptions||t;return(0,w.default)(a).call(a,e)?e:a[0]||t[0]})),(0,j.default)(this,"renderMore",((e,t)=>{if((0,Q.default)(this.enabledItemActions))return null;var a=this.renderMoreMenu(t);return null===a?null:q.default.createElement(A.default,{content:a,trigger:"click",placement:"bottomRight"},q.default.createElement(M.default,{icon:"more",type:"flat"}))})),(0,j.default)(this,"renderMoreMenu",(e=>{var t,a=(0,I.default)(t=this.enabledItemActions).call(t,(t=>((0,U.default)(t.show)?t.show(e):t.show||!0)?q.default.createElement(P.default.MenuItem,{key:t.key},q.default.createElement(T.default,{name:t.icon})," ",q.default.createElement("span",null,t.text)):null));return(0,C.default)(a).call(a,(e=>null===e))?null:q.default.createElement(P.default,{onClick:this.handleMoreMenuClick(e)},a)})),this.options=n,this.state={filters:{},timeFilter:{},autoRefresh:!0,newHints:!1,tableHeight:this.getTableHeight()},this.dataTimerTransition=null,this.dataTimerAuto=null,this.dataDurationTransition=10,this.dataDurationAuto=30,this.autoRefreshTotalTime=600,this.autoRefreshCount=0,this.autoRefreshCountMax=Math.floor(this.autoRefreshTotalTime/this.dataDurationAuto),this.infoMessage="",this.successMessage="",this.errorMessage="",this.warnMessage="",this.inAction=!1,this.inSelect=!1,this.setTableHeight=(0,k.default)(r=this.setTableHeight).call(r,this),this.debounceSetTableHeight=this.debounceSetTableHeight.call(this),this.init()}componentDidMount(){var e=this.initFilter;if(!this.filterTimeKey){var{limit:t,page:a}=this.store.list;this.list.filters={},this.handleFetch(re(re({},e),{},{limit:t,page:a}),!0)}window.addEventListener("resize",this.debounceSetTableHeight)}componentDidUpdate(e){if(this.inDetailPage){var{detail:t}=e,{detail:a}=this.props;(0,Q.default)(t)||(0,Q.default)(a)||(0,z.default)(t,a)||this.handleRefresh(!0)}}componentWillUnmount(){this.unsubscribe&&this.unsubscribe(),this.disposer&&this.disposer(),this.unMountActions&&this.unMountActions(),this.stopRefreshTransition(),this.stopRefreshAuto(),this.clearListUnmount&&this.store.clearData&&this.store.clearData("listUnmount"),window.removeEventListener("resize",this.debounceSetTableHeight)}get policy(){return""}get aliasPolicy(){return""}get name(){return""}get title(){return"".concat(this.name,"s")}get className(){return""}get path(){var{location:{pathname:e=""}={}}=this.props;return e||""}get inDetailPage(){var{detail:e}=this.props;return!!e}get inDetailAction(){var{inAction:e}=this.props;return!!e}get detailName(){if(!this.inDetailPage)return"";var{detailName:e}=this.props;return e}get shouldRefreshDetail(){return!0}get location(){return this.props.location}get isAdminPage(){var{pathname:e}=this.location;return(0,Y.isAdminPage)(e)}get hasAdminRole(){return this.props.rootStore.hasAdminRole}getRouteName(e){return this.isAdminPage?"".concat(e,"Admin"):e}getRoutePath(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getRouteName(e);return(0,ee.getPath)({key:r,params:t,query:a})}getLinkRender(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getRouteName(e);return(0,ee.getLinkRender)({key:n,params:a,query:r,value:t})}get prefix(){return this.props.match.url}get params(){return this.props.match.params||{}}get routing(){return this.props.rootStore.routing}get list(){return this.store.list}get isLoading(){return this.list.isLoading||this.store.isSubmitting}get tips(){return[]}get rowKey(){return"id"}get hasTab(){return!1}get hasSubTab(){return!1}get hideCustom(){return!1}get hideSearch(){return!1}get hideRefresh(){return!1}get hideDownload(){return!1}get checkEndpoint(){return!1}get endpoint(){return""}get endpointError(){return this.checkEndpoint&&!this.endpoint}get initFilter(){var e;return(0,G.parse)((0,S.default)(e=this.location.search).call(e,1))||{}}get hintHeight(){var e=0;return this.infoMessage&&(e+=50),this.warnMessage&&(e+=50),this.errorMessage&&(e+=50),this.successMessage&&(e+=50),e}get tableTopHeight(){var e=document.getElementById("sl-table-header-search"),t=document.getElementById("search-items-menu"),a=e?e.scrollHeight:50,r=(null==t?void 0:t.scrollHeight)||0,n=90+(r?a-r+10:a)+16;return this.hasSubTab?n+88+20:this.hasTab?n+44:n}getTableHeight(){var e=window.innerHeight;if(this.inDetailPage)return-1;var t=document.getElementsByClassName("ant-table-header")[0],a=t?t.offsetHeight:51,r=e-this.tableTopHeight-this.hintHeight-50-a;return r>0?r:1}get tableWidth(){return 800}get isFilterByBackend(){return!1}get isSortByBackend(){return!1}get ableSkipPageByBackend(){return!1}get enabledItemActions(){var e;return(0,b.default)(e=this.itemActions).call(e,(e=>!e.action))}get adminPageHasProjectFilter(){return!1}get transitionStatusList(){return[]}get fetchDataByAllProjects(){return!0}get currentUser(){var{user:e}=this.props.rootStore||{};return e||{}}get currentProjectId(){return this.props.rootStore.projectId}get fetchDataByCurrentProject(){return!1}get defaultSortKey(){return""}get defaultSortOrder(){return"descend"}get clearListUnmount(){return!1}get itemInTransitionFunction(){return e=>{var t,{status:a}=e;return(0,y.default)(t=this.transitionStatusList).call(t,a)>=0}}get ableAutoFresh(){return!0}get actionConfigs(){return{batchActions:[],primaryActions:[],rowActions:[]}}get primaryActions(){return this.actionConfigs.primaryActions}get batchActions(){return this.actionConfigs.batchActions}get itemActions(){return this.actionConfigs.rowActions}get searchFilters(){return[]}get expandable(){}get filterTimeKey(){}get projectFilterKey(){return"project_id"}get pageSizeOptions(){return[10,20,50,100]}get hideTotal(){return!1}get primaryActionsExtra(){return null}get allProjectsKey(){return"all_projects"}get forceRefreshTopDetailWhenListRefresh(){return!1}get middleComponentInTableHeader(){return null}get refreshDetailDataWithSilence(){return!0}getEmptyProps(){return{}}getEnabledTableProps(){var e=this.getTableProps();return(0,Q.default)(this.batchActions)&&(e.onSelectRowKeys=null),e}getCheckboxProps(e){return{disabled:!1,name:e.name}}getBaseTableProps(){var{keyword:e,selectedRowKeys:a,total:r,page:n,limit:i,silent:l,sortKey:o,sortOrder:s,timerFilter:u}=this.list,d={total:r,current:Number(n),pageSize:this.getTablePageSize(i),showTotal:e=>t("Total {total} items",{total:e}),showSizeChanger:!0};this.pageSizeOptions&&(d.pageSizeOptions=this.pageSizeOptions);var{autoRefresh:c,tableHeight:f}=this.state;return re({resourceName:this.name,detailName:this.detailName,data:this.getDataSource(),columns:this.getColumns(),filters:this.getFilters(),timerFilter:u,searchFilters:this.getSearchFilters(),keyword:e,pagination:d,primaryActions:this.primaryActions,batchActions:this.batchActions,itemActions:this.itemActions,getCheckboxProps:this.getCheckboxProps,isLoading:this.isLoading,silentLoading:l,rowKey:this.rowKey,selectedRowKeys:(0,H.toJS)(a),scrollY:f,sortKey:o,sortOrder:s,defaultSortKey:this.defaultSortKey,defaultSortOrder:this.defaultSortOrder,getDownloadData:this.getDownloadData,containerProps:this.props,expandable:this.expandable,showTimeFilter:!!this.filterTimeKey,filterTimeDefaultValue:this.filterTimeDefaultValue,isPageByBack:this.isFilterByBackend,isSortByBack:this.isSortByBackend,ableSkipPageByBackend:this.ableSkipPageByBackend,autoRefresh:c,startRefreshAuto:this.startRefreshAuto,stopRefreshAuto:this.onStopRefreshAuto,onClickAction:this.onClickAction,onFinishAction:this.onFinishAction,onCancelAction:this.onCancelAction,dataDurationAuto:this.dataDurationAuto,handleInputFocus:this.handleInputFocus,hideTotal:this.hideTotal,hideDownload:this.hideDownload,primaryActionsExtra:this.primaryActionsExtra,isAdminPage:this.isAdminPage,initFilter:this.initFilter,middleComponentInHeader:this.middleComponentInTableHeader},this.getEnabledTableProps())}getTableProps(){return{onRefresh:this.handleRefresh,onFetch:this.handleFetch,onFetchBySort:this.handleFetchBySort,onSelectRowKeys:this.handleSelectRowKeys,onFilterChange:this.handleFilterChange,hideCustom:this.hideCustom,hideSearch:this.hideSearch,hideRefresh:this.hideRefresh,hideAutoRefresh:!this.ableAutoFresh}}getData(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{silent:t}=e,a=(0,N.default)(e,["silent"]);t&&(this.list.silent=!0);var r=re(re(re({},this.props.match.params),a),{},{sortKey:a.sortKey||this.isSortByBackend&&this.defaultSortKey||"",sortOrder:a.sortOrder||this.isSortByBackend&&this.defaultSortOrder||""});if(!this.isAdminPage&&this.fetchDataByCurrentProject?r.project_id=this.currentProjectId:this.isAdminPage&&this.fetchDataByAllProjects&&this.allProjectsKey&&(r[this.allProjectsKey]=!0),this.isFilterByBackend){var{limit:n}=r;n&&(r.limit=this.getTablePageSize(n)),this.fetchListWithTry((()=>this.fetchDataByPage(this.updateFetchParamsByPage(r))))}else this.fetchListWithTry((()=>this.fetchData(this.updateFetchParams(r))))}getDataWithPolicy(e){if(this.currentUser&&!(0,Q.default)(this.currentUser)&&!this.endpointError){if(!(0,X.default)({policy:this.policy,aliasPolicy:this.aliasPolicy,actionName:this.name})){var a={message:t("You don't have access to get {name}.",{name:this.name.toLowerCase()}),status:401};return J.default.errorWithDetail(a,t("Unable to get {name}.",{name:this.name.toLowerCase()})),this.list.isLoading=!1,void(this.list.silent=!1)}this.getData(e)}}setTableHeight(){if(!this.inAction){var e=this.getTableHeight(),{tableHeight:t}=this.state;e!==t&&this.setState({tableHeight:e})}}getColumns(){return[]}debounceSetTableHeight(){return(0,F.default)(this.setTableHeight,1e3)}updateHintsByOthers(){this.updateHints&&(this.updateHints(),(0,p.default)(this.setTableHeight,0),this.setState({newHints:!0}))}updateHintsByData(e){}init(){this.store={list:{}},this.downloadStore={}}renderTable(){try{var e=this.getBaseTableProps();return q.default.createElement(W.default,e)}catch(e){var t=this.getRoutePath("overview");return q.default.createElement($.default,{title:this.name,link:t,codeError:!0})}}renderInfoHint(){return this.infoMessage?q.default.createElement(D.default,{message:this.infoMessage,type:"info",showIcon:!0,className:te.default.hint}):null}renderSuccessHint(){return this.successMessage?q.default.createElement(D.default,{message:this.successMessage,type:"success",showIcon:!0,closable:!0,className:te.default.hint,onClose:this.onCloseSuccessHint}):null}renderWarnHint(){return this.warnMessage?q.default.createElement(D.default,{message:this.warnMessage,type:"warning",showIcon:!0,className:te.default.hint}):null}renderErrorHint(){return this.errorMessage?q.default.createElement(D.default,{message:this.errorMessage,type:"error",showIcon:!0,closable:!0,className:te.default.hint}):null}renderHint(){var{newHints:e}=this.state;return e||this.infoMessage||this.warnMessage||this.successMessage||this.errorMessage?q.default.createElement("div",{className:(0,K.default)(te.default.hints,"list-hints")},this.renderInfoHint(),this.renderSuccessHint(),this.renderWarnHint(),this.renderErrorHint()):null}renderHeader(){return null}render(){if(this.endpointError){var e=this.getRoutePath("overview");return q.default.createElement($.default,{title:this.name,link:e,endpointError:!0})}var t=this.renderTable();return q.default.createElement("div",{className:(0,K.default)(te.default.wrapper,"list-container",this.className)},this.renderHeader(),this.renderHint(),t)}}a.default=ne},1243:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.default=void 0;var p=f(r(164)),h=f(r(203)),m=f(r(86)),g=f(r(54)),v=f(r(29)),y=f(r(91)),b=f(r(77));r(1315);var _=f(r(1316)),S=f(r(343)),x=f(r(1313));r(231);var w=f(r(341));r(1300);var I=f(r(1301)),C=f(r(1441)),k=f(r(611));r(594);var D=f(r(595)),P=f(r(35)),T=f(r(119)),A=f(r(177)),M=f(r(0)),N=r(349),E=f(r(4)),R=r(163),j=(r(161),r(564),f(r(1351))),F=f(r(3608)),L=f(r(1270)),O=r(36),z=f(r(1251)),B=f(r(1302)),V=r(342),U=r(567),Q=r(418),q=f(r(3611));function G(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function K(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=G(Object(r),!0)).call(a,(function(t){(0,P.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=G(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}class H extends M.default.Component{constructor(e){var a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),a=this,(0,P.default)(this,"onCollapsedCallback",(()=>{})),(0,P.default)(this,"handleChangeTab",(e=>{this.handleFetch({tab:e},!0)})),(0,P.default)(this,"handleFetch",((e,t)=>{this.routing.query(e,t)})),(0,P.default)(this,"handleDetailInfo",(()=>{var{collapsed:e}=this.state;this.setState({collapsed:!e},(()=>{this.onCollapsedCallback(!e)}))})),(0,P.default)(this,"getDesc",((e,t)=>{var a,{dataIndex:r,render:n,valueRender:i,valueMap:l,unit:o}=t,s=(0,T.default)(e,r);if(n)return n(s,e);if(i){var u=R.renderFilterMap[i];return u&&u(s)}return l?(0,Q.getValueMapRender)(t)(s):o?(0,Q.getUnitRender)(t)(s):(0,p.default)(a=[void 0,null,""]).call(a,s)?"-":s})),(0,P.default)(this,"fetchData",((e,t)=>{if(this.store.fetchDetail){var a=K(K(K({},this.params),e||{}),{},{all_projects:this.isAdminPage,silent:t}),r=this.updateFetchParams(a);this.store.fetchDetail(r).catch(this.catch)}})),(0,P.default)(this,"getRouteProps",(()=>({}))),(0,P.default)(this,"fetchDataWithPolicy",((e,a)=>{if((0,z.default)({policy:this.policy,aliasPolicy:this.aliasPolicy,actionName:this.name}))this.fetchData(a,e);else{var r={message:t("You don't have access to get {name}.",{name:this.name.toLowerCase()}),status:401};L.default.errorWithDetail(r,t("Unable to get {name} detail.",{name:this.name.toLowerCase()}))}})),(0,P.default)(this,"refreshDetailByTab",(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];a.fetchDataWithPolicy(e)})),(0,P.default)(this,"refreshDetailByAction",(e=>{this.fetchDataWithPolicy(e)})),(0,P.default)(this,"handleRefresh",(()=>{this.fetchDataWithPolicy(!1)})),(0,P.default)(this,"catch",(e=>{var{data:a,status:r}=(e||{}).response||e||{};if(401===r){var n=t("The session has expired, please log in again.");L.default.errorWithDetail(null,n)}else if(404===r)this.setState({notFound:!0}),L.default.warn(t("{name} {id} could not be found.",{name:this.name.toLowerCase(),id:this.id}));else{var i={message:a,status:r};L.default.errorWithDetail(i,t("Get {name} detail error.",{name:this.name.toLowerCase()}))}})),(0,P.default)(this,"goBack",(()=>{this.routing.push(this.listUrl)})),(0,P.default)(this,"updateFetchParams",(e=>e)),(0,P.default)(this,"onFinishAction",((e,t,a)=>{if(e&&a)this.goBack();else{var r,n=!(0,p.default)(r=this.forceLoadingTabs).call(r,this.tab.key);this.refreshDetailByAction(n)}this.setState({inAction:!1})})),(0,P.default)(this,"onClickAction",(()=>{this.setState({inAction:!0})})),(0,P.default)(this,"onCancelAction",(()=>{this.setState({inAction:!1})})),this.options=r,this.state={notFound:!1,collapsed:!1},this.init()}componentDidMount(){this.fetchDataWithPolicy()}componentDidUpdate(e){var{id:t}=e.match.params;this.id!==t&&this.handleRefresh(!0)}get params(){return this.props.match.params||{}}get id(){return this.props.match.params.id}get policy(){return""}get aliasPolicy(){return""}get name(){return""}get routing(){return this.props.rootStore.routing}get path(){var{location:{pathname:e=""}={}}=this.props;return e||""}get isAdminPage(){var{pathname:e}=this.props.location;return(0,R.isAdminPage)(e)}getRouteName(e){return this.isAdminPage?"".concat(e,"Admin"):e}getRoutePath(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getRouteName(e);return(0,U.getPath)({key:r,params:t,query:a})}getLinkRender(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getRouteName(e);return(0,U.getLinkRender)({key:n,params:a,query:r,value:t})}get tabs(){return[]}get tab(){var e,t;if(0===this.tabs.length)return null;var a=(0,N.parse)((0,h.default)(e=this.routing.location.search).call(e,1)),{tab:r}=a;return(0,m.default)(t=this.tabs).call(t,(e=>e.key===r))||this.tabs[0]}get actionConfigs(){return V.emptyActionConfig}get rowActions(){return[]}get detailTabs(){return[{title:"tab1",key:"tab1",component:null},{title:"tab2",key:"tab2",component:null}]}get titleLabel(){return"ID:"}get titleValue(){return this.params.id}get detailTitle(){var{collapsed:e}=this.state,{Paragraph:a}=D.default,r=e?M.default.createElement(k.default,null):M.default.createElement(C.default,null);return M.default.createElement("div",null,M.default.createElement("span",{className:q.default["title-label"]},this.titleLabel),M.default.createElement("span",{className:q.default["header-title"]},M.default.createElement(a,{style:{display:"inherit"},copyable:!0},this.titleValue)),M.default.createElement(I.default,{type:"vertical",className:q.default["header-divider"]}),M.default.createElement(w.default,{onClick:this.goBack,type:"link"},t("Back")),M.default.createElement(w.default,{type:"link",icon:M.default.createElement(x.default,null),onClick:this.handleRefresh}),M.default.createElement(w.default,{onClick:this.handleDetailInfo,icon:r,type:"link",className:q.default["header-button"]}))}get className(){return""}get listUrl(){return""}get detailData(){return(0,O.toJS)(this.store.detail)||{}}get isLoading(){return this.store.isLoading}get detailInfos(){return[]}get forceLoadingTabs(){return[]}getActionData(){return this.detailData}init(){this.store={detail:{},isLoading:!0}}renderDetailInfos(){var e,t,{Paragraph:a}=D.default,{collapsed:r}=this.state;if((0,A.default)(this.detailData))return M.default.createElement(F.default,{title:this.detailTitle,descriptions:[],loading:this.isLoading});var n=r?[]:(0,g.default)(e=(0,v.default)(t=this.detailInfos).call(t,(e=>!e.hidden))).call(e,(e=>{var t,r,n,{title:i,dataIndex:l,copyable:o}=e;this.isLoading||!this.detailData||(0,A.default)(this.detailData)?t="-":"-"!==(t=this.getDesc(this.detailData,e))&&(o||0===(0,y.default)(r=l.toLowerCase()).call(r,"id")||(0,y.default)(n=l.toLowerCase()).call(n,"_id")>=0)&&(t=M.default.createElement(a,{style:{margin:0},copyable:o},t));return{label:i,content:t}}));return M.default.createElement(F.default,{title:this.detailTitle,descriptions:n,loading:this.isLoading})}renderTabComponent(e){var t,{component:a,key:r,render:n}=e,{inAction:i}=this.state;return n||(a?M.default.createElement(e.component,(0,S.default)({},this.props,{detail:this.detailData,detailName:(0,b.default)(t="".concat(this.name,"-")).call(t,this.id),refreshDetail:this.refreshDetailByTab,inAction:i})):M.default.createElement("span",null,r))}renderTab(e,t){return e!==t.key?M.default.createElement(_.default.TabPane,{tab:t.title,key:t.key}):M.default.createElement(_.default.TabPane,{tab:t.title,key:t.key},this.renderTabComponent(t))}renderTabs(){var e;if((0,A.default)(this.detailData)||this.isLoading)return null;if(!this.tab)return null;var t=(0,g.default)(e=this.tabs).call(e,(e=>this.renderTab(this.tab.key,e)));return M.default.createElement("div",{className:(0,E.default)(q.default["tab-wrapper"],this.className)},M.default.createElement(_.default,{activeKey:this.tab.key,onChange:this.handleChangeTab},t))}renderActions(){var e=this.getActionData();return(0,A.default)(e)||this.store.isLoading?null:M.default.createElement(B.default,{actions:this.actionConfigs.rowActions||this.actions,onFinishAction:this.onFinishAction,item:this.getActionData(),containerProps:{isAdminPage:this.isAdminPage},isAdminPage:this.isAdminPage,onClickAction:this.onClickAction,onCancelAction:this.onCancelAction})}render(){return this.state.notFound?M.default.createElement(j.default,{title:this.name,link:this.listUrl,goList:!0}):M.default.createElement("div",{className:(0,E.default)(q.default.main,this.className,"detail-main")},M.default.createElement("div",{className:q.default["action-wrapper"]},this.renderActions()),M.default.createElement("div",{className:q.default.header},this.renderDetailInfos()),M.default.createElement("div",{className:q.default.tabs},this.renderTabs()))}}a.default=H},1248:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.isBootFromVolume=a.allowAttachInterfaceStatus=a.SimpleTag=a.actionColumn=a.actionEvent=a.actionMap=a.instanceStatusFilter=a.allowAttachVolumeInstance=a.canCreateIronicByEndpoint=a.instanceSelectTablePropsBackend=a.instanceSortProps=a.instanceFilters=a.instanceColumnsBackend=a.isIronicInstance=a.physicalNodeTypes=a.getIpInitValue=a.getUserData=a.hasRootVolume=a.isIsoInstance=a.isNotError=a.isPaused=a.isStopped=a.isActive=a.isShutOff=a.isActiveOrShutOff=a.isNotLockedOrAdmin=a.checkStatus=a.lockRender=a.isLocked=a.isNotDeleting=a.isNotLocked=a.isBuilding=a.instanceStatus=a.powerStatus=a.taskStatus=a.stableStatus=a.transitionStatus=void 0;var p=f(r(164)),h=f(r(86)),m=f(r(54)),g=f(r(203));r(1311);var v=f(r(1312)),y=f(r(35));r(344);var b=f(r(202)),_=f(r(177)),S=f(r(0)),x=f(r(597)),w=(r(161),r(1591)),I=r(66),C=r(342),k=f(r(1592)),D=f(r(3545)),P=f(r(3546));function T(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=T(Object(r),!0)).call(a,(function(t){(0,y.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=T(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}var M=S.default.createElement(b.default,{title:t("The instance has been locked. If you want to do more, please unlock it first.")},S.default.createElement("img",{src:D.default,alt:"lock",style:{width:"12px"}})),N=S.default.createElement("img",{src:P.default,alt:"unlock",style:{width:"12px"}}),E={build:t("Build"),building:t("Building"),stopped:t("Stopped"),recovering:t("Recovering"),rescued:t("Rescued"),resized:t("Resized"),scheduling:t("Scheduling"),reboot:t("Reboot"),hard_reboot:t("Hard Reboot"),migrating:t("Migrating")};a.transitionStatus=E;var R={deleted:t("Deleted"),active:t("Active"),shutoff:t("Shutoff"),paused:t("Paused"),error:t("Error"),resize:t("Resizing or Migrating"),verify_resize:t("Resizing or Migrating"),revert_resize:t("Revert Resize/Migrate"),password:t("Password"),rebuild:t("Rebuild"),rescue:t("Rescue"),"soft-delete":t("Soft Deleted"),soft_deleted:t("Soft Deleted"),shelved:t("Shelved"),shelved_offloaded:t("Shelved Offloaded"),suspended:t("Suspended"),stopped:t("Shutoff")};a.stableStatus=R;var j={null:t("No Task"),scheduling:t("Scheduling"),block_device_mapping:t("Block Device Mapping"),networking:t("Networking"),spawning:t("Spawning"),image_snapshot:t("Snapshotting"),image_snapshot_pending:t("Image Snapshot Pending"),image_pending_upload:t("Image Pending Upload"),image_uploading:t("Image Uploading"),image_backup:t("Image Backup"),updating_password:t("Updating Password"),resize_prep:t("Resizing or Migrating"),resize_migrating:t("Resizing or Migrating"),resize_migrated:t("Resizing or Migrating"),resize_finish:t("Resizing or Migrating"),resize_reverting:t("Reverting Resize or Migrate"),resize_confirming:t("Confirming Resize or Migrate"),rebooting:t("Rebooting"),reboot_pending:t("Rebooting"),reboot_started:t("Rebooting"),rebooting_hard:t("Hard Rebooting"),reboot_pending_hard:t("Hard Rebooting"),reboot_started_hard:t("Hard Rebooting"),pausing:t("Pausing"),unpausing:t("Resuming"),suspending:t("Suspending"),resuming:t("Resuming"),"powering-off":t("Powering Off"),"powering-on":t("Powering On"),rescuing:t("Rescuing"),unrescuing:t("Unrescuing"),rebuilding:t("Rebuilding"),rebuild_block_device_mapping:t("Rebuild Block Device Mapping"),rebuild_spawning:t("Rebuild Spawning"),migrating:t("Migrating"),deleting:t("Deleting"),"soft-deleting":t("Soft Deleting"),restoring:t("Restoring"),shelving:t("Shelving"),shelving_image_pending_upload:t("Shelving Image Pending Upload"),shelving_image_uploading:t("Shelving Image Uploading"),shelving_offloading:t("Shelving Offloading"),unshelving:t("Unshelving")};a.taskStatus=j;var F={"NO STATE":t("No State"),RUNNING:t("Running"),BLOCKED:t("Blocked"),PAUSED:t("Paused"),SHUTDOWN:t("Shut Down"),SHUTOFF:t("Shut Off"),CRASHED:t("Crashed"),SUSPENDED:t("Suspended"),FAILED:t("Failed"),BUILDING:t("Building")};a.powerStatus=F;var L=A(A(A(A({},E),R),j),F);a.instanceStatus=L;a.isBuilding=e=>"build"===e.status;var O=e=>!e.locked;a.isNotLocked=O;var z=e=>!e.task_state||"deleting"!==e.task_state.toLowerCase();a.isNotDeleting=z;var B=e=>!!e.locked;a.isLocked=B;var V=e=>e?M:N;a.lockRender=V;var U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],{status:r,vm_state:n}=t;return(0,p.default)(e).call(e,r.toLowerCase())||a&&n&&(0,p.default)(e).call(e,n.toLowerCase())};a.checkStatus=U;a.isNotLockedOrAdmin=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!B(e)||t};a.isActiveOrShutOff=e=>U(["active","shutoff"],e);a.isShutOff=e=>U(["shutoff"],e);a.isActive=e=>U(["active"],e);a.isStopped=e=>U(["stopped"],e);a.isPaused=e=>U(["paused"],e);a.isNotError=e=>!U(["error"],e);a.isIsoInstance=e=>{var{iso_server:t=!1}=e;return t};a.hasRootVolume=e=>{var{root_device_name:t="/dev/vda",volumes_attached:a=[]}=e;return!!(0,h.default)(a).call(a,(e=>e.is_root_volume||e.device===t))};var Q='Content-Type: multipart/mixed; boundary="===============2309984059743762475=="\nMIME-Version: 1.0\n\n--===============2309984059743762475==\nContent-Type: text/cloud-config; charset="us-ascii" \nMIME-Version: 1.0\nContent-Transfer-Encoding: 7bit\nContent-Disposition: attachment; filename="ssh-pwauth-script.txt" \n\n#cloud-config\ndisable_root: false\nssh_pwauth: true\n\n--===============2309984059743762475==\nContent-Type: text/x-shellscript; charset="us-ascii" \nMIME-Version: 1.0\nContent-Transfer-Encoding: 7bit\nContent-Disposition: attachment; filename="passwd-script.txt" \n\n#!/bin/sh\necho \'USER_NAME:USER_PASSWORD\' | chpasswd\n\n--===============2309984059743762475==\nContent-Type: text/x-shellscript; charset="us-ascii" \nMIME-Version: 1.0\nContent-Transfer-Encoding: 7bit\nContent-Disposition: attachment; filename="init-shell.txt" \n\nUSER_DATA\n\n--===============2309984059743762475==--',q='Content-Type: multipart/mixed; boundary="===============2309984059743762475==" \nMIME-Version: 1.0\n\n--===============2309984059743762475==\nContent-Type: text/cloud-config; charset="us-ascii" \nMIME-Version: 1.0\nContent-Transfer-Encoding: 7bit\nContent-Disposition: attachment; filename="ssh-pwauth-script.txt" \n\n#cloud-config\ndisable_root: false\nssh_pwauth: true\n\n--===============2309984059743762475==\nContent-Type: text/x-shellscript; charset="us-ascii" \nMIME-Version: 1.0\nContent-Transfer-Encoding: 7bit\nContent-Disposition: attachment; filename="passwd-script.txt" \n\n#!/bin/sh\necho \'USER_NAME:USER_PASSWORD\' | chpasswd\n\n--===============2309984059743762475==--',G='Content-Type: multipart/mixed; boundary="===============2309984059743762475==" \nMIME-Version: 1.0\n\n--===============2309984059743762475==\nContent-Type: text/x-shellscript; charset="us-ascii" \nMIME-Version: 1.0\nContent-Transfer-Encoding: 7bit\nContent-Disposition: attachment; filename="init-shell.txt" \n\nUSER_DATA\n\n--===============2309984059743762475==--';a.getUserData=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"root";if(e&&t){var r=Q.replace(/USER_PASSWORD/g,e);return(r=r.replace(/USER_NAME/g,a)).replace(/USER_DATA/g,t)}if(e){var n=q.replace(/USER_PASSWORD/g,e);return n.replace(/USER_NAME/g,a)}return G.replace(/USER_DATA/g,t)};a.getIpInitValue=e=>{if(!e)return null;var{start:t}=e.allocation_pools[0];return t};var K=[{label:t("Smart Scheduling"),value:"smart"},{label:t("Manually Specify"),value:"manually"}];a.physicalNodeTypes=K;var H=e=>{var{flavor_info:{extra_specs:t={}}={}}=e;return"bare_metal"===t[":architecture"]};a.isIronicInstance=H;var W=[{title:t("Name"),dataIndex:"name",sortKey:"display_name"},{title:t("Image"),sorter:!1,dataIndex:"image_os_distro",render:(e,t)=>S.default.createElement(x.default,{type:e,title:t.image_name})},{title:t("Fixed IP"),dataIndex:"fixed_addresses",width:120,sorter:!1,render:e=>e&&e.length?(0,m.default)(e).call(e,(e=>S.default.createElement("span",{key:e},e,S.default.createElement("br",null)))):"-"},{title:t("Floating IP"),dataIndex:"floating_addresses",width:120,sorter:!1,render:e=>e&&e.length?(0,m.default)(e).call(e,(e=>S.default.createElement("span",{key:e},e,S.default.createElement("br",null)))):"-"},{title:t("Flavor"),dataIndex:"flavor",sorter:!1},{title:t("Status"),dataIndex:"status",sorter:!1,render:e=>L[e&&e.toLowerCase()]||"-"},{title:t("Locked"),dataIndex:"locked",isHideable:!0,render:V},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime"}];a.instanceColumnsBackend=W;var Y=[{label:t("Name"),name:"name"}];a.instanceFilters=Y;var J={isSortByBack:!0,defaultSortKey:"created_at",defaultSortOrder:"descend"};a.instanceSortProps=J;var Z=A(A({},J),{},{filterParams:Y,columns:W});a.instanceSelectTablePropsBackend=Z;a.canCreateIronicByEndpoint=()=>(0,I.ironicOriginEndpoint)();a.allowAttachVolumeInstance=e=>U(["active","paused","stopped","resized","soft-delete","shelved","shelved_offloaded"],e)&&z(e)&&O(e)&&!H(e);var X={label:t("Status"),name:"status",options:[{label:t("Active"),key:"ACTIVE"},{label:t("Building"),key:"BUILD"},{label:t("Paused"),key:"PAUSED"},{label:t("Suspended"),key:"SUSPENDED"},{label:t("Error"),key:"ERROR"},{label:t("Shutoff"),key:"SHUTOFF"},{label:t("Shelved Offloaded"),key:"SHELVED_OFFLOADED"}]};a.instanceStatusFilter=X;var $={attach_interface:t("Attach Interface"),detach_interface:t("Detach Interface"),attach_volume:t("Attach Volume"),detach_volume:t("Detach Volume"),create:t("Create"),stop:t("Stop"),reboot:t("Reboot"),suspend:t("Suspend"),resume:t("Resume"),shelve:t("Shelve"),unshelve:t("Unshelve"),start:t("Start"),lock:t("Lock"),unlock:t("Unlock"),pause:t("Pause"),unpause:t("Unpause"),createImage:t("Create Snapshot"),resize:t("Extend Root Volume"),confirmResize:t("Resize"),"live-resize":t("Online Resize"),extend_volume:t("Extend Volume"),changePassword:t("Change Password"),rebuild:t("Rebuild"),migrate:t("Migrate"),"live-migration":t("Live Migrate"),delete:t("Delete"),restore:t("Recover")};a.actionMap=$;var ee={compute_restore_instance:t("Resume Instance"),compute_soft_delete_instance:t("Soft Delete Instance"),compute_post_live_migration_at_destination:t("Live Migration At Destination"),compute_pre_live_migration:t("Pre Live Migration"),compute_live_migration:t("Compute Live Migration"),compute_check_can_live_migrate_source:t("Check Can Live Migrate Source"),compute_check_can_live_migrate_destination:t("Check Can Live Migrate Destination"),conductor_live_migrate_instance:t("Conductor Live Migrate Instance"),compute_confirm_resize:t("Resized"),compute_finish_resize:t("Finish Resize"),compute_resize_instance:t("Resize Instance"),compute_prep_resize:t("Prep Resize"),cold_migrate:t("Cold Migrate"),conductor_migrate_server:t("Conductor Migrate Server"),compute_rebuild_instance:t("Rebuild Instance"),rebuild_server:t("Rebuild Instance"),compute_set_admin_password:t("Set Admin Password"),compute_extend_volume:t("Extend Volume"),compute_live_resize_instance:t("Compute Live Resize Instance"),conductor_live_resize_instance:t("Conductor Live Resize Instance"),api_snapshot_instance:t("Snapshot Instance"),api_lock:t("Lock"),api_unlock:t("Unlock"),compute_detach_volume:t("Detach Volume"),compute_attach_volume:t("Attach Volume"),compute_detach_interface:t("Detach Interface"),compute_attach_interface:t("Attach Interface"),compute__do_build_and_run_instance:t("Do Build And Run Instance"),compute_suspend_instance:t("Compute Suspend Instance"),compute_start_instance:t("Compute Start Instance"),compute_stop_instance:t("Compute Stop Instance"),compute_resume_instance:t("Compute Resume Instance"),compute_pause_instance:t("Compute Pause Instance"),compute_unpause_instance:t("Compute Unpause Instance"),compute_reboot_instance:t("Compute Reboot Instance")};a.actionEvent=ee;a.actionColumn=e=>[{title:t("Operation Name"),dataIndex:"action",valueMap:$},{title:t("Project ID/Name"),dataIndex:"project_name",isHideable:!0,hidden:!e.isAdminPage},{title:t("Operation Time"),dataIndex:"start_time",valueRender:"toLocalTimeMoment"},{title:t("Request ID"),dataIndex:"request_id",isHideable:!0,render:(e,t)=>S.default.createElement(S.default.Fragment,null,S.default.createElement("span",null,e),S.default.createElement(k.default,{id:t.instance_uuid,requestId:e,store:new w.ActionLogStore,actionEvent:ee}))},{title:t("User ID"),dataIndex:"user_id",isHideable:!0,hidden:!e.isAdminPage,render:t=>e.getLinkRender("userDetail",t,{id:t},null)}];a.SimpleTag=e=>{var{tag:t,index:a}=e,r=t.length>20,n=r?"".concat((0,g.default)(t).call(t,0,20),"..."):t,i=S.default.createElement(v.default,{key:t,color:C.projectTagsColors[a%10],style:{marginTop:2,marginBottom:2}},S.default.createElement("span",{style:{whiteSpace:"pre-wrap"}},n));return r?S.default.createElement(b.default,{key:t,title:S.default.createElement("span",{style:{whiteSpace:"pre-wrap"}},t)},i):i};a.allowAttachInterfaceStatus=["active","paused","stopped"];a.isBootFromVolume=e=>{var{origin_data:t}=e||{};return t&&!(0,_.default)(t)?!t.image:!e.image}},1249:function(e,t,a){"use strict";var r=a(32),n=a(42),i=a(29),l=a(25),o=a(28),s=a(44),u=a(45),d=a(20),c=a(21);d(t,"__esModule",{value:!0}),t.default=void 0;var f=c(a(54)),p=c(a(35)),h=c(a(570)),m=c(a(0)),g=c(a(4)),v=c(a(3653)),y=a(36),b=a(163),_=a(567),S=c(a(3656));function x(e,t){var a=r(e);if(n){var o=n(e);t&&(o=i(o).call(o,(function(t){return l(e,t).enumerable}))),a.push.apply(a,o)}return a}class w extends m.default.Component{constructor(e){super(e),(0,p.default)(this,"fetchData",(e=>{this.shouldFetchDetail&&this.store.fetchDetail&&this.store.fetchDetail(function(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=x(Object(r),!0)).call(a,(function(t){(0,p.default)(e,t,r[t])}));else if(s)u(e,s(r));else{var n;o(n=x(Object(r))).call(n,(function(t){d(e,t,l(r,t))}))}}return e}({id:this.id},e)).catch(this.catch)})),this.init()}componentDidMount(){this.fetchData()}get id(){var{id:e}=this.props.match.params;return e}get currentUser(){var{user:e}=this.props.rootStore||{};return e||{}}get currentProjectId(){return this.props.rootStore.projectId}get projectId(){var{project_id:e,tenant_id:t,owner:a,owner_id:r}=this.detailData;return e||t||a||r}get isMyResource(){return this.projectId===this.currentProjectId}get detailData(){return this.props.detail||(0,y.toJS)(this.store.detail)}get isLoading(){return this.store.isLoading}get routing(){return this.props.rootStore.routing}get path(){var{location:{pathname:e=""}={}}=this.props;return e||""}get leftCards(){return[]}get rightCards(){return[]}get isAdminPage(){var{pathname:e=""}=this.props.location||{};return(0,b.isAdminPage)(e)}get shouldFetchDetail(){return!1}get leftCardsStyle(){return{}}getRouteName(e){return this.isAdminPage?"".concat(e,"Admin"):e}getRoutePath(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getRouteName(e);return(0,_.getPath)({key:r,params:t,query:a})}getLinkRender(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getRouteName(e);return(0,_.getLinkRender)({key:n,params:a,query:r,value:t})}init(){this.store={}}renderLeftCards(){var e;return(0,f.default)(e=this.leftCards).call(e,((e,t)=>{var{title:a,titleHelp:r,options:n,render:i,labelCol:l,contentCol:o,button:s,sourceData:u}=e;return i?i():m.default.createElement(v.default,{key:"card-left-".concat(t),className:"detail-left-card",data:u||this.detailData,title:a,titleHelp:r,options:n,loading:this.isLoading,labelCol:l,contentCol:o,button:s})}))}renderRightCards(){var e;return(0,f.default)(e=this.rightCards).call(e,((e,t)=>{var{title:a,options:r,labelCol:n,titleHelp:i,render:l,button:o,className:s}=e;if(l)return l();var u=8,d=16;return(0,h.default)(e,"labelCol")&&(d=24-(u=n)),m.default.createElement(v.default,{key:"card-right-".concat(t),className:(0,g.default)("detail-right-card",s),data:this.detailData,title:a,titleHelp:i,options:r,loading:this.isLoading,labelCol:u,contentCol:d,button:o})}))}renderModal(){return null}render(){return m.default.createElement("div",{className:(0,g.default)(S.default.main)},m.default.createElement("div",{className:S.default["left-side"],id:"detail-left-side",style:this.leftCardsStyle},this.renderLeftCards()),m.default.createElement("div",{className:S.default["right-side"],id:"detail-right-side"},this.renderRightCards()),this.renderModal())}}t.default=w},1255:function(e,t,a){"use strict";var r=a(32),n=a(42),i=a(29),l=a(25),o=a(28),s=a(44),u=a(45),d=a(20),c=a(21);d(t,"__esModule",{value:!0}),t.default=t.UserStore=void 0;var f,p,h=c(a(86)),m=c(a(28)),g=c(a(32)),v=c(a(63)),y=c(a(54)),b=c(a(29)),_=c(a(25)),S=c(a(49)),x=c(a(58)),w=c(a(74)),I=c(a(35)),C=c(a(55)),k=(c(a(75)),a(36)),D=c(a(432)),P=c(a(50)),T=c(a(133)),A=c(a(340)),M=c(a(1288)),N=c(a(53));function E(e,t){var a=r(e);if(n){var o=n(e);t&&(o=i(o).call(o,(function(t){return l(e,t).enumerable}))),a.push.apply(a,o)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=E(Object(r),!0)).call(a,(function(t){(0,I.default)(e,t,r[t])}));else if(s)u(e,s(r));else{var n;o(n=E(Object(r))).call(n,(function(t){d(e,t,l(r,t))}))}}return e}var j=(f=class extends N.default{constructor(){super(...arguments),(0,w.default)(this,"userProjects",p,this),(0,I.default)(this,"addGroupUsers",((e,t)=>M.default.addGroupUsers({id:e,userId:t}))),(0,I.default)(this,"addProjectUser",((e,t,a)=>A.default.assignUserRole({id:e,userId:t,roleId:a}))),(0,I.default)(this,"getUserDefaultProject",((e,t)=>{var{default_project_id:a}=e;if(a){var r=(0,h.default)(t).call(t,(e=>e.id===a));e.defaultProject=null==r?void 0:r.name}})),(0,I.default)(this,"getProjectMapRoles",((e,t,a,r)=>{var n={},{id:i}=e;return(0,m.default)(t).call(t,(e=>{var{scope:{project:{id:t}={}}={},role:{id:l}={},user:{id:o}={}}=e;if(o===i&&l&&t){var s=(0,h.default)(a).call(a,(e=>e.id===l));if(n[t])n[t].roles=[...n[t].roles,s];else{var u=(0,h.default)(r).call(r,(e=>e.id===t));n[t]={project:u,roles:[s]}}}})),n})),(0,I.default)(this,"getSystemRoles",((e,t,a,r)=>{var n=[],{id:i}=e||{};return(0,m.default)(t).call(t,(e=>{var{role:{id:t}={},user:{id:r}={}}=e;if(r===i&&t){var l=(0,h.default)(a).call(a,(e=>e.id===t));n.push(l)}})),n})),(0,I.default)(this,"updateUser",((e,t,a,r,n,i)=>{this.getUserDefaultProject(e,n);var l=this.getProjectMapRoles(e,t,r,n),o=this.getSystemRoles(e,a,r,n),s=(0,h.default)(i).call(i,(t=>t.id===e.domain_id));return R(R({},e),{},{projects:l,projectCount:(0,g.default)(l).length,domain:s,domainName:(s||{}).name||e.domain_id,systemRoles:o})}))}get client(){return P.default.keystone.users}get domainClient(){return P.default.keystone.domains}get systemGroupClient(){return P.default.keystone.systemGroups}get roleClient(){return P.default.keystone.roles}get roleAssignmentClient(){return P.default.keystone.roleAssignments}get projectClient(){return P.default.keystone.projects}get systemUserClient(){return P.default.keystone.systemUsers}get groupClient(){return P.default.keystone.groups}listFetchByClient(e,t){var{groupId:a}=t;return a?this.groupClient.users.list(a,e):this.client.list(e)}get paramsFunc(){return e=>{var{id:t,projectId:a,groupId:r,roleId:n,withProjectRole:i,withSystemRole:l,all_projects:o}=e;return(0,x.default)(e,["id","projectId","groupId","roleId","withProjectRole","withSystemRole","all_projects"])}}create(e){var t=this;return(0,S.default)((function*(){var a,r={},{select_project:n,select_user_group:i=[],projectRoles:l,defaultRole:o}=e,s=(0,x.default)(e,["select_project","select_user_group","projectRoles","defaultRole"]);r[t.responseKey]=s,t.isSubmitting=!0;var u=yield t.client.create(r),{user:{id:d}}=u,c=[];return(0,m.default)(i).call(i,(e=>{c.push(t.addGroupUsers(e,d))})),(0,m.default)(a=(0,g.default)(l)).call(a,(e=>{var a=l[e];(0,m.default)(a).call(a,(a=>{c.push(t.addProjectUser(e,d,a))}))})),yield v.default.all(c),t.isSubmitting=!1,u}))()}getUserProjects(){var e=this;return(0,S.default)((function*(){e.userProjects.update({isLoading:!0});var{user:{user:{id:t}}}=T.default,{projects:a}=yield e.client.projects.list(t);return e.userProjects.update({data:a,isLoading:!1}),a}))()}listDidFetch(e,t,a){var r=this;return(0,S.default)((function*(){if(!e.length)return e;var{withProjectRole:t=!0,withDefaultProject:n=!0,withSystemRole:i=!0,projectId:l,roleId:o,domain_id:s}=a,u=t||i,d={};o&&(d["role.id"]=o),l&&(d["scope.project.id"]=l);var c=[t?r.roleAssignmentClient.list(d):null,i?r.roleAssignmentClient.list({"scope.system":"all"}):null,u?r.roleClient.list():null,t||n?r.projectClient.list():null,s?null:r.domainClient.list()],[f,p,m,g,_]=yield v.default.all(c),{roles:S=[]}=m||{},{domains:x=[]}=_||{},{role_assignments:w=[]}=f||{},{role_assignments:I=[]}=p||{},{projects:C=[]}=g||{},k=(0,y.default)(e).call(e,(e=>r.updateUser(e,w,I,S,C,x)));return l?(0,b.default)(k).call(k,(e=>!!e.projectCount)):o?(0,b.default)(k).call(k,(e=>{var{projectCount:t,systemRoles:a}=e;return!!t||!!(0,h.default)(a).call(a,(e=>e.id===o))})):k}))()}fetchUserDefaultProject(e){var t=this;return(0,S.default)((function*(){var{default_project_id:a}=e;if(!a)return null;try{var{project:r}=yield t.projectClient.show(a);return r}catch(e){return null}}))()}detailDidFetch(e){var t=this;return(0,S.default)((function*(){var{id:a}=e,r={"user.id":a,"scope.system":"all"},n=[t.roleAssignmentClient.list(r),t.roleClient.list(),t.domainClient.list(),t.fetchUserDefaultProject(e)],[i,l,o,s]=yield v.default.all(n),{roles:u=[]}=l||{},{domains:d=[]}=o,{role_assignments:c=[]}=i||{};return t.updateUser(e,[],c,u,s?[s]:[],d)}))()}enable(e){var t=this;return(0,S.default)((function*(){var{id:a}=e;return t.submitting(t.client.patch(a,{user:{enabled:!0}}))}))()}forbidden(e){var t=this;return(0,S.default)((function*(){var{id:a}=e;return t.submitting(t.client.patch(a,{user:{enabled:!1}}))}))()}changePassword(e){var t=this;return(0,S.default)((function*(){var{id:a,password:r}=e,n={user:{password:r}};return t.submitting(t.client.patch(a,n))}))()}changePasswordUser(e){var t=this;return(0,S.default)((function*(){var{id:a,password:r,original_password:n}=e,i={user:{password:r,original_password:n}};return t.submitting(t.client.updatePassword(a,i))}))()}assignSystemRole(e){var t=this;return(0,S.default)((function*(){var{id:a,roleId:r}=e;return t.systemUserClient.roles.update(a,r)}))()}deleteSystemRole(e){var t=this;return(0,S.default)((function*(){var{id:a,roleId:r}=e;return t.systemUserClient.roles.delete(a,r)}))()}edit(e,t){var a=this;return(0,S.default)((function*(){var{email:r,phone:n,real_name:i,description:l,name:o}=t,s={user:{email:r,phone:n,real_name:i,description:l,name:o}};return a.submitting(a.client.patch(e,s))}))()}setDefaultProject(e,t){var a=this;return(0,S.default)((function*(){var r={user:{default_project_id:t}};return a.submitting(a.client.patch(e,r))}))()}},p=(0,C.default)(f.prototype,"userProjects",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new D.default}}),(0,C.default)(f.prototype,"create",[k.action],(0,_.default)(f.prototype,"create"),f.prototype),(0,C.default)(f.prototype,"getUserProjects",[k.action],(0,_.default)(f.prototype,"getUserProjects"),f.prototype),(0,C.default)(f.prototype,"enable",[k.action],(0,_.default)(f.prototype,"enable"),f.prototype),(0,C.default)(f.prototype,"forbidden",[k.action],(0,_.default)(f.prototype,"forbidden"),f.prototype),(0,C.default)(f.prototype,"changePassword",[k.action],(0,_.default)(f.prototype,"changePassword"),f.prototype),(0,C.default)(f.prototype,"changePasswordUser",[k.action],(0,_.default)(f.prototype,"changePasswordUser"),f.prototype),(0,C.default)(f.prototype,"assignSystemRole",[k.action],(0,_.default)(f.prototype,"assignSystemRole"),f.prototype),(0,C.default)(f.prototype,"deleteSystemRole",[k.action],(0,_.default)(f.prototype,"deleteSystemRole"),f.prototype),(0,C.default)(f.prototype,"edit",[k.action],(0,_.default)(f.prototype,"edit"),f.prototype),(0,C.default)(f.prototype,"setDefaultProject",[k.action],(0,_.default)(f.prototype,"setDefaultProject"),f.prototype),f);t.UserStore=j;var F=new j;t.default=F},1258:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.getPortsAndReasons=function(e,a){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,h.default)(e).call(e,(e=>{var n=!0,i="",l=e.fixed_ip_address;if(D(l))if(e["router:external"])i=t("Is external network port"),n=!1;else if(e.floatingIP){var o;i=(0,m.default)(o="".concat(t("Is associate to floating ip: ")," ")).call(o,e.floatingIP),n=!1}else(0,g.default)(a).call(a,(t=>t.subnet_id===e.subnet_id))<0&&(i="".concat(r?t("It is unreachable for this floating ip."):t("It is unreachable for all floating ips.")),n=!1);else i="".concat(t("It is IPv6 type.")),n=!1;return k(k({},e),{},{key:l,name:l,available:n,reason:i})}))},a.getPortsForPortFormItem=function(e){this.portStore.fetchList({device_owner:e,project_id:this.currentProjectId})},a.getPortFormItem=function(){var e,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],{portFixedIPs:r,fixedIpLoading:n}=this.state,i=[{label:t("Name"),name:"name"},{label:t("Fixed IP"),name:"fixed_ips",filterFunc:(e,t)=>{var a;return(0,v.default)(a=e||[]).call(a,(e=>{var a;return(0,y.default)(a=e.ip_address).call(a,t)}))}}];a&&i.push({label:t("Bind Resource Name"),name:"server_name"},{label:t("Status"),name:"status",options:(0,b.default)(e=(0,w.getOptions)(P)).call(e,(e=>{var t;return(0,y.default)(t=["ACTIVE","DOWN"]).call(t,e.key)}))});var l=[{title:t("ID/Name"),dataIndex:"name",routeName:this.getRouteName("portDetail")},{title:t("Description"),dataIndex:"description"},{title:t("Fixed IPs"),dataIndex:"fixed_ips",render:e=>S.default.createElement(S.default.Fragment,null,(0,h.default)(e).call(e,((e,t)=>S.default.createElement("div",{key:"ip_address_".concat(t)},e.ip_address))))},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime"}];if(a){var o=[{title:t("Status"),dataIndex:"status",valueMap:P},{title:t("Bind Resource"),dataIndex:"server_name",render:(e,t)=>{var{device_id:a}=t;if(!a)return"-";var r=this.getLinkRender("instanceDetail",a,{id:a},{tab:"interface"});return S.default.createElement(S.default.Fragment,null,r,S.default.createElement("br",null),e||"-")}}];(0,_.default)(l).call(l,4,0,...o)}return[{name:"virtual_adapter",label:t("Virtual Adapter"),type:"select-table",required:!0,rowKey:"id",data:this.portStore.list.data||[],isLoading:this.portStore.list.isLoading,disabledFunc:this.portsDisableFunc,onChange:this.handlePortSelect,isMulti:!1,filterParams:i,columns:l},{name:"fixed_ip_address",label:t("Fixed IP"),type:"select-table",rowKey:"fixed_ip_address",required:!0,data:r,isLoading:n,isMulti:!1,filterParams:[{label:t("Ip Address"),name:"name"}],columns:[{title:t("Ip Address"),dataIndex:"name"},{title:t("Subnet ID"),dataIndex:"subnet_id"},{title:t("Reason"),dataIndex:"reason"}],disabledFunc:e=>!e.available}]},a.instancePortOptions=a.portFilter=a.getPortColumns=a.portFilters=a.portColumns=a.portSortProps=a.bindingTypes=a.portState=a.portStatus=void 0;var p=f(r(35)),h=f(r(54)),m=f(r(77)),g=f(r(1390)),v=f(r(232)),y=f(r(164)),b=f(r(29)),_=f(r(573)),S=f(r(0)),x=r(565),w=r(163),I=r(418);function C(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=C(Object(r),!0)).call(a,(function(t){(0,p.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=C(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}var{isIPv4:D}=x.ipValidate,P={ACTIVE:t("Active"),BUILD:t("Build"),DOWN:t("Down"),ERROR:t("Error")};a.portStatus=P;var T={UP:t("Up"),DOWN:t("Down")};a.portState=T;var A={normal:t("Normal"),direct:t("Direct"),macvtap:t("MacVTap")};a.bindingTypes=A;a.portSortProps={isSortByBack:!0,defaultSortKey:"status",defaultSortOrder:"descend"};var M=[I.idNameColumn,{title:t("Owned Network"),dataIndex:"network_name",isLink:!0,idKey:"network_id",sorter:!1},{title:t("IPv4 Address"),dataIndex:"ipv4",render:e=>(0,h.default)(e).call(e,(e=>S.default.createElement("div",{key:e},e))),sorter:!1},{title:t("IPv6 Address"),dataIndex:"ipv6",render:e=>(0,h.default)(e).call(e,(e=>S.default.createElement("div",{key:e},e))),sorter:!1},{title:t("Mac Address"),dataIndex:"mac_address",sorter:!1},{title:t("Status"),dataIndex:"status",valueMap:P,sorter:!1}];a.portColumns=M;var N=[{label:t("Name"),name:"name"}];a.portFilters=N;var E=e=>[{title:t("Port"),dataIndex:"id"},{title:t("Bind Resource"),dataIndex:"server_name",render:(t,a)=>{var{device_id:r,device_owner:n}=a;if(r&&"compute:nova"===n){var i,l=t?(0,m.default)(i="".concat(r," (")).call(i,t,")"):r,o=e.getLinkRender("instanceDetail",l,{id:a.device_id},{tab:"interface"});return S.default.createElement(S.default.Fragment,null,a.device_owner,S.default.createElement("br",null),o)}return S.default.createElement(S.default.Fragment,null,a.device_owner,a.device_owner&&S.default.createElement("br",null),a.device_id||"-")},isHideable:!0,sorter:!1},{title:t("Owned Network"),dataIndex:"network_id",routeName:e.getRouteName("networkDetail"),sorter:!1,render:t=>{var a=e.getLinkRender("networkDetail",t,{id:t});return S.default.createElement(S.default.Fragment,null,a)}},{title:t("Mac Address"),dataIndex:"mac_address",isHideable:!0},{title:t("Status"),dataIndex:"status",width:80,valueMap:P}];a.getPortColumns=E;var R=[{label:t("Network"),name:"network_id"},{label:t("Status"),name:"status",options:(0,w.getOptions)(P)}];a.portFilter=R;a.instancePortOptions=e=>({columns:E(e),filterParams:R})},1259:function(e,t,a){"use strict";var r=a(32),n=a(42),i=a(29),l=a(25),o=a(28),s=a(44),u=a(45),d=a(20),c=a(21);d(t,"__esModule",{value:!0}),t.default=t.FlavorStore=void 0;var f,p,h=c(a(164)),m=c(a(29)),g=c(a(63)),v=c(a(54)),y=c(a(28)),b=c(a(25)),_=c(a(49)),S=c(a(58)),x=c(a(74)),w=c(a(35)),I=c(a(55)),C=(c(a(75)),a(36)),k=c(a(50)),D=c(a(53));function P(e,t){var a=r(e);if(n){var o=n(e);t&&(o=i(o).call(o,(function(t){return l(e,t).enumerable}))),a.push.apply(a,o)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=P(Object(r),!0)).call(a,(function(t){(0,w.default)(e,t,r[t])}));else if(s)u(e,s(r));else{var n;o(n=P(Object(r))).call(n,(function(t){d(e,t,l(r,t))}))}}return e}var A=(f=class extends D.default{constructor(){super(...arguments),(0,x.default)(this,"access",p,this),(0,w.default)(this,"getGpuInfo",(e=>{var{extra_specs:t={}}=e||{},a=t["pci_passthrough:alias"],r=t["resources:VGPU"],n=t[":category"],i="-",l="-",o="-",s="-";if(r&&(i=(r||"").split(":")[0],l=(r||"").split(":")[1]),a)if(n&&!(0,h.default)(n).call(n,"visualization_")){var u=a.split(",")[0],d=a.split(",")[1];i=u.split(":")[0],l=u.split(":")[1],d&&(o=d.split(":")[0],s=d.split(":")[1])}else{var c=a.split(",")[0];o=c.split(":")[0],s=c.split(":")[1]}return{gpuType:i,gpuCount:l,usbType:o,usbCount:s}}))}get listWithDetail(){return!0}get client(){return k.default.nova.flavors}get mapperBeforeFetchProject(){return e=>{var{extra_specs:{key:t}={}}=e,a=(0,S.default)(e.extra_specs,["key"]),r=(0,S.default)(e,["extra_specs"]),n=this.getGpuInfo(e);return T(T(T(T({},r),a),{},{architecture:a[":architecture"]||"custom",category:a[":category"]},n),{},{is_public:r["os-flavor-access:is_public"],originData:e})}}get paramsFunc(){return e=>{var{all_projects:t,name:a}=e,r=(0,S.default)(e,["all_projects","name"]);return t?T(T({},r),{},{is_public:"None"}):T({name:a},r)}}listDidFetch(e,t,a){return(0,_.default)((function*(){var{tab:t}=a;return t?(0,m.default)(e).call(e,(e=>e.architecture===t)):e}))()}fetchAccess(e){var t=this;return(0,_.default)((function*(){var a=yield t.client.access.list(e);t.access=a.flavor_access}))()}create(e,t,a){var r=this;return(0,_.default)((function*(){var n={};n[r.responseKey]=e;try{r.isSubmitting=!0;var i=yield r.client.create(n),{id:l}=i.flavor,o={extra_specs:t};return a&&a.length>0&&(yield g.default.all((0,v.default)(a).call(a,(e=>{var t={addTenantAccess:{tenant:e}};return r.client.action(l,t)})))),r.submitting(r.client.extraSpecs.create(l,o))}catch(e){return r.isSubmitting=!1,g.default.reject(e)}}))()}updateAccess(e,t,a){var r=this;return(0,_.default)((function*(){return r.isSubmitting=!0,yield g.default.all((0,v.default)(t).call(t,(t=>{var a={addTenantAccess:{tenant:t}};return r.client.action(e,a)}))),r.submitting(g.default.all((0,v.default)(a).call(a,(t=>{var a={removeTenantAccess:{tenant:t}};return r.client.action(e,a)}))))}))()}createExtraSpecs(e,t){var a=this;return(0,_.default)((function*(){var r={extra_specs:t};return a.submitting(a.client.extraSpecs.create(e,r))}))()}deleteExtraSpecs(e,t){var a=this;return(0,_.default)((function*(){return a.submitting(a.client.extraSpecs.delete(e,t))}))()}putExtraSpecs(e,t,a){var r=this;return(0,_.default)((function*(){return r.submitting(r.client.extraSpecs.update(e,t,a))}))()}updateExtraSpecs(e){var t=arguments,a=this;return(0,_.default)((function*(){var r=t.length>1&&void 0!==t[1]?t[1]:[],n=t.length>2&&void 0!==t[2]?t[2]:[],i=t.length>3&&void 0!==t[3]?t[3]:[];if(r.length>0){var l={};(0,y.default)(r).call(r,(e=>{l[e.key]=e.value})),yield a.createExtraSpecs(e,l)}return n.length>0&&(yield g.default.all((0,v.default)(n).call(n,(t=>a.putExtraSpecs(e,t.key,{[t.key]:t.value}))))),i.length>0&&(yield g.default.all((0,v.default)(i).call(i,(t=>a.deleteExtraSpecs(e,t))))),g.default.resolve()}))()}},p=(0,I.default)(f.prototype,"access",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,I.default)(f.prototype,"fetchAccess",[C.action],(0,b.default)(f.prototype,"fetchAccess"),f.prototype),(0,I.default)(f.prototype,"create",[C.action],(0,b.default)(f.prototype,"create"),f.prototype),(0,I.default)(f.prototype,"updateAccess",[C.action],(0,b.default)(f.prototype,"updateAccess"),f.prototype),(0,I.default)(f.prototype,"createExtraSpecs",[C.action],(0,b.default)(f.prototype,"createExtraSpecs"),f.prototype),(0,I.default)(f.prototype,"deleteExtraSpecs",[C.action],(0,b.default)(f.prototype,"deleteExtraSpecs"),f.prototype),(0,I.default)(f.prototype,"putExtraSpecs",[C.action],(0,b.default)(f.prototype,"putExtraSpecs"),f.prototype),(0,I.default)(f.prototype,"updateExtraSpecs",[C.action],(0,b.default)(f.prototype,"updateExtraSpecs"),f.prototype),f);t.FlavorStore=A;var M=new A;t.default=M},1263:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.default=t.BaseLayout=void 0;var i=a(0),l=a(412),o=n(a(416));class s extends i.Component{constructor(e){super(e),this.routes=e.route.routes}render(){var{isAdminPage:e,sliderCollapsed:t}=this.props,a={isAdminPage:e,sliderCollapsed:t};return(0,o.default)(this.routes,a)}}t.BaseLayout=s;var u=(0,l.inject)("rootStore")((0,l.observer)(s));t.default=u},1264:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.getFlavorSearchFilters=a.getFlavorArchInfo=a.isBareMetalFlavor=a.isBareMetal=a.getFamilyItemValue=a.getAllArchitecture=a.gpuColumns=a.cpuArchColumn=a.extraColumns=a.getBaseColumns=a.isComputeOptimized=a.isGpuVisual=a.isGpuCategory=a.categoryHasEphemeral=a.categoryHasIOPS=a.hasEphemeralTypes=a.hasIOPSTypes=a.flavorCategoryList=a.bareMetalCategoryList=a.heterogeneousCategoryList=a.armCategoryList=a.ironicCategoryList=a.x86CategoryList=a.flavorArchitectures=a.pageTypeMap=a.pageTypeList=a.cpuThreadPolicyMap=a.cpuThreadPolicyList=a.cpuPolicyList=void 0;var p=f(r(91)),h=f(r(86)),m=f(r(28)),g=f(r(77)),v=f(r(164)),y=f(r(35)),b=r(163);function _(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=_(Object(r),!0)).call(a,(function(t){(0,y.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=_(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}var x={dedicated:t("Dedicated"),shared:t("Shared")};a.cpuPolicyList=x;var w=[{label:t("Prefer(Thread siblings are preferred)"),value:"prefer"},{label:t("Isolate(No multithreading)"),value:"isolate"},{label:t("Require(Need multithreading)"),value:"require"}];a.cpuThreadPolicyList=w;var I={prefer:t("Prefer"),isolate:t("Isolate"),require:t("Require")};a.cpuThreadPolicyMap=I;var C=[{label:t("Large(Optimal performance)"),value:"large"},{label:t("Small(Not recommended)"),value:"small"},{label:t("Any(Random)"),value:"any"},{label:t("Custom"),value:"custom"}];a.pageTypeList=C;var k={large:t("Large"),small:t("Small"),any:t("Any")};a.pageTypeMap=k;var D={x86_architecture:t("X86 Architecture"),heterogeneous_computing:t("Heterogeneous Computing"),bare_metal:t("Bare Metal"),arm_architecture:t("ARM Architecture"),custom:t("Custom"),all:t("All Flavors")};a.flavorArchitectures=D;var P={general_purpose:t("General Purpose"),compute_optimized:t("Compute Optimized"),memory_optimized:t("Memory Optimized"),big_data:t("Big Data"),local_ssd:t("Local SSD"),high_clock_speed:t("High Clock Speed")};a.x86CategoryList=P;var T={general_purpose:t("General Purpose")};a.ironicCategoryList=T;var A=P;a.armCategoryList=A;var M={compute_optimized_type_with_gpu:t("Compute Optimized Type with GPU"),visualization_compute_optimized_type_with_gpu:t("Visualization Compute Optimized Type with GPU"),compute_optimized_type:t("Compute Optimized Type")};a.heterogeneousCategoryList=M;var N={general_purpose:t("General Purpose")};a.bareMetalCategoryList=N;var E=S(S({},P),M);a.flavorCategoryList=E;var R=["general_purpose","compute_optimized","memory_optimized","high_clock_speed","compute_optimized_type_with_gpu","visualization_compute_optimized_type_with_gpu","compute_optimized_type"];a.hasIOPSTypes=R;var j=["big_data","local_ssd","compute_optimized_type_with_gpu"];a.hasEphemeralTypes=j;a.categoryHasIOPS=e=>e&&(0,p.default)(R).call(R,e)>=0;a.categoryHasEphemeral=e=>e&&(0,p.default)(j).call(j,e)>=0;a.isGpuCategory=e=>e&&(0,p.default)(e).call(e,"_gpu")>=0;a.isGpuVisual=e=>"visualization_compute_optimized_type_with_gpu"===e;a.isComputeOptimized=e=>"compute_optimized_type"===e;a.getBaseColumns=e=>[{title:t("ID/Name"),dataIndex:"name",routeName:e?e.getRouteName("flavorDetail"):""},{title:t("Category"),dataIndex:"category",valueMap:E},{title:t("CPU"),dataIndex:"vcpus",isHideable:!0},{title:t("Memory"),dataIndex:"ram",isHideable:!0,render:e=>(0,b.formatSize)(e,2)},{title:t("Internal Network Bandwidth (Gbps)"),dataIndex:"quota:vif_outbound_average",isHideable:!0,width:120,render:e=>e?e/1e3/125:"-"},{title:t("Ephemeral Disk (GiB)"),dataIndex:"OS-FLV-EXT-DATA:ephemeral",isHideable:!0},{title:t("Storage IOPS"),dataIndex:"quota:disk_total_iops_sec",isHideable:!0,render:e=>e||"-"}];var F=[{title:t("Public"),dataIndex:"is_public",isHideable:!0,valueRender:"yesNo"}];a.extraColumns=F;var L={title:t("CPU Arch"),dataIndex:"cpu_arch",isHideable:!0};a.cpuArchColumn=L;var O=[{title:t("GPU Type"),dataIndex:"gpuType",isHideable:!0},{title:t("GPU Count"),dataIndex:"gpuCount",isHideable:!0},{title:t("NUMA Nodes"),dataIndex:"hw:numa_nodes",isHideable:!0},{title:t("CPU Policy"),dataIndex:"hw:cpu_policy",isHideable:!0,valueMap:x},{title:t("CPU Thread Policy"),dataIndex:"hw:cpu_thread_policy",isHideable:!0,valueMap:I},{title:t("Memory Page"),dataIndex:"hw:mem_page_size",isHideable:!0,valueMap:k}];a.gpuColumns=O;a.getAllArchitecture=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=[];try{var r,n,i=(0,h.default)(r=e||[]).call(r,(e=>"flavor_families"===e.key));(0,m.default)(n=i&&i.value||[]).call(n,(e=>{e.architecture&&a.push(e.architecture)}))}catch(e){}return t&&a.push("custom"),a};a.getFamilyItemValue=e=>{var t,a=(0,h.default)(t=e||[]).call(t,(e=>"flavor_families"===e.key));return a?a.value:[]};var z=e=>"bare_metal"===e;a.isBareMetal=z;a.isBareMetalFlavor=e=>{var{extra_specs:t={}}=e.originData||e||{};return z(t[":architecture"])||"required"===t["trait:CUSTOM_GOLD"]};a.getFlavorArchInfo=e=>{var t,{architecture:a="",category:r=""}=e||{};return a?"custom"===a?D[a]:(0,g.default)(t="".concat(D[a]||a," - ")).call(t,E[r]||r):"-"};a.getFlavorSearchFilters=e=>{var a=[{label:t("Name"),name:"name"},{label:t("CPU"),name:"vcpus",filterFunc:(e,t)=>{var a;return(0,v.default)(a="".concat(e)||"").call(a,t)}},{label:t("Memory"),name:"ram",filterFunc:(e,t)=>{var a;return(0,v.default)(a=(0,b.formatSize)(e,2)||"").call(a,t)}}];return e&&a.push({label:t("Category"),name:"category",options:(0,b.getOptions)(e)}),a}},1265:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.projectTableOptions=a.projectColumns=a.projectFilter=void 0;var l=i(r(0)),o=r(342),s=r(418),u=[{label:t("Project Name"),name:"name"},{label:t("Project ID"),name:"id"},{label:t("Domain Name"),name:"domainName"},{label:t("Domain ID"),name:"domain_id"},{label:t("Enabled"),name:"enabled",options:o.yesNoOptions}];a.projectFilter=u;var d=[{title:t("Project ID/Name"),dataIndex:"name",render:(e,t)=>{var a=(0,s.getIdRender)(t.id,!0,!1);return l.default.createElement(l.default.Fragment,null,l.default.createElement("div",null,a),l.default.createElement("div",null,e))}},{title:t("Domain ID/Name"),dataIndex:"domainName",render:(e,t)=>{var a=(0,s.getIdRender)(t.domain_id,!0,!1);return l.default.createElement(l.default.Fragment,null,l.default.createElement("div",null,a),l.default.createElement("div",null,e))}},{title:t("Enabled"),dataIndex:"enabled",valueRender:"yesNo"},{title:t("description"),dataIndex:"description",isHideable:!0}];a.projectColumns=d;var c={filterParams:u,columns:d};a.projectTableOptions=c},1266:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(162),p=r(21);c(a,"__esModule",{value:!0}),a.default=void 0;var h=p(r(1581));r(1246);var m=p(r(1247));r(1244);var g=p(r(1245));r(569);var v=p(r(1253)),y=p(r(35)),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=S(t);if(a&&a.has(e))return a.get(e);var r={},n=c&&o;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=n?o(e,i):null;l&&(l.get||l.set)?c(r,i,l):r[i]=e[i]}r.default=e,a&&a.set(e,r);return r}(r(0)),_=(r(161),p(r(16)));r(564);function S(e){if("function"!=typeof f)return null;var t=new f,a=new f;return(S=function(e){return e?a:t})(e)}function x(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=x(Object(r),!0)).call(a,(function(t){(0,y.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=x(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}class I extends b.Component{constructor(e){super(e),(0,y.default)(this,"onChange",(e=>{var{onChange:t}=this.props;t&&t(e)})),(0,y.default)(this,"onKeyChange",(e=>{this.onChange(w(w({},this.state),{},{key:e.target.value}))})),(0,y.default)(this,"onValueChange",(e=>{this.onChange(w(w({},this.state),{},{value:e.target.value}))})),this.state={key:"",value:""}}static getDerivedStateFromProps(e,t){var{key:a,value:r}=e.value||{};return a!==t.key||r!==t.value?{key:a,value:r}:null}renderInput(e,t,a){var{isTextarea:r=!1,textareaRows:n}=this.props,i={value:e,placeholder:t,onChange:this.onValueChange,readOnly:a,required:!0};return r?(i.rows=n,b.default.createElement(v.default.TextArea,i)):b.default.createElement(v.default,i)}render(){var{key:e,value:a}=this.state,{keyReadonly:r,valueReadonly:n,keySpan:i,valueSpan:l,keyPlaceholder:o=t("Please input key"),valuePlaceholder:s=t("Please input value"),middleComponent:u}=this.props,d=b.default.createElement("div",{style:{textAlign:"center",lineHeight:"30px",margin:"0 10px"}},u);return b.default.createElement(m.default,null,b.default.createElement(g.default,{span:i||4},b.default.createElement(v.default,{value:e,placeholder:o,onChange:this.onKeyChange,readOnly:r,required:!0})),d,b.default.createElement(g.default,{span:l||8},this.renderInput(a,s,n)))}}a.default=I,(0,y.default)(I,"propTypes",{onChange:_.default.func,value:_.default.object,keyReadonly:_.default.bool,valueReadonly:_.default.bool,keySpan:_.default.number,valueSpan:_.default.number,middleComponent:_.default.node,isTextarea:_.default.bool,textareaRows:_.default.number}),(0,y.default)(I,"defaultProps",{onChange:null,value:{key:"",value:""},keyReadonly:!1,valueReadonly:!1,middleComponent:b.default.createElement(h.default,{rotate:90}),isTextarea:!1,textareaRows:2})},1267:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.getRoutersWithIDAndExtInfo=P,a.getLinkedRouterIdsByFip=function(e,t){return A.apply(this,arguments)},a.getCanReachSubnetIdsWithRouterId=M,a.getCanReachSubnetIdsWithRouterIdInComponent=function(e){return E.apply(this,arguments)},a.getRouterSelectTablePropsBackend=a.routerSortProps=a.routerFilters=a.getRouterColumns=a.getRouterState=a.routerState=a.routerStatus=void 0;var p=f(r(49)),h=f(r(35)),m=f(r(54)),g=f(r(29)),v=f(r(0)),y=f(r(575)),b=r(1273),_=r(163);function S(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=S(Object(r),!0)).call(a,(function(t){(0,h.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=S(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}var w={ACTIVE:t("Active"),ERROR:t("Error")};a.routerStatus=w;var I={UP:t("Up"),DOWN:t("Down")};a.routerState=I;a.getRouterState=e=>e?t("Up"):t("Down");var C=e=>[{title:t("ID/Name"),dataIndex:"name",routeName:e.getRouteName("routerDetail")},{title:t("Project ID/Name"),dataIndex:"project_name",isHideable:!0,hidden:!e.isAdminPage,sortKey:"project_id"},{title:t("Status"),dataIndex:"status",valueMap:w},{title:t("Open External Gateway"),dataIndex:"hasExternalGateway",valueRender:"yesNo",isHideable:!0,sorter:!1},{title:t("External Network ID/Name"),dataIndex:"externalNetworkName",isHideable:!0,sorter:!1,isLink:!0,idKey:"externalNetworkId",routeName:e.getRouteName("networkDetail")},{title:t("External Fixed IP"),dataIndex:"externalFixedIps",isHideable:!0,sorter:!1,render:e=>(0,m.default)(e).call(e,(e=>v.default.createElement("div",{key:e.ip_address},e.ip_address)))||"-",stringify:e=>(0,m.default)(e).call(e,(e=>e.ip_address)).join(",")||"-"},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime",isHideable:!0,sorter:!1}];a.getRouterColumns=C;var k=[{label:t("Name"),name:"name"},{label:t("Status"),name:"status",options:(0,_.getOptions)(w)}];a.routerFilters=k;var D={isSortByBack:!0,defaultSortKey:"status",defaultSortOrder:"descend"};a.routerSortProps=D;function P(e){return T.apply(this,arguments)}function T(){return(T=(0,p.default)((function*(e){var t={fields:["id","external_gateway_info"],project_id:e};return yield y.default.pureFetchList(t)}))).apply(this,arguments)}function A(){return(A=(0,p.default)((function*(e,t){var a,r=yield P(e);return(0,m.default)(a=(0,g.default)(r).call(r,(e=>e.external_gateway_info&&e.external_gateway_info.network_id===t.floating_network_id))).call(a,(e=>e.id))}))).apply(this,arguments)}function M(e,t){return N.apply(this,arguments)}function N(){return(N=(0,p.default)((function*(e,t){var a=yield P(e);t&&(a=(0,g.default)(a).call(a,t));var r=yield(0,b.getPortsWithFixedIPs)();return{canReachSubnetIdsWithRouterId:(0,b.getSubnetToRouter)(r,a),routerIdWithExternalNetworkInfo:a}}))).apply(this,arguments)}function E(){return(E=(0,p.default)((function*(e){var{canReachSubnetIdsWithRouterId:t,routerIdWithExternalNetworkInfo:a}=yield M(this.currentProjectId,e);return this.setState({canReachSubnetIdsWithRouterId:t,routerIdWithExternalNetworkInfo:a}),t}))).apply(this,arguments)}a.getRouterSelectTablePropsBackend=e=>x(x({},D),{},{columns:C(e),filterParams:k})},1270:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=void 0;var l=i(r(234)),o=i(r(77));r(1750);var s=i(r(656)),u=i(r(616)),d=i(r(619)),c=i(r(618)),f=i(r(606)),p=i(r(134)),h=i(r(177)),m=i(r(0)),g=(r(161),i(r(16))),v=(r(564),i(r(1373))),y=i(r(1500)),b=i(r(133)),_=r(163),S=r(1772),x=r(1773),w=i(r(1777)),I=e=>{var{title:a=t("Error"),type:r="error",description:n="",onClose:i,top:l=48}=e,o="#F5222D",p=null;"info"===r?(o=globalCSS.primaryColor,p=m.default.createElement(f.default,{theme:"filled",style:{color:o}})):"success"===r?(o=globalCSS.successColor,p=m.default.createElement(c.default,{theme:"filled",style:{color:o}})):"error"===r?(o=globalCSS.errorColor,p=m.default.createElement(d.default,{theme:"filled",style:{color:o}})):"process"===r?(o=globalCSS.primaryColor,p=m.default.createElement(u.default,{style:{color:o}})):"warn"===r&&(o=globalCSS.warnColor,p=m.default.createElement(f.default,{theme:"filled",style:{color:o}}));var h="error"===r||"warn"===r?0:4.5;s.default.open({message:(0,_.unescapeHtml)(a),duration:h,icon:p,description:(0,_.unescapeHtml)(n),className:w.default.notify,onClose:i,top:l,style:{whiteSpace:"pre-line"}})};I.propTypes={title:g.default.string,type:g.default.string,description:g.default.string};var C=(e,t)=>{b.default.addNoticeCount(),I({title:e,description:t,type:"error",onClose:()=>{b.default.removeNoticeCount()}})},k={open:I,success:(e,t)=>{I({title:e,description:t,type:"success"})},error:C,warn:(e,t)=>{I({title:e,description:t,type:"warn"})},info:(e,t)=>{I({title:e,description:t,type:"info"})},process:(e,t)=>{I({title:e,description:t,type:"process"})},errorWithDetail:(e,a)=>{var r,{status:n,message:i}=e||{},s=a;if(n&&(0,l.default)(n,10)>=500)if((0,h.default)(i)||S.statusMap[n])s+=S.statusMap[n];else{var u,d;if((0,p.default)(i))s+=(0,o.default)(d="".concat(t("message"))).call(d,t("."));else if(i.reason){var c;s+=(0,o.default)(c="".concat(t("message.reason"))).call(c,t("."))}s+=(0,o.default)(u="".concat(t("Status Code"),": ")).call(u,n)}else{var f=e&&(0,p.default)(e)?(0,x.decode)(e,{level:"html5"}):e;r=e?m.default.createElement(y.default,{style:{float:"right"},buttonType:"link",buttonText:t("Click to show detail"),component:m.default.createElement(v.default,{className:w.default["code-editor"],value:f,mode:"json",options:{readOnly:!0}})}):""}C(s,r)}};a.default=k},1273:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.getSubnetToRouter=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];return(0,l.default)(e).call(e,(e=>{var n;(0,o.default)(t).call(t,(t=>!(a&&!t.external_gateway_info)&&t.id===e.device_id))&&(0,l.default)(n=e.fixed_ips).call(n,(t=>{r.push({subnet_id:t.subnet_id,router_id:e.device_id})}))})),r},a.getPortsWithFixedIPs=function(){return C.apply(this,arguments)},a.getInterfaceWithReason=function(e){return k.apply(this,arguments)},a.saveAndBuildPromisesFromInterfaces=D,a.getReasonForExternalNetworkPortOrAlreadyBindFip=T,a.getFipsFromRouterId=M,a.handleFixedIPChange=function(e){return E.apply(this,arguments)},a.getPortForwardingName=a.portForwardingProtocols=a.getFIPFormItemForAssociate=a.disableFIPAssociate=a.getFIPFormItemExtra=a.getFixedIPFormItemForAssociate=a.transitionStatuses=a.resourceType=a.floatingIpStatus=void 0;var l=i(r(28)),o=i(r(86)),s=i(r(77)),u=i(r(63)),d=i(r(232)),c=i(r(164)),f=i(r(54)),p=i(r(29)),h=i(r(1387)),m=i(r(49)),g=i(r(177)),v=i(r(582)),y=i(r(233)),b=r(565),_=i(r(346)),S=r(1393),{isIPv4:x}=b.ipValidate,w={AVAILABLE:t("Available"),PENDING:t("Pending"),ACTIVE:t("Active"),ERROR:t("Error"),DOWN:t("Down")};a.floatingIpStatus=w;var I={compute:t("Instance"),Octavia:t("Load Balancer"),"network:router_gateway":t("Router"),database:t("Database Instance"),null:"-"};a.resourceType=I;function C(){return(C=(0,m.default)((function*(){return yield v.default.pureFetchList({device_owner:["network:router_interface_distributed","network:router_interface","network:ha_router_replicated_interface"],fields:["fixed_ips","device_id","device_owner"]})}))).apply(this,arguments)}function k(){return(k=(0,m.default)((function*(e){var[t,a,r]=yield D(e);return yield T(t,a,r)}))).apply(this,arguments)}function D(e){return P.apply(this,arguments)}function P(){return(P=(0,m.default)((function*(e){var t=[],a=[],r=[];return(0,l.default)(e).call(e,(e=>{var n,i=e.port_id||e.id,o=e.mac_addr||e.mac_address||"",s=e.net_id||e.network_id;(0,l.default)(n=e.fixed_ips).call(n,(e=>{r.push({port_id:i,fixed_ip_address:e.ip_address,mac_address:o,subnet_id:e.subnet_id,network_id:s}),t.push(y.default.fetchDetail({id:s})),x(e.ip_address)?a.push(_.default.pureFetchList({fixed_ip_address:e.ip_address})):a.push(u.default.resolve([]))}))})),[r,t,a]}))).apply(this,arguments)}function T(e,t,a){return A.apply(this,arguments)}function A(){return(A=(0,m.default)((function*(e,t,a){var r=[...e],n=yield u.default.all(t);(0,l.default)(n).call(n,((e,t)=>{r[t].network_name=e.name}));var i=yield y.default.pureFetchList({"router:external":!0});(0,l.default)(r).call(r,(e=>{(0,d.default)(i).call(i,(t=>{var a;return(0,c.default)(a=t.subnets).call(a,e.subnet_id)}))?e["router:external"]=!0:e["router:external"]=!1}));var o=yield u.default.all(a);return(0,l.default)(o).call(o,((e,t)=>{r[t].floatingIP=e[0]&&e[0].port_id===r[t].port_id&&e[0].floating_ip_address||""})),r}))).apply(this,arguments)}function M(e){return N.apply(this,arguments)}function N(){return(N=(0,m.default)((function*(e){var t,{routerIdWithExternalNetworkInfo:a}=this.state,r=(0,o.default)(a).call(a,(t=>t.id===e.router_id));if(!r.external_gateway_info)return[];var n=r.external_gateway_info.network_id,i=yield _.default.pureFetchList({floating_network_id:n,status:"DOWN",project_id:this.currentProjectId}),l=yield y.default.fetchDetail({id:n});return(0,f.default)(t=(0,p.default)(i).call(i,(e=>!e.fixed_ip_address&&!e.port_details))).call(t,(e=>(e.network_name=l.name,e.name=e.floating_ip_address,e)))}))).apply(this,arguments)}function E(){return(E=(0,m.default)((function*(e){this.setState({fipLoading:!0});var{canReachSubnetIdsWithRouterId:t}=this.state;e.selectedRows.length||this.setState({fixed_ip:null,canAssociateFloatingIPs:[],fipLoading:!1});var a=e.selectedRows[0],r=[],n=(0,p.default)(t).call(t,(e=>e.subnet_id===a.subnet_id)),i=yield u.default.all((0,f.default)(n).call(n,(e=>M.call(this,e))));(0,l.default)(i).call(i,(e=>{r.push(...e)}));var o={};(0,l.default)(r).call(r,(e=>{o[e.id]=e}));var s=(0,h.default)(o);this.setState({fixed_ip:a,canAssociateFloatingIPs:s,fipLoading:!1})}))).apply(this,arguments)}a.transitionStatuses=["PENDING"];a.getFixedIPFormItemForAssociate=(e,a)=>{var{portLoading:r}=a.state;return{name:"fixed_ip",label:e,type:"select-table",required:!0,data:a.ports,isLoading:r,isMulti:!1,filterParams:[{label:t("Ip Address"),name:"name"}],columns:[{title:t("Ip Address"),dataIndex:"name"},{title:t("Mac Address"),dataIndex:"mac_address"},{title:t("Network"),dataIndex:"network_name"},{title:t("Subnet ID"),dataIndex:"subnet_id"},{title:t("Reason"),dataIndex:"reason"}],disabledFunc:e=>!e.available,onChange:a.handleFixedIPChange}};a.getFIPFormItemExtra=()=>(0,S.enablePFW)()?t("The floating IP configured with port forwardings cannot be bound"):"";a.disableFIPAssociate=e=>!!(e.port_forwardings||[]).length;a.getFIPFormItemForAssociate=e=>{var{canAssociateFloatingIPs:a,fipLoading:r}=e.state;return{name:"fip",label:t("Floating Ip Address"),type:"select-table",required:!0,data:a,isLoading:r,isMulti:!1,extra:e.getFIPFormItemExtra(),disabledFunc:e.disableFIPAssociate,filterParams:[{label:t("Floating Ip Address"),name:"name"}],columns:[{title:t("Floating Ip Address"),dataIndex:"name"},{title:t("Network"),dataIndex:"network_name"},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime"}]}};var R={tcp:t("TCP"),udp:t("UDP")};a.portForwardingProtocols=R;a.getPortForwardingName=function(){var e,t,a,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if((0,g.default)(n))return"";var{protocol:l,external_port:o,external_port_range:u,internal_ip_address:d,internal_port:c,internal_port_range:f}=n,p=R[l]||l,h=(0,s.default)(e=(0,s.default)(t="".concat(o||u," => ")).call(t,d,":")).call(e,c||f),m=i?(0,s.default)(a="".concat(i,":")).call(a,h):h;return(0,s.default)(r="".concat(p,": ")).call(r,m)}},1282:function(e,t,a){"use strict";var r=a(162),n=a(20),i=a(25),l=a(21);n(t,"__esModule",{value:!0}),t.default=void 0;var o=l(a(203)),s=l(a(86)),u=l(a(54));a(1315);var d=l(a(1316)),c=l(a(343)),f=l(a(35)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=_(t);if(a&&a.has(e))return a.get(e);var r={},l=n&&i;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=l?i(e,o):null;s&&(s.get||s.set)?n(r,o,s):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(a(0)),h=a(349),m=l(a(4)),g=(a(161),a(163)),v=a(567),y=l(a(1351)),b=l(a(3681));function _(e){if("function"!=typeof r)return null;var t=new r,a=new r;return(_=function(e){return e?a:t})(e)}class S extends p.Component{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),(0,f.default)(this,"handleFetch",((e,t)=>{this.routing.query(e,t)})),(0,f.default)(this,"handleChangeTab",(e=>{this.handleFetch({tab:e},!0)})),this.options=t,this.state={},this.init()}get routing(){return this.props.rootStore.routing}get location(){return this.props.location||{}}get isAdminPage(){var{pathname:e}=this.location;return(0,g.isAdminPage)(e)}get hasAdminRole(){return this.props.rootStore.hasAdminRole}get endpoint(){return""}get checkEndpoint(){return!1}get name(){return""}get endpointError(){return this.checkEndpoint&&!this.endpoint}getRouteName(e){return this.isAdminPage?"".concat(e,"Admin"):e}getRoutePath(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getRouteName(e);return(0,v.getPath)({key:r,params:t,query:a})}getLinkRender(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getRouteName(e);return(0,v.getLinkRender)({key:n,params:a,query:r,value:t})}get tabs(){return[{title:"tab1",key:"tab1",component:null},{title:"tab2",key:"tab2",component:null}]}getTab(){var e,t=(0,h.parse)((0,o.default)(e=this.routing.location.search).call(e,1)),{tab:a}=t;return a}get tab(){var e;if(0===this.tabs.length)return null;var t=this.getTab();return(0,s.default)(e=this.tabs).call(e,(e=>e.key===t))||this.tabs[0]}init(){}renderTabComponent(e){var{component:t,key:a}=e;return t?p.default.createElement(e.component,(0,c.default)({},this.props,{tab:this.tab.key})):p.default.createElement("span",{key:a},a)}renderTab(e,t){return e!==t.key?p.default.createElement(d.default.TabPane,{tab:t.title,key:t.key}):p.default.createElement(d.default.TabPane,{tab:t.title,key:t.key},this.renderTabComponent(t))}renderTabs(){var e;if(!this.tab)return null;if(this.endpointError){var t=this.getRoutePath("overview");return p.default.createElement(y.default,{title:this.name,link:t,endpointError:!0})}var a=(0,u.default)(e=this.tabs).call(e,(e=>this.renderTab(this.tab.key,e)));return p.default.createElement("div",{className:(0,m.default)(b.default.wrapper,this.className)},p.default.createElement(d.default,{activeKey:this.tab.key,onChange:this.handleChangeTab},a))}render(){return this.renderTabs()}}t.default=S},1288:function(e,t,a){"use strict";var r=a(32),n=a(42),i=a(29),l=a(25),o=a(28),s=a(44),u=a(45),d=a(20),c=a(21);d(t,"__esModule",{value:!0}),t.default=t.GroupStore=void 0;var f,p,h,m,g=c(a(28)),v=c(a(86)),y=c(a(32)),b=c(a(63)),_=c(a(29)),S=c(a(54)),x=c(a(25)),w=c(a(49)),I=c(a(58)),C=c(a(74)),k=c(a(35)),D=c(a(55)),P=(c(a(75)),a(36)),T=c(a(50)),A=c(a(53));function M(e,t){var a=r(e);if(n){var o=n(e);t&&(o=i(o).call(o,(function(t){return l(e,t).enumerable}))),a.push.apply(a,o)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=M(Object(r),!0)).call(a,(function(t){(0,k.default)(e,t,r[t])}));else if(s)u(e,s(r));else{var n;o(n=M(Object(r))).call(n,(function(t){d(e,t,l(r,t))}))}}return e}var E=(f=class extends A.default{constructor(){super(...arguments),(0,C.default)(this,"systemRoles",p,this),(0,C.default)(this,"domainRoles",h,this),(0,C.default)(this,"groupUsers",m,this),(0,k.default)(this,"updateUserGroup",((e,t,a,r,n)=>{var i={},{id:l}=e||{};(0,g.default)(t).call(t,(e=>{var{scope:{project:{id:t}={}}={},group:{id:r}={},role:{id:o}={}}=e;if(r===l&&o){var s=(0,v.default)(a).call(a,(e=>e.id===o));if(t)if(i[t])i[t].roles=[...i[t].roles,s];else{var u=(0,v.default)(n).call(n,(e=>e.id===t));i[t]={project:u,roles:[s]}}}}));var o=(0,v.default)(r).call(r,(t=>t.id===e.domain_id));return N(N({},e),{},{projects:i,projectCount:(0,y.default)(i).length,domain:o,domainName:(o||{}).name||e.domain_id})}))}get client(){return T.default.keystone.groups}get domainClient(){return T.default.keystone.domains}get systemGroupClient(){return T.default.keystone.systemGroups}get roleClient(){return T.default.keystone.roles}get roleAssignmentClient(){return T.default.keystone.roleAssignments}get userClient(){return T.default.keystone.users}get projectClient(){return T.default.keystone.projects}get paramsFunc(){return e=>{var{id:t,userId:a,groupId:r,roleId:n,projectId:i,domainId:l,withRole:o,all_projects:s}=e;return(0,I.default)(e,["id","userId","groupId","roleId","projectId","domainId","withRole","all_projects"])}}listFetchByClient(e,t){var{userId:a}=t;return a?this.userClient.groups.list(a,e):this.client.list(e)}edit(e){var t=this;return(0,w.default)((function*(){var{id:a,description:r,name:n}=e,i={group:{description:r,name:n}};return t.submitting(t.client.patch(a,i))}))()}fetchSystemRole(e){var t=this;return(0,w.default)((function*(){var{id:a}=e;t.systemRoles=[];var r=yield t.systemGroupClient.roles.list(a);t.systemRoles=r.roles}))()}assignSystemRole(e){var t=this;return(0,w.default)((function*(){var{id:a,roleId:r}=e;return t.systemGroupClient.roles.update(a,r)}))()}deleteSystemRole(e){var t=this;return(0,w.default)((function*(){var{id:a,roleId:r}=e;return t.systemGroupClient.roles.delete(a,r)}))()}fetchDomainRole(e){var t=this;return(0,w.default)((function*(){var{id:a,domain_id:r}=e;t.domainRoles=[];var n=yield t.domainClient.groups.roles.list(r,a);t.domainRoles=n.roles}))()}assignDomainRole(e){var t=this;return(0,w.default)((function*(){var{id:a,roleId:r,domain_id:n}=e;return t.domainClient.groups.roles.update(n,a,r)}))()}deleteDomainRole(e){var t=this;return(0,w.default)((function*(){var{id:a,roleId:r,domain_id:n}=e;return t.domainClient.groups.roles.delete(n,a,r)}))()}fetchGroupUsers(e){var t=this;return(0,w.default)((function*(){var{id:a}=e,r=yield t.client.users.list(a),{users:n}=r;return t.groupUsers=n,n}))()}deleteGroupUsers(e){var t=this;return(0,w.default)((function*(){var{id:a,userId:r}=e;return t.client.users.delete(a,r)}))()}addGroupUsers(e){var t=this;return(0,w.default)((function*(){var{id:a,userId:r}=e;return t.client.users.update(a,r)}))()}listDidFetch(e,t,a){var r=this;return(0,w.default)((function*(){if(!e.length)return e;var{projectId:t,roleId:n,domainId:i,withRole:l=!0}=a,o={};t&&(o["scope.project.id"]=t),n&&(o["role.id"]=n);var[s,u,d,c]=yield b.default.all([l?r.roleAssignmentClient.list(o):null,l?r.roleClient.list():null,r.domainClient.list(),l?r.projectClient.list():null]),{roles:f=[]}=u||{},{domains:p=[]}=d,{projects:h=[]}=c||{},{role_assignments:m=[]}=s||{},g=e;return i&&(g=(0,_.default)(e).call(e,(e=>e.domain_id===i))),g=(0,S.default)(g).call(g,(e=>r.updateUserGroup(e,m,f,p,h))),t||n?(0,_.default)(g).call(g,(e=>e.projectCount)):g}))()}detailDidFetch(e){var t=this;return(0,w.default)((function*(){var{id:a}=e,[r,n]=yield b.default.all([t.domainClient.list(),t.client.users.list(a)]),{domains:i=[]}=r,{users:l=[]}=n,o=t.updateUserGroup(e,[],[],i,[]);return o.userCount=l.length,o}))()}},p=(0,D.default)(f.prototype,"systemRoles",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=(0,D.default)(f.prototype,"domainRoles",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=(0,D.default)(f.prototype,"groupUsers",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,D.default)(f.prototype,"edit",[P.action],(0,x.default)(f.prototype,"edit"),f.prototype),(0,D.default)(f.prototype,"fetchSystemRole",[P.action],(0,x.default)(f.prototype,"fetchSystemRole"),f.prototype),(0,D.default)(f.prototype,"assignSystemRole",[P.action],(0,x.default)(f.prototype,"assignSystemRole"),f.prototype),(0,D.default)(f.prototype,"deleteSystemRole",[P.action],(0,x.default)(f.prototype,"deleteSystemRole"),f.prototype),(0,D.default)(f.prototype,"fetchDomainRole",[P.action],(0,x.default)(f.prototype,"fetchDomainRole"),f.prototype),(0,D.default)(f.prototype,"assignDomainRole",[P.action],(0,x.default)(f.prototype,"assignDomainRole"),f.prototype),(0,D.default)(f.prototype,"deleteDomainRole",[P.action],(0,x.default)(f.prototype,"deleteDomainRole"),f.prototype),(0,D.default)(f.prototype,"fetchGroupUsers",[P.action],(0,x.default)(f.prototype,"fetchGroupUsers"),f.prototype),(0,D.default)(f.prototype,"deleteGroupUsers",[P.action],(0,x.default)(f.prototype,"deleteGroupUsers"),f.prototype),(0,D.default)(f.prototype,"addGroupUsers",[P.action],(0,x.default)(f.prototype,"addGroupUsers"),f.prototype),f);t.GroupStore=E;var R=new E;t.default=R},1291:function(e,a,r){"use strict";r(20)(a,"__esModule",{value:!0}),a.getNeutronAgentServiceStatus=a.getNeutronAgentServiceState=a.serviceState=a.serviceStatus=void 0;var n={enabled:t("Enabled"),disabled:t("Disabled")};a.serviceStatus=n;var i={up:t("Up"),down:t("Down")};a.serviceState=i;a.getNeutronAgentServiceState=e=>e?i.up:i.down;a.getNeutronAgentServiceStatus=e=>e?n.enabled:n.disabled},1292:function(e,t,a){"use strict";var r=a(32),n=a(42),i=a(29),l=a(25),o=a(28),s=a(44),u=a(45),d=a(20),c=a(21);d(t,"__esModule",{value:!0}),t.default=t.BackupStore=void 0;var f,p,h=c(a(77)),m=c(a(25)),g=c(a(58)),v=c(a(49)),y=c(a(74)),b=c(a(35)),_=c(a(55)),S=(c(a(75)),a(36)),x=c(a(50)),w=c(a(53)),I=a(414);function C(e,t){var a=r(e);if(n){var o=n(e);t&&(o=i(o).call(o,(function(t){return l(e,t).enumerable}))),a.push.apply(a,o)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=C(Object(r),!0)).call(a,(function(t){(0,b.default)(e,t,r[t])}));else if(s)u(e,s(r));else{var n;o(n=C(Object(r))).call(n,(function(t){d(e,t,l(r,t))}))}}return e}var D=(f=class extends w.default{constructor(){super(...arguments),(0,y.default)(this,"currentVolumeSize",p,this),(0,b.default)(this,"updateParamsSortPage",((e,t,a)=>{var r;t&&a&&(e.sort=(0,h.default)(r="".concat(t,":")).call(r,"descend"===a?"desc":"asc"))}))}get client(){return x.default.cinder.backups}get listWithDetail(){return!0}get mapperBeforeFetchProject(){return e=>k(k({},e),{},{project_id:e.project_id||e["os-backup-project-attr:project_id"]})}detailDidFetch(e){return(0,v.default)((function*(){var{volume_id:t}=e;try{var a=new I.VolumeStore,r=yield a.fetchDetail({id:t});e.volume=r,e.volume_name=r.name}catch(e){}return e}))()}get paramsFuncPage(){return e=>{var{current:t,all_projects:a}=e;return k({all_tenants:a},(0,g.default)(e,["current","all_projects"]))}}restore(e,t){var a={restore:t||{}};return this.submitting(this.client.restore(e,a))}setCurrentVolume(e){var{size:t=0}=e||{};this.currentVolumeSize=t||0}},p=(0,_.default)(f.prototype,"currentVolumeSize",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),(0,_.default)(f.prototype,"restore",[S.action],(0,m.default)(f.prototype,"restore"),f.prototype),(0,_.default)(f.prototype,"setCurrentVolume",[S.action],(0,m.default)(f.prototype,"setCurrentVolume"),f.prototype),f);t.BackupStore=D;var P=new D;t.default=P},1293:function(e,t,a){"use strict";var r=a(32),n=a(42),i=a(29),l=a(25),o=a(28),s=a(44),u=a(45),d=a(20),c=a(21);d(t,"__esModule",{value:!0}),t.default=t.MetadataStore=void 0;var f,p,h,m=c(a(63)),g=c(a(54)),v=c(a(28)),y=c(a(25)),b=c(a(49)),_=c(a(74)),S=c(a(35)),x=c(a(55)),w=(c(a(75)),a(36)),I=c(a(50)),C=c(a(53));function k(e,t){var a=r(e);if(n){var o=n(e);t&&(o=i(o).call(o,(function(t){return l(e,t).enumerable}))),a.push.apply(a,o)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=k(Object(r),!0)).call(a,(function(t){(0,S.default)(e,t,r[t])}));else if(s)u(e,s(r));else{var n;o(n=k(Object(r))).call(n,(function(t){d(e,t,l(r,t))}))}}return e}var P=(f=class extends C.default{constructor(){super(...arguments),(0,_.default)(this,"resourceTypes",p,this),(0,_.default)(this,"resourceTypeLoading",h,this)}get client(){return I.default.glance.namespaces}get resourceTypeClient(){return I.default.glance.resourceTypes}get needGetProject(){return!1}listDidFetch(e,t,a){var r=this;return(0,b.default)((function*(){var{manage:t,resource_types:n}=a;if(!t)return e;var i=yield m.default.all((0,g.default)(e).call(e,(e=>{var{namespace:t}=e;return r.client.show(t,{resource_type:n})})));(0,v.default)(e).call(e,((e,t)=>{e.detail=i[t]}));var l=[];return(0,v.default)(e).call(e,(e=>{var t;e.detail.objects?(0,v.default)(t=e.detail.objects).call(t,(t=>{l.push(D(D({},e),{},{detail:t,isObject:!0,objName:t.name,objDescription:t.description}))})):l.push(e)})),l}))()}get mapper(){return e=>{var{visibility:t,namespace:a,display_name:r,resource_type_associations:n=[]}=e;return(0,v.default)(n).call(n,(e=>{e.prefix=e.prefix||""})),D(D({},e),{},{public:"public"===t,id:a,name:r,resource_type_associations:n})}}fetchDetail(e){var t=this;return(0,b.default)((function*(){var{id:a}=e;t.isLoading=!0;var r=yield t.client.show(a);return t.detail=r,t.isLoading=!1,r}))()}edit(e,t){var{id:a}=e;return this.submitting(this.client.update(a,t))}create(e){return this.submitting(this.client.create(e))}fetchResourceTypes(e){var t=this;return(0,b.default)((function*(){t.resourceTypeLoading=!0;var a=yield t.resourceTypeClient.list(),{resource_type_associations:r=[]}=e||{},{resource_types:n=[]}=a,i={};(0,v.default)(r).call(r,(e=>{i[e.name]=e.prefix||""})),(0,v.default)(n).call(n,(e=>{e.id=e.name,i[e.name]&&(e.prefix=i[e.name])})),t.resourceTypes=n,t.resourceTypeLoading=!1}))()}manageResourceTypes(e,t,a){var r=this;return(0,b.default)((function*(){return r.isSubmitting=!0,yield m.default.all((0,g.default)(t).call(t,(t=>r.client.resourceTypes.delete(e,t.name)))),r.submitting(m.default.all((0,g.default)(a).call(a,(t=>{var a={name:t.name,prefix:t.prefix};return r.client.resourceTypes.create(e,a)}))))}))()}},p=(0,x.default)(f.prototype,"resourceTypes",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=(0,x.default)(f.prototype,"resourceTypeLoading",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,x.default)(f.prototype,"fetchDetail",[w.action],(0,y.default)(f.prototype,"fetchDetail"),f.prototype),(0,x.default)(f.prototype,"edit",[w.action],(0,y.default)(f.prototype,"edit"),f.prototype),(0,x.default)(f.prototype,"create",[w.action],(0,y.default)(f.prototype,"create"),f.prototype),(0,x.default)(f.prototype,"fetchResourceTypes",[w.action],(0,y.default)(f.prototype,"fetchResourceTypes"),f.prototype),(0,x.default)(f.prototype,"manageResourceTypes",[w.action],(0,y.default)(f.prototype,"manageResourceTypes"),f.prototype),f);t.MetadataStore=P;var T=new P;t.default=T},1296:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.getFormDefaultValues=a.getFormItems=a.getParamsFromContent=a.getFormItemType=a.getTemplate=a.rollbackTip=a.paramTip=a.yamlTip=a.getYaml=a.validateYaml=a.stackStatus=void 0;var p=f(r(63)),h=f(r(28)),m=f(r(32)),g=f(r(35)),v=f(r(102)),y=f(r(177)),b=f(r(570)),_=f(r(1428)),S=r(342);function x(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}var w={INIT_IN_PROGRESS:t("Init In Progress"),INIT_COMPLETE:t("Init Complete"),INIT_FAILED:t("Init Failed"),CREATE_IN_PROGRESS:t("Create In Progress"),CREATE_COMPLETE:t("Create Complete"),CREATE_FAILED:t("Create Failed"),DELETE_IN_PROGRESS:t("Delete In Progress"),DELETE_COMPLETE:t("Delete Complete"),DELETE_FAILED:t("Delete Failed"),UPDATE_IN_PROGRESS:t("Update In Progress"),UPDATE_COMPLETE:t("Update Complete"),UPDATE_FAILED:t("Update Failed"),ROLLBACK_IN_PROGRESS:t("Rollback In Progress"),ROLLBACK_COMPLETE:t("Rollback Complete"),ROLLBACK_FAILED:t("Rollback Failed"),SUSPEND_IN_PROGRESS:t("Suspend In Progress"),SUSPEND_COMPLETE:t("Suspend Complete"),SUSPEND_FAILED:t("Suspend Failed"),RESUME_IN_PROGRESS:t("Resume In Progress"),RESUME_COMPLETE:t("Resume Complete"),RESUME_FAILED:t("Resume Failed"),ADOPT_IN_PROGRESS:t("Adopt In Progress"),ADOPT_COMPLETE:t("Adopt Complete"),ADOPT_FAILED:t("Adopt Failed"),SNAPSHOT_IN_PROGRESS:t("Snapshot In Progress"),SNAPSHOT_COMPLETE:t("Snapshot Complete"),SNAPSHOT_FAILED:t("Snapshot Failed"),CHECK_IN_PROGRESS:t("Check In Progress"),CHECK_COMPLETE:t("Check Complete"),CHECK_FAILED:t("Check Failed")};a.stackStatus=w;a.validateYaml=(e,a)=>{try{_.default.load(a)}catch(e){return p.default.reject(t("A template is a YAML file that contains configuration information, please enter the correct format."))}return p.default.resolve()};a.getYaml=e=>{try{return _.default.load(e,{schema:_.default.JSON_SCHEMA})}catch(e){return null}};var I=t("A template is a YAML file that contains configuration information.");a.yamlTip=I;var C=t("When your Yaml file is a fixed template, variable variables can be stored in an environment variable file to implement template deployment. The parameters in the environment variable file need to match the parameters defined in the template file.");a.paramTip=C;var k=t('If "Enable" fails to roll back, the resource will be deleted after the creation fails; if "Disable" fails to roll back, the resource will be retained after the creation fails.');a.rollbackTip=k;a.getTemplate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{content:t}=e;return t};var D=e=>{switch(e){case"number":return{type:"input-number"};case"json":return{type:"input-json"};case"boolean":return{type:"radio",options:S.yesNoOptions};default:return{type:"input"}}};a.getFormItemType=D;var P=e=>{try{var t=_.default.load(e);return(0,v.default)(t)&&t.parameters||{}}catch(e){return{}}};a.getParamsFromContent=P;a.getFormItems=e=>{var t=[];try{var a,r=P(e);if((0,y.default)(r))return t;(0,h.default)(a=(0,m.default)(r)).call(a,(e=>{var a=r[e],{type:n="string",description:i="",label:l,hidden:f}=a,p=function(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=x(Object(r),!0)).call(a,(function(t){(0,g.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=x(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}({name:e,label:l||e,extra:i,required:!0,hidden:f},D(n));t.push(p)}))}catch(e){}return t};a.getFormDefaultValues=e=>{var t={};try{var a,r=_.default.load(e);if(!(0,v.default)(r))return t;var n=r.parameters||{};(0,h.default)(a=(0,m.default)(n)).call(a,(e=>{var a=n[e];(0,b.default)(a,"default")?t[e]=a.default:"boolean"===a.type&&(t[e]=!1)}))}catch(e){}return t}},1304:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.StepCreate=void 0;var p=f(r(63)),h=f(r(164)),m=f(r(1252)),g=f(r(54)),v=f(r(609)),y=f(r(77)),b=f(r(28)),_=f(r(32)),S=f(r(91));r(1278);var x=f(r(1279)),w=f(r(343));r(602);var I=f(r(603));r(1354);var C=f(r(428)),k=f(r(58)),D=f(r(49)),P=f(r(35)),T=f(r(134)),A=f(r(1595)),M=f(r(177)),N=f(r(0)),E=r(412),R=r(36),j=(r(161),r(1241)),F=f(r(413)),L=f(r(340)),O=f(r(4)),z=r(1248),B=r(1461),V=r(163),U=f(r(1270)),Q=f(r(3553)),q=f(r(3557)),G=f(r(3560)),K=f(r(3567)),H=f(r(3570));function W(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=W(Object(r),!0)).call(a,(function(t){(0,P.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=W(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}class J extends j.StepAction{constructor(){super(...arguments),(0,P.default)(this,"onCountChange",(e=>{var{data:t}=this.state;this.setState({data:Y(Y({},t),{},{count:e})})})),(0,P.default)(this,"onSubmit",(e=>e?this.store.create(e):(this.errorMsg&&U.default.error(this.errorMsg),p.default.reject()))),(0,P.default)(this,"onOk",(()=>{var{data:e}=this.state;this.values=e;var a=this.getSubmitData(e);a?this.onSubmit(a).then((()=>{this.routing.push(this.listUrl),U.default.success(this.successText)}),(e=>{if(e&&!(0,M.default)(e)){var{response:{data:a}={}}=e||{},{forbidden:{message:r=""}={}}=a||{};r&&(0,T.default)(r)&&(0,h.default)(r).call(r,"Quota exceeded")?U.default.error(t("Quota exceeded")):U.default.errorWithDetail(a,this.errorText)}})):U.default.errorWithDetail(null,this.errorText)}))}init(){this.store=F.default,this.projectStore=L.default,this.state.quotaLoading=!0,this.getQuota(),this.status="success",this.errorMsg=""}static allowed(e,t){var{isAdminPage:a=!1}=t;return p.default.resolve(!a)}getQuota(){var e=this;return(0,D.default)((function*(){e.setState({quotaLoading:!0}),yield p.default.all([e.projectStore.fetchProjectNovaQuota(),e.enableCinder?e.projectStore.fetchProjectCinderQuota():null]),e.setState({quotaLoading:!1}),e.onCountChange(1)}))()}get disableNext(){return!!this.errorMsg}get disableSubmit(){return!!this.errorMsg}get instanceQuota(){var{instances:{left:e=0}={}}=(0,R.toJS)(this.projectStore.novaQuota)||{};return-1===e?1/0:e}get name(){return t("Create instance")}get enableCinder(){return this.props.rootStore.checkEndpoint("cinder")}get listUrl(){var{image:e,volume:t,servergroup:a}=this.locationParams;return e?this.getRoutePath("image"):t?this.getRoutePath("volume"):a?this.getRoutePath("serverGroupDetail",{id:a}):this.getRoutePath("instance")}get hasConfirmStep(){return!1}get steps(){return[{title:t("Base Config"),component:K.default},{title:t("Network Config"),component:G.default},{title:t("System Config"),component:q.default},{title:t("Confirm Config"),component:Q.default}]}get instanceName(){var e,t,{name:a,count:r=1}=(0,m.default)(this)||{};return 1===r?this.unescape(a):this.unescape((0,g.default)(e=(0,v.default)(t=new Array(r)).call(t,r)).call(e,((e,t)=>{var r;return(0,y.default)(r="".concat(a,"-")).call(r,t+1)})).join(", "))}get successText(){return t("The creation instruction was issued successfully, instance: {name}. \n You can wait for a few seconds to follow the changes of the list data or manually refresh the data to get the final display result.",{action:this.name.toLowerCase(),name:this.instanceName})}get showQuota(){return!0}get quotaInfo(){var{quotaLoading:e}=this.state;if(e)return[];var{instances:a={},cores:r={},ram:n={}}=(0,R.toJS)(this.projectStore.novaQuota)||{},{data:i={}}=this.state,{count:l=1}=i,o=this.checkQuotaInput(),s=Y(Y({},a),{},{add:o?0:l,name:"instance",title:t("Instance")}),{newCPU:u,newRam:d}=this.getFlavorInput(),c=Y(Y({},r),{},{add:o?0:u,name:"cpu",title:t("CPU"),type:"line"}),f=Y(Y({},n),{},{add:o?0:d,name:"ram",title:t("Memory (GiB)"),type:"line"}),p=this.getVolumeQuota(),{totalNewCount:h,totalNewSize:m}=this.getVolumeInputMap(),g=Y(Y({},p.volumes),{},{add:o?0:h,name:"volume",title:t("Volume"),type:"line"}),v=Y(Y({},p.gigabytes),{},{add:o?0:m,name:"volumeSize",title:t("Volume Capacity (GiB)"),type:"line"}),y=this.getServerGroupQuota(),b=[s,c,f,g,v];if(y){var{add:_}=y,S=Y(Y({},(0,k.default)(y,["add"])),{},{add:o?0:_});b.push(S)}return b}get errorText(){var{status:e}=this.state;return"error"===e?t("Unable to create instance: insufficient quota to create resources."):this.ipBatchError?t("Unable to create instance: batch creation is not supported when specifying IP."):t("The creation instruction has been issued, please refresh to see the actual situation in the list.")}getVolumeQuota(){var e,t=(0,R.toJS)(this.projectStore.cinderQuota)||{},a={};return(0,b.default)(e=(0,_.default)(t)).call(e,(e=>{((0,h.default)(e).call(e,"volumes")||(0,h.default)(e).call(e,"gigabytes"))&&(a[e]=t[e])})),a}getQuotaMessage(e,a,r){var{left:n=0}=a||{};return-1===n?"":e>n?t("Insufficient {name} quota to create resources (left { quota }, input { input }).",{name:r,quota:n,input:e}):""}getVolumeInputMap(){var{data:e}=this.state,{systemDisk:t={},dataDisk:a=[],count:r=1,source:{value:n}={},instanceSnapshotDisk:i={},instanceSnapshotDataVolumes:l=[],bootFromVolume:o=!0}=e,s={},u={},d=0,c=0,f="instanceSnapshot"===n;if(f&&i){var{size:p,typeOption:{label:h}={}}=i;h&&o&&(s[h]=s[h]?s[h]+1:1,u[h]=u[h]?u[h]+p:p,d+=1*r,c+=p*r)}else if(t.type&&o){var{size:m}=t,{label:g}=t.typeOption||{};s[g]=s[g]?s[g]+1:1,u[g]=u[g]?u[g]+m:m,d+=1*r,c+=m*r}if(a||f&&(null==l?void 0:l.length)>0){var v=(0,B.getAllDataDisks)({dataDisk:a,instanceSnapshotDataVolumes:l});(0,b.default)(v).call(v,(e=>{var t=e.value||{};if(t.type){var{size:a,typeOption:n}=t,{label:i}=n||{};s[i]=s[i]?s[i]+1*r:1*r,u[i]=u[i]?u[i]+a*r:a*r,d+=1*r,c+=a*r}}))}return{totalNewCount:d,totalNewSize:c,newCountMap:s,newSizeMap:u}}checkVolumeQuota(){var e,a;if(!this.enableCinder)return"";var r="",{totalNewCount:n,totalNewSize:i,newCountMap:l,newSizeMap:o}=this.getVolumeInputMap(),s=this.getVolumeQuota(),u=this.getQuotaMessage(n,s.volumes,t("volume"));if(u)return u;var d=this.getQuotaMessage(i,s.gigabytes,t("volume capacity"));return d||((0,b.default)(e=(0,_.default)(l)).call(e,(e=>{var a=this.getQuotaMessage(l[e],s["volumes_".concat(e)],t("volume type {type}",{type:e}));a&&(r=a)})),r||((0,b.default)(a=(0,_.default)(o)).call(a,(e=>{var a=this.getQuotaMessage(o[e],s["gigabytes_".concat(e)],t("volume type {type} capacity",{type:e}));a&&(r=a)})),r))}getFlavorInput(){var{data:e}=this.state,{flavor:t={},count:a=1}=e,{selectedRows:r=[]}=t,{vcpus:n=0,ram:i=0}=r[0]||{};return{newCPU:n*a,newRam:(0,V.getGiBValue)(i)*a}}checkFlavorQuota(){var{newCPU:e,newRam:a}=this.getFlavorInput(),{cores:r={},ram:n={}}=this.projectStore.novaQuota,{left:i=0}=r||{},{left:l=0}=n||{};return-1!==i&&i<e?this.getQuotaMessage(e,r,t("CPU")):-1!==l&&l<a?this.getQuotaMessage(a,n,t("Memory")):""}getServerGroupQuota(){var{data:e}=this.state,{serverGroupRow:a,count:r=1}=e;if(!a)return null;var{server_group_members:{limit:n=0}={}}=this.projectStore.novaQuota,{members:i=[]}=a||{},l=i.length;return{add:r,used:l,limit:n,left:-1===n?-1:n-l,title:t("Server Group Member"),name:"serverGroupMember",type:"line"}}checkSeverGroupQuota(){var e=this.getServerGroupQuota();if(!e)return"";var{add:a,left:r}=e||{};return-1!==r&&r<a?this.getQuotaMessage(a,e,t("Server Group Member")):""}get badgeStyle(){return{marginTop:8,marginBottom:8,marginLeft:10,maxWidth:600}}checkInstanceQuota(){var{quotaLoading:e}=this.state;if(e)return"";var{instances:a={}}=this.projectStore.novaQuota||{};return 0===this.instanceQuota?this.getQuotaMessage(1,a,t("Instance")):""}checkQuotaInput(){var e=this.checkInstanceQuota(),t=this.checkFlavorQuota(),a=this.checkVolumeQuota(),r=this.checkSeverGroupQuota(),n=e||t||a||r;return n?(this.status="error",this.errorMsg!==n&&C.default.error(n),this.errorMsg=n,n):(this.status="success",this.errorMsg="","")}renderBadge(){var e=this.checkQuotaInput();return"success"===this.status?null:N.default.createElement("div",{style:this.badgeStyle},N.default.createElement(I.default,{status:"error",text:e}))}renderExtra(){return null}getCountInputConfig(){var{data:e}=this.state,{source:{value:t}={}}=e;return{min:1,max:"bootableVolume"===t?1:(0,A.default)(this.instanceQuota)?this.instanceQuota:100,precision:0,onChange:this.onCountChange,formatter:e=>"$ ".concat(e).replace(/\D/g,"")}}renderCountInput(){var{data:e}=this.state,{count:a=1}=e||{},r=this.getCountInputConfig();return N.default.createElement("div",{className:H.default["number-input"]},N.default.createElement("span",null,t("Count")),N.default.createElement(x.default,(0,w.default)({},r,{value:a,className:(0,O.default)(H.default.input,"instance-count")})))}renderFooterLeft(){return N.default.createElement("div",{style:{display:"flex"}},N.default.createElement("div",{style:{display:"flex",alignItems:"center"}},this.renderCountInput(),this.renderExtra()),this.renderBadge())}getVolumeAndImageData(e){if("error"===this.status)return null;var{bootableVolume:t,dataDisk:a,image:r,instanceSnapshot:n,instanceSnapshotDisk:i,source:l,systemDisk:o,bootFromVolume:s=!0,deleteVolumeInstance:u}=e,{value:d}=l,c="bootableVolume"===d?null:"image"===d?r.selectedRowKeys[0]:n.selectedRowKeys[0];if(!this.enableCinder)return{imageRef:c};var f={};if("bootableVolume"!==d){if(s){var{deleteType:p,type:h,size:m}=o||{};f={boot_index:0,uuid:c,source_type:"image",volume_size:m,destination_type:"volume",volume_type:h,delete_on_termination:1===p},"instanceSnapshot"===d&&i&&(delete f.volume_size,delete f.volume_type,delete f.delete_on_termination)}}else f={boot_index:0,uuid:t.selectedRowKeys[0],source_type:"volume",destination_type:"volume",delete_on_termination:u};var v=a?(0,g.default)(a).call(a,(e=>{var{size:t,type:a,deleteType:r}=e.value||{};return{source_type:"blank",volume_size:t,destination_type:"volume",volume_type:a,delete_on_termination:1===r}})):[];return"image"===d&&"iso"===r.selectedRows[0].disk_format&&v[0]&&s&&(v[0].boot_index=0,v[0].device_type="disk",f.boot_index=1,f.device_type="cdrom"),{volumes:(0,M.default)(f)?[...v]:[f,...v],imageRef:c}}getNetworkData(e){var{networks:t=[],ports:a={}}=e,r=!1,n=[];(0,b.default)(t).call(t,(e=>{var t={uuid:e.value.network};1===e.value.ipType&&e.value.ip&&(t.fixed_ip=e.value.ip,r=!0),n.push(t)}));var{selectedRowKeys:i=[]}=a||{};return(0,b.default)(i).call(i,(e=>{var t={port:e};n.push(t)})),{data:n,hasIp:r}}getSubmitData(e){if("error"===this.status)return null;var{volumes:t,imageRef:a}=this.getVolumeAndImageData(e),{data:r,hasIp:n}=this.getNetworkData(e),{availableZone:i,keypair:l,loginType:o,password:s,physicalNode:u,physicalNodeType:d,securityGroup:c,flavor:f,userData:p="",serverGroup:h,name:m,count:v=1,bootFromVolume:y=!0}=e;if(n&&v>1)return this.ipBatchError=!0,null;var{selectedRows:b=[]}=c||{},_={security_groups:(0,g.default)(b).call(b,(e=>({name:e.id}))),name:m,flavorRef:f.selectedRowKeys[0],availability_zone:i.value,networks:r};if(this.enableCinder&&(_.block_device_mapping_v2=t),!a||t&&y||(_.imageRef=a),"keypair"===o.value?_.key_name=l.selectedRowKeys[0]:_.adminPass=s,v>1&&(_.min_count=v,_.max_count=v,_.return_reservation_id=!0),"smart"!==d.value&&(_.hypervisor_hostname=u.selectedRows[0].hypervisor_hostname),_.adminPass||p){var{username:S}=e;_.user_data=btoa((0,z.getUserData)(_.adminPass,p,S||"root"))}var x={server:_};return h&&h.selectedRowKeys.length>0&&(x["OS-SCH-HNT:scheduler_hints"]={group:h.selectedRowKeys[0]}),x}}a.StepCreate=J,(0,P.default)(J,"id","instance-create"),(0,P.default)(J,"title",t("Create Instance")),(0,P.default)(J,"path",((e,t)=>{var a,{detail:r,match:n}=t||{};return!r||(0,M.default)(r)?"/compute/instance/create":(0,S.default)(a=n.path).call(a,"/compute/server")>=0?"/compute/instance/create?servergroup=".concat(r.id):void 0})),(0,P.default)(J,"policy",["os_compute_api:servers:create","os_compute_api:os-availability-zone:list"]);var Z=(0,E.inject)("rootStore")((0,E.observer)(J));a.default=Z},1319:function(e,t,a){"use strict";var r=a(32),n=a(42),i=a(29),l=a(25),o=a(28),s=a(44),u=a(45),d=a(20),c=a(21);d(t,"__esModule",{value:!0}),t.default=t.AvailabilityZoneStore=void 0;var f,p=c(a(28)),h=c(a(32)),m=c(a(54)),g=c(a(25)),v=c(a(35)),y=c(a(49)),b=c(a(55)),_=c(a(1314)),S=c(a(177)),x=a(36),w=c(a(50)),I=c(a(53));function C(e,t){var a=r(e);if(n){var o=n(e);t&&(o=i(o).call(o,(function(t){return l(e,t).enumerable}))),a.push.apply(a,o)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=C(Object(r),!0)).call(a,(function(t){(0,v.default)(e,t,r[t])}));else if(s)u(e,s(r));else{var n;o(n=C(Object(r))).call(n,(function(t){d(e,t,l(r,t))}))}}return e}var D=(f=class extends I.default{get client(){return w.default.nova.zone}get listResponseKey(){return this.responseKey}get listWithDetail(){return!0}get mapper(){return e=>{var{available:t}=e.zoneState;return e.available=t,e}}listDidFetch(e){return(0,y.default)((function*(){var t=[];return(0,p.default)(e).call(e,(e=>{var{hosts:a}=e;if((0,_.default)(a))t.push(e);else{var r,n={};(0,p.default)(r=(0,h.default)(a)).call(r,(e=>{var t=a[e];t["nova-compute"]&&(n[e]=t)})),(0,S.default)(n)||t.push(k(k({},e),{},{host:n}))}})),t}))()}fetchListWithoutDetail(){var e=this;return(0,y.default)((function*(){var t=(yield e.client.list())[e.listResponseKey];e.list.data=(0,m.default)(t).call(t,e.mapper)}))()}},(0,b.default)(f.prototype,"fetchListWithoutDetail",[x.action],(0,g.default)(f.prototype,"fetchListWithoutDetail"),f.prototype),f);t.AvailabilityZoneStore=D;var P=new D;t.default=P},1320:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.hasEncryption=a.volumeTypeSelectProps=a.volumeTypeFilters=a.volumeTypeColumns=a.controls=a.creationMethod=a.consumerTypes=void 0;var l=i(r(177)),o=r(566),s={"front-end":t("Frontend"),"back-end":t("Backend"),both:t("Both of Frontend and Backend")};a.consumerTypes=s;var u={manu:t("Manu"),auto:t("Auto")};a.creationMethod=u;var d={"front-end":t("Front End"),"back-end":t("Back End")};a.controls=d;var c=[{title:t("Name"),dataIndex:"name"},{title:t("Description"),dataIndex:"description",isHideable:!0,valueRender:"noValue"},{title:t("Public"),dataIndex:"is_public",valueRender:"yesNo"},{title:t("Shared"),dataIndex:"multiattach",valueRender:"yesNo",titleTip:o.multiTip,width:120}];a.volumeTypeColumns=c;var f=[{label:t("Name"),name:"name"}];a.volumeTypeFilters=f;var p={columns:c,filterParams:f};a.volumeTypeSelectProps=p;a.hasEncryption=e=>{var{encryption:t}=e||{};return!(!t||(0,l.default)(t))&&!t.deleted_at}},1326:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.securityGroupFilter=a.securityGroupColumns=void 0;var l=i(r(0)),o=i(r(3561)),s=[{title:t("Name"),dataIndex:"name"},{title:t("Description"),dataIndex:"description"},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime"},{title:t("Rules"),dataIndex:"rules",render:(e,t)=>l.default.createElement(o.default,{item:t})}];a.securityGroupColumns=s;var u=[{label:t("Name"),name:"name"}];a.securityGroupFilter=u},1327:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.default=t.SettingStore=void 0;var i,l=n(a(29)),o=n(a(25)),s=n(a(49)),u=n(a(55)),d=a(36),c=n(a(50)),f=n(a(53)),p=(i=class extends f.default{get client(){return c.default.skyline.setting}listDidFetch(e){return(0,s.default)((function*(){return(0,l.default)(e).call(e,(e=>!e.hidden))}))()}update(e){return this.submitting(this.client.update(null,e))}},(0,u.default)(i.prototype,"update",[d.action],(0,o.default)(i.prototype,"update"),i.prototype),i);t.SettingStore=p;var h=new p;t.default=h},1353:function(e,t,a){"use strict";var r=a(32),n=a(42),i=a(29),l=a(25),o=a(28),s=a(44),u=a(45),d=a(20),c=a(21);d(t,"__esModule",{value:!0}),t.default=t.InstanceVolumeStore=void 0;var f=c(a(54)),p=c(a(63)),h=c(a(28)),m=c(a(49)),g=c(a(58)),v=c(a(35)),y=c(a(50)),b=c(a(53)),_=a(163),S=a(566);function x(e,t){var a=r(e);if(n){var o=n(e);t&&(o=i(o).call(o,(function(t){return l(e,t).enumerable}))),a.push.apply(a,o)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=x(Object(r),!0)).call(a,(function(t){(0,v.default)(e,t,r[t])}));else if(s)u(e,s(r));else{var n;o(n=x(Object(r))).call(n,(function(t){d(e,t,l(r,t))}))}}return e}class I extends b.default{constructor(){super(...arguments),(0,v.default)(this,"getFatherResourceId",(e=>e.serverId))}get client(){return y.default.nova.servers.volumeAttachments}get isSubResource(){return!0}get paramsFunc(){return e=>{var{id:t,serverId:a,all_projects:r,projectId:n,serverName:i}=e;return(0,g.default)(e,["id","serverId","all_projects","projectId","serverName"])}}get mapperBeforeFetchProject(){return(e,t)=>{var{projectId:a}=t;return w(w({},e),{},{project_id:a})}}get mapper(){return e=>(0,S.updateVolume)(e)}get groupArraySize(){return 10}listDidFetch(e,t){var a=this;return(0,m.default)((function*(){if(0===e.length)return e;var r=(0,f.default)(e).call(e,(e=>e.volumeId)),n=(0,_.groupArray)(r,a.groupArraySize),i=yield p.default.all((0,f.default)(n).call(n,(e=>{var r={uuid:e,all_projects:t};return a.skylineClient.extension.volumes(r)}))),l=[];return(0,h.default)(i).call(i,(e=>{l.push(...e.volumes)})),l}))()}}t.InstanceVolumeStore=I;var C=new I;t.default=C},1355:function(e,a,r){"use strict";r(20)(a,"__esModule",{value:!0}),a.default=void 0;var n={"anti-affinity":t("Anti-Affinity"),affinity:t("Affinity"),"soft-anti-affinity":t("Soft-Anti-Affinity"),"soft-affinity":t("Soft-Affinity")};a.default=n},1356:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.fetchQuota=function(e){return C.apply(this,arguments)},a.checkQuotaDisable=a.getQuotaInfo=a.getAdd=a.getQuota=a.restoreTip=a.modeTip=a.backupModeList=a.createTip=a.backupStatus=void 0;var p=f(r(35)),h=f(r(49)),m=f(r(0)),g=f(r(340)),v=f(r(1292));function y(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=y(Object(r),!0)).call(a,(function(t){(0,p.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=y(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}var _={available:t("Available"),error:t("Error"),updating:t("Updating"),deleting:t("Deleting"),error_deleting:t("Error Deleting"),restoring:t("Restoring"),creating:t("Creating")};a.backupStatus=_;var S=m.default.createElement("span",null,m.default.createElement("span",{style:{fontWeight:600}},t("When you do online backup of the volume that has been bound, you need to pay attention to the following points:")),m.default.createElement("p",null,t("1. The backup can only capture the data that has been written to the volume at the beginning of the backup task, excluding the data in the cache at that time.")),m.default.createElement("p",null,t("2. To ensure the integrity of the data, it is recommended that you suspend the write operation of all files when creating a backup.")));a.createTip=S;var x=[{value:!1,label:t("Full Backup")},{value:!0,label:t("Increment Backup")}];a.backupModeList=x;var w=t("Create a full backup, the system will automatically create a new backup chain, the full backup name is the backup chain name; Create an incremental backup, the system will automatically create an incremental backup under the newly created backup chain.");a.modeTip=w;var I=m.default.createElement("span",null,m.default.createElement("span",{style:{fontWeight:600}},t("When you restore a backup, you need to meet one of the following conditions:")),m.default.createElement("p",null,t("1. The volume associated with the backup is available.")),m.default.createElement("p",null,t("2. The volume associated with the backup has been mounted, and the instance is shut down.")));function C(){return(C=(0,h.default)((function*(e){e.setState({quota:{},quotaLoading:!0});var t=yield g.default.fetchProjectCinderQuota();e.setState({quota:t,quotaLoading:!1})}))).apply(this,arguments)}a.restoreTip=I;var k=e=>{var{backups:t={},backup_gigabytes:a={}}=e||{};return{backups:t,gigabytes:a}};a.getQuota=k;var D=e=>{var{backups:t,gigabytes:a}=k(e),{left:r=0}=t||{},{left:n=0,limit:i}=a||{},{currentVolumeSize:l=0}=v.default,o=0!==r&&(0!==n&&(-1===i||n>=l))?1:0;return{add:o,addSize:1===o?l:0}};a.getAdd=D;a.getQuotaInfo=e=>{var{quota:a={},quotaLoading:r}=e.state;if(r)return[];var{backups:n={},gigabytes:i={}}=k(a),{add:l,addSize:o}=D(a);return[b(b({},n),{},{add:l,name:"backup",title:t("Volume Backup")}),b(b({},i),{},{add:o,name:"gigabytes",title:t("Volume Backup Capacity (GiB)"),type:"line"})]};a.checkQuotaDisable=()=>{var{cinderQuota:e={}}=g.default,{add:t}=D(e);return 0===t}},1357:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.getQoSPolicyTabs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=w({backendPageStore:this.qosPolicyStore},e),r=[{title:t("Current Project QoS Policies"),key:"project",props:(0,b.default)({},a,w(w({},P({self:this})),{},{extraParams:{project_id:this.currentProjectId}}))},{title:t("Shared QoS Policies"),key:"shared",props:(0,b.default)({},a,w(w({},P({shared:!0,self:this})),{},{extraParams:{shared:!0}}))}];this.hasAdminRole&&r.push({title:t("All QoS Policies"),key:"all",props:(0,b.default)({},a,w(w({},P({all:!0,self:this})),{},{extraParams:{all_projects:!0}}))});return r},a.getQosPolicySelectTableProps=a.qosPolicySortProps=a.getQosPolicyFilters=a.getQosPolicyColumns=void 0;var p=f(r(77)),h=f(r(54)),m=f(r(573)),g=f(r(35));r(1246);var v=f(r(1247));r(1244);var y=f(r(1245)),b=f(r(607)),_=f(r(0)),S=(r(161),r(342));function x(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=x(Object(r),!0)).call(a,(function(t){(0,g.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=x(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}var I=e=>{var a,r,n,i,l,o,s,u,d;return"egress"===e.direction?(0,p.default)(o=(0,p.default)(s=(0,p.default)(u=(0,p.default)(d="".concat(t("Egress"),": ")).call(d,t("Max BandWidth"),": ")).call(u,e.max_kbps/1024," Mbps; ")).call(s,t("Max Burst"),": ")).call(o,e.max_burst_kbps/1024," Mbps"):"ingress"===e.direction?(0,p.default)(a=(0,p.default)(r=(0,p.default)(n=(0,p.default)(i="".concat(t("Ingress"),": ")).call(i,t("Max BandWidth"),": ")).call(n,e.max_kbps/1024," Mbps; ")).call(r,t("Max Burst"),": ")).call(a,e.max_burst_kbps/1024," Mbps"):(0,p.default)(l="".concat(t("DSCP Marking"),": ")).call(l,e.dscp_mark)},C=e=>{var{self:a,all:r=!1}=e,n=[{title:t("ID/Name"),dataIndex:"name",routeName:a.getRouteName("networkQosDetail")},{title:t("Description"),dataIndex:"description",sorter:!1},{title:t("Rules Number"),dataIndex:"rulesNumber",render:(e,t)=>t.rules.length,isHideable:!0,sorter:!1},{title:t("Rules"),dataIndex:"rules",render:e=>e.length?_.default.createElement(v.default,null,(0,h.default)(e).call(e,(e=>_.default.createElement(y.default,{span:24,key:e.direction},I(e))))):"-",sorter:!1,stringify:e=>e.length?(0,h.default)(e).call(e,(e=>I(e))).join("\n"):"-"},{title:t("Shared"),dataIndex:"shared",valueRender:"yesNo",width:80,sorter:!1},{title:t("Default Policy"),dataIndex:"is_default",valueRender:"yesNo",isHideable:!0,width:100,sorter:!1},{title:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime",isHideable:!0,sorter:!1}];return r&&a.isAdminPage&&(0,m.default)(n).call(n,2,0,{title:t("Project ID/Name"),dataIndex:"project_name",sortKey:"project_id"}),n};a.getQosPolicyColumns=C;var k=e=>{var{self:a,shared:r=!1}=e,n=[{label:t("Name"),name:"name"},{label:t("Description"),name:"description"}];return r||n.push({label:t("Shared"),name:"shared",options:S.yesNoOptions}),a.hasAdminRole&&n.push({label:t("Project ID"),name:"tenant_id"}),n};a.getQosPolicyFilters=k;var D={isSortByBack:!0,defaultSortKey:"name",defaultSortOrder:"descend"};a.qosPolicySortProps=D;var P=e=>{var{self:t,all:a,shared:r}=e;return w(w({},D),{},{columns:C({self:t,all:a}),filterParams:k({self:t,shared:r})})};a.getQosPolicySelectTableProps=P},1373:function(e,t,a){"use strict";var r=a(162),n=a(20),i=a(25),l=a(21);n(t,"__esModule",{value:!0}),t.default=void 0;var o=l(a(164)),s=l(a(28)),u=l(a(32)),d=l(a(345)),c=l(a(343)),f=l(a(35)),p=l(a(134)),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=_(t);if(a&&a.has(e))return a.get(e);var r={},l=n&&i;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=l?i(e,o):null;s&&(s.get||s.set)?n(r,o,s):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(a(0)),m=l(a(16)),g=l(a(4)),v=a(1495),y=l(a(1753)),b=l(a(1755));function _(e){if("function"!=typeof r)return null;var t=new r,a=new r;return(_=function(e){return e?a:t})(e)}var S=e=>{if(!(0,p.default)(e))return e;if((0,o.default)(e).call(e,"<html>")){var t=/<\/h1>[\r\n]([\s\S]*)<\/body>/.exec(e);if(t)return t[1].replace(/<br \/>/g,"")}try{return JSON.parse(e)}catch(t){return e}},x=(e,t)=>{var a;return(0,p.default)(e)?S(e):((0,s.default)(a=(0,u.default)(e)).call(a,(t=>{(0,p.default)(e[t])&&(e[t]=S(e[t]))})),"json"===t?(0,d.default)(e,null,2):"yaml"===t?(0,v.getValue)(e):e)};class w extends h.PureComponent{constructor(e){super(e),(0,f.default)(this,"handleChange",(e=>{var{onChange:t}=this.props;t(e)})),this.state={value:x(e.value,e.mode),originValue:e.value}}static getDerivedStateFromProps(e,t){var{value:a,mode:r}=e;return a!==t.originValue?{value:x(a,r),originValue:a}:null}render(){var{className:e,mode:t,options:a}=this.props;return h.default.createElement(b.default,(0,c.default)({},a,{className:(0,g.default)(y.default.editor,e),value:this.state.value,mode:t,onChange:this.handleChange}))}}(0,f.default)(w,"propTypes",{value:m.default.oneOfType([m.default.string,m.default.object,m.default.array]),mode:m.default.string,options:m.default.object,onChange:m.default.func}),(0,f.default)(w,"defaultProps",{value:{},mode:"yaml",options:{},onChange(){}});var I=w;t.default=I},1388:function(e,t,a){"use strict";var r=a(162),n=a(20),i=a(25),l=a(21);n(t,"__esModule",{value:!0}),t.default=void 0;var o=l(a(54)),s=l(a(343)),u=l(a(49)),d=l(a(35)),c=l(a(205)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=v(t);if(a&&a.has(e))return a.get(e);var r={},l=n&&i;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=l?i(e,o):null;s&&(s.get||s.set)?n(r,o,s):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(a(0)),p=l(a(16)),h=a(163),m=l(a(1436)),g=a(1435);function v(e){if("function"!=typeof r)return null;var t=new r,a=new r;return(v=function(e){return e?a:t})(e)}class y extends f.Component{static propTypes(){return{visibleButtonNumber:p.default.number,primaryActions:p.default.array,onFinishAction:p.default.func,onCancelAction:p.default.func,routing:p.default.object.isRequired,containerProps:p.default.object,onClickAction:p.default.func,primaryActionsExtra:p.default.any}}constructor(e){super(e),(0,d.default)(this,"onClickAction",(()=>{var{onClickAction:e}=this.props;e&&e()})),this.state={primaryAllowedResults:[]},this.actionList=this.getActionList(e)}componentDidMount(){this.getActionsAllowed()}componentDidUpdate(e){(0,c.default)(e,this.props)||this.getActionsAllowed()}getActionsAllowed(){var e=this;return(0,u.default)((function*(){var{containerProps:t,primaryActionsExtra:a,isAdminPage:r}=e.props,{detail:n=null}=t,i=yield(0,g.getAllowedResults)({actions:e.actionList,data:n,containerProps:t,key:null,extra:a,isAdminPage:r});e.setState({primaryAllowedResults:i})}))()}getActionList(e){var{primaryActions:t,containerProps:a}=e;return(0,o.default)(t).call(t,(e=>(0,g.getAction)(e,null,a)))}render(){var e,{primaryAllowedResults:t}=this.state,{onFinishAction:a,routing:r,containerProps:n,onCancelAction:i,onClickAction:l}=this.props,u=(0,o.default)(e=this.actionList).call(e,((e,o)=>{var u="primary-".concat((0,h.generateId)()),{id:d,title:c,buttonType:p,actionType:g,buttonText:v,isDanger:y}=e,b={id:d,title:c,name:v||c,buttonType:p,isDanger:y,actionType:g,action:e};return f.default.createElement(m.default,(0,s.default)({},b,{key:u,isAllowed:t[o],onFinishAction:a,routing:r,containerProps:n,onClickAction:l,onCancelAction:i}))}));return f.default.createElement(f.default.Fragment,null,u)}}t.default=y,(0,d.default)(y,"defaultProps",{visibleButtonNumber:3,primaryActions:[],onFinishAction:null,onCancelAction:null,containerProps:{},primaryActionsExtra:null})},1389:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.hypervisorFilters=a.hypervisorColumns=void 0;var l=i(r(77));r(344);var o=i(r(202)),s=i(r(0)),u=i(r(1462)),d=(r(161),[{title:t("Hostname"),dataIndex:"service_host"},{title:t("Type"),dataIndex:"hypervisor_type"},{title:t("VCPU (Core)"),dataIndex:"vcpus_used_percent",render:(e,a)=>{var r;return"ironic"===a.hypervisor_type?s.default.createElement(o.default,{title:t("vCPUs and ram are not used for bare metal scheduling")},s.default.createElement("span",null,"-")):s.default.createElement(u.default,{value:e,label:(0,l.default)(r="".concat(a.vcpus_used," / ")).call(r,a.vcpus)})},width:180,stringify:(e,a)=>{var r,n,i,o;return"ironic"===a.hypervisor_type?"-":(0,l.default)(r=(0,l.default)(n=(0,l.default)(i=(0,l.default)(o="".concat(e,"% (")).call(o,t("Used"),": ")).call(i,a.vcpus_used," / ")).call(n,t("Total"),": ")).call(r,a.vcpus,")")}},{title:t("Configured Memory (GiB)"),dataIndex:"memory_mb_percent",render:(e,a)=>{var r;return"ironic"===a.hypervisor_type?s.default.createElement(o.default,{title:t("vCPUs and ram are not used for bare metal scheduling")},s.default.createElement("span",null,"-")):s.default.createElement(u.default,{value:e,label:(0,l.default)(r="".concat(a.memory_mb_used_gb," / ")).call(r,a.memory_mb_gb)})},width:180,stringify:(e,a)=>{var r,n,i,o;return"ironic"===a.hypervisor_type?"-":(0,l.default)(r=(0,l.default)(n=(0,l.default)(i=(0,l.default)(o="".concat(e,"% (")).call(o,t("Used"),": ")).call(i,a.memory_mb_used_gb," / ")).call(n,t("Total"),": ")).call(r,a.memory_mb_gb,")")}},{title:t("Instances"),dataIndex:"running_vms"}]);a.hypervisorColumns=d;var c=[{label:t("Hostname"),name:"service_host"},{label:t("Type"),name:"hypervisor_type"}];a.hypervisorFilters=c},1391:function(e,t,a){"use strict";var r=a(32),n=a(42),i=a(29),l=a(25),o=a(28),s=a(44),u=a(45),d=a(20),c=a(21);d(t,"__esModule",{value:!0}),t.default=t.InstanceSnapshotStore=void 0;var f=c(a(29)),p=c(a(63)),h=c(a(28)),m=c(a(86)),g=c(a(54)),v=c(a(49)),y=c(a(58)),b=c(a(35)),_=c(a(1350)),S=c(a(50)),x=a(574),w=c(a(53));function I(e,t){var a=r(e);if(n){var o=n(e);t&&(o=i(o).call(o,(function(t){return l(e,t).enumerable}))),a.push.apply(a,o)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=I(Object(r),!0)).call(a,(function(t){(0,b.default)(e,t,r[t])}));else if(s)u(e,s(r));else{var n;o(n=I(Object(r))).call(n,(function(t){d(e,t,l(r,t))}))}}return e}class k extends w.default{constructor(){super(...arguments),(0,b.default)(this,"updateParamsSortPage",((e,t,a)=>{t&&a&&(e.sort_key=t,e.sort_dir="descend"===a?"desc":"asc")})),(0,b.default)(this,"updateParamsSort",this.updateParamsSortPage)}get client(){return S.default.glance.images}get listFilterByProject(){return!0}get fetchListByLimit(){return!0}get paramsFunc(){return this.paramsFuncPage}get paramsFuncPage(){return(e,t)=>{var{id:a,current:r,owner:n}=e,i=C({},(0,y.default)(e,["id","current","owner"]));return n?i.owner=n:t||(i.owner=this.currentProjectId),i}}get mapperBeforeFetchProject(){return e=>C(C({},e),{},{project_name:e.owner_project_name||e.project_name,project_id:e.owner||e.project_id})}listDidFetch(e,t,a){return(0,v.default)((function*(){if(0===e.length)return e;var r=(0,f.default)(e).call(e,x.isSnapshot),{id:n}=a;if(!n)return r;var i={all_tenants:t},l=yield p.default.all([S.default.cinder.snapshots.list(i),S.default.nova.servers.volumeAttachments.list(n,{})]),o=l[0].snapshots,s=l[1].volumeAttachments,u=[];return(0,h.default)(r).call(r,(e=>{var{block_device_mapping:t="[]",instance_id:a}=e;if(a===n)u.push(e);else{var r,i=(0,m.default)(r=JSON.parse(t)).call(r,(e=>0===e.boot_index));if(i){e.snapshotId=i.snapshot_id;var l=(0,m.default)(o).call(o,(e=>e.id===i.snapshot_id));if(l){var d=l.volume_id;(0,m.default)(s).call(s,(e=>e.volumeId===d))&&u.push(e)}}else{var{instance_uuid:c}=e;n===c&&u.push(e)}}})),u}))()}detailDidFetch(e){return(0,v.default)((function*(){var t;e.originData=C({},e);var{block_device_mapping:a="[]"}=e,r=(0,m.default)(t=JSON.parse(a)).call(t,(e=>0===e.boot_index)),n=null,i="";if(r){var{snapshot_id:l}=r;e.snapshotId=l;var o=(yield S.default.cinder.snapshots.show(l)).snapshot;e.snapshotDetail=o;var{volume_id:s}=o,u=(yield S.default.cinder.volumes.show(s)).volume;e.volumeDetail=u,n=u.attachments.length>0?u.attachments[0].server_id:""}else{var{instance_uuid:d}=e;n=d}var c={};try{if(n){c=yield S.default.nova.servers.show(n);var{server:{name:f}={}}=c;i=f}}catch(e){}return e.instance={server_id:n,server_name:i},e.instanceDetail=c.server||{},e}))()}fetchInstanceSnapshotVolumeData(e){var t=this;return(0,v.default)((function*(){var{id:a}=e,r=yield t.client.show(a),n=yield t.detailDidFetch(r),{block_device_mapping:i="[]"}=n,l=JSON.parse(i)||[];if(null==l||!l.length)return n;var o=null==l?void 0:(0,f.default)(l).call(l,(e=>0!==e.boot_index)),s=(0,g.default)(o).call(o,function(){var e=(0,v.default)((function*(e){var t=(0,_.default)(e),{snapshot_id:a}=e,r=yield S.default.cinder.snapshots.show(a),n=(null==r?void 0:r.snapshot)||{};return t.snapshotDetail=n,t.bdmFormatData=e,t}));return function(t){return e.apply(this,arguments)}}()),u=yield p.default.all(s),d=(0,g.default)(u).call(u,function(){var e=(0,v.default)((function*(e){var{volume_id:t}=e.snapshotDetail,a=yield S.default.cinder.volumes.show(t),r=(null==a?void 0:a.volume)||{};return e.volumeDetail=r,e}));return function(t){return e.apply(this,arguments)}}()),c=yield p.default.all(d);return C(C({},n),{},{instanceSnapshotDataVolumes:c})}))()}}t.InstanceSnapshotStore=k;var D=new k;t.default=D},1392:function(e,a,r){"use strict";var n=r(162),i=r(20),l=r(25),o=r(21);i(a,"__esModule",{value:!0}),a.default=a.FlavorSelectTable=void 0;var s=o(r(86)),u=o(r(29)),d=o(r(91)),c=o(r(573)),f=o(r(54));r(593);var p=o(r(427)),h=o(r(49)),m=o(r(35)),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=I(t);if(a&&a.has(e))return a.get(e);var r={},n=i&&l;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=n?l(e,o):null;s&&(s.get||s.set)?i(r,o,s):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(r(0)),v=r(412),y=r(36),b=o(r(1376)),_=(r(161),o(r(1327))),S=o(r(1259)),x=r(1264),w=o(r(3568));function I(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(I=function(e){return e?a:t})(e)}class C extends g.Component{constructor(e){super(e),(0,m.default)(this,"onArchChange",(e=>{this.setState({arch:e.target.value})})),(0,m.default)(this,"onCategoryChange",(e=>{this.setState({category:e.target.value})})),(0,m.default)(this,"onChange",(e=>{var{onChange:t}=this.props;t&&t(e)})),this.state={arch:null,category:null},this.init()}get labelStyle(){return{marginRight:16}}getSettings(){var e=this;return(0,h.default)((function*(){yield e.settingStore.fetchList(),e.initDefaultValue()}))()}getFlavors(){var e=this;return(0,h.default)((function*(){var{allProjects:t=!1}=e.props;yield e.flavorStore.fetchList({all_projects:t}),e.initDefaultValue()}))()}get architectures(){var e,t={architecture:"custom"},a={architecture:"all"},{isIronic:r=!1,filterIronic:n=!0}=this.props,i=(0,s.default)(e=this.settingStore.list.data||[]).call(e,(e=>"flavor_families"===e.key));if(!i)return[a,t];var l=[];try{var o;l=(0,u.default)(o=i.value||[]).call(o,(e=>{var{architecture:t}=e;return!!t&&(!n||(r?(0,x.isBareMetal)(t):!(0,x.isBareMetal)(t)))}))}catch(e){}return[a,...l,t]}get categories(){var e,{arch:t}=this.state;if(!t)return[];var a=(0,s.default)(e=this.architectures).call(e,(e=>e.architecture===t));return a&&a.categories||[]}get flavors(){var e,t,a,r,{flavor:n,isIronic:i=!1,filterIronic:l=!0,excludeFlavors:o=[]}=this.props,{arch:s,category:c}=this.state;return s?(0,u.default)(e=(0,u.default)(t=(0,u.default)(a=(0,u.default)(r=this.flavorStore.list.data||[]).call(r,(e=>!(o.length>0)||(0,d.default)(o).call(o,e.id)<0))).call(a,(e=>!n||e.name!==n))).call(t,(e=>!l||(i?(0,x.isBareMetalFlavor)(e):!(0,x.isBareMetalFlavor)(e))))).call(e,(e=>"all"===s||("custom"===s?e.architecture===s:e.architecture===s&&e.category===c))):[]}getBaseColumns(){var{category:e,arch:a}=this.state,r=[...(0,x.getBaseColumns)()];return r[0].title=t("Name"),(0,c.default)(r).call(r,1,1),(0,x.categoryHasIOPS)(e)||(r=(0,u.default)(r).call(r,(e=>"quota:disk_total_iops_sec"!==e.dataIndex))),(0,x.categoryHasEphemeral)(e)||(r=(0,u.default)(r).call(r,(e=>"OS-FLV-EXT-DATA:ephemeral"!==e.dataIndex))),"all"===a&&(r=[...r,{title:t("Architecture"),dataIndex:"id",render:(e,t)=>(0,x.getFlavorArchInfo)(t)}]),r}getGpuColumns(){var{category:e}=this.state;return"compute_optimized_type"===e?(0,u.default)(x.gpuColumns).call(x.gpuColumns,(e=>{var t;return(0,d.default)(t=e.dataIndex).call(t,"gpu")<0})):(0,u.default)(x.gpuColumns).call(x.gpuColumns,(e=>{var t;return(0,d.default)(t=e.dataIndex).call(t,"gpu")>=0}))}get columns(){var{arch:e}=this.state,t=this.getBaseColumns();if((0,x.isBareMetal)(e))return[...(0,u.default)(t).call(t,((e,t)=>t<3))];if("heterogeneous_computing"!==e)return t;var a=this.getGpuColumns();return[...t,...a]}initDefaultValue(){var{value:{selectedRowKeys:e=[]}={}}=this.props;if(e.length>0){var t,a=(0,s.default)(t=(0,y.toJS)(this.flavorStore.list.data)||[]).call(t,(t=>t.id===e[0]));if(a){var{architecture:r,category:n}=a;this.setState({arch:r,category:n})}}else{var i=this.architectures[0].architecture,l=null;this.architectures[0].categories&&(l=this.architectures[0].categories[0].name),this.setState({arch:i,category:l})}}init(){this.settingStore=_.default,this.flavorStore=S.default,this.getSettings(),this.getFlavors()}renderArchButtons(){var e,{arch:t}=this.state,a=(0,f.default)(e=this.architectures).call(e,(e=>{var{architecture:t}=e,a=x.flavorArchitectures[t]||t;return g.default.createElement(p.default.Button,{value:t,key:t},a)}));return g.default.createElement(p.default.Group,{id:"flavor-select-arch",onChange:this.onArchChange,value:t,buttonStyle:"solid"},a)}renderCategoryButtons(){var e,{category:t}=this.state,a=(0,f.default)(e=this.categories).call(e,(e=>{var{name:t}=e,a=x.flavorCategoryList[t]||t;return g.default.createElement(p.default.Button,{value:t,key:t},a)}));return g.default.createElement(p.default.Group,{id:"flavor-select-category",onChange:this.onCategoryChange,value:t,buttonStyle:"solid"},a)}renderArchSelect(){return g.default.createElement("div",{className:w.default["flavor-tab"]},g.default.createElement("span",{className:w.default["flavor-label"]},t("Architecture")),this.renderArchButtons())}renderCategorySelect(){var{arch:e}=this.state;return"custom"===e||"all"===e?null:g.default.createElement("div",{className:w.default["flavor-tab"]},g.default.createElement("span",{className:w.default["flavor-label"]},t("Category")),this.renderCategoryButtons())}renderTableHeader(){return g.default.createElement("div",null,this.renderArchSelect(),this.renderCategorySelect())}render(){var{value:e,disabledFunc:t}=this.props,a=this.settingStore.list.isLoading&&this.flavorStore.list.isLoading,r={columns:this.columns,data:this.flavors,tableHeader:this.renderTableHeader(),isLoading:a,filterParams:(0,x.getFlavorSearchFilters)(),value:e,onChange:this.onChange,disabledFunc:t};return g.default.createElement(b.default,r)}}a.FlavorSelectTable=C;var k=(0,v.inject)("rootStore")((0,v.observer)(C));a.default=k},1393:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.enablePFW=function(){var{neutronExtensions:e}=o.default,t=!1,a=!1;return(0,l.default)(e).call(e,(e=>{"floating-ip-port-forwarding"===e.alias?t=!0:"expose-port-forwarding-in-fip"===e.alias&&(a=!0)})),t&&a},a.availabilityZoneResource=a.availabilityZoneState=void 0;var l=i(r(28)),o=i(r(133)),s={available:t("Available"),unavailable:t("Unavailable")};a.availabilityZoneState=s;var u={router:t("Router"),network:t("Network")};a.availabilityZoneResource=u},1395:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Port=void 0;var p=f(r(77)),h=f(r(164)),m=f(r(54)),g=f(r(29)),v=f(r(573)),y=f(r(58)),b=f(r(35)),_=f(r(0)),S=r(412),x=f(r(1242)),w=r(572),I=r(1258),C=r(342),k=f(r(1606));function D(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=D(Object(r),!0)).call(a,(function(t){(0,b.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=D(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}class T extends x.default{constructor(){super(...arguments),(0,b.default)(this,"updateFetchParamsByPage",(e=>{var{id:t}=e,a=P({},(0,y.default)(e,["id"]));return this.isInstanceDetail?a.device_id=t:this.isNetworkDetail&&(a.network_id=t),a})),(0,b.default)(this,"updateFetchParams",(e=>{var{id:t,networkId:a}=e;return P({network_id:a,subnetId:t},(0,y.default)(e,["id","networkId"]))})),(0,b.default)(this,"renderResource",((e,t)=>{var a,{device_id:r,device_owner:n}=t;if(!n)return r||"-";var i,l=r,o=null;"compute:nova"===n?(l=e?(0,p.default)(i="".concat(r," (")).call(i,e,")"):r,o=this.getLinkRender("instanceDetail",l,{id:r},{tab:"interface"})):(0,h.default)(a=["network:router_interface","network:ha_router_replicated_interface","network:router_ha_interface"]).call(a,n)?o=this.getLinkRender("routerDetail",l,{id:r}):"network:floatingip"===n&&(o=this.getLinkRender("fipDetail",l,{id:r}));return o?_.default.createElement(_.default.Fragment,null,n,_.default.createElement("br",null),o):_.default.createElement(_.default.Fragment,null,n,_.default.createElement("br",null),r||"-")})),(0,b.default)(this,"getPortDetailRoute",(()=>this.isSubnetDetail?{routeName:this.getRouteName("subnetPortDetail"),routeParamsFunc:e=>({networkId:e.network_id,subnetId:e.subnet_id,id:e.id})}:this.isNetworkDetail?{routeName:this.getRouteName("networkPortDetail"),routeParamsFunc:e=>({networkId:e.network_id,id:e.id})}:this.isInstanceDetail?{routeName:this.getRouteName("instancePortDetail"),routeParamsFunc:e=>({instanceId:e.device_id,id:e.id})}:{routeName:this.getRouteName("portDetail")})),(0,b.default)(this,"getColumns",(()=>{var e=[P({title:t("ID/Name"),dataIndex:"name"},this.getPortDetailRoute()),{title:t("Project ID/Name"),dataIndex:"project_name",hidden:!this.isAdminPage,isHideable:!0,sortKey:"project_id"},{title:t("Bind Resource"),dataIndex:"server_name",stringify:(e,t)=>{var a,r,n,i,{device_id:l,device_owner:o}=t;return l&&"compute:nova"===o&&e?(0,p.default)(n=(0,p.default)(i="".concat(o," \n ")).call(i,l," (")).call(n,e,")"):(0,p.default)(a=(0,p.default)(r="\n            ".concat(o," ")).call(r,o&&"\n","\n            ")).call(a,l||"-","\n          ")},render:this.renderResource,isHideable:!0,sorter:!1},{title:t("Owned Network ID/Name"),dataIndex:"network_name",isLink:!0,routeName:this.getRouteName("networkDetail"),idKey:"network_id",sorter:!1},{title:t("IPv4 Address"),dataIndex:"ipv4",render:e=>(0,m.default)(e).call(e,(e=>_.default.createElement("div",{key:e},e))),isHideable:!0,stringify:e=>e.join(","),sorter:!1},{title:t("IPv6 Address"),dataIndex:"ipv6",render:e=>(0,m.default)(e).call(e,(e=>_.default.createElement("div",{key:e},e))),isHideable:!0,stringify:e=>e.join(","),sorter:!1},{title:t("Mac Address"),dataIndex:"mac_address",isHideable:!0},{title:t("Status"),dataIndex:"status",valueMap:I.portStatus}];return this.isInstanceDetail?(0,g.default)(e).call(e,(e=>"server_name"!==e.dataIndex)):this.isNetworkDetail?(0,g.default)(e).call(e,(e=>"network_name"!==e.dataIndex)):e}))}init(){this.store=new w.PortStore,this.downloadStore=new w.PortStore}get isInstanceDetail(){var e,t;return this.inDetailPage&&((0,h.default)(e=this.path).call(e,"compute/instance")||(0,h.default)(t=this.path).call(t,"management/recycle-bin"))}get isNetworkDetail(){var e,t;return this.inDetailPage&&((0,h.default)(e=this.path).call(e,"networks/detail")||(0,h.default)(t=this.path).call(t,"networks-admin/detail"))&&!this.isSubnetDetail}get isSubnetDetail(){var e;return this.inDetailPage&&(0,h.default)(e=this.path).call(e,"subnet")}get isRecycleBinDetail(){var e;return this.inDetailPage&&(0,h.default)(e=this.path).call(e,"recycle-bin")}get isFilterByBackend(){return!this.isSubnetDetail}get isSortByBackend(){return this.isFilterByBackend}get defaultSortKey(){return this.isFilterByBackend?"status":""}get policy(){return"get_port"}get name(){return t("ports")}get adminPageHasProjectFilter(){return!0}get actionConfigs(){return this.isRecycleBinDetail?C.emptyActionConfig:this.isAdminPage?k.default.adminActions:this.inDetailPage?this.isInstanceDetail?k.default.actionConfigsInDetail:k.default.noActions:k.default.actionConfigs}get searchFilters(){var e=[{label:t("Name"),name:"name"},{label:t("Status"),name:"status",options:[{label:t("Active"),key:"ACTIVE"},{label:t("Down"),key:"DOWN"},{label:t("Error"),key:"ERROR"},{label:t("Build"),key:"BUILD"},{label:t("N/A"),key:"N/A"}]}];this.isNetworkDetail||(0,v.default)(e).call(e,1,0,{label:t("Owned Network"),name:"network_name"});var a={label:t("Device Owner"),name:"device_owner",options:[{label:t("Instance"),key:"compute:nova",checkLabel:t("View virtual adapters"),isQuick:!0},{label:t("Router"),key:"network:router_ha_interface,network:ha_router_replicated_interface,network:router_interface,network:router_gateway,network:router_interface_distributed,network:router_centralized_snat"},{label:t("Floating IP"),key:"network:floatingip,network:floatingip_agent_gateway"},{label:t("DHCP Agent"),key:"network:dhcp"},{label:t("Others"),key:"network:local_ip,network:routed,network:distributed,compute:kuryr,Octavia"},{label:t("Unbounded"),key:"none"}]};return this.isSubnetDetail&&(a.filterFunc=(e,t)=>"none"===t?!e:e&&(0,h.default)(t).call(t,e)),this.isInstanceDetail||e.push(a),e}}a.Port=T;var A=(0,S.inject)("rootStore")((0,S.observer)(T));a.default=A},1455:function(e,t,a){var r=a(2089);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(65)(r,n);r.locals&&(e.exports=r.locals)},1456:function(e,a,r){"use strict";var n=r(162),i=r(20),l=r(25),o=r(21);i(a,"__esModule",{value:!0}),a.default=a.QuotaOverview=a.getVolumeTypeCards=a.troveQuotaCard=a.magnumQuotaCard=a.zunQuotaCard=a.shareQuotaCard=a.quotaCardList=void 0;var s=o(r(54)),u=o(r(29)),d=o(r(77)),c=o(r(63)),f=o(r(32));r(602);var p=o(r(603)),h=o(r(49));r(1457);var m=o(r(1383));r(347);var g=o(r(348));r(1244);var v=o(r(1245));r(1280);var y=o(r(1281));r(1246);var b=o(r(1247));r(1271);var _=o(r(1272)),S=o(r(35));r(344);var x=o(r(202)),w=o(r(1299)),I=o(r(351)),C=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=N(t);if(a&&a.has(e))return a.get(e);var r={},n=i&&l;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=n?l(e,o):null;s&&(s.get||s.set)?i(r,o,s):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(r(0)),k=(r(161),r(564),r(412)),D=o(r(578)),P=o(r(340)),T=o(r(133)),A=r(66),M=o(r(1455));function N(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(N=function(e){return e?a:t})(e)}var E={normal:{color:globalCSS.primaryColor,text:t("Normal")},danger:{color:globalCSS.warnDarkColor,text:t("Danger")},full:{color:globalCSS.errorColor,text:t("Full")}},R=C.default.createElement("span",null,t("Key Pairs"),C.default.createElement(x.default,{title:t("The number of allowed key pairs for each user.")},C.default.createElement(w.default,{style:{marginLeft:4}}))),j=(0,A.firewallEndpoint)()?[{text:t("Firewalls"),key:"firewall_group"},{text:t("Firewall Policies"),key:"firewall_policy"},{text:t("Firewall Rules"),key:"firewall_rule"}]:[],F=[{text:t("Compute"),type:"compute",value:[{text:t("Instances"),key:"instances"},{text:t("vCPUs"),key:"cores"},{text:t("Memory (GiB)"),key:"ram"},{text:R,key:"key_pairs"},{text:t("Server Groups"),key:"server_groups"}]},{text:t("Storage"),type:"storage",value:[{text:t("Volumes"),key:"volumes"},{text:t("Volume Capacity (GiB)"),key:"gigabytes"},{text:t("Volume Snapshots"),key:"snapshots"},{text:t("Volume Backups"),key:"backups"},{text:t("Volume Backup Capacity (GiB)"),key:"backup_gigabytes"}]},{text:t("Network"),type:"networks",value:[{text:t("Routers"),key:"router"},{text:t("Networks"),key:"network"},{text:t("Subnets"),key:"subnet"},{text:t("Floating IPs"),key:"floatingip"},{text:t("Ports"),key:"port"},{text:t("Security Groups"),key:"security_group"},{text:t("Security Group Rules"),key:"security_group_rule"},...j]}];a.quotaCardList=F;var L={text:t("Share"),type:"share",value:[{text:t("Shares"),key:"shares"},{text:t("Share Capacity (GiB)"),key:"share_gigabytes"},{text:t("Share Networks"),key:"share_networks"},{text:t("Share Groups"),key:"share_groups"}]};a.shareQuotaCard=L;var O={text:t("Containers Management"),type:"zun",value:[{text:t("Containers"),key:"zun_containers"},{text:t("Containers CPU"),key:"zun_cpu"},{text:t("Containers Memory (MiB)"),key:"zun_memory"},{text:t("Containers Disk (GiB)"),key:"zun_disk"}]};a.zunQuotaCard=O;var z={text:t("Clusters Management"),type:"magnum",value:[{text:t("Clusters"),key:"magnum_cluster"}]};a.magnumQuotaCard=z;var B={text:t("Database"),type:"trove",value:[{text:t("Database Instance"),key:"trove_instances"},{text:t("Database Disk (GiB)"),key:"trove_volumes"}]};a.troveQuotaCard=B;var V=e=>{var a=(0,s.default)(e).call(e,((e,a)=>({index:a,value:[{text:t("{name} type",{name:e.name}),key:"volumes_".concat(e.name)},{text:t("{name} type capacity (GiB)",{name:e.name}),key:"gigabytes_".concat(e.name)},{text:t("{name} type snapshots",{name:e.name}),key:"snapshots_".concat(e.name)}]})));return{text:t("Storage Types"),type:"volumeTypes",value:a}};a.getVolumeTypeCards=V;class U extends C.Component{constructor(e){var a;super(e),a=this,(0,S.default)(this,"getFilteredValue",(e=>(0,u.default)(e).call(e,(e=>!e.hidden)))),(0,S.default)(this,"getItemInfo",((e,a)=>{var r=0;e[a.key]&&(0,I.default)(e[a.key].used)&&-1!==e[a.key].limit&&(r=e[a.key].used/e[a.key].limit*100);var n,i="-";e[a.key]&&(0,I.default)(e[a.key].used)&&(i=(0,d.default)(n="".concat(e[a.key].used," / ")).call(n,-1===e[a.key].limit?t("Unlimit"):e[a.key].limit));var l=r>=90&&E.full.color||r>=80&&E.danger.color||E.normal.color,o=C.default.createElement("span",null,a.text," : ",i),{server_group_members:s}=e;return"server_groups"===a.key&&s&&(o=C.default.createElement("span",null,o," (",t("Members of Each Group")," :",-1===s.limit?t("Unlimit"):s.limit,")")),C.default.createElement(C.default.Fragment,null,C.default.createElement("div",{className:M.default["progress-title"]},o),C.default.createElement(x.default,{title:o,placement:"top",getPopupContainer:e=>e.parentNode},C.default.createElement(_.default,{style:{marginTop:13,marginBottom:13},percent:r,showInfo:!1,strokeColor:l})))})),(0,S.default)(this,"renderQuotaCardList",(()=>{var e,{isLoading:t}=this.state;return C.default.createElement(b.default,{className:M.default.content},(0,s.default)(e=this.quotaCardList).call(e,(e=>C.default.createElement(v.default,{className:M.default.card,span:24,key:e.type},C.default.createElement(y.default,{title:e.text,bordered:!1,loading:t,size:"small"},C.default.createElement(b.default,{gutter:24},this.renderQuotaCardContent(e)))))),this.enableCinder?C.default.createElement(v.default,{className:M.default.card,span:24,key:this.volumeTypesQuota.type},C.default.createElement(y.default,{title:this.volumeTypesQuota.text,bordered:!1,loading:t,size:"small"},this.renderVolumeTypes())):null)})),(0,S.default)(this,"renderQuotaCard",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,s.default)(t).call(t,(t=>C.default.createElement(v.default,{key:t.text,span:12},a.getItemInfo(e,t))))})),(0,S.default)(this,"renderVolumeTypes",(()=>{var{isLoading:e}=this.state;return e?C.default.createElement(g.default,null):C.default.createElement(m.default,{itemLayout:"vertical",size:"large",pagination:{hideOnSinglePage:!0,pageSize:5,size:"small"},dataSource:this.volumeTypesQuota.value,renderItem:e=>{var t;return C.default.createElement(b.default,{key:e.index,gutter:[16]},(0,s.default)(t=e.value).call(t,(e=>C.default.createElement(v.default,{span:8,key:e.text},this.getItemInfo(this.projectStore.quota,e)))))}})})),this.state={isLoading:!0};var{projectStore:r,volumeTypeStore:n}=e;this.projectStore=r||P.default,this.volumeTypeStore=n||D.default}componentDidMount(){this.getData()}getData(){var e=this;return(0,h.default)((function*(){var{getData:t}=e.props;if(t)yield t();else{var{user:a}=e.props.rootStore,{project:{id:r=""}={}}=a,n=[e.projectStore.fetchProjectQuota({project_id:r,withKeyPair:!0})];e.enableCinder&&n.push(e.volumeTypeStore.fetchList()),yield c.default.all(n)}e.setState({isLoading:!1})}))()}get enableCinder(){return T.default.checkEndpoint("cinder")}get enableShare(){return T.default.checkEndpoint("manilav2")}get enableZun(){return T.default.checkEndpoint("zun")}get enableMagnum(){return T.default.checkEndpoint("magnum")}get enableTrove(){return T.default.checkEndpoint("trove")&&T.default.hasAdminOnlyRole}get volumeTypeData(){var{volumeTypeData:e}=this.props;return e||this.volumeTypeStore.list.data}get volumeTypesQuota(){return V(this.volumeTypeData)}get quotaCardList(){var e=[...this.props.quotaCardList||F];return this.enableCinder||(e=(0,u.default)(e).call(e,(e=>"storage"!==e.type))),this.enableShare&&e.push(L),this.enableZun&&e.push(O),this.enableMagnum&&e.push(z),this.enableTrove&&e.push(B),e}get quotaAction(){return this.props.quotaAction}renderQuotaCardContent(e){var{isLoading:t}=this.state;return t?C.default.createElement(g.default,null):this.renderQuotaCard(this.projectStore.quota,this.getFilteredValue(e.value))}render(){var e,{isLoading:a}=this.state;return C.default.createElement(y.default,{className:M.default.bottom,bodyStyle:{padding:0},loading:a,headStyle:{paddingLeft:"20px"},title:C.default.createElement("div",{className:M.default.title},C.default.createElement("span",{className:M.default.text},t("Quota Overview")),(0,s.default)(e=(0,f.default)(E)).call(e,(e=>C.default.createElement("span",{key:e,className:M.default.badge},C.default.createElement(p.default,{color:E[e].color,text:E[e].text}))))),extra:this.quotaAction},this.renderQuotaCardList())}}a.QuotaOverview=U;var Q=(0,k.inject)("rootStore")((0,k.observer)(U));a.default=Q},1460:function(e,t,a){"use strict";var r=a(32),n=a(42),i=a(29),l=a(25),o=a(28),s=a(44),u=a(45),d=a(20),c=a(21);d(t,"__esModule",{value:!0}),t.default=t.ServerGroupInstanceStore=void 0;var f=c(a(63)),p=c(a(54)),h=c(a(28)),m=c(a(35)),g=c(a(49)),v=c(a(58)),y=a(163),b=c(a(53));function _(e,t){var a=r(e);if(n){var o=n(e);t&&(o=i(o).call(o,(function(t){return l(e,t).enumerable}))),a.push.apply(a,o)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=_(Object(r),!0)).call(a,(function(t){(0,m.default)(e,t,r[t])}));else if(s)u(e,s(r));else{var n;o(n=_(Object(r))).call(n,(function(t){d(e,t,l(r,t))}))}}return e}class x extends b.default{get listResponseKey(){return"servers"}get paramsFunc(){return e=>{var{all_projects:t,members:a,isServerGroup:r}=e;return(0,v.default)(e,["all_projects","members","isServerGroup"])}}get groupArraySize(){return 1}requestList(e,t){var a=this;return(0,g.default)((function*(){var{members:r,isServerGroup:n,all_projects:i}=t;if(r&&n&&0===r.length)return[];var l=(0,y.groupArray)(r,a.groupArraySize),o=yield f.default.all((0,p.default)(l).call(l,(t=>{var r=S(S({},e),{},{uuid:t,all_projects:i});return a.skylineClient.extension.servers(r)}))),s=[];return(0,h.default)(o).call(o,(e=>{s.push(...e[a.listResponseKey])})),s}))()}listDidFetch(e){return(0,g.default)((function*(){return 0===e.length?e:(0,p.default)(e).call(e,(e=>S(S({},e),{},{tags:(e.origin_data||{}).tags||[]})))}))()}}t.ServerGroupInstanceStore=x;var w=new x;t.default=w},1461:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.getAllDataDisks=a.getInstanceSnapshotDataDisk=a.getDiskInfo=a.volumeTypes=void 0;var l=i(r(54)),o=i(r(86)),s=i(r(28)),u=i(r(1350)),d=i(r(578)),c=r(36),f=()=>{var e;return(0,l.default)(e=d.default.list.data||[]).call(e,(e=>({label:e.name,value:e.id,originData:(0,c.toJS)(e)})))};a.volumeTypes=f;var p=e=>{var a,{snapshotDetail:{size:r=0}={},volumeDetail:{volume_type:n}={},selfBdmData:i={}}=e||{},{delete_on_termination:l}=i,s=l?1:0,u=l?t("Deleted with the instance"):t("Not deleted with the instance"),d=(0,o.default)(a=f()).call(a,(e=>e.label===n));return{type:null==d?void 0:d.value,typeOption:d,size:r,deleteType:s,deleteTypeLabel:u}};a.getDiskInfo=p;var h=e=>{var{volumeDetail:t,snapshotDetail:a,bdmFormatData:r={}}=e||{};return p({volumeDetail:t,snapshotDetail:a,selfBdmData:r})};a.getInstanceSnapshotDataDisk=h;a.getAllDataDisks=e=>{var{dataDisk:t=[],instanceSnapshotDataVolumes:a=[]}=e,r=(0,u.default)(t);return null==a||(0,s.default)(a).call(a,(e=>{var t=h(e)||{};r.unshift({value:t})})),r}},1462:function(e,t,a){"use strict";var r=a(162),n=a(20),i=a(25),l=a(21);n(t,"__esModule",{value:!0}),t.default=void 0;var o=l(a(164));a(344);var s=l(a(202));a(1271);var u=l(a(1272)),d=l(a(35)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var r={},l=n&&i;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=l?i(e,o):null;s&&(s.get||s.set)?n(r,o,s):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(a(0)),f=(a(161),l(a(16)));function p(e){if("function"!=typeof r)return null;var t=new r,a=new r;return(p=function(e){return e?a:t})(e)}class h extends c.Component{constructor(){super(...arguments),(0,d.default)(this,"getColor",(()=>{var{value:e,wanValue:t,dangerValue:a,infoColor:r,warnColor:n,dangerColor:i}=this.props;return e<t?r:e<a?n:i}))}render(){var e,{value:t,label:a}=this.props,r={percent:t,size:"small",strokeColor:this.getColor()};a&&(r.showInfo=!1);var n=(0,o.default)(e=[void 0,null,""]).call(e,t)?"-":"".concat(t,"%");return c.default.createElement(s.default,{title:n,placement:"top"},c.default.createElement(u.default,r),a)}}t.default=h,(0,d.default)(h,"propTypes",{wanValue:f.default.number,dangerValue:f.default.number,infoColor:f.default.string,warnColor:f.default.string,dangerColor:f.default.string,value:f.default.number,label:f.default.string}),(0,d.default)(h,"defaultProps",{wanValue:70,dangerValue:90,infoColor:globalCSS.primaryColor,warnColor:globalCSS.warnDarkColor,dangerColor:globalCSS.dangerColor,label:""})},1463:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.getKeyPairHeader=void 0;var l=i(r(86)),o=i(r(49)),s=i(r(0)),u=i(r(1302)),d=i(r(1597)),c=i(r(3558));a.getKeyPairHeader=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keypair",r=function(){var t=(0,o.default)((function*(){var t;yield e.getKeypairs();var{createdItem:r}=e.keyPairStore,n=(0,l.default)(t=e.keypairs).call(t,(e=>e.name===(r||{}).name));if(n){var i={selectedRowKeys:[n.id],selectedRows:[n]};e.setState({initKeyPair:i},(()=>{e.updateFormValue(a,n)}))}}));return function(){return t.apply(this,arguments)}}();return s.default.createElement("div",{style:{marginBottom:10}},s.default.createElement("span",null,t("The key pair allows you to SSH into your newly created instance. You can select an existing key pair, import a key pair, or generate a new key pair.")),s.default.createElement("span",{className:c.default["action-wrapper"]},s.default.createElement(u.default,{actions:{moreActions:[{action:d.default}]},onFinishAction:r})))}},1464:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(162),p=r(21);c(a,"__esModule",{value:!0}),a.default=a.Volume=void 0;var h=p(r(54)),m=p(r(164)),g=p(r(58)),v=p(r(35)),y=r(412),b=p(r(1242)),_=r(566),S=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=k(t);if(a&&a.has(e))return a.get(e);var r={},n=c&&o;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=n?o(e,i):null;l&&(l.get||l.set)?c(r,i,l):r[i]=e[i]}r.default=e,a&&a.set(e,r);return r}(r(414)),x=r(3613),w=r(1353),I=r(342),C=p(r(1601));function k(e){if("function"!=typeof f)return null;var t=new f,a=new f;return(k=function(e){return e?a:t})(e)}function D(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=D(Object(r),!0)).call(a,(function(t){(0,v.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=D(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}class T extends b.default{constructor(){super(...arguments),(0,v.default)(this,"getColumns",(()=>(0,_.getVolumeColumnsList)(this))),(0,v.default)(this,"updateFetchParams",(e=>{if(this.isVolumeSnapshotDetail){var{child_volumes:t=[]}=this.props.detail||{},a=(0,h.default)(t).call(t,(e=>e.volume_id)),{id:r}=e;return P(P({},(0,g.default)(e,["id"])),{},{volumeIds:a})}if(this.inDetailPage){var{id:n}=e;return P(P({},(0,g.default)(e,["id"])),{},{serverId:n})}return e}))}init(){this.isVolumeSnapshotDetail?this.store=new x.SnapshotVolumeStore:this.inDetailPage?(this.store=new w.InstanceVolumeStore,this.downloadStore=this.store):(this.store=S.default,this.downloadStore=new S.VolumeStore)}get policy(){return"volume:get_all"}get name(){return t("volumes")}get isRecycleBinDetail(){var e;return this.inDetailPage&&(0,m.default)(e=this.path).call(e,"recycle-bin")}get isVolumeSnapshotDetail(){var e;return this.inDetailPage&&(0,m.default)(e=this.path).call(e,"storage/snapshot")}get isInstanceDetail(){var e;return this.inDetailPage&&(0,m.default)(e=this.path).call(e,"compute/instance")}get actionConfigs(){return this.isRecycleBinDetail?I.emptyActionConfig:this.isAdminPage?this.inDetailPage&&!this.isVolumeSnapshotDetail?C.default.instanceDetailAdminConfig:C.default.adminConfig:this.inDetailPage?C.default.instanceDetailConfig:C.default.actionConfigs}get transitionStatusList(){return _.volumeTransitionStatuses}get isFilterByBackend(){return!this.inDetailPage}get isSortByBackend(){return this.isFilterByBackend}get adminPageHasProjectFilter(){return!0}get defaultSortKey(){return"created_at"}get searchFilters(){return _.volumeFilters}}a.Volume=T;var A=(0,y.inject)("rootStore")((0,y.observer)(T));a.default=A},1465:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.poolColumns=void 0;var l=i(r(77)),o=i(r(351)),s=i(r(0)),u=i(r(1462)),d=[{title:t("Name"),dataIndex:"name"},{title:t("Protocol"),dataIndex:"storage_protocol"},{title:t("Backend Name"),dataIndex:"volume_backend_name",isHideable:!0},{title:t("Storage Capacity(GiB)"),dataIndex:"usedGBPercent",isHideable:!0,render:(e,t)=>{var a;return(0,o.default)(e)?s.default.createElement(u.default,{value:e,label:(0,l.default)(a="".concat(t.usedGB," / ")).call(a,t.total_capacity_gb)}):"-"},stringify:(e,a)=>{var r,n,i,s;return(0,o.default)(e)?(0,l.default)(r=(0,l.default)(n=(0,l.default)(i=(0,l.default)(s="".concat(e,"% (")).call(s,t("Used"),": ")).call(i,a.usedGB," / ")).call(n,t("Total"),": ")).call(r,a.total_capacity_gb,")"):"-"}}];a.poolColumns=d;var c=d;a.default=c},1466:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.FloatingIps=void 0;var p=f(r(164)),h=f(r(28)),m=f(r(32)),g=f(r(54)),v=f(r(29)),y=f(r(596)),b=f(r(350));r(589);var _=f(r(590)),S=f(r(610));r(1457);var x=f(r(1383)),w=f(r(49)),I=f(r(58)),C=f(r(35)),k=f(r(177)),D=f(r(0)),P=r(412),T=f(r(1242)),A=r(1273),M=r(346),N=r(342),E=(r(161),r(564),r(66)),R=r(163),j=f(r(1605));function F(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=F(Object(r),!0)).call(a,(function(t){(0,C.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=F(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}class O extends T.default{constructor(){var e;super(...arguments),e=this,(0,C.default)(this,"updateFetchParams",(e=>{if(this.inQosDetail){var{id:t}=e;return L({qos_policy_id:t},(0,I.default)(e,["id"]))}return e})),(0,C.default)(this,"fetchDataByPage",function(){var t=(0,w.default)((function*(t){yield e.store.fetchListWithResourceName(t),e.list.silent=!1}));return function(e){return t.apply(this,arguments)}}())}init(){this.store=new M.FloatingIpStore,this.downloadStore=new M.FloatingIpStore}get qosEndpoint(){return(0,E.qosEndpoint)()}get isFilterByBackend(){return!this.inQosDetail}get isSortByBackend(){return!this.inQosDetail}get defaultSortKey(){return"status"}get inQosDetail(){var e;return this.inDetailPage&&(0,p.default)(e=this.path).call(e,"qos")}get isRecycleBinDetail(){var e;return this.inDetailPage&&(0,p.default)(e=this.path).call(e,"recycle-bin")}get inInstanceDetail(){var e;return this.inDetailPage&&(0,p.default)(e=this.path).call(e,"instance")}getData(){var e=arguments,t=()=>super.getData,a=this;return(0,w.default)((function*(){var r=e.length>0&&void 0!==e[0]?e[0]:{},{silent:n}=r,i=(0,I.default)(r,["silent"]);if(a.inDetailPage&&!a.inQosDetail){var l;n&&(a.list.silent=!0);var{detail:{addresses:o=[]}={}}=a.props,s=[];(0,h.default)(l=(0,m.default)(o)).call(l,(e=>{var t,a;s.push(...(0,g.default)(t=(0,v.default)(a=o[e]).call(a,(e=>"fixed"===e["OS-EXT-IPS:type"]))).call(t,(e=>e.addr)))})),i.fixed_ip_address=s,i.all_projects=a.isAdminPage,s.length>0?yield a.store.fetchListWithResourceName(i):a.list.isLoading=!1}else t().call(a,L({silent:n},i))}))()}get fetchDataByCurrentProject(){return!0}get policy(){return"get_floatingip"}get name(){return t("floating ips")}get actionConfigs(){return this.isRecycleBinDetail?N.emptyActionConfig:this.inInstanceDetail?this.isAdminPage?j.default.instanceDetailAdminConfigs:j.default.instanceDetailConfigs:this.inQosDetail?this.isAdminPage?j.default.qosDetailAdminConfigs:j.default.qosDetailConfigs:this.isAdminPage?j.default.adminConfigs:j.default.actionConfigs}get transitionStatusList(){return A.transitionStatuses}get adminPageHasProjectFilter(){return!0}getRecordPortForwarding(e){var t;return(0,y.default)(t=e.port_forwardings||[]).call(t,((e,t)=>e.external_port-t.external_port))}getPortForwardingDetail(e,t){var{key:a}=t,r=(0,I.default)(t,["key"]);if((0,k.default)(r))return"";var{floating_ip_address:n}=e;return(0,A.getPortForwardingName)(r,n)}get portForwardingResourcesName(){return t("Port Forwardings")}getPortForwardingRender(e){var a=this.getRecordPortForwarding(e),{length:r}=a;if(!r)return null;var n=0;r>10&&r%10&&(n=10-r%10);var i=(0,b.default)({length:n},(e=>({key:"zero-".concat(e)}))),l=[...(0,g.default)(a).call(a,(e=>L(L({},e),{},{key:e.external_port||e.external_port_range}))),...i],o=D.default.createElement(x.default,{itemLayout:"vertical",size:"small",pagination:{hideOnSinglePage:!0,pageSize:10,size:"small",showSizeChanger:!1},dataSource:l,renderItem:t=>D.default.createElement("div",{style:{height:"30px",lineHeight:"30px"}},this.getPortForwardingDetail(e,t))});return D.default.createElement(_.default,{content:o,title:this.portForwardingResourcesName,destroyTooltipOnHide:!0,placement:"right"},t("{number} {resource}",{number:a.length,resource:this.portForwardingResourcesName})," ",D.default.createElement(S.default,null))}getPortForwardingStringify(e){var a=this.getRecordPortForwarding(e);if(!a.length)return"";var r=(0,g.default)(a).call(a,(t=>this.getPortForwardingDetail(e,t)));return[t("{number} {resource}",{number:a.length,resource:this.portForwardingResourcesName}),...r].join("\n")}getResourceRender(e,t){return e&&"-"!==e?e:this.getPortForwardingRender(t)||"-"}geResourceStringify(e,t){return e&&"-"!==e?e:this.getPortForwardingStringify(t)||"-"}getColumns(){return[{title:t("ID/Floating IP"),dataIndex:"floating_ip_address",isLink:!0,routeName:this.getRouteName("fipDetail"),boldName:!0},{title:t("QoS Policy ID/Name"),dataIndex:"qos_policy_name",isLink:!0,routeName:this.getRouteName("networkQosDetail"),idKey:"qos_policy_id",hidden:!this.qosEndpoint||this.inQosDetail,sorter:!1},{title:t("Project ID/Name"),dataIndex:"project_name",hidden:!this.isAdminPage,sortKey:"project_id"},{title:t("Description"),dataIndex:"description",render:e=>e||"-",isHideable:!0,sorter:!1},{title:t("Associated Resource"),dataIndex:"resource_name",render:(e,t)=>this.getResourceRender(e,t),stringify:(e,t)=>this.geResourceStringify(e,t),isHideable:!0,sorter:!1},{title:t("Status"),dataIndex:"status",valueMap:A.floatingIpStatus},{title:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime",isHideable:!0,sorter:!1}]}get searchFilters(){return[{label:t("Floating IP"),name:"floating_ip_address"},{label:t("Status"),name:"status",options:(0,R.getOptions)(A.floatingIpStatus)}]}}a.FloatingIps=O;var z=(0,P.inject)("rootStore")((0,P.observer)(O));a.default=z},1467:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.CreatePortForwarding=void 0;var p=f(r(54)),h=f(r(63)),m=f(r(234)),g=f(r(86)),v=f(r(77)),y=f(r(350)),b=f(r(29)),_=f(r(164)),S=f(r(1252)),x=f(r(573)),w=f(r(49)),I=f(r(58)),C=f(r(35)),k=f(r(102)),D=f(r(1314)),P=f(r(0)),T=r(412),A=r(1241),M=r(1267),N=r(572),E=r(1258),R=r(1273),j=f(r(615)),F=r(1393),L=r(565),O=r(163);function z(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=z(Object(r),!0)).call(a,(function(t){(0,C.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=z(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}var{portRangeRegex:V}=L.regex;class U extends A.ModalAction{constructor(){var e;super(...arguments),e=this,(0,C.default)(this,"portsDisableFunc",(e=>0===e.fixed_ips.length)),(0,C.default)(this,"onSubmit",(e=>{var{external_port_range:t,internal_port_range:a}=e,r=(0,I.default)(e,["external_port_range","internal_port_range"]);if(!t||this.supportRange)return j.default.create({id:this.item.id,data:e});var n=this.getPortsByInput(t),i=this.getPortsByInput(a),l=(0,p.default)(n).call(n,((e,t)=>j.default.create({id:this.item.id,data:B(B({},r),{},{external_port:e,internal_port:i[t]})})));return h.default.all(l)})),(0,C.default)(this,"handlePortSelect",function(){var t=(0,w.default)((function*(t){e.setState({fixedIpLoading:!0});var{canReachSubnetIdsWithRouterId:a}=e.state,r=yield(0,R.getInterfaceWithReason)(t.selectedRows),n=(0,E.getPortsAndReasons)(r,a,!0);e.setState({portFixedIPs:n,fixed_ip_address:void 0,fixedIpLoading:!1}),e.formRef.current&&e.formRef.current.resetFields(["fixed_ip_address","internal_port"])}));return function(e){return t.apply(this,arguments)}}()),(0,C.default)(this,"checkPortUsedBase",((e,t,a,r)=>{var{external_port:n,internal_port:i,external_port_range:l,internal_port_range:o}=e,s="external"===t?l:o;if(s){var[u,d]=this.getRangeFromString(s);return a>=u&&a<=d&&e.protocol===r}return a===("external"===t?n:i)&&e.protocol===r})),(0,C.default)(this,"checkPortUsedInternal",((e,t)=>{if(!e)return!1;var a=this.formRef.current.getFieldsValue(["virtual_adapter","fixed_ip_address"]),r=a.fixed_ip_address.selectedRows[0].fixed_ip_address,n=a.virtual_adapter.selectedRows[0].id;return t.internal_port_id===n&&t.internal_ip_address===r})),(0,C.default)(this,"checkPortUsed",((e,t)=>{var{alreadyUsedPorts:a,protocol:r}=this.state,n=(0,m.default)(e,10);return(0,g.default)(a).call(a,(e=>{var a=this.checkPortUsedBase(e,t,n,r);return"external"===t?a:this.checkPortUsedInternal(a,e)}))})),(0,C.default)(this,"checkExtPortUsed",(e=>this.checkPortUsed(e,"external"))),(0,C.default)(this,"getRangeFromString",(e=>{var t=(e||"").split(":");return!t.length||t.length>2?[]:[(0,m.default)(t[0],10),(0,m.default)(t[1],10)]})),(0,C.default)(this,"getPortForwardingContent",(e=>{var t,a,{external_port:r,external_port_range:n,internal_ip_address:i,internal_port:l,internal_port_range:o}=e;return(0,v.default)(t=(0,v.default)(a="".concat(r||n," => ")).call(a,i,":")).call(t,l||o)})),(0,C.default)(this,"getUsedError",((e,a)=>1===e.length&&(0,k.default)(e[0])?t("The {name} has already been used by other {resource}({content}), please change.",{name:a,resource:this.resource,content:this.getPortForwardingContent(e[0])}):t("The {name} {ports} have already been used, please change.",{name:a,ports:e.join(",")}))),(0,C.default)(this,"checkRangeInput",(e=>{var[a,r]=this.getRangeFromString(e),n=r-a+1;return n<=1?{error:t("The value of the upper limit of the range must be greater than the value of the lower limit of the range.")}:n>this.maxRangeSize?{error:this.maxRangeSizeTip}:{length:n,start:a,end:r}})),(0,C.default)(this,"getPortsByRange",((e,t)=>(0,y.default)({length:t},((t,a)=>e+a)))),(0,C.default)(this,"getPortsByInput",(e=>{var{length:t,start:a}=this.checkRangeInput(e);return this.getPortsByRange(a,t)})),(0,C.default)(this,"checkPortRangeUsed",((e,a,r)=>{var n=this.getPortsByRange(e,a),i=(0,b.default)(n).call(n,(e=>"external"===r?this.checkExtPortUsed(e):this.checkInternalPortUsed(e)));if(i.length){var l="external"===r?t("external ports"):t("internal ports");return{error:this.getUsedError(i,l)}}return{ports:n,length:a}})),(0,C.default)(this,"checkTwoRangeLength",((e,a)=>e!==a?t("The size of the external port range is required to be the same as the size of the internal port range"):"")),(0,C.default)(this,"checkExternalPortInput",((e,a)=>{var r=(0,_.default)(e).call(e,":"),n=(0,_.default)(a).call(a,":");if(a&&r!==n)return t("Ports are either single values or ranges");if(!r){var i=this.checkExtPortUsed(e);return i?this.getUsedError([i],t("external port")):""}var{start:l,length:o,error:s}=this.checkRangeInput(e);if(s)return s;var{error:u}=this.checkPortRangeUsed(l,o,"external");if(u)return u;if(!V.test(a))return"";var{length:d}=this.checkRangeInput(a);return d?this.checkTwoRangeLength(o,d):""})),(0,C.default)(this,"validateExternalPort",((e,t)=>{var a=null==t?"":"".concat(t),{internal_port:r}=this.formRef.current.getFieldsValue(["internal_port"]);if(!V.test(a))return h.default.resolve(!0);var n=this.checkExternalPortInput(a,(r||"").toString()||"");return n?h.default.reject(n):h.default.resolve(!0)})),(0,C.default)(this,"checkInternalPortUsed",(e=>this.checkPortUsed(e,"internal"))),(0,C.default)(this,"checkInternalPortInput",((e,a)=>{var r=(0,_.default)(e).call(e,":"),n=(0,_.default)(a).call(a,":");if(e&&r!==n)return t("Ports are either single values or ranges");if(!n){var i=this.checkInternalPortUsed(a);return i?this.getUsedError([i],t("internal port")):""}var{start:l,length:o,error:s}=this.checkRangeInput(a);if(s)return s;var{error:u}=this.checkPortRangeUsed(l,o,"internal");if(u)return u;if(!V.test(e))return"";var{length:d}=this.checkRangeInput(e);return d?this.checkTwoRangeLength(o,d):""})),(0,C.default)(this,"validateInternalPort",((e,t)=>{var a=null==t?"":"".concat(t);if(!V.test(a))return h.default.resolve(!0);var{external_port:r}=this.formRef.current.getFieldsValue(["external_port"]),n=this.checkInternalPortInput((r||"").toString()||"",a);return n?h.default.reject(n):h.default.resolve()})),(0,C.default)(this,"onFixedIpChange",(e=>{this.setState({fixed_ip_address:e},(()=>{this.formRef.current.resetFields(["internal_port"])}))}))}get name(){return t("Create Port Forwarding")}get resource(){return t("port forwarding")}get resources(){return t("port forwardings")}init(){this.portStore=new N.PortStore,this.state=B(B({},this.state),{},{alreadyUsedPorts:[],portFixedIPs:[],canReachSubnetIdsWithRouterId:[],routerIdWithExternalNetworkInfo:[],supportRange:!0}),this.getPorts(),this.getRangeSupport(),this.getFipAlreadyUsedPorts(),this.getExtraInfo()}getExtraInfo(){M.getCanReachSubnetIdsWithRouterIdInComponent.call(this,(e=>{var{item:t}=this;return e.external_gateway_info&&e.external_gateway_info.network_id===t.floating_network_id}))}get fipId(){return this.item.id}getFipAlreadyUsedPorts(){var e=this;return(0,w.default)((function*(){var t=yield j.default.fetchList({fipId:e.fipId});e.setState({alreadyUsedPorts:t||[]})}))()}get instanceName(){return(0,R.getPortForwardingName)(this.submitData||(0,S.default)(this),this.item.floating_ip_address)}static get modalSize(){return"large"}getModalSize(){return"large"}get defaultValue(){var{floating_ip_address:e}=this.item;return{floatingIp:e}}getSubmitData(e){var{floatingIp:t,virtual_adapter:{selectedRows:a=[]}={},fixed_ip_address:{selectedRows:r=[]}={},external_port:n,internal_port:i}=e,l=B({},(0,I.default)(e,["floatingIp","virtual_adapter","fixed_ip_address","external_port","internal_port"]));return(0,_.default)(n).call(n,":")?l.external_port_range=n:l.external_port=n,(0,_.default)(i).call(i,":")?l.internal_port_range=i:l.internal_port=i,l.internal_ip_address=r[0].fixed_ip_address,l.internal_port_id=a[0].id,this.submitData=l,l}get nameForStateUpdate(){return["protocol"]}get portDeviceOwner(){return["compute:nova",""]}getPorts(){E.getPortsForPortFormItem.call(this,this.portDeviceOwner)}getRangeSupport(){var e=this;return(0,w.default)((function*(){try{yield j.default.fetchListByPage({limit:1,fipId:e.fipId,external_port_range:"80:81"}),e.setState({supportRange:!0})}catch(t){e.setState({supportRange:!1})}}))()}get supportRange(){var{supportRange:e}=this.state;return e}get maxRangeSize(){return this.supportRange?1/0:20}get maxRangeSizeTip(){return t("The maximum batch size is {size}, that is, the size of the port range cannot exceed {size}.",{size:this.maxRangeSize})}get tips(){return P.default.createElement("div",null,P.default.createElement("p",null,t("1. You can create {resources} using ports or port ranges.",{resources:this.resources})),P.default.createElement("p",null,t("2. In the same protocol, you cannot create multiple {resources} for the same source port or source port range.",{resources:this.resources})),P.default.createElement("p",null,t("3. When using a port range to create a port mapping, the size of the external port range is required to be the same as the size of the internal port range. For example, the external port range is 80:90 and the internal port range is 8080:8090.")),!this.supportRange&&P.default.createElement("p",null,t("4. When you use a port range to create {resources}, multiple {resources} will be created in batches. ",{resources:this.resources})+this.maxRangeSizeTip))}get formItems(){var{fixed_ip_address:e={selectedRows:[]}}=this.state,a=t("Input external port or port range (example: 80 or 80:160)"),r=t("Input internal port or port range (example: 80 or 80:160)"),n=[{name:"floatingIp",label:t("Floating Ip"),type:"label",iconType:"floatingIp"},{name:"description",label:t("Description"),type:"textarea"},{name:"protocol",label:t("Protocol"),type:"select",options:(0,O.getOptions)(R.portForwardingProtocols),required:!0},{name:"external_port",label:t("External Port/Port Range"),type:"port-range",required:!0,validator:this.validateExternalPort,dependencies:["protocol","internal_port"],placeholder:a,extra:a,hasRequiredCheck:!1},{name:"internal_port",label:t("Internal Port/Port Range"),type:"port-range",hidden:0===e.selectedRows.length,required:!0,validator:this.validateInternalPort,dependencies:["protocol","external_port"],placeholder:r,extra:r,hasRequiredCheck:!1}],[i,l]=E.getPortFormItem.call(this);return i.label=t("Target Port"),l.label=t("Target IP Address"),l.onChange=this.onFixedIpChange,(0,x.default)(n).call(n,4,0,i,l),n}}a.CreatePortForwarding=U,(0,C.default)(U,"id","create-port-forwarding"),(0,C.default)(U,"title",t("Create Port Forwarding")),(0,C.default)(U,"policy","create_floatingip_port_forwarding"),(0,C.default)(U,"allowed",(e=>h.default.resolve((0,D.default)(e.fixed_ip_address)&&(0,F.enablePFW)())));var Q=(0,T.inject)("rootStore")((0,T.observer)(U));a.default=Q},1475:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.default=t.CredentialStore=void 0;var i,l=n(a(4050)),o=n(a(28)),s=n(a(25)),u=n(a(49)),d=n(a(58)),c=n(a(55)),f=a(36),p=n(a(50)),h=n(a(133)),m=n(a(1255)),g=n(a(53)),v=(i=class extends g.default{get isSubResource(){return!0}get client(){return p.default.keystone.users.applicationCredentials}get paramsFunc(){return e=>{var{current:t,id:a,all_projects:r}=e;return(0,d.default)(e,["current","id","all_projects"])}}create(e){var t={};return t[this.responseKey]=e,this.submitting(this.client.create(h.default.user.user.id,t))}listDidFetch(e,t){return(0,u.default)((function*(){if(!t)try{var a=yield m.default.getUserProjects(),r=new l.default;(0,o.default)(a).call(a,(e=>{r.set(e.id,e.name)})),(0,o.default)(e).call(e,(e=>{e.project_name=r.get(e.project_id)||"-"}))}catch(t){return e}return e}))()}},(0,c.default)(i.prototype,"create",[f.action],(0,s.default)(i.prototype,"create"),i.prototype),i);t.CredentialStore=v;var y=new v;t.default=y},1495:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.getValue=void 0;var i=n(a(345)),l=n(a(102)),o=n(a(1428));t.getValue=e=>{if((0,l.default)(e))try{return o.default.dump(e,{noRefs:!0})}catch(t){return(0,i.default)(e,null,2)}return String(e)}},1500:function(e,a,r){"use strict";var n=r(162),i=r(20),l=r(25),o=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var s=o(r(63)),u=o(r(588)),d=o(r(164));r(231);var c=o(r(341));r(1344);var f=o(r(1345)),p=o(r(343)),h=o(r(35)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=y(t);if(a&&a.has(e))return a.get(e);var r={},n=i&&l;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=n?l(e,o):null;s&&(s.get||s.set)?i(r,o,s):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(r(0)),g=(r(161),o(r(16))),v=r(163);function y(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(y=function(e){return e?a:t})(e)}class b extends m.Component{static propTypes(){return{title:g.default.string.isRequired,buttonType:g.default.string,render:g.default.func,component:g.default.node,item:g.default.any,modalSize:g.default.string,okText:g.default.string,cancelText:g.default.string,handleOk:g.default.func,className:g.default.func,buttonText:g.default.string,buttonClassName:g.default.string,showCancelButton:g.default.bool,style:g.default.object,onClickButton:g.default.func,onFinishAction:g.default.func,onCancelAction:g.default.func}}constructor(e){super(e),(0,h.default)(this,"addListener",(()=>{var e=document.getElementsByClassName("modal-button-modal")[0];this.modalTarget=e,e&&(this.listenerResult=e.addEventListener("click",this.onClickModal))})),(0,h.default)(this,"removeListener",(()=>{var e=document.getElementsByClassName("modal-button-modal")[0];e&&(this.listenerResult=e.removeEventListener("click",this.onClickModal)),this.modalTarget=null})),(0,h.default)(this,"getModalWidth",(e=>{switch(e){case"small":return 520;case"middle":return 720;case"large":return 1200;default:return 520}})),(0,h.default)(this,"onClick",(e=>{this.stopEvent(e);var{onClickButton:t}=this.props;t&&t(),this.showModal()})),(0,h.default)(this,"onFinishAction",(()=>{var{onFinishAction:e}=this.props;e&&e()})),(0,h.default)(this,"handleOk",(e=>{this.stopEvent(e);var{handleOk:t}=this.props;t?(this.setState({submitLoading:!0}),t()instanceof s.default?t().finally((()=>{this.hideModal(),this.onFinishAction(),this.setState({submitLoading:!1})})):(this.hideModal(),this.onFinishAction(),this.setState({submitLoading:!1}))):(this.hideModal(),this.onFinishAction())})),(0,h.default)(this,"handleCancel",(e=>{this.stopEvent(e);var{onCancelAction:t}=this.props;t&&t(),this.hideModal()})),(0,h.default)(this,"hideModal",(()=>{this.removeListener(),this.setState({visible:!1})})),(0,h.default)(this,"showModal",(()=>{this.setState({visible:!0},(()=>{(0,u.default)((()=>{this.addListener()}),0)}))})),(0,h.default)(this,"stopEvent",(e=>{e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation()})),(0,h.default)(this,"onClickModal",(e=>{if(this.modalTarget){for(var t=[...this.modalTarget.getElementsByTagName("button"),...this.modalTarget.getElementsByTagName("a")],{innerHTML:a=""}=e.target||{},r=!1,n=["-",""],i=0;i<t.length;i++){var l;if(r)return;!(0,d.default)(n).call(n,a)&&(0,d.default)(l=t[i].innerHTML).call(l,a)&&(r=!0)}r||this.stopEvent(e)}else this.stopEvent(e)})),this.state={visible:!1,submitLoading:!1}}componentWillUnmount(){this.removeListener()}renderModal(){var{visible:e,submitLoading:t}=this.state;if(!e)return null;var{title:a,item:r,modalSize:n,className:i,okText:l,cancelText:o,render:s,component:u,showCancelButton:d}=this.props,c=this.getModalWidth(n),h=s?s(r):u,g={visible:e,title:a,key:"modal-".concat((0,v.generateId)()),className:i,width:c,onOk:this.handleOk,onCancel:this.handleCancel,okText:l,cancelText:o,confirmLoading:t};return d||(g.cancelButtonProps={style:{display:"none"}}),m.default.createElement(f.default,(0,p.default)({},g,{className:"modal-button-modal"}),h)}render(){var{buttonText:e,title:t,danger:a,style:r,buttonType:n,buttonClassName:i}=this.props;return m.default.createElement(m.default.Fragment,null,m.default.createElement(c.default,{type:n,danger:a,onClick:this.onClick,className:i,style:r},e||t),this.renderModal())}}a.default=b,(0,h.default)(b,"defaultProps",{buttonType:"primary",render:null,component:null,item:null,okText:t("Confirm"),cancelText:t("Cancel"),handleOk:null,className:"",buttonClassName:"",showCancelButton:!1,style:{},onClickButton:null,onFinishAction:null,onCancelAction:null})},1587:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.BaseTable=void 0;var p=f(r(54)),h=f(r(29)),m=f(r(164)),g=f(r(77)),v=f(r(28)),y=f(r(91));r(584);var b=f(r(586)),_=f(r(1582)),S=f(r(1580)),x=f(r(1313));r(585);var w=f(r(424)),I=f(r(1427));r(569);var C=f(r(1253));r(231);var k=f(r(341)),D=f(r(58));r(594);var P=f(r(595)),T=f(r(1299));r(344);var A=f(r(202)),M=f(r(610)),N=f(r(35)),E=f(r(134)),R=f(r(92)),j=f(r(119)),F=f(r(1588)),L=f(r(0)),O=f(r(16)),z=f(r(4)),B=f(r(1459)),V=r(36),U=(r(161),f(r(1516))),Q=f(r(1518)),q=(r(564),f(r(3525))),G=r(418),K=r(163),H=r(249),W=r(412),Y=f(r(3528)),J=f(r(1302)),Z=f(r(1388)),X=f(r(3535)),$=f(r(3538)),ee=f(r(1590));function te(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function ae(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=te(Object(r),!0)).call(a,(function(t){(0,N.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=te(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}class re extends L.default.Component{constructor(e){var a,r,n;super(e),(0,N.default)(this,"getDataIndex",(e=>(0,R.default)(e)?e.join(","):e)),(0,N.default)(this,"getSortKey",(e=>{var{field:t,column:a}=e;return t&&a?a.sortKey||a.dataIndex:null})),(0,N.default)(this,"handleChange",((e,t,a,r)=>{var{action:n}=r,i=ae({limit:e.pageSize,page:e.current,current:e.current,sortKey:this.getSortKey(a),sortOrder:a.order},t),{ableSkipPageByBackend:l,isPageByBack:o}=this.props;if("sort"===n){if(o&&!l){var{pagination:s}=this.props;i=ae(ae({},i),{},{limit:s.pageSize,page:s.current,current:s.current})}this.sortKey=this.getSortKey(a),this.sortOrder=a.order,this.props.onFetchBySort(i)}else this.props.onFetch(i)})),(0,N.default)(this,"handlePageChange",((e,t)=>{var{filters:a}=this.state,{onFetch:r,defaultSortKey:n,defaultSortOrder:i}=this.props;r&&r(ae({limit:t,page:e,current:e,sortKey:this.sortKey||n,sortOrder:this.sortOrder||i},a))})),(0,N.default)(this,"handleRefresh",(()=>{this.props.onRefresh(!0)})),(0,N.default)(this,"handleRowHide",(e=>{var t,a=(0,p.default)(t=this.hideableRows).call(t,(e=>e.value));this.setState({hideRow:(0,h.default)(a).call(a,(t=>!(0,m.default)(e).call(e,t)))},(()=>{var e;(0,H.setLocalStorageItem)((0,g.default)(e="".concat(this.useId,"-")).call(e,this.props.resourceName),this.state.hideRow)}))})),(0,N.default)(this,"handleCancelSelect",(()=>{this.props.onSelectRowKeys([])})),(0,N.default)(this,"handleFilterChange",((e,t)=>{if(!(0,B.default)(e,this.props.filters)||!(0,B.default)(t,this.props.timeFilter)){this.setState({filters:e,timeFilter:t});var{pageSize:a}=this.props.pagination,{sortKey:r,sortOrder:n,onFilterChange:i}=this.props;i&&i(ae({limit:a,page:1,sortKey:r,sortOrder:n},e),t)}})),(0,N.default)(this,"handleTimeChange",(e=>{this.handleFilterChange(this.state.filters,e)})),(0,N.default)(this,"handleFilterInput",(e=>{var t={};(0,v.default)(e).call(e,(e=>{t[(0,h.default)(e).name]=e.value})),this.handleFilterChange(t,this.state.timeFilter)})),(0,N.default)(this,"handleInputFocus",(e=>{var{handleInputFocus:t}=this.props;t&&t(e)})),(0,N.default)(this,"handleFilterInputText",(e=>{var t={},{value:a}=e.currentTarget;a&&(t.keywords=a),this.handleFilterChange(t,this.state.timeFilter)})),(0,N.default)(this,"hasItemActions",(()=>{var{firstAction:e,moreActions:t,actionList:a}=this.itemActions;return!!e||(!(!t||!t.length)||a&&a.length>0)})),(0,N.default)(this,"getNoValueRender",(e=>e||(e=>(0,K.getNoValue)(e)))),(0,N.default)(this,"getPriceRender",((e,t)=>e||(e=>{var t=(0,E.default)(e)?e:(e||0).toFixed(2);return L.default.createElement("span",{style:{color:globalCSS.moneyColor}},t)}))),(0,N.default)(this,"getTipRender",(function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:M.default,n=(n,i)=>{var l=e(n,i),o=t?t(n,i):(0,j.default)(i,a);return l?L.default.createElement("div",null,o,L.default.createElement(A.default,{title:l},L.default.createElement(r,{style:{marginLeft:8}}))):o};return n})),(0,N.default)(this,"getColumnTitle",(e=>{var{title:t,titleTip:a}=e;return a?L.default.createElement("span",null,t,L.default.createElement(A.default,{title:a},L.default.createElement(T.default,{style:{marginLeft:8}}))):t})),(0,N.default)(this,"getBaseColumns",(e=>(0,p.default)(e).call(e,(e=>{var{Paragraph:t}=P.default,{sortable:a,dataIndex:r,valueRender:n,sorter:i,sortOrder:l,render:o,copyable:s,tip:u,isStatus:d,isName:c,isLink:f,routeName:p,linkPrefix:h,isPrice:m,valueMap:g,unit:v}=e,y=(0,D.default)(e,["sortable","dataIndex","valueRender","sorter","sortOrder","render","copyable","tip","isStatus","isName","isLink","routeName","linkPrefix","isPrice","valueMap","unit"]),b=(0,G.getColumnSorter)(e,this.props),_=l||b?(0,G.getSortOrder)(r,this.props):null,S=o||(0,G.getRender)(n);if(g&&(S=(0,G.getValueMapRender)(e)),v&&(S=(0,G.getUnitRender)(e)),(0,G.checkIsStatusColumn)(r,d)&&(S=(0,G.getStatusRender)(S)),"description"===r&&(S=this.getNoValueRender(S)),"project_name"===r&&(S=(0,G.getProjectRender)(S)),"name"===r&&p||f){var{rowKey:x}=this.props;S=(0,G.getNameRenderByRouter)(S,e,x)}if("name"===r&&h||c){var{rowKey:w}=this.props;S=(0,G.getNameRender)(S,e,w)}if(("cost"===r||m)&&(S=this.getPriceRender(S,e)),s&&(S=e=>e&&"-"!==e?L.default.createElement(t,{copyable:!0},e):"-"),u){var{tipIcon:I}=e;S=this.getTipRender(u,S,r,I)}var C=ae(ae({},y),{},{title:this.getColumnTitle(e),dataIndex:r,align:e.align||"left"});return b&&(C.sorter=b),l&&(C.sortOrder=_),(0,G.updateColumnSort)(C,this.props),S&&(C.render=S),ae(ae({},C),{},{render:(e,t)=>(0,G.columnRender)(C.render,e,t)})})))),(0,N.default)(this,"getColumns",(()=>{var e,{columns:a,containerProps:r,onClickAction:n,onFinishAction:i,onCancelAction:l,isAdminPage:o}=this.props,{hideRow:s}=this.state,u=(0,h.default)(e=(0,h.default)(a).call(a,(e=>!e.hidden))).call(e,(e=>!(0,F.default)(s,this.getDataIndex(e.dataIndex)))),d=this.getBaseColumns(u);return this.hasItemActions()?[...d,{title:t("Action"),key:"operation",width:150,render:(e,t,a)=>L.default.createElement(J.default,{isAdminPage:o,actions:this.itemActions,onFinishAction:i,onCancelAction:l,item:t,index:a,containerProps:r,onClickAction:n})}]:d})),(0,N.default)(this,"stopRefreshAuto",(()=>{this.setState({autoRefresh:!1});var{stopRefreshAuto:e}=this.props;e&&e()})),(0,N.default)(this,"startRefreshAuto",(()=>{this.setState({autoRefresh:!0});var{startRefreshAuto:e}=this.props;e&&e()})),(0,N.default)(this,"renderSelectedTitle",(()=>L.default.createElement("div",{className:ee.default["select-title"]},L.default.createElement("div",null,this.renderBatchActions()),L.default.createElement("div",null,L.default.createElement(k.default,{type:"flat",className:ee.default["cancel-select"],onClick:this.handleCancelSelect},t("Cancel Select")))))),(0,N.default)(this,"renderTableTitle",(()=>this.renderNormalTitle())),(0,N.default)(this,"renderRowMenu",(()=>{var{hideRow:e}=this.state;return L.default.createElement(Y.default,{className:ee.default["column-menu"],options:this.hideableRows,value:(e=>{var t,a=[];return(0,v.default)(t=this.hideableRows).call(t,(t=>{-1===(0,y.default)(e).call(e,t.value)&&a.push(t.value)})),a})(e),onChange:this.handleRowHide})})),(0,N.default)(this,"renderTableFooter",(e=>{var{page:t,current:a,pageSize:r,total:n,pageSizeOptions:i}=this.props.pagination,{isLoading:l,hideTotal:o}=this.props;return L.default.createElement(Q.default,{current:t||a||1,pageSize:r,onChange:this.handlePageChange,currentDataSize:e.length,pageSizeOptions:i||[10,20,50,100],total:n,isLoading:l,onFocusChange:this.handleInputFocus,hideTotal:o})})),this.state={hideRow:(0,H.getLocalStorageItem)((0,g.default)(a="".concat(this.useId,"-")).call(a,this.props.resourceName))||[],filters:[],timeFilter:{},autoRefresh:e.autoRefresh},this.sortKey=e.defaultSortKey,this.sortOrder=e.defaultSortOrder,this.suggestions=(0,p.default)(r=(0,h.default)(n=e.columns).call(n,(e=>e.search&&e.dataIndex))).call(r,(e=>{var t;return{label:e.title,key:e.dataIndex,options:e.filters&&(0,p.default)(t=e.filters).call(t,(e=>({label:e.text,key:e.value})))}}))}get hideableRows(){var e,t,a;return(0,p.default)(e=(0,h.default)(t=(0,h.default)(a=this.props.columns).call(a,(e=>!e.hidden))).call(t,(e=>e.isHideable))).call(e,(e=>({label:e.title,value:this.getDataIndex(e.dataIndex)||e.key})))}get useId(){var{user:e={}}=(0,V.toJS)(this.props.rootStore)||{},{user:{id:t}={}}=e||{};return t}get itemActions(){var{itemActions:e={}}=this.props;return e}filterDownloadColumns(e){var a,r,{rowKey:n}=this.props,i=(0,p.default)(a=(0,h.default)(e).call(e,(e=>!e.hidden))).call(a,(e=>{var{title:a,splitColumnForDownload:r=!0}=e;if((0,m.default)(a).call(a,"/")&&r){var i,l,[o,s]=e.title.split("/"),u=s;if(o.length>2)u=(0,g.default)(l="".concat(o.split("ID")[0])).call(l,s);var d=e.idKey||n,c=null;return(0,m.default)(i=e.title).call(i,t("Project"))&&"project_name"===e.dataIndex&&(d="project_id",c=(e,t)=>(0,G.getProjectId)(t)),[{title:o,dataIndex:d,render:c},ae(ae({},e),{},{title:u})]}return e}));return(0,g.default)(r=[]).call(r,...i)}renderBatchActions(){var{batchActions:e,selectedRowKeys:t,data:a,rowKey:r,containerProps:n,onClickAction:i,onFinishAction:l,onCancelAction:o,resourceName:s,isAdminPage:u}=this.props,d=(0,h.default)(a).call(a,(e=>(0,y.default)(t).call(t,e[r])>=0));return e?L.default.createElement(X.default,{isAdminPage:u,visibleButtonNumber:3,selectedItemKeys:t,selectedItems:d,batchActions:e,onFinishAction:l,onCancelAction:o,containerProps:n,onClickAction:i,resourceName:s}):null}renderTimeFilter(){var{showTimeFilter:e,filterTimeDefaultValue:t}=this.props;if(!e)return null;var a={onChange:this.handleTimeChange,className:ee.default.timer};return void 0!==t&&(a.defaultValue=t),L.default.createElement(q.default,a)}renderSearch(){var{hideSearch:e,searchFilters:a,initFilter:r={}}=this.props;return e?null:a.length>0?L.default.createElement("div",{className:ee.default["search-row"]},L.default.createElement(U.default,{filterParams:a,initValue:r,onInputChange:this.handleFilterInput,onInputFocus:this.handleInputFocus,placeholder:t("Multiple filter tags are separated by enter")})):L.default.createElement("div",{className:ee.default["search-row"]},L.default.createElement(C.default,{placeholder:t("Enter query conditions to filter"),onChange:this.handleFilterInputText}))}renderMiddleInHeader(){var{middleComponentInHeader:e}=this.props;return e||null}renderActions(){var{isAdminPage:e,primaryActions:t,containerProps:a,onClickAction:r,onFinishAction:n,onCancelAction:i,primaryActionsExtra:l}=this.props;return t?L.default.createElement(Z.default,{isAdminPage:e,primaryActions:t,containerProps:a,onClickAction:r,onFinishAction:n,onCancelAction:i,primaryActionsExtra:l}):null}renderCustomButton(){var{hideCustom:e}=this.props;return e?null:L.default.createElement(w.default,{overlay:this.renderRowMenu()},L.default.createElement(k.default,{className:ee.default["custom-button"],type:"default",icon:L.default.createElement(I.default,null)}))}renderDownload(){var{pagination:e,data:t,columns:a,resourceName:r,detailName:n,getDownloadData:i,onClickAction:l,onCancelAction:o,hideDownload:s}=this.props;if(s)return null;var{total:u}=e,d={data:t,columns:this.filterDownloadColumns(a),total:u,getValueRenderFunc:G.getValueRenderFunc,resourceName:r,extraName:n,getData:i,onBeginDownload:l,onFinishDownload:o,onCancelDownload:o};return L.default.createElement($.default,d)}renderRefresh(){var{hideRefresh:e}=this.props;return e?null:L.default.createElement(k.default,{type:"default",icon:L.default.createElement(x.default,null),onClick:this.handleRefresh})}renderRefreshAuto(){var{hideAutoRefresh:e}=this.props;if(e)return null;var{autoRefresh:a}=this.state;if(a){var r=t("Stop auto refreshing data");return L.default.createElement(A.default,{title:r},L.default.createElement(k.default,{type:"primary",icon:L.default.createElement(S.default,null),onClick:this.stopRefreshAuto}))}var n=t("Start auto refreshing data");return L.default.createElement(A.default,{title:n},L.default.createElement(k.default,{type:"default",icon:L.default.createElement(_.default,null),onClick:this.startRefreshAuto}))}renderNormalTitle(){return L.default.createElement("div",{className:ee.default["table-header"],id:"sl-table-header-search"},L.default.createElement("div",{className:(0,z.default)(ee.default["table-header-action-btns"],"table-header-action-btns")},this.renderActions(),this.renderBatchActions()),this.renderTimeFilter(),this.renderMiddleInHeader(),L.default.createElement("div",{className:ee.default["table-header-right"]},this.renderSearch(),L.default.createElement("div",{className:(0,z.default)(ee.default["table-header-btns"],"table-header-btns")},this.renderRefresh(),this.renderDownload(),this.renderCustomButton(),this.renderRefreshAuto())))}render(){var{className:e,data:t,isLoading:a,silentLoading:r,rowKey:n,selectedRowKeys:i,onSelectRowKeys:l,hideHeader:o,getCheckboxProps:s,pagination:u,scrollY:d,expandable:c,isPageByBack:f=!0,ableSkipPageByBackend:p,childrenColumnName:h}=this.props,m=null,g=!(!p&&f)&&ae(ae({},u),{},{size:"small"});o||this.renderTableTitle;var v=!p&&f?this.renderTableFooter:null;l&&(m={selectedRowKeys:i,getCheckboxProps:s,onChange:l});var y=this.renderTableTitle(),_=this.getColumns(),S={};return d>0&&(S.y=d||400),L.default.createElement("div",null,y,L.default.createElement(b.default,{className:(0,z.default)(ee.default.table,"sl-table",e),rowKey:n,columns:_,dataSource:(0,V.toJS)(t),loading:!r&&a,onChange:this.handleChange,pagination:g,rowSelection:m,sortDirections:["ascend","descend","ascend"],scroll:S,showSorterTooltip:!1,expandable:c,footer:v,childrenColumnName:h}))}}a.BaseTable=re,(0,N.default)(re,"propTypes",{data:O.default.oneOfType([O.default.array,O.default.object]).isRequired,columns:O.default.array.isRequired,selectedRowKeys:O.default.array,isLoading:O.default.bool,pagination:O.default.object,filters:O.default.object,keyword:O.default.string,rowKey:O.default.any,onFetch:O.default.func,onFilterChange:O.default.func,onSelectRowKeys:O.default.func,getCheckboxProps:O.default.func,hideHeader:O.default.bool,hideSearch:O.default.bool,hideCustom:O.default.bool,batchActions:O.default.array,alwaysUpdate:O.default.bool,emptyText:O.default.oneOfType([O.default.string||O.default.func]),resourceName:O.default.string,detailName:O.default.string,expandable:O.default.object,showTimeFilter:O.default.bool,timeFilter:O.default.any,isPageByBack:O.default.bool,isSortByBack:O.default.bool,ableSkipPageByBackend:O.default.bool,autoRefresh:O.default.bool,hideRefresh:O.default.bool,hideAutoRefresh:O.default.bool,startRefreshAuto:O.default.func,stopRefreshAuto:O.default.func,dataDurationAuto:O.default.number,defaultSortKey:O.default.string,defaultSortOrder:O.default.string,hideTotal:O.default.bool,hideDownload:O.default.bool,primaryActionsExtra:O.default.any,isAdminPage:O.default.bool,containerProps:O.default.any,middleComponentInHeader:O.default.node}),(0,N.default)(re,"defaultProps",{rowKey:"name",selectedRowKeys:[],onFetch(){},hideHeader:!1,hideSearch:!1,hideCustom:!1,resourceName:"",detailName:"",expandable:void 0,showTimeFilter:!1,isPageByBack:!1,isSortByBack:!1,autoRefresh:!0,hideRefresh:!1,hideAutoRefresh:!1,dataDurationAuto:15,defaultSortKey:"",defaultSortOrder:"",hideTotal:!1,hideDownload:!1,primaryActionsExtra:null,isAdminPage:!1,ableSkipPageByBackend:!1});var ne=(0,W.inject)("rootStore")(re);a.default=ne},1590:function(e,t,a){var r=a(3542);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(65)(r,n);r.locals&&(e.exports=r.locals)},1591:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.default=t.ActionLogStore=void 0;var i=n(a(50)),l=n(a(53));class o extends l.default{get client(){return i.default.nova.servers.instanceActions}get isSubResource(){return!0}get paramsFunc(){return()=>({})}detailFetchByClient(e){var{id:t,requestId:a}=e;return this.client.show(t,a)}}t.ActionLogStore=o;var s=new o;t.default=s},1592:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=function(e){var{id:a,requestId:r,store:n,actionEvent:i}=e,f=[{title:t("Operation Name"),dataIndex:"event",key:"event",render:e=>i[e]||e},{title:t("Start Time"),dataIndex:"start_time",key:"start_time",render:e=>(0,d.getLocalTimeStr)(e)},{title:t("End Time"),dataIndex:"finish_time",key:"finish_time",render:e=>e?(0,d.getLocalTimeStr)(e):"-"},{title:t("Execution Result"),dataIndex:"result",key:"result",render:e=>"Success"===e?t("Success"):"-"}],p=function(){var e=(0,s.default)((function*(){var e,t=(yield n.fetchDetail({id:a,requestId:r}))||{},{events:i=[]}=t;return(0,l.default)(e=(0,o.default)(i).call(i)).call(e)}));return function(){return e.apply(this,arguments)}}();return u.default.createElement(c.default,{columns:f,getData:p})};var l=i(r(634)),o=i(r(203)),s=i(r(49)),u=i(r(0)),d=r(580),c=i(r(638))},1597:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.CreateKeypair=void 0;var p=f(r(63)),h=f(r(49)),m=f(r(35)),g=r(412),v=r(1241),y=f(r(423)),b=f(r(340)),_=f(r(1352));function S(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=S(Object(r),!0)).call(a,(function(t){(0,m.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=S(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}var w=()=>{var{total:e=0,data:t=[]}=y.default.list||{};return e||t.length},I=e=>{var{limit:t=0}=e||{};return-1===t||t>w()?1:0};class C extends v.ModalAction{constructor(){super(...arguments),(0,m.default)(this,"onSubmit",(e=>{var{name:t,public_key:a}=e,r={name:t,public_key:a,type:"ssh"};return y.default.create(r).then((e=>{if(!a){var{keypair:{private_key:r}}=e,n="".concat(t,".pem"),i=new Blob([r],{type:"text/plain;charset=utf-8"});_.default.saveAs(i,n)}}))}))}get name(){return t("Create Keypair")}init(){this.state.quota={},this.state.quotaLoading=!0,this.projectStore=b.default,this.getQuota()}get tips(){return t("Quota of key pair means: the number of allowed key pairs for each user.")}static get disableSubmit(){var{novaQuota:{key_pairs:e={}}}=b.default;return 0===I(e)}static get showQuota(){return!0}get showQuota(){return!0}getQuota(){var e=this;return(0,h.default)((function*(){e.setState({quotaLoading:!0});var t=yield e.projectStore.fetchProjectNovaQuota(),{key_pairs:a={}}=t||{};e.setState({quota:a,quotaLoading:!1})}))()}get quotaInfo(){var{quota:e={},quotaLoading:a}=this.state;if(a)return[];var r=I(e),n=w();return[x(x({},e),{},{add:r,used:n,name:"key_pair",title:t("Key Pair")})]}get defaultValue(){return{type:"create"}}get createTypeList(){return[{value:"create",label:t("Create Keypair")},{value:"import",label:t("Import Keypair")}]}get formItems(){var{type:e}=this.state,a="create"===e;return[{name:"type",label:t("Create Type"),type:"radio",options:this.createTypeList},{name:"name",label:t("Name"),type:"input-name",required:!0,isKeypair:!0},{name:"public_key",label:t("Public Key"),type:"textarea-from-file",hidden:a,required:!a}]}}a.CreateKeypair=C,(0,m.default)(C,"id","create-keypair"),(0,m.default)(C,"title",t("Create Keypair")),(0,m.default)(C,"policy","os_compute_api:os-keypairs:create"),(0,m.default)(C,"allowed",(()=>p.default.resolve(!0)));var k=(0,g.inject)("rootStore")((0,g.observer)(C));a.default=k},1600:function(e,a,r){"use strict";var n=r(162),i=r(20),l=r(25),o=r(21);i(a,"__esModule",{value:!0}),a.default=void 0,r(1246);var s=o(r(1247)),u=o(r(1347));r(1244);var d=o(r(1245));r(344);var c=o(r(202));r(1311);var f=o(r(1312));r(569);var p=o(r(1253)),h=o(r(343)),m=o(r(29)),g=o(r(232)),v=o(r(54)),y=o(r(203)),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=x(t);if(a&&a.has(e))return a.get(e);var r={},n=i&&l;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=n?l(e,o):null;s&&(s.get||s.set)?i(r,o,s):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(r(0)),_=(r(161),r(564),r(342)),S=o(r(16));function x(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(x=function(e){return e?a:t})(e)}var w=e=>{var{tags:a,onChange:r,maxLength:n,maxCount:i}=e,[l,o]=(0,b.useState)(a),[S,x]=(0,b.useState)(!1),[w,I]=(0,b.useState)(""),[C,k]=(0,b.useState)(-1),[D,P]=(0,b.useState)(""),T=n&&n>0?{maxLength:n}:{},A=i&&i>0||-1;var M=null,N=null,E=e=>{M=e};function R(e){P(e.target.value)}function j(){var e=[...l];e[C]=D,o(e),P(""),k(-1)}function F(){var e=w.toLocaleLowerCase();w&&!(0,g.default)(l).call(l,(t=>t.toLowerCase()===e))&&(-1!==A&&l.length<i||-1===A)&&o([...l,w]),x(!1),I("")}return(0,b.useEffect)((()=>{N&&N.focus()}),[S]),(0,b.useEffect)((()=>{M&&M.focus()}),[C]),(0,b.useEffect)((()=>{r(l)}),[l]),b.default.createElement(s.default,{gutter:[0,8]},(0,v.default)(l).call(l,((e,t)=>{if(C===t)return b.default.createElement(p.default,(0,h.default)({ref:E,style:{width:78,marginRight:8,verticalAlign:"top"},key:e,size:"small",value:D,onChange:R,onBlur:j,onPressEnter:j},T));var a=e.length>20,r=a?"".concat((0,y.default)(e).call(e,0,20),"..."):e,n=b.default.createElement(f.default,{key:e,closable:!0,onClose:()=>{return t=e,void o((0,m.default)(l).call(l,(e=>e!==t)));var t},color:_.projectTagsColors[t%10]},b.default.createElement("span",{style:{whiteSpace:"pre-wrap"},onDoubleClick:a=>{k(t),P(e),a.preventDefault()}},r));return b.default.createElement(d.default,{span:24,key:e},a?b.default.createElement(c.default,{title:b.default.createElement("span",{style:{whiteSpace:"pre-wrap"}},e)},n):n)})),b.default.createElement(d.default,{span:24},S&&b.default.createElement(p.default,(0,h.default)({ref:e=>{N=e},style:{width:78,marginRight:8,verticalAlign:"top"},type:"text",size:"small",value:w,onChange:function(e){I(e.target.value)},onBlur:F,onPressEnter:F},T)),!S&&b.default.createElement(f.default,{onClick:function(){x(!0)}},b.default.createElement(u.default,null)," ",t("New Tag"))))};w.propTypes={tags:S.default.array,onChange:S.default.func,maxLength:S.default.number,maxCount:S.default.number};var I=w;a.default=I},1601:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=void 0;var l=i(r(1602)),o=i(r(3619)),s=i(r(3620)),u=i(r(3621)),d=i(r(3622)),c=i(r(3623)),f=i(r(3624)),p=i(r(3625)),h=i(r(3626)),m=i(r(3627)),g=i(r(1603)),v=i(r(3628)),y=i(r(3629)),b=i(r(3630)),_=i(r(3631)),S=i(r(3632)),x=i(r(3633)),w=i(r(3634)),I=i(r(3635)),C={title:t("Data Protection"),actions:[f.default,g.default,b.default,m.default,u.default]},k={title:t("Instance Related"),actions:[I.default,w.default,d.default,c.default]},D={title:t("Capacity & Type"),actions:[p.default,h.default]},P={rowActions:{firstAction:o.default,moreActions:[C,k,D,{action:s.default},{action:S.default},{action:x.default}]},batchActions:[s.default],primaryActions:[l.default,_.default]},T={rowActions:{firstAction:o.default,moreActions:[C,k,D,{action:s.default},{action:S.default},{action:x.default}]},batchActions:[],primaryActions:[]},A={actionConfigs:P,adminConfig:{rowActions:{firstAction:s.default,moreActions:[{action:v.default},{action:y.default}]},batchActions:[s.default],primaryActions:[]},instanceDetailConfig:T,instanceDetailAdminConfig:{rowActions:{firstAction:v.default,moreActions:[{action:y.default}]},batchActions:[],primaryActions:[]}};a.default=A},1602:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Create=void 0;var p=f(r(86)),h=f(r(63)),m=f(r(1394)),g=f(r(54)),v=f(r(609)),y=f(r(77)),b=f(r(1252)),_=f(r(28)),S=f(r(29));r(1278);var x=f(r(1279)),w=f(r(343));r(1354);var I=f(r(428)),C=f(r(49)),k=f(r(35)),D=f(r(0)),P=r(412),T=f(r(1437)),A=r(580),M=r(566),N=f(r(592)),E=f(r(577)),R=f(r(414)),j=f(r(578)),F=f(r(340)),L=f(r(1292)),O=(r(161),r(36)),z=r(1241),B=f(r(4)),V=r(574),U=r(1320),Q=r(163),q=f(r(3617));function G(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function K(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=G(Object(r),!0)).call(a,(function(t){(0,k.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=G(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}class H extends z.FormAction{constructor(){var e;super(...arguments),e=this,(0,k.default)(this,"onImageTabChange",(e=>{this.setState({imageTab:e})})),(0,k.default)(this,"onConfirmCancel",(()=>{var{initVolumeType:e}=this.state,{selectedRows:t,selectedRowKeys:a,snapshotId:r}=e,n={selectedRows:t,selectedRowKeys:a,snapshotId:"".concat(r,"-1")};this.setState({initVolumeType:n})})),(0,k.default)(this,"onVolumeTypeChange",(e=>{var{selectedRows:a=[]}=e;if(0===a.length)return(0,M.setCreateVolumeType)(""),void this.setState({multiattach:!1});var{id:r,extra_specs:{multiattach:n="False"}={},name:i}=a[0];if((0,M.setCreateVolumeType)(i),this.sourceTypeIsSnapshot){var{initVolumeType:{selectedRowKeys:l=[]},confirmCount:o=0}=this.state;r!==l[0]&&o<1&&(T.default.warn({title:t("Note: Are you sure you need to modify the volume type?"),content:M.snapshotTypeTip,onCancel:this.onConfirmCancel}),this.setState({confirmCount:1}))}this.setState({multiattach:"<is> True"===n})})),(0,k.default)(this,"onSnapshotChange",function(){var t=(0,C.default)((function*(t){var{selectedRows:a=[]}=t||{},r="",n=null;if(a.length){var i,{origin_data:{volume_type_id:l}={},id:o}=a[0]||{};if(l)r=l,n=(0,p.default)(i=e.volumeTypes).call(i,(e=>e.id===r));else try{var s,u=yield e.snapshotStore.fetchDetail({id:o}),{volume:{volume_type:d}}=u||{};n=(0,p.default)(s=e.volumeTypes).call(s,(e=>e.name===d)),r=n.id}catch(e){}if(n){var c={selectedRowKeys:[r],selectedRows:[n],snapshotId:o};e.setState({initVolumeType:c})}}}));return function(e){return t.apply(this,arguments)}}()),(0,k.default)(this,"onCountChange",(e=>{(0,M.setCreateVolumeCount)(e),this.setState({count:e},(()=>{this.onCountChangeCallback&&this.onCountChangeCallback()}))})),(0,k.default)(this,"getCountMax",(()=>{var{volumes:{left:e=0}={}}=this.getVolumeQuota();return-1===e?1/0:e})),(0,k.default)(this,"onSubmit",(e=>{var t,a,{count:r}=this.state;if(this.message)return h.default.reject(this.message);var{backup:n,image:i,snapshot:l,size:o,availableZone:s,shared:u,name:d,volume_type:c}=e,f={name:d,size:o,availability_zone:"noSelect"!==s?s:null,multiattach:u,volume_type:c.selectedRowKeys[0]};return n&&(0,m.default)(n.selectedRowKeys)&&n.selectedRowKeys.length&&(f.backup_id=n.selectedRowKeys[0]),i&&(0,m.default)(i.selectedRowKeys)&&i.selectedRowKeys.length&&(f.imageRef=i.selectedRowKeys[0]),l&&(0,m.default)(l.selectedRowKeys)&&l.selectedRowKeys.length&&(f.snapshot_id=l.selectedRowKeys[0]),1===r?this.volumeStore.create(f):(0,Q.allSettled)((0,g.default)(t=(0,v.default)(a=new Array(r)).call(a,r)).call(t,((e,t)=>{var a,r=K(K({},f),{},{name:(0,y.default)(a="".concat(f.name,"-")).call(a,t+1)});return this.volumeStore.create(r)})))}))}init(){this.state=K(K({},this.state),{},{quotaLoading:!0,count:1,sharedDisabled:!1,confirmCount:0}),this.message="",this.snapshotStore=N.default,this.imageStore=E.default,this.volumeStore=R.default,this.volumeTypeStore=j.default,this.backupStore=L.default,this.getQuota(),this.getAvailZones(),this.getImages(),this.getVolumeTypes()}get listUrl(){return this.getRoutePath("volume")}get name(){return t("create volume")}static allowed(){return h.default.resolve(!0)}get disableSubmit(){var{quotaLoading:e}=this.state;if(e)return!0;var{cinderQuota:t={}}=F.default,{add:a,error:r}=(0,M.getAdd)(t),n=0===a;return n?r!==this.message&&(I.default.error(r),this.message=r):this.message="",n}get instanceName(){var e,t,{name:a}=(0,b.default)(this)||{},{count:r=1}=this.state;return 1===r?a:(0,g.default)(e=(0,v.default)(t=new Array(r)).call(t,r)).call(e,((e,t)=>{var r;return(0,y.default)(r="".concat(a,"-")).call(r,t+1)})).join(", ")}get errorText(){return this.message?t("Unable to create volume: insufficient quota to create resources."):super.errorText}get showQuota(){return!0}getVolumeQuota(){var{quota:e={}}=this.state;return(0,M.getQuota)(e)}get quotaInfo(){return(0,M.getQuotaInfo)(this)}get defaultSize(){return this.quotaIsLimit&&this.maxSize<10?this.maxSize:10}get defaultValue(){var{initVolumeType:e}=this.state;return{source:this.sourceTypes[0],size:this.defaultSize,project:this.currentProjectName,availableZone:(this.availableZones[0]||[]).value,volume_type:e}}get availableZones(){var e,a,r=[{label:t("Not select"),value:"noSelect"}];return(0,_.default)(e=(0,S.default)(a=this.volumeStore.availabilityZones||[]).call(a,(e=>e.zoneState.available))).call(e,(e=>{r.push({value:e.zoneName,label:e.zoneName})})),r}get images(){var e,{imageTab:t}=this.state,a=(0,S.default)(e=this.imageStore.list.data||[]).call(e,(e=>!(!(0,V.canImageCreateInstance)(e)&&!(0,V.canImageCreateIronicInstance)(e))&&(t?(0,V.getImageOS)(e)===t&&"active"===e.status:e)));return(0,g.default)(a).call(a,(e=>K(K({},e),{},{key:e.id})))}get volumeTypes(){return(0,O.toJS)(this.volumeTypeStore.list.data||[])}get backups(){var e;return(0,g.default)(e=this.backupStore.list.data||[]).call(e,(e=>K(K({},e),{},{key:e.id})))}get sourceTypes(){return[{label:t("Blank Volume"),value:"blank-volume"},{label:t("Image"),value:"image"},{label:t("Volume Snapshot"),value:"snapshot"}]}get quotaIsLimit(){var{gigabytes:{limit:e}={}}=this.getVolumeQuota();return-1!==e}get maxSize(){var{gigabytes:{left:e=0}={}}=this.getVolumeQuota();return-1===e?1e3:e}getAvailZones(){this.volumeStore.fetchAvailabilityZoneList()}getImages(){this.imageStore.fetchList({all_projects:this.hasAdminRole})}getVolumeTypes(){var e=this;return(0,C.default)((function*(){var t=yield e.volumeTypeStore.fetchList();if(t.length>0){var a=t[0],{id:r,name:n}=a,i={selectedRowKeys:[r],selectedRows:[a]};(0,M.setCreateVolumeType)(n),e.setState({initVolumeType:i,volume_type:a},(()=>{e.updateFormValue("volume_type",i),e.updateDefaultValue()}))}}))()}getQuota(){var e=this;return(0,C.default)((function*(){yield(0,M.fetchQuota)(e,0),(0,M.setCreateVolumeSize)(e.defaultSize),e.onCountChange(1),e.updateDefaultValue()}))()}get systemTabs(){return(0,V.getImageSystemTabs)()}getVolumeTypeExtra(){if(this.sourceTypeIsSnapshot)return M.snapshotTypeTip;var{multiattach:e=!1}=this.state;return e?M.multiTip:void 0}get sourceTypeIsImage(){var{source:e}=this.state;return e===this.sourceTypes[1].value}get sourceTypeIsSnapshot(){var{source:e}=this.state;return e===this.sourceTypes[2].value}getDiskMinSize(){var e=0;if(this.sourceTypeIsImage){var{min_disk:t=0,size:a=0}=this.state.image||{},r=Math.ceil(a/1024/1024/1024);e=Math.max(t,r,1)}else if(this.sourceTypeIsSnapshot){var{size:n=0}=this.state.snapshot||{};e=n}return Math.max(e,1)}get nameForStateUpdate(){return["source","image","snapshot","size","volume_type"]}get formItems(){var e,{initVolumeType:a}=this.state,r=this.getDiskMinSize();return[{name:"project",label:t("Project"),type:"label"},{name:"availableZone",label:t("Available Zone"),type:"select",placeholder:t("Please select"),options:this.availableZones,tip:t("Unless you know clearly which AZ to create the volume in, you don not need to fill in here.")},{type:"divider"},{name:"source",label:t("Data Source Type"),type:"radio",options:this.sourceTypes,required:!0,isWrappedValue:!0},{name:"image",label:t("Operating System"),type:"select-table",data:this.images,isLoading:this.imageStore.list.isLoading,required:this.sourceTypeIsImage,isMulti:!1,hidden:!this.sourceTypeIsImage,filterParams:[{label:t("Name"),name:"name"}],columns:(0,V.getImageColumns)(this),tabs:this.systemTabs,defaultTabValue:this.systemTabs[0].value,selectedLabel:t("Image"),onTabChange:this.onImageTabChange},{name:"snapshot",label:t("Volume Snapshot"),type:"select-table",backendPageStore:this.snapshotStore,required:this.sourceTypeIsSnapshot,isMulti:!1,hidden:!this.sourceTypeIsSnapshot,isSortByBack:!0,defaultSortKey:"created_at",defaultSortOrder:"descend",onChange:this.onSnapshotChange,filterParams:[{label:t("Name"),name:"name"}],columns:[{title:t("Name"),dataIndex:"name"},{title:t("Size"),dataIndex:"size",unit:"GiB",sorter:!1},{title:t("Status"),dataIndex:"status",valueMap:M.volumeStatus},{title:t("Description"),dataIndex:"description",sorter:!1},{title:t("Created At"),dataIndex:"created_at",render:e=>(0,A.getSinceTime)(e)}]},{type:"divider"},K(K({name:"volume_type",label:t("Volume Type"),type:"select-table",tip:t('The volume type needs to set "multiattach" in the metadata to support shared volume attributes.')},U.volumeTypeSelectProps),{},{data:this.volumeTypes,isLoading:this.volumeTypeStore.list.isLoading,required:!0,extra:this.getVolumeTypeExtra(),onChange:this.onVolumeTypeChange,initValue:a}),{name:"size",label:t("Capacity (GiB)"),type:"slider-input",max:this.maxSize,min:r,description:(0,y.default)(e="".concat(r,"GiB-")).call(e,this.maxSize,"GiB"),required:this.quotaIsLimit,hidden:!this.quotaIsLimit,onChange:M.onVolumeSizeChange},{name:"size",label:t("Capacity (GiB)"),type:"input-int",min:r,hidden:this.quotaIsLimit,required:!this.quotaIsLimit,onChange:M.onVolumeSizeChange},{type:"divider"},{name:"name",label:t("Name"),type:"input-name",placeholder:t("Please input name"),required:!0},{title:t("Description"),dataIndex:"description"}]}onCountChangeCallback(){}renderFooterLeft(){var{count:e=1}=this.state,a={min:1,max:this.getCountMax(),precision:0,onChange:this.onCountChange,formatter:e=>"$ ".concat(e).replace(/\D/g,"")};return D.default.createElement("div",null,D.default.createElement("span",null,t("Count")),D.default.createElement(x.default,(0,w.default)({},a,{value:e,className:(0,B.default)(q.default.input,"volume-count")})))}}a.Create=H,(0,k.default)(H,"id","volume-create"),(0,k.default)(H,"title",t("Create Volume")),(0,k.default)(H,"path","/storage/volume/create"),(0,k.default)(H,"policy","volume:create");var W=(0,P.inject)("rootStore")((0,P.observer)(H));a.default=W},1603:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.CreateBackup=void 0;var l=i(r(77)),o=i(r(63)),s=i(r(35)),u=r(412),d=r(1241),c=i(r(1292)),f=r(566),p=r(1356);class h extends d.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"onSubmit",(e=>{var{id:t}=this.item,{name:a,incremental:r}=e,n={name:a,incremental:r,volume_id:t,force:(0,f.isInUse)(this.item)};return this.store.create(n)}))}get name(){return t("Create volume backup")}get tips(){return p.createTip}get defaultValue(){var e,t,{name:a,id:r,volume_type:n,size:i}=this.item;return{volume:(0,l.default)(e=(0,l.default)(t="".concat(a||r,"(")).call(t,n," | ")).call(e,i,"GiB)"),incremental:!1}}get formItems(){return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},{name:"name",label:t("Volume Backup Name"),type:"input-name",required:!0},{name:"incremental",label:t("Backup Mode"),type:"radio",options:p.backupModeList,tip:p.modeTip}]}init(){this.store=c.default,c.default.setCurrentVolume(this.item),(0,p.fetchQuota)(this)}static get disableSubmit(){return(0,p.checkQuotaDisable)()}static get showQuota(){return!0}get showQuota(){return!0}get quotaInfo(){return(0,p.getQuotaInfo)(this)}}a.CreateBackup=h,(0,s.default)(h,"id","create-backup"),(0,s.default)(h,"title",t("Create Volume Backup")),(0,s.default)(h,"buttonText",t("Create Backup")),(0,s.default)(h,"policy","backup:create"),(0,s.default)(h,"aliasPolicy","cinder:backup:create"),(0,s.default)(h,"allowed",(e=>o.default.resolve((0,f.isAvailableOrInUse)(e))));var m=(0,u.inject)("rootStore")((0,u.observer)(h));a.default=m},1604:function(e,t,a){"use strict";var r=a(32),n=a(42),i=a(29),l=a(25),o=a(28),s=a(44),u=a(45),d=a(20),c=a(21);d(t,"__esModule",{value:!0}),t.default=t.PoolStore=void 0;var f=c(a(35)),p=c(a(58)),h=c(a(351)),m=c(a(50)),g=c(a(53));function v(e,t){var a=r(e);if(n){var o=n(e);t&&(o=i(o).call(o,(function(t){return l(e,t).enumerable}))),a.push.apply(a,o)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=v(Object(r),!0)).call(a,(function(t){(0,f.default)(e,t,r[t])}));else if(s)u(e,s(r));else{var n;o(n=v(Object(r))).call(n,(function(t){d(e,t,l(r,t))}))}}return e}class b extends g.default{get client(){return m.default.cinder.pools}get listFilterByProject(){return!1}get paramsFunc(){return e=>{var{keywords:t}=e;return y(y({},(0,p.default)(e,["keywords"])),{},{detail:!0})}}get mapper(){return e=>{var{name:t,capabilities:a={}}=e,r=y({name:t},a),{total_capacity_gb:n,free_capacity_gb:i}=a;return(0,h.default)(n)&&(0,h.default)(i)&&(r.usedGB=(n-i).toFixed(2),r.usedGBPercent=100*(r.usedGB/n).toFixed(2)),r}}}t.PoolStore=b;var _=new b;t.default=_},1605:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var i=a(342),l=n(a(3636)),o=n(a(3637)),s=n(a(3638)),u=n(a(3639)),d=n(a(3640)),c=n(a(1467)),f={firstAction:d.default,moreActions:[{action:o.default},{action:u.default},{action:c.default},{action:s.default}]},p={actionConfigs:{rowActions:f,batchActions:[s.default],primaryActions:[l.default]},adminConfigs:{rowActions:{firstAction:s.default},batchActions:[s.default],primaryActions:[l.default]},instanceDetailConfigs:{rowActions:{firstAction:u.default}},instanceDetailAdminConfigs:i.emptyActionConfig,qosDetailConfigs:{rowActions:f},qosDetailAdminConfigs:{rowActions:{firstAction:s.default}}};t.default=p},1606:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(3641)),l=n(a(3642)),o=n(a(3643)),s=n(a(3644)),u=n(a(3645)),d=n(a(3646)),c=n(a(3647)),f=n(a(3648)),p=n(a(1607)),h={actionConfigs:{rowActions:{firstAction:o.default,moreActions:[{action:s.default},{action:c.default},{action:f.default},{action:u.default},{action:d.default},{action:p.default},{},{action:l.default}]},batchActions:[l.default],primaryActions:[i.default]},actionConfigsInDetail:{rowActions:{firstAction:u.default,moreActions:[{action:d.default}]},batchActions:[],primaryActions:[]},noActions:{rowActions:{firstAction:null,moreActions:[]},batchActions:[],primaryActions:[]},adminActions:{rowActions:{firstAction:l.default,moreActions:[]},batchActions:[l.default],primaryActions:[]}};t.default=h},1607:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.ManageSecurityGroup=void 0;var l=i(r(63)),o=i(r(54)),s=i(r(49)),u=i(r(35)),d=i(r(119)),c=r(412),f=r(1241),p=i(r(572)),h=r(419),m=r(1326),g=r(36);class v extends f.ModalAction{constructor(){super(...arguments),(0,u.default)(this,"onSubmit",(e=>{var{securityGroup:{selectedRowKeys:t=[]}={},port_security_enabled:a}=e,{id:r}=this.item,n={port:{security_groups:a?t:[],port_security_enabled:a}};return this.securityGroupStore.updatePortSecurityGroup({id:r,reqBody:n})}))}get name(){return t("Manage Security Group")}init(){this.securityGroupStore=new h.SecurityGroupStore,this.currentSecurityGroups=[],this.state.sgInitValue={selectedRowKeys:[],selectedRows:[]},this.detail=null,this.getPortDetail()}static get modalSize(){return"large"}getModalSize(){return"large"}get defaultValue(){var{sgInitValue:e}=this.state,{selectedRowKeys:t=[]}=e||{};return t.length?{port_security_enabled:this.item.port_security_enabled,securityGroup:e}:{}}getPortDetail(){var e=this;return(0,s.default)((function*(){var{id:t,security_groups:a,port_security_enabled:r}=e.item,n=a;a||(n=(yield p.default.fetchDetail({id:t})).security_groups);var i=yield l.default.all((0,o.default)(n).call(n,(t=>e.securityGroupStore.fetchDetail({id:t})))),s={selectedRowKeys:(0,o.default)(n).call(n,(e=>(0,g.toJS)(e))),selectedRows:(0,o.default)(i).call(i,(e=>(0,g.toJS)(e)))};e.setState({sgInitValue:s,port_security_enabled:r}),e.updateFormValue("securityGroup",s),e.updateFormValue("port_security_enabled",r)}))()}get messageHasItemName(){var{item:e}=this.props;return!!e&&e.name}get formItems(){var{sgInitValue:e,port_security_enabled:a}=this.state;return[{name:"port_security_enabled",label:t("Port Security"),type:"switch",onChange:e=>{this.setState({port_security_enabled:e})},required:!0},{name:"securityGroup",label:t("Security Group"),type:"select-table",tips:t("The security group is similar to the firewall function for setting up network access control, or you can go to the console and create a new security group. (Note: The security group you selected will work on all virtual LANs on the instances.)"),backendPageStore:this.securityGroupStore,extraParams:{project_id:this.currentProjectId},initValue:e,isMulti:!0,filterParams:m.securityGroupFilter,columns:m.securityGroupColumns,hidden:!a}]}}a.ManageSecurityGroup=v,(0,u.default)(v,"id","manage-security-group"),(0,u.default)(v,"title",t("Manage Security Group")),(0,u.default)(v,"policy","update_port:port_security_enabled"),(0,u.default)(v,"allowed",(e=>l.default.resolve(0===(0,d.default)(e,"origin_data.allowed_address_pairs",[]).length)));var y=(0,c.inject)("rootStore")((0,c.observer)(v));a.default=y},1624:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.Storage=void 0;var l=i(r(58)),o=i(r(35)),s=r(412),u=i(r(1242)),d=i(r(1604)),c=r(1465);class f extends u.default{constructor(){super(...arguments),(0,o.default)(this,"getColumns",(()=>c.poolColumns)),(0,o.default)(this,"updateFetchParams",(e=>{var{all_projects:t}=e;return(0,l.default)(e,["all_projects"])}))}init(){this.store=d.default}get policy(){return"scheduler_extension:scheduler_stats:get_pools"}get name(){return t("storage backend")}get rowKey(){return"name"}get searchFilters(){return[{label:t("Name"),name:"name"},{label:t("Protocol"),name:"storage_protocol"},{label:t("Backend Name"),name:"volume_backend_name"}]}}a.Storage=f;var p=(0,s.inject)("rootStore")((0,s.observer)(f));a.default=p},1669:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Credentials=void 0;var p=f(r(54)),h=f(r(164)),m=f(r(35)),g=f(r(0)),v=r(412),y=f(r(1242)),b=r(1475),_=f(r(133)),S=r(4075);function x(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=x(Object(r),!0)).call(a,(function(t){(0,m.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=x(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}class I extends y.default{constructor(){super(...arguments),(0,m.default)(this,"getColumns",(()=>[{title:t("ID/Name"),dataIndex:"name",isName:!0,hasNoDetail:!0},{title:t("Project ID/Name"),dataIndex:"project_name"},{title:t("Description"),dataIndex:"description",isHideable:!0},{title:t("Expires At"),dataIndex:"expires_at",valueRender:"toLocalTime",isHideable:!0},{title:t("Restricted Situation"),dataIndex:"unrestricted",isHideable:!0,render:e=>e?t("Unrestricted"):t("Restricted"),titleTip:t("Used to restrict whether the application credential may be used for the creation or destruction of other application credentials or trusts.")},{title:t("Roles"),dataIndex:"roles",render:e=>{var t;return(0,p.default)(t=e||[]).call(t,(e=>g.default.createElement("div",{key:e.id},e.name)))},stringify:e=>(0,p.default)(e).call(e,(e=>e.name)).join("\n")}])),(0,m.default)(this,"updateFetchParams",(e=>this.isUserDetail?e:w(w({},e),{},{id:_.default.user.user.id})))}init(){this.store=new b.CredentialStore,this.downloadStore=new b.CredentialStore}get isUserDetail(){var e;return this.inDetailPage&&(0,h.default)(e=this.path).call(e,"user-admin/detail")}get policy(){return"identity:get_application_credential"}get name(){return t("application credential")}get actionConfigs(){return this.isUserDetail?S.detailConfigs:S.actionConfigs}get searchFilters(){return[{label:t("Name"),name:"name"}]}}a.Credentials=I;var C=(0,v.inject)("rootStore")((0,v.observer)(I));a.default=C},1753:function(e,t,a){var r=a(1754);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(65)(r,n);r.locals&&(e.exports=r.locals)},1754:function(e,t,a){(t=e.exports=a(64)(!1)).push([e.i,".index__editor--3eLoM {\n  min-height: 60vh;\n  border-radius: 4px;\n}\n",""]),t.locals={editor:"index__editor--3eLoM"}},1755:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(343)),l=n(a(0)),o=n(a(1429)),s=n(a(1343));a(1761),a(1762),a(1763);var u=a(1765);s.default.config.setModuleUrl("ace/mode/json_worker",u);class d extends l.default.Component{render(){return l.default.createElement(o.default,(0,i.default)({theme:"github",width:"auto",height:"100%",tabSize:2,debounceChangePeriod:200,editorProps:{$blockScrolling:!0},showPrintMargin:!1,wrapEnabled:!0},this.props))}}t.default=d},1763:function(e,t,a){var r=a(1764);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(65)(r,n);r.locals&&(e.exports=r.locals)},1764:function(e,t,a){(t=e.exports=a(64)(!1)).push([e.i,"/* stylelint-disable selector-class-pattern */\n.custom__ace_editor--2x9Bb {\n  font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;\n  line-height: 20px !important;\n  -webkit-font-smoothing: auto;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L {\n  color: #fff;\n  background-color: #242e42;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_gutter--1cP4P {\n  color: #537f7e;\n  background-color: #242e42;\n  border-right: 1px solid #4a5974;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_variable--ViPst,\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_identifier--249iw,\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_meta--2PQjL.custom__ace_tag--2I4Xk {\n  color: #75e0f2;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_keyword--TdUSy {\n  color: #fff;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_string--3lFMH {\n  color: #ebe087;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_constant--bDEu2.custom__ace_numeric--2gqBl {\n  color: #bd99ff;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_marker-layer--6Ofnc .custom__ace_active-line--3gBy- {\n  background-color: #36435c;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_indent-guide--2YcVM {\n  padding: 2px 0;\n  border-right: 1px dotted #777;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_marker-layer--6Ofnc .custom__ace_selection--1U_DQ {\n  background-color: #4a5974;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_comment--1foUc {\n  color: #aaa;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_fold--3dVBm:hover {\n  background-color: #fff;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_line--3FuBW .custom__ace_fold--3dVBm {\n  height: auto;\n}\n",""]),t.locals={ace_editor:"custom__ace_editor--2x9Bb","ace-chaos":"custom__ace-chaos--NJP1L",ace_gutter:"custom__ace_gutter--1cP4P",ace_variable:"custom__ace_variable--ViPst",ace_identifier:"custom__ace_identifier--249iw",ace_meta:"custom__ace_meta--2PQjL",ace_tag:"custom__ace_tag--2I4Xk",ace_keyword:"custom__ace_keyword--TdUSy",ace_string:"custom__ace_string--3lFMH",ace_constant:"custom__ace_constant--bDEu2",ace_numeric:"custom__ace_numeric--2gqBl","ace_marker-layer":"custom__ace_marker-layer--6Ofnc","ace_active-line":"custom__ace_active-line--3gBy-","ace_indent-guide":"custom__ace_indent-guide--2YcVM",ace_selection:"custom__ace_selection--1U_DQ",ace_comment:"custom__ace_comment--1foUc",ace_fold:"custom__ace_fold--3dVBm",ace_line:"custom__ace_line--3FuBW"}},1772:function(e,a,r){"use strict";r(20)(a,"__esModule",{value:!0}),a.statusMap=void 0;var n={500:t("Internal Server Error (code: 500) "),501:t("Not Implemented (code: 501) "),502:t("Bad Gateway (code: 502) "),503:t("Service Unavailable (code: 503) "),504:t("Gateway Time-out (code: 504) "),505:t("HTTP Version not supported (code: 505) ")};a.statusMap=n},1777:function(e,t,a){var r=a(1778);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(65)(r,n);r.locals&&(e.exports=r.locals)},1778:function(e,t,a){(t=e.exports=a(64)(!1)).push([e.i,".index__notify--2uuPy .ant-notification-notice-icon {\n  font-size: 18px;\n}\n.index__notify--2uuPy .ant-notification-notice-message {\n  font-size: 12px;\n  word-break: break-all;\n}\n.index__notify--2uuPy .ant-notification-notice-with-icon .ant-notification-notice-message {\n  margin-left: 32px;\n}\n.index__code-editor--D2lB7 {\n  height: 400px !important;\n  min-height: 400px !important;\n}\n",""]),t.locals={notify:"index__notify--2uuPy","code-editor":"index__code-editor--D2lB7"}},2089:function(e,t,a){(t=e.exports=a(64)(!1)).push([e.i,"/* stylelint-disable at-rule-empty-line-before,at-rule-name-space-after,at-rule-no-unknown */\n/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n/* init */\n/* specific color */\n/*  border */\n/*  background */\n/*  shadow */\n/*  font */\n/* 中号字体 */\n/*  animation */\n/*  size */\n/*  sider */\n/* login */\n.style__container--3Y09L {\n  height: 100%;\n  padding: 44px;\n  overflow: auto;\n}\n.style__container--3Y09L .style__main-icon--1ECQa {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n}\n.style__container--3Y09L .style__action-button--2uJsF {\n  color: #a3a3a3;\n  font-size: 18px;\n  line-height: 88px;\n  background: #fff;\n  border-radius: 4px;\n  -webkit-box-shadow: 0 2px 20px 0 rgba(0, 0, 0, 0.09);\n          box-shadow: 0 2px 20px 0 rgba(0, 0, 0, 0.09);\n  opacity: 0.9;\n}\n.style__container--3Y09L .style__action-icon--3cQV7 {\n  display: block;\n  width: 50px;\n  height: 50px;\n  margin-left: 60px;\n}\n.style__container--3Y09L .ant-card {\n  -webkit-box-shadow: 0 2px 20px 0 rgba(0, 0, 0, 0.09);\n          box-shadow: 0 2px 20px 0 rgba(0, 0, 0, 0.09);\n}\n.style__container--3Y09L .ant-card-head {\n  font-size: 16px;\n}\n.style__container--3Y09L .style__left--2FbNm {\n  height: 100%;\n}\n.style__container--3Y09L .style__left--2FbNm .style__top--3UBpB .style__title--18DKB {\n  display: table-cell;\n  vertical-align: bottom;\n}\n.style__container--3Y09L .style__left--2FbNm .style__top--3UBpB .style__title--18DKB .style__text--2ZnVb {\n  color: #252525;\n  font-size: 21px;\n}\n.style__container--3Y09L .style__left--2FbNm .style__top--3UBpB .style__title--18DKB .style__action--1T3zl {\n  margin-left: 40px;\n  color: #000;\n  font-size: 16px;\n}\n.style__container--3Y09L .style__right--18Zal {\n  height: 100%;\n}\n.style__container--3Y09L .style__right--18Zal .style__project--2WhsJ {\n  position: relative;\n}\n.style__container--3Y09L .style__right--18Zal .style__project--2WhsJ .style__meta--VzBqf {\n  margin-bottom: 16px;\n  padding-bottom: 16px;\n  border-bottom: 1px dashed #e8e8e8;\n}\n.style__container--3Y09L .style__right--18Zal .style__project--2WhsJ .ant-descriptions-item-label {\n  width: 130px;\n}\n.style__outer--GK3KD {\n  position: relative;\n  width: 100%;\n  height: 10rem;\n  overflow: hidden;\n  font-size: 12px;\n}\n.style__outer--GK3KD .style__inner--19_DW {\n  position: absolute;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  overflow-x: hidden;\n  overflow-y: scroll;\n}\n.style__outer--GK3KD .style__inner--19_DW::-webkit-scrollbar {\n  display: none;\n}\n.style__bottom--1cuhB {\n  border-radius: 4px;\n}\n.style__bottom--1cuhB .ant-card {\n  -webkit-box-shadow: unset;\n          box-shadow: unset;\n}\n.style__bottom--1cuhB .ant-card-body {\n  padding: 0 !important;\n}\n.style__bottom--1cuhB .style__title--18DKB .style__text--2ZnVb {\n  color: #252525;\n  font-size: 16px;\n}\n.style__bottom--1cuhB .style__title--18DKB .style__badge--1KS_6 {\n  margin-left: 22px;\n}\n.style__bottom--1cuhB .style__title--18DKB .style__badge--1KS_6 .ant-badge-status-dot {\n  width: 10px;\n  height: 10px;\n}\n.style__bottom--1cuhB .style__title--18DKB .style__badge--1KS_6 .ant-badge-status-text {\n  font-size: 14px;\n}\n.style__bottom--1cuhB .style__action--1T3zl {\n  float: right;\n  margin-top: 6px;\n  color: #0068ff;\n  font-size: 12px;\n  cursor: pointer;\n}\n.style__bottom--1cuhB .style__content--1BVOG .style__card--3BNS7 {\n  padding: 8px;\n}\n.style__bottom--1cuhB .style__content--1BVOG .style__card--3BNS7 .ant-card-head {\n  border-bottom: none;\n}\n.style__bottom--1cuhB .style__content--1BVOG .style__card--3BNS7 .ant-card-head .ant-card-head-title {\n  padding-bottom: 0;\n  color: #565656;\n  font-weight: 500;\n  font-size: 16px;\n}\n.style__bottom--1cuhB .style__content--1BVOG .style__card--3BNS7 .ant-card-body {\n  padding: 12px !important;\n  -webkit-box-shadow: unset !important;\n          box-shadow: unset !important;\n}\n.style__bottom--1cuhB .style__content--1BVOG .style__card--3BNS7 .style__progress-title--1khEP {\n  overflow: hidden;\n  font-size: 14px;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n",""]),t.locals={primaryColor:"#0068ff",successColor:"#57e39b",warnColor:"#fedf40",warnDarkColor:"#fa8c16",warnLightColor:"#f6b23d",errorColor:"#eb354d",dangerColor:"#c4233e",moneyColor:"#f50",infoColor:"rgba(0, 104, 255, 0.65)",headerHeight:"40px",productsColumnWidth:"230px",container:"style__container--3Y09L","main-icon":"style__main-icon--1ECQa","action-button":"style__action-button--2uJsF","action-icon":"style__action-icon--3cQV7",left:"style__left--2FbNm",top:"style__top--3UBpB",title:"style__title--18DKB",text:"style__text--2ZnVb",action:"style__action--1T3zl",right:"style__right--18Zal",project:"style__project--2WhsJ",meta:"style__meta--VzBqf",outer:"style__outer--GK3KD",inner:"style__inner--19_DW",bottom:"style__bottom--1cuhB",badge:"style__badge--1KS_6",content:"style__content--1BVOG",card:"style__card--3BNS7","progress-title":"style__progress-title--1khEP"}},3525:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(162),p=r(21);c(a,"__esModule",{value:!0}),a.default=void 0,r(593);var h=p(r(427)),m=p(r(35));r(1374);var g=p(r(1375)),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=S(t);if(a&&a.has(e))return a.get(e);var r={},n=c&&o;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=n?o(e,i):null;l&&(l.get||l.set)?c(r,i,l):r[i]=e[i]}r.default=e,a&&a.set(e,r);return r}(r(0)),y=(r(161),r(342)),b=r(580),_=p(r(3526));function S(e){if("function"!=typeof f)return null;var t=new f,a=new f;return(S=function(e){return e?a:t})(e)}function x(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=x(Object(r),!0)).call(a,(function(t){(0,m.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=x(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}var{RangePicker:I}=g.default,{h:C,d:k,w:D}=y.MILLISECOND_IN_TIME_UNIT;class P extends v.Component{constructor(e){super(e),(0,m.default)(this,"onChangeType",(e=>{var t={value:e};1!==e&&(t.start=void 0,t.end=void 0),this.setState(w({},t),(()=>{this.onChange(t)}))})),(0,m.default)(this,"onChange",(e=>{var{onChange:t}=this.props;t&&t(w(w({},this.state),e))})),(0,m.default)(this,"onDateChange",(e=>{var t={start:e?e[0]:null,end:e?e[1]:null};this.setState(w({},t),(()=>{this.onChange(t)}))}));var{defaultValue:t}=e;this.state={defaultValue:void 0!==t?t:C,value:null,start:null,end:null}}componentDidMount(){var{defaultValue:e,value:t}=this.state;this.onChangeType(t||e)}get options(){return[{label:t("All"),value:0},{label:t("In the last hour"),value:C},{label:t("Recently a day"),value:k},{label:t("In the last 7 days"),value:D},{label:t("In the last 30 days"),value:30*k},{label:t("Custom"),value:1}]}render(){var{defaultValue:e,value:t}=this.state;return v.default.createElement("div",{className:_.default.wrapper},v.default.createElement(h.default.Group,{defaultValue:e,value:t,options:this.options,buttonStyle:"solid",optionType:"button",onChange:e=>this.onChangeType(e.target.value)}),1===t&&v.default.createElement(I,{onCalendarChange:this.onDateChange,format:b.timeFormatStr.YMDHm,showTime:!0}))}}a.default=P},3526:function(e,t,a){var r=a(3527);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(65)(r,n);r.locals&&(e.exports=r.locals)},3527:function(e,t,a){(t=e.exports=a(64)(!1)).push([e.i,".index__wrapper--2C8q2 {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  min-width: 450px;\n}\n",""]),t.locals={wrapper:"index__wrapper--2C8q2"}},3528:function(e,t,a){"use strict";var r=a(162),n=a(20),i=a(25),l=a(21);n(t,"__esModule",{value:!0}),t.default=void 0;var o=l(a(54)),s=l(a(643));a(1276);var u=l(a(421)),d=l(a(35)),c=l(a(601)),f=l(a(3529)),p=l(a(1588)),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=v(t);if(a&&a.has(e))return a.get(e);var r={},l=n&&i;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=l?i(e,o):null;s&&(s.get||s.set)?n(r,o,s):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(a(0)),m=l(a(16)),g=(a(161),a(564),l(a(3533)));function v(e){if("function"!=typeof r)return null;var t=new r,a=new r;return(v=function(e){return e?a:t})(e)}class y extends h.Component{constructor(){super(...arguments),(0,d.default)(this,"changeVisibleList",(e=>{var t=e.key,{value:a,onChange:r}=this.props,[...n]=a;(0,p.default)(n,t)?(0,f.default)(n,(e=>e===t)):n.push(t),r(n)}))}isVisibleOption(e){var{value:t}=e,{value:a}=this.props;return(0,p.default)(a,t)}renderHeader(){var{title:e}=this.props;return(0,c.default)(e)?null:h.default.createElement("header",null,e)}renderOptions(){var{options:e}=this.props,t=(0,o.default)(e).call(e,(e=>this.renderOption(e)));return h.default.createElement(u.default,{onClick:this.changeVisibleList,theme:"light"},t)}renderOption(e){var t=this.isVisibleOption(e),{value:a,label:r}=e,n=t?h.default.createElement(s.default,null):h.default.createElement("span",{className:g.default.empty});return h.default.createElement(u.default.Item,{key:a},n,r)}render(){var{className:e}=this.props;return h.default.createElement("div",{className:e},this.renderHeader(),this.renderOptions())}}(0,d.default)(y,"propTypes",{value:m.default.array,onChange:m.default.func.isRequired,className:m.default.string,title:m.default.node,options:m.default.array.isRequired}),(0,d.default)(y,"defaultProps",{value:[]});var b=y;t.default=b},3533:function(e,t,a){var r=a(3534);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(65)(r,n);r.locals&&(e.exports=r.locals)},3534:function(e,t,a){(t=e.exports=a(64)(!1)).push([e.i,".index__empty--2DMK4 {\n  display: inline-block;\n  width: 24px;\n}\n",""]),t.locals={empty:"index__empty--2DMK4"}},3535:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=x,r(344);var l=i(r(202));r(585);var o=i(r(424));r(231);var s=i(r(341)),u=i(r(611)),d=i(r(343));r(1276);var c=i(r(421)),f=i(r(54)),p=i(r(203)),h=i(r(0)),m=(r(161),r(564),i(r(16))),g=r(163),v=i(r(1436)),y=r(1435),b=i(r(3536)),_=(e,t)=>{var{id:a,title:r,actionType:n,buttonType:i,buttonText:l,isDanger:o}=e;return{id:a,title:r,name:l||r,actionType:n,buttonType:i,isDanger:o,action:e,isAllowed:t.length>0,items:t,isBatch:!0,needHide:!1}};function S(e){var{actions:a,selectedItems:r,onFinishAction:n,containerProps:i,onClickAction:l,onCancelAction:p}=e;if(a.length<1)return null;var m=(0,f.default)(a).call(a,(e=>{var t="table-batch-more-".concat((0,g.generateId)()),a=_(e,r),{isDanger:o,name:s}=a;return a.onFinishAction=n,a.isDanger=!!o,r.length?h.default.createElement(c.default.Item,{key:t},h.default.createElement(v.default,(0,d.default)({},a,{buttonType:"link",onFinishAction:n,containerProps:i,onClickAction:l,onCancelAction:p,buttonClassName:b.default["more-action-btn"]}))):h.default.createElement(c.default.Item,{key:t,disabled:!0,style:{textAlign:"center"}},s)})),y=h.default.createElement(c.default,null,m);return h.default.createElement(o.default,{overlay:y,overlayClassName:b.default["table-batch-menu"]},h.default.createElement(s.default,{type:"primary"},t("More Actions")," ",h.default.createElement(u.default,null)))}function x(e){var a,r,{selectedItems:n,visibleButtonNumber:i,batchActions:o,onFinishAction:u,containerProps:c,onClickAction:m,onCancelAction:b,resourceName:x,isAdminPage:w}=e,I=[],C=[],k=(0,y.getActionsByPolicy)({actions:o,containerProps:c,isAdminPage:w});return i<k.length?i<0?C=k:(I=(0,p.default)(k).call(k,0,i),C=(0,p.default)(k).call(k,i)):I=k,r=(0,f.default)(I).call(I,(e=>{var{isDanger:a=!1,buttonType:r="default"}=e;return n&&0!==n.length?h.default.createElement(v.default,(0,d.default)({},_(e,n),{key:"table-batch-action-".concat((0,g.generateId)()),onFinishAction:u,containerProps:c,onClickAction:m,onCancelAction:b})):h.default.createElement(l.default,{title:t("Please select {name} first",{name:x}),key:"tooltip-".concat((0,g.generateId)())},h.default.createElement(s.default,{type:r,disabled:!0,danger:a},e.buttonText||e.title))})),a=h.default.createElement(S,{actions:C,selectedItems:n,onFinishAction:u,containerProps:c,onClickAction:m,onCancelAction:b}),h.default.createElement(h.default.Fragment,null,r,a)}x.defaultProps={visibleButtonNumber:1},x.prototypes={visibleButtonNumber:m.default.number}},3536:function(e,t,a){var r=a(3537);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(65)(r,n);r.locals&&(e.exports=r.locals)},3537:function(e,t,a){(t=e.exports=a(64)(!1)).push([e.i,".index__table-action--1o0Rg {\n  margin-right: 5px;\n}\n.index__more-action-btn--oi5mL {\n  width: 100%;\n  text-align: center;\n}\n.index__table-batch-menu--39tMs .ant-dropdown-menu-item {\n  padding-right: 0;\n  padding-left: 0;\n}\n",""]),t.locals={"table-action":"index__table-action--1o0Rg","more-action-btn":"index__more-action-btn--oi5mL","table-batch-menu":"index__table-batch-menu--39tMs"}},3538:function(e,a,r){"use strict";var n=r(162),i=r(20),l=r(25),o=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var s=o(r(54)),u=o(r(164)),d=o(r(77)),c=o(r(28)),f=o(r(63));r(585);var p=o(r(424));r(1276);var h=o(r(421)),m=o(r(605));r(1271);var g=o(r(1272));r(344);var v=o(r(202));r(231);var y=o(r(341)),b=o(r(1443)),_=o(r(49)),S=o(r(35)),x=o(r(92)),w=o(r(102)),I=o(r(119)),C=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=E(t);if(a&&a.has(e))return a.get(e);var r={},n=i&&l;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=n?l(e,o):null;s&&(s.get||s.set)?i(r,o,s):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(r(0)),k=o(r(16)),D=o(r(1352)),P=(r(564),r(161),r(3539)),T=r(163),A=o(r(1270)),M=o(r(1437)),N=o(r(3540));function E(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(E=function(e){return e?a:t})(e)}class R extends C.Component{constructor(e){var a;super(e),a=this,(0,S.default)(this,"getSimpleValue",((e,t,a)=>{var r,n;return(0,x.default)(e)?(0,s.default)(e).call(e,((e,r)=>{if(C.default.isValidElement(e))try{return t[a][r]}catch(e){return""}return e})).join("\n"):(0,w.default)(e)?C.default.isValidElement(e)?(0,u.default)(n=[void 0,"",null]).call(n,t[a])?"-":t[a].toString():t[a]:(0,u.default)(r=[void 0,"",null]).call(r,e)?"-":e})),(0,S.default)(this,"getColumnData",((e,t)=>{var a,{dataIndex:r,render:n,valueRender:i,stringify:l,valueMap:o,unit:s}=t,{getValueRenderFunc:u}=this.props,c=(0,I.default)(e,r);if(l)return l(c,e);if(i){var f=u("sinceTime"===i?"toLocalTime":i);return this.getSimpleValue(f(c,e),e,r)}return n?this.getSimpleValue(n(c,e),e,r):s?(0,d.default)(a="".concat(c)).call(a,s):o?o[c]||c:this.getSimpleValue(c,e,r)})),(0,S.default)(this,"confirmExportMax",(()=>{var{totalMax:e,total:a}=this.props;M.default.warn({title:t("Are you sure to download data?"),content:t("The total amount of data is { total }, and the interface can support downloading { totalMax } pieces of data. If you need to download all the data, please contact the administrator.",{totalMax:e,total:a}),onCancel:this.onConfirmCancel,onOk:this.beginDownload})})),(0,S.default)(this,"downloadAllData",(()=>{var{total:e,totalMax:t}=this.props;e&&e>t?this.confirmExportMax():this.beginDownload()})),(0,S.default)(this,"getFileName",(e=>{var a,r,n,i,l=(0,T.toLocalTimeFilter)((new Date).getTime()),{resourceName:o,extraName:s}=this.props,u=s?(0,d.default)(a="".concat(s,"-")).call(a,o):o;return e?(0,d.default)(r=(0,d.default)(n="".concat(u,"-")).call(n,t("all"),"-")).call(r,l,".csv"):(0,d.default)(i="".concat(u,"-")).call(i,l,".csv")})),(0,S.default)(this,"exportCurrentData",((e,a)=>{var r=this.getDownloadHeader(),n=this.getDownloadData(),i=new P.Parser({fields:r}).parse(n),l=new Blob(["\ufeff"+i],{type:"text/plain;charset=utf-8"}),o=a?this.getFileName("all"):this.getFileName();D.default.saveAs(l,o),a?A.default.success(t("All data downloaded.")):A.default.success(t("Current data downloaded."))})),(0,S.default)(this,"exportCurrentDataAll",(()=>{this.exportCurrentData(null,!0)})),(0,S.default)(this,"exportAllData",(()=>{var e=this.getDownloadHeader(),a=this.getDownloadDataAll(),r=new P.Parser({fields:e}).parse(a),n=new Blob(["\ufeff"+r],{type:"text/plain;charset=utf-8"}),i=this.getFileName("all");D.default.saveAs(n,i),A.default.success(t("All data downloaded."))})),(0,S.default)(this,"cancelDownload",(()=>{this.setState({isDownloading:!1},(()=>{var{onFinishDownload:e}=this.props;e&&e()})),A.default.warn(t("Download canceled!"))})),(0,S.default)(this,"beginDownload",(()=>{this.setState({isDownloading:!0,percent:0,current:1,allData:[]},(()=>{var{onBeginDownload:e}=this.props;e&&e(),this.getDownloadDataForAll()}))})),(0,S.default)(this,"finishDownload",(()=>{this.setState({isDownloading:!1},(()=>{this.exportAllData();var{onFinishDownload:e}=this.props;e&&e()}))})),(0,S.default)(this,"getDownloadDataForAll",(0,_.default)((function*(){var{current:e,allData:t,isDownloading:r}=a.state,{totalMax:n}=a.props,i=Math.min(a.total||0,n);if(r){var{getData:l}=a.props,o=yield l({page:e,limit:a.pageSize}),s=[...t,...o];if(o.length<a.pageSize||s.length>=i)a.setState({allData:s,percent:100},(()=>{a.finishDownload()}));else{var u=0;(u=i?Math.floor(s.length/i*100):10*e)>100&&(u=100),a.setState({allData:s,current:e+1,percent:u},(()=>{a.getDownloadDataForAll()}))}}}))),this.state={isDownloading:!1,current:1,allData:[]}}get pageSize(){return 100}get total(){return this.props.total}getDownloadHeader(){var{columns:e}=this.props;return(0,s.default)(e).call(e,(e=>({label:e.title,value:e.dataIndex,default:""})))}getDownloadData(){var{columns:e,data:t}=this.props;return(0,s.default)(t).call(t,(t=>{var a={};return(0,c.default)(e).call(e,(e=>{var r=this.getColumnData(t,e);a[e.dataIndex]=r})),a}))}getDownloadDataAll(){var{columns:e}=this.props,{allData:t}=this.state;return(0,s.default)(t).call(t,(t=>{var a={};return(0,c.default)(e).call(e,(e=>{var r=this.getColumnData(t,e);a[e.dataIndex]=r})),a}))}renderDownloadCurrent(){return C.default.createElement(v.default,{title:t("Download all data")},C.default.createElement(y.default,{type:"default",onClick:this.exportCurrentDataAll,icon:C.default.createElement(b.default,null)}))}renderProgress(){var{isDownloading:e,percent:t}=this.state;return e?C.default.createElement(g.default,{percent:t,status:"active",className:N.default.progress}):null}renderCancelBtn(){var{isDownloading:e}=this.state;return e?C.default.createElement(v.default,{title:t("Cancel Download")},C.default.createElement(y.default,{type:"danger",shape:"circle",onClick:this.cancelDownload,icon:C.default.createElement(m.default,null),size:"small"})):null}renderDownloadAll(){var e=C.default.createElement(h.default,null,C.default.createElement(h.default.Item,{key:"current",onClick:this.exportCurrentData},t("Download current data")),C.default.createElement(h.default.Item,{key:"all",onClick:this.downloadAllData},t("Download all data")));return C.default.createElement(C.default.Fragment,null,C.default.createElement(p.default,{overlay:e},C.default.createElement(y.default,{type:"default",icon:C.default.createElement(b.default,null)})),this.renderProgress(),this.renderCancelBtn())}render(){var{total:e,data:t}=this.props;return e===t.length?this.renderDownloadCurrent():this.renderDownloadAll()}}a.default=R,(0,S.default)(R,"propTypes",{columns:k.default.array,data:k.default.array,total:k.default.number,getValueRenderFunc:k.default.func.isRequired,resourceName:k.default.string,extraName:k.default.string,getData:k.default.func,totalMax:k.default.number}),(0,S.default)(R,"defaultProps",{columns:[],data:[],total:0,totalMax:1e4,resourceName:"",extraName:"",getData:()=>f.default.resolve({data:{items:[],count:0}})})},3540:function(e,t,a){var r=a(3541);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(65)(r,n);r.locals&&(e.exports=r.locals)},3541:function(e,t,a){(t=e.exports=a(64)(!1)).push([e.i,".index__progress--1I8an {\n  width: 100px;\n  margin-right: 10px;\n}\n",""]),t.locals={progress:"index__progress--1I8an"}},3542:function(e,t,a){(t=e.exports=a(64)(!1)).push([e.i,"/* init */\n/* specific color */\n/*  border */\n/*  background */\n/*  shadow */\n/*  font */\n/* 中号字体 */\n/*  animation */\n/*  size */\n/*  sider */\n/* login */\n.index__table--33j8W {\n  overflow: hidden;\n  background-color: #fff;\n  border-radius: 4px;\n  -webkit-box-shadow: 0 4px 8px 0 rgba(36, 46, 66, 0.06);\n          box-shadow: 0 4px 8px 0 rgba(36, 46, 66, 0.06);\n}\n.index__table--33j8W .ant-table-container {\n  -webkit-box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.05);\n          box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.05);\n}\n.index__table--33j8W .ant-table-pagination.ant-pagination {\n  margin: 0;\n  padding: 8px 16px;\n}\n.index__button--3bdor {\n  min-width: 96px;\n  margin-left: 10px;\n}\n.index__select-title--1m-fB {\n  padding: 2px;\n}\n.index__cancel-select--1WxJX {\n  color: #fff;\n}\n.index__create--2BjrH {\n  min-width: 96px;\n  margin-left: 12px;\n}\n.index__action--2MndJ {\n  padding: 0 4px;\n  color: #329dce;\n  font-weight: 600;\n  cursor: pointer;\n}\n.index__column-menu--3pO2n {\n  width: 160px;\n  overflow: hidden;\n  border-radius: 4px;\n  -webkit-box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.2);\n          box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.2);\n}\n.index__column-menu--3pO2n .ant-menu-vertical > .ant-menu-item {\n  height: 30px;\n  line-height: 30px;\n}\n.index__custom-button--3b70- {\n  margin-left: 0;\n}\n.index__table-header--3WB0r {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n.index__table-header-btns--2QPSM,\n.index__table-header-action-btns--3KJBJ {\n  position: relative;\n  display: inline-block;\n  margin-bottom: calc(16px - 4px);\n}\n.index__table-header-btns--2QPSM button,\n.index__table-header-action-btns--3KJBJ button {\n  margin-right: 10px;\n  margin-bottom: 4px;\n}\n.index__table-header-btns--2QPSM .ant-btn[disabled],\n.index__table-header-action-btns--3KJBJ .ant-btn[disabled] {\n  -webkit-box-shadow: 0 2px 0 rgba(0, 0, 0, 0.045);\n          box-shadow: 0 2px 0 rgba(0, 0, 0, 0.045);\n}\n.index__table-header-btns--2QPSM .ant-btn-default,\n.index__table-header-action-btns--3KJBJ .ant-btn-default {\n  color: #0068ff;\n  background-color: #fff;\n  border-color: #0068ff;\n}\n.index__table-header-btns--2QPSM .ant-btn-default:hover,\n.index__table-header-action-btns--3KJBJ .ant-btn-default:hover {\n  color: #0068ff;\n  border-color: #0068ff;\n}\n.index__table-header-btns--2QPSM .ant-btn-dangerous,\n.index__table-header-action-btns--3KJBJ .ant-btn-dangerous {\n  color: #eb354d;\n}\n.index__table-header-btns--2QPSM .ant-btn-dangerous:hover,\n.index__table-header-action-btns--3KJBJ .ant-btn-dangerous:hover {\n  color: #eb354d;\n  border-color: #eb354d;\n}\n.index__table-header-btns--2QPSM .ant-btn[disabled],\n.index__table-header-action-btns--3KJBJ .ant-btn[disabled],\n.index__table-header-btns--2QPSM .ant-btn[disabled]:hover,\n.index__table-header-action-btns--3KJBJ .ant-btn[disabled]:hover,\n.index__table-header-btns--2QPSM .ant-btn[disabled]:focus,\n.index__table-header-action-btns--3KJBJ .ant-btn[disabled]:focus,\n.index__table-header-btns--2QPSM .ant-btn[disabled]:active,\n.index__table-header-action-btns--3KJBJ .ant-btn[disabled]:active {\n  color: rgba(0, 0, 0, 0.25) !important;\n  background: #f5f5f5 !important;\n  border-color: #d9d9d9 !important;\n}\n.index__search-row--7P1c7 {\n  min-width: 350px;\n}\n.index__search-input--1izmf {\n  width: 288px;\n  height: 32px;\n}\n.index__table-header-right--1SICV {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.index__table-header-btns--2QPSM {\n  margin-right: 0;\n  margin-left: 10px;\n}\n.index__table-header-btns--2QPSM button:last-child {\n  margin-right: 0;\n}\n",""]),t.locals={primaryColor:"#0068ff",successColor:"#57e39b",warnColor:"#fedf40",warnDarkColor:"#fa8c16",warnLightColor:"#f6b23d",errorColor:"#eb354d",dangerColor:"#c4233e",moneyColor:"#f50",infoColor:"rgba(0, 104, 255, 0.65)",headerHeight:"40px",productsColumnWidth:"230px",table:"index__table--33j8W",button:"index__button--3bdor","select-title":"index__select-title--1m-fB","cancel-select":"index__cancel-select--1WxJX",create:"index__create--2BjrH",action:"index__action--2MndJ","column-menu":"index__column-menu--3pO2n","custom-button":"index__custom-button--3b70-","table-header":"index__table-header--3WB0r","table-header-btns":"index__table-header-btns--2QPSM","table-header-action-btns":"index__table-header-action-btns--3KJBJ","search-row":"index__search-row--7P1c7","search-input":"index__search-input--1izmf","table-header-right":"index__table-header-right--1SICV"}},3543:function(e,t,a){var r=a(3544);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(65)(r,n);r.locals&&(e.exports=r.locals)},3544:function(e,t,a){(t=e.exports=a(64)(!1)).push([e.i,"/* init */\n/* specific color */\n/*  border */\n/*  background */\n/*  shadow */\n/*  font */\n/* 中号字体 */\n/*  animation */\n/*  size */\n/*  sider */\n/* login */\n.index__wrapper--3q1S2 {\n  min-height: calc(100vh - 108px);\n  margin-top: 16px;\n  padding: 0 16px;\n}\n.index__hint--3yEH0 {\n  margin-bottom: 16px;\n}\n.index__hints--1QRzH .ant-alert-warning {\n  background-color: #fffbe6;\n  border: 1px solid #ffe58f;\n}\n.index__hints--1QRzH .ant-alert-warning .ant-alert-icon {\n  color: #fedf40;\n}\n.index__hints--1QRzH .ant-alert-message {\n  max-height: 40px;\n  overflow-y: auto;\n}\n",""]),t.locals={primaryColor:"#0068ff",successColor:"#57e39b",warnColor:"#fedf40",warnDarkColor:"#fa8c16",warnLightColor:"#f6b23d",errorColor:"#eb354d",dangerColor:"#c4233e",moneyColor:"#f50",infoColor:"rgba(0, 104, 255, 0.65)",headerHeight:"40px",productsColumnWidth:"230px",wrapper:"index__wrapper--3q1S2",hint:"index__hint--3yEH0",hints:"index__hints--1QRzH"}},3545:function(e,t,a){"use strict";a.r(t),t.default="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMThweCIgaGVpZ2h0PSIyNHB4IiB2aWV3Qm94PSIwIDAgMTggMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+bG9jazwvdGl0bGU+CiAgICA8ZyBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0ibG9jayIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuMDAwMDAwLCAwLjAwMDAwMCkiIGZpbGw9IiNFQjM1NEQiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi4zOTk0MDY2LDkuNzYzMzE4ODEgTDE1LjA2MjEzMTksOS43OTg4MTMxIEwxNS4wNjIxMzE5LDcuMDI2OTIzMDggQzE1LjA2MjEzMTksMi43NTc2OTIzMSAxMi42MjMwNTQ0LDAgOC44NDkwOTg1NiwwIEM1LjA3NTE0MjczLDAgMi42MzYwODc3NCwyLjc1NzY5MjMxIDIuNjM2MDg3NzQsNy4wMjY5MjMwOCBMMi42MzYwODc3NCw5Ljc2MzMxODgxIEw1LjI5ODgxMzEsOS43NjMzMTg4MSBMNS4yOTg4MTMxLDcuMDI2OTIzMDggQzUuMjk4ODEzMSw1LjcxNDE5NzcyIDUuNjQ0OTY2OTUsMi42NjI3MjUzNiA4Ljg0OTA5ODU2LDIuNjYyNzI1MzYgQzExLjkzNzg2ODEsMi42NjI3MjUzNiAxMi4zOTk0MDY2LDUuMzk3MzQwNzUgMTIuMzk5NDA2Niw3LjAyNjkyMzA4IEwxMi4zOTk0MDY2LDkuNzYzMzE4ODEgWiIgaWQ9InBhdGgiPjwvcGF0aD4KICAgICAgICAgICAgPHBhdGggZD0iTTE1LjA4ODc0Nyw5Ljc5ODgxMzEgTDIuNjYyNzI1MzYsOS43OTg4MTMxIEMxLjE5MjkwMTE1LDkuNzk4ODEzMSAwLDEwLjk5MTcxNDIgMCwxMi40NjE1Mzg1IEwwLDIxLjMzNzI3NDYgQzAsMjIuODA3MDk4OSAxLjE5MjkwMTE1LDI0IDIuNjYyNzI1MzYsMjQgTDE1LjA4ODc0NywyNCBDMTYuNTU4NTcxMiwyNCAxNy43NTE0NzI0LDIyLjgwNzA5ODkgMTcuNzUxNDcyNCwyMS4zMzcyNzQ2IEwxNy43NTE0NzI0LDEyLjQ2MTUzODUgQzE3Ljc1MTQ3MjQsMTAuOTkxNzM2OCAxNi41NTg1NzEyLDkuNzk4ODEzMSAxNS4wODg3NDcsOS43OTg4MTMxIFogTTkuNzYzMjk2MjgsMTcuNTQxMTIwOCBMOS43NjMyOTYyOCwxOS41NjIxMzE5IEM5Ljc2MzI5NjI4LDIwLjA1MTE2NDQgOS4zNjQ3OTExNywyMC40NDk3MTQ1IDguODc1NzM2MTgsMjAuNDQ5NzE0NSBDOC4zODY2ODExOSwyMC40NDk3MTQ1IDcuOTg4MTUzNTUsMjAuMDUxMTg2OSA3Ljk4ODE1MzU1LDE5LjU2MjEzMTkgTDcuOTg4MTUzNTUsMTcuNTQxMTIwOCBDNy40NTkxNjQ2NywxNy4yMzMxNDMgNy4xMDA1OTM0NSwxNi42Njc3NTg0IDcuMTAwNTkzNDUsMTYuMDExODIzOSBDNy4xMDA1OTM0NSwxNS4wMzE5NTYxIDcuODk1ODQ1ODYsMTQuMjM2NjgxMiA4Ljg3NTczNjE4LDE0LjIzNjY4MTIgQzkuODU1NjI2NTEsMTQuMjM2NjgxMiAxMC42NTA5MDE1LDE1LjAzMTk1NjEgMTAuNjUwOTAxNSwxNi4wMTE4NDY1IEMxMC42NTA5MDE1LDE2LjY2Njg1NyAxMC4yOTIzMDc3LDE3LjIzMzE0MyA5Ljc2MzI5NjI4LDE3LjU0MTE0MzMgTDkuNzYzMjk2MjgsMTcuNTQxMTIwOCBaIiBpZD0ic2hhcGUiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},3546:function(e,t,a){"use strict";a.r(t),t.default="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjRweCIgaGVpZ2h0PSIyNHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+dW5sb2NrPC90aXRsZT4KICAgIDxnIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSIzLi1JY29uIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNzguMDAwMDAwLCAtNzI5LjAwMDAwMCkiIGZpbGw9IiM1MTUxNTEiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgIDxnIGlkPSJ1bmxvY2siIHRyYW5zZm9ybT0idHJhbnNsYXRlKDc4LjAwMDAwMCwgNzI5LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjE1MzgyODEsNy4zMDggTDEwLjE1MzgyODEsOC4zMDc3MDMxMiBMMTIuOTIzMDg1OSw4LjMwNzcwMzEyIEwxMi45MjMwODU5LDcuMzA4IEMxMi45MjMwODU5LDIuODY4IDEwLjM4NjQ0NTMsMCA2LjQ2MTUzMTI1LDAgQzIuNTM2NjE3MTksMCAwLDIuODY4IDAsNy4zMDggTDAsMTAuMTUzODUxNiBMMi43NjkyMzQzNywxMC4xNTM4NTE2IEwyLjc2OTIzNDM3LDcuMzA4IEMyLjc2OTIzNDM3LDUuOTQyNzY1NjIgMy4xMjkyMzQzOCwyLjc2OTIzNDM3IDYuNDYxNTMxMjUsMi43NjkyMzQzNyBDOS42NzM4NTE1NiwyLjc2OTIzNDM3IDEwLjE1Mzg1MTYsNS42MTMyMzQzOCAxMC4xNTM4NTE2LDcuMzA4IEwxMC4xNTM4MjgxLDcuMzA4IFoiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0yMS4yMzA3NjU2LDkuMjMwNzY1NjMgTDguMzA3NzAzMTIsOS4yMzA3NjU2MyBDNi43NzkwODU5NCw5LjIzMDc2NTYzIDUuNTM4NDY4NzUsMTAuNDcxMzgyOCA1LjUzODQ2ODc1LDEyIEw1LjUzODQ2ODc1LDIxLjIzMDc2NTYgQzUuNTM4NDY4NzUsMjIuNzU5MzgyOCA2Ljc3OTA4NTk0LDI0IDguMzA3NzAzMTIsMjQgTDIxLjIzMDc2NTYsMjQgQzIyLjc1OTM4MjgsMjQgMjQsMjIuNzU5MzgyOCAyNCwyMS4yMzA3NjU2IEwyNCwxMiBDMjQsMTAuNDcxNDA2MyAyMi43NTkzODI4LDkuMjMwNzY1NjMgMjEuMjMwNzY1Niw5LjIzMDc2NTYzIFogTTE1LjY5MjI5NjksMTcuMjgyNzY1NiBMMTUuNjkyMjk2OSwxOS4zODQ2MTcyIEMxNS42OTIyOTY5LDE5Ljg5MzIxMDkgMTUuMjc3ODUxNiwyMC4zMDc3MDMxIDE0Ljc2OTIzNDQsMjAuMzA3NzAzMSBDMTQuMjYwNjE3MiwyMC4zMDc3MDMxIDEzLjg0NjE0ODQsMTkuODkzMjM0NCAxMy44NDYxNDg0LDE5LjM4NDYxNzIgTDEzLjg0NjE0ODQsMTcuMjgyNzY1NiBDMTMuMjk2LDE2Ljk2MjQ2ODcgMTIuOTIzMDg1OSwxNi4zNzQ0Njg4IDEyLjkyMzA4NTksMTUuNjkyMjk2OSBDMTIuOTIzMDg1OSwxNC42NzMyMzQ0IDEzLjc1MDE0ODQsMTMuODQ2MTQ4NCAxNC43NjkyMzQ0LDEzLjg0NjE0ODQgQzE1Ljc4ODMyMDMsMTMuODQ2MTQ4NCAxNi42MTU0MDYyLDE0LjY3MzIzNDQgMTYuNjE1NDA2MiwxNS42OTIzMjAzIEMxNi42MTU0MDYyLDE2LjM3MzUzMTMgMTYuMjQyNDY4OCwxNi45NjI0Njg3IDE1LjY5MjI5NjksMTcuMjgyNzg5MSBMMTUuNjkyMjk2OSwxNy4yODI3NjU2IFoiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},3553:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.ConfirmStep=void 0;var l=i(r(63)),o=i(r(77)),s=i(r(54)),u=i(r(1596)),d=i(r(29)),c=i(r(164));r(1246);var f=i(r(1247));r(1244);var p=i(r(1245)),h=i(r(35)),m=i(r(0)),g=r(412),v=i(r(1250)),y=r(1248),b=(r(161),r(1461));class _ extends v.default{constructor(){super(...arguments),(0,h.default)(this,"allowed",(()=>l.default.resolve()))}init(){}get title(){return"ConfirmStep"}get name(){return"ConfirmStep"}get enableCinder(){return this.props.rootStore.checkEndpoint("cinder")}getDisk(e,t){var a,r;if(!t)return null;var{size:n,typeOption:i,deleteTypeLabel:l}=e||{};return(0,o.default)(a=(0,o.default)(r="".concat(i.label," ")).call(r,n,"GiB ")).call(a,l)}getBootableVolumeDisk(){var e,{bootableVolume:t}=this.props.context,{size:a,volume_type:r}=t.selectedRows[0];return(0,o.default)(e="".concat(r," ")).call(e,a,"GiB")}getDeleteVolumeInstance(){var e,{deleteVolumeInstance:a}=null===(e=this.props)||void 0===e?void 0:e.context;return a?t("Yes"):t("No")}getSystemDisk(){if(!this.enableCinder)return null;var{context:e}=this.props,{systemDisk:t,source:{value:a}={},instanceSnapshotDisk:r,bootFromVolume:n=!0}=e;return"bootableVolume"===a?this.getBootableVolumeDisk():"instanceSnapshot"===a&&null!==r?this.getDisk(r,n):this.getDisk(t,n)}getDataDisk(){if(!this.enableCinder)return null;var{context:e}=this.props,{dataDisk:t=[],source:{value:a}={},instanceSnapshotDataVolumes:r=[]}=e,n=t;return"instanceSnapshot"===a&&(null==r?void 0:r.length)>0&&(n=(0,b.getAllDataDisks)({dataDisk:t,instanceSnapshotDataVolumes:r})),(0,s.default)(n).call(n,(e=>this.getDisk(e.value,!0)))}getFlavor(){var e,t,a,{context:r}=this.props,{flavor:n}=r,{disk:i,ram:l,vcpus:s}=n.selectedRows[0];return i?(0,o.default)(e=(0,o.default)(t="".concat(s,"VCPU/")).call(t,i,"GiB/")).call(e,(0,u.default)(l/1024,10),"GiB"):(0,o.default)(a="".concat(s,"VCPU/")).call(a,(0,u.default)(l/1024,10),"GiB")}getSourceValue(){var{context:e}=this.props,{source:t}=e,{selectedRows:a=[],selectedRowKeys:r=[]}=e[t.value];return a.length?a[0].name:r[0]}getVirtualLANs(){var{context:e}=this.props,{networks:t=[]}=e,a=(0,s.default)(t).call(t,(e=>{var t,a,r,{networkOption:n,subnetOption:i,ipTypeOption:l,ip:s}=e.value,u=1===l.value?i.name||i.label:"";return(0,o.default)(t=(0,o.default)(a=(0,o.default)(r="".concat(n.name||n.label," ")).call(r,l.label," ")).call(a,u," ")).call(t,1===l.value?s:"")}));return m.default.createElement(f.default,null,(0,s.default)(a).call(a,(e=>m.default.createElement(p.default,{span:24,key:e},e))))}getPorts(){var{context:e}=this.props,{ports:{selectedRows:t=[]}={}}=e,a=(0,s.default)(t).call(t,(e=>e.name||e.id));return m.default.createElement(f.default,null,(0,s.default)(a).call(a,(e=>m.default.createElement(p.default,{span:24,key:e},e))))}getSecurityGroups(){var{context:e}=this.props,{securityGroup:{selectedRows:t=[]}={}}=e,a=(0,s.default)(t).call(t,(e=>e.name));return m.default.createElement(f.default,null,(0,s.default)(a).call(a,(e=>m.default.createElement(p.default,{span:24,key:e},e))))}getLoginType(){var e,{context:t}=this.props,{loginType:a,keypair:r}=t,{value:n,label:i}=a;return(0,o.default)(e="".concat(i," ")).call(e,"keypair"===n?r.selectedRows[0].name:"")}getPhysicalNode(){var{context:e}=this.props,{physicalNodeType:t,physicalNode:a}=e;return t?"smart"===t.value?t.label:a.selectedRows[0].hypervisor_hostname:y.physicalNodeTypes[0].label}getServerGroup(){var{context:e}=this.props,{serverGroup:t}=e;return t&&t.selectedRows.length?t.selectedRows[0].name:"-"}getIso(){var{context:e}=this.props,{iso:t}=e;return t&&0!==t.length?(0,s.default)(t).call(t,(e=>e.value)).join(" "):"-"}goStep(e){var{goStep:t}=this.props;t&&t(e)}get defaultValue(){return{}}get formItems(){var e,a,{context:r}=this.props,n=[{label:t("Start Source"),value:r.source.label},{label:t("System Disk"),value:this.getSystemDisk()},{label:t("Delete Volume on Instance Delete"),value:this.getDeleteVolumeInstance(),key:"deleteVolume"},{label:t("Available Zone"),value:r.availableZone.label},{label:t("Start Source Name"),value:this.getSourceValue()},{label:t("Data Disk"),value:this.getDataDisk(),contentStyle:{display:"inline-block"}},{label:t("Project"),value:r.project},{label:t("Flavor"),value:this.getFlavor()}];return this.enableCinder||(n=(0,d.default)(n).call(n,(e=>{var a;return!(0,c.default)(a=[t("System Disk"),t("Data Disk")]).call(a,e.label)}))),"BOOTABLEVOLUME"!==r.source.value.toUpperCase()&&(n=(0,d.default)(n).call(n,(e=>"deleteVolume"!==(null==e?void 0:e.key)))),[{name:"confirm-count",label:t("Count"),type:"label",content:r.count||1},{name:"confirm-config",label:t("Config Overview"),type:"descriptions",title:t("Base Config"),onClick:()=>{this.goStep(0)},items:n},{type:"short-divider"},{name:"confirm-config-network",label:" ",type:"descriptions",title:t("Network Config"),onClick:()=>{this.goStep(1)},items:[{label:(0,o.default)(e="".concat(t("Virtual LAN"),"(")).call(e,t("New"),")"),value:this.getVirtualLANs(),span:1},{label:(0,o.default)(a="".concat(t("Virtual LAN"),"(")).call(a,t("Created"),")"),value:this.getPorts(),span:1},{label:t("Security Group"),value:this.getSecurityGroups(),span:1}]},{type:"short-divider"},{name:"confirm-config-system",label:" ",type:"descriptions",title:t("System Config"),onClick:()=>{this.goStep(2)},items:[{label:t("Name"),value:r.name},{label:t("Login Type"),value:this.getLoginType()},{label:t("Physical Node"),value:this.getPhysicalNode()},{label:t("Server Group"),value:this.getServerGroup()}]}]}}a.ConfirmStep=_;var S=(0,g.inject)("rootStore")((0,g.observer)(_));a.default=S},3557:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.SystemStep=void 0;var p=f(r(63)),h=f(r(54)),m=f(r(29)),g=f(r(49)),v=f(r(35)),y=f(r(570)),b=r(412),_=f(r(423)),S=f(r(413)),x=f(r(599)),w=f(r(598)),I=f(r(1355)),C=f(r(1250)),k=r(565),D=r(1389),P=r(1248),T=r(163),A=r(1463);function M(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=M(Object(r),!0)).call(a,(function(t){(0,v.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=M(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}class E extends C.default{constructor(){super(...arguments),(0,v.default)(this,"allowed",(()=>p.default.resolve())),(0,v.default)(this,"onValuesChange",(e=>{(0,y.default)(e,"serverGroup")&&this.onServerGroupChange(e.serverGroup)})),(0,v.default)(this,"onServerGroupChange",(e=>{var{selectedRows:t=[]}=e||{};this.updateContext({serverGroupRow:t[0]||null})}))}init(){this.keyPairStore=_.default,this.serverStore=S.default,this.hypervisorStore=x.default,this.serverGroupStore=w.default,this.getKeypairs(),this.hasAdminRole&&this.getHypervisors(),this.getServerGroups()}get hypervisorColumns(){var e=[...D.hypervisorColumns];return e[0]={title:t("Hostname"),dataIndex:"hypervisor_hostname"},e}get hypervisorFilters(){var e=[...D.hypervisorFilters];return e[0]={label:t("Hostname"),name:"hypervisor_hostname"},e}get title(){return"SystemStep"}get name(){return"SystemStep"}get keypairs(){var e;return(0,h.default)(e=this.keyPairStore.list.data||[]).call(e,(e=>N(N({},e),{},{key:e.name,id:e.name})))}get hypervisors(){var e;return(0,h.default)(e=this.hypervisorStore.list.data||[]).call(e,(e=>N(N({},e),{},{key:e.id,name:e.hypervisor_hostname})))}get serverGroups(){var e;return(0,m.default)(e=this.serverGroupStore.list.data||[]).call(e,(e=>{var{servergroup:t}=this.locationParams;return!t||e.id===t}))}get serverGroupRequired(){var{more:e}=this.state,{servergroup:t}=this.locationParams;return!!t&&e}get inputHelp(){var{input:e=""}=this.state;return t("Entered: {length, plural, =1 {one character} other {# characters} }(maximum {maxCount} characters)",{length:e.length,maxCount:1e3})}get sourceInfo(){var{context:e={}}=this.props,{source:t={},image:a={},bootableVolume:r={},instanceSnapshot:n={}}=e;if("image"===t.value){var{selectedRows:i=[]}=a;return i.length&&i[0]}if("bootableVolume"===t.value){var{selectedRows:l=[]}=r,o=l.length&&l[0].origin_data||{},s=l.length&&l[0].volume_image_metadata;return o.volume_image_metadata||s}if("instanceSnapshot"===t.value){var{selectedRows:u=[]}=n;return u.length&&u[0]}return!1}get isWindowsImage(){return this.sourceInfo&&"windows"===this.sourceInfo.os_distro}get defaultValue(){var e,{servergroup:t}=this.locationParams,{context:a={}}=this.props,r={loginType:a.loginType||(this.isWindowsImage?this.loginTypes[1]:this.loginTypes[0]),more:!1,physicalNodeType:P.physicalNodeTypes[0],userData:"",username:this.loginUserName||this.loginUserNameInContext};t&&(r.serverGroup={selectedRowKeys:[t],selectedRows:(0,m.default)(e=this.serverGroups).call(e,(e=>e.id===t))});var{name:n}=this.state;return n&&(r.name=n),r}get loginTypes(){return[{label:t("Keypair"),value:"keypair",disabled:this.isWindowsImage},{label:t("Password"),value:"password"}]}getKeypairs(){var e=this;return(0,g.default)((function*(){yield e.keyPairStore.fetchList()}))()}getHypervisors(){this.hypervisorStore.fetchList()}getServerGroups(){var e=this;return(0,g.default)((function*(){yield e.serverGroupStore.fetchList(),e.updateDefaultValue();var{servergroup:t}=e.locationParams;t&&e.onServerGroupChange({selectedRows:e.serverGroups})}))()}get nameForStateUpdate(){return["name","loginType","password","confirmPassword","more","physicalNodeType","serverGroup"]}get loginUserName(){return this.sourceInfo&&this.sourceInfo.os_admin_user}get loginUserNameInContext(){var{username:e=""}=this.props.context||{};return e||""}get isPassword(){var{loginType:e}=this.state;return e===this.loginTypes[1].value}get usernameFormItem(){var e={name:"username",label:t("Login Name"),type:"input",extra:this.loginUserName?"":t("The feasible configuration of cloud-init or cloudbase-init service in the image is not synced to image's properties, so the Login Name is unknown."),tip:t("Whether the Login Name can be used is up to the feasible configuration of cloud-init or cloudbase-init service in the image."),required:this.isPassword,hidden:!this.isPassword};return e.disabled=!!this.loginUserName,e}get formItems(){var{more:e=!1,physicalNodeType:a}=this.state,r=a===P.physicalNodeTypes[1].value,{initKeyPair:n}=this.state;return[{name:"name",label:t("Name"),type:"input-name",required:!0,isInstance:!0},{name:"loginType",label:t("Login Type"),type:"radio",options:this.loginTypes,isWrappedValue:!0},this.usernameFormItem,{name:"keypair",label:t("Keypair"),type:"select-table",data:this.keypairs,isLoading:this.keyPairStore.list.isLoading,required:!this.isPassword,hidden:this.isPassword,header:(0,A.getKeyPairHeader)(this),initValue:n,tip:t("The SSH key is a way to remotely log in to the instance. The cloud platform only helps to keep the public key. Please keep your private key properly."),filterParams:[{label:t("Name"),name:"name"}],columns:[{title:t("Name"),dataIndex:"name"},{title:t("Fingerprint"),dataIndex:"fingerprint"}],selectedLabel:t("Keypair")},{name:"password",label:t("Login Password"),type:"input-password",required:this.isPassword,hidden:!this.isPassword,otherRule:(0,k.getPasswordOtherRule)("password","instance")},{name:"confirmPassword",label:t("Confirm Password"),type:"input-password",required:this.isPassword,hidden:!this.isPassword,otherRule:(0,k.getPasswordOtherRule)("confirmPassword","instance")},{type:"divider"},{name:"more",label:t("Advanced Options"),type:"more"},{name:"physicalNodeType",label:t("Physical Node"),type:"radio",hidden:!e||!this.hasAdminRole,options:P.physicalNodeTypes,isWrappedValue:!0},{name:"physicalNode",label:t("Specify Physical Node"),type:"select-table",hidden:!this.hasAdminRole||!e||!r,required:r,data:this.hypervisors,isLoading:this.hypervisorStore.list.isLoading,extra:t("You can manually specify a physical node to create an instance."),columns:this.hypervisorColumns,filterParams:this.hypervisorFilters},{name:"serverGroup",label:t("Server Group"),type:"select-table",hidden:!e,data:this.serverGroups,isLoading:this.serverGroupStore.list.isLoading,required:this.serverGroupRequired,extra:t("Using server groups, you can create cloud hosts on the same/different physical nodes as much as possible to meet the affinity/non-affinity requirements of business applications."),columns:[{title:t("Name"),dataIndex:"name"},{title:t("Member Count"),dataIndex:"members",render:e=>e.length},{title:t("Policy"),dataIndex:"policy",valueMap:I.default}],filterParams:[{label:t("Name"),name:"name"},{label:t("Policy"),name:"policy",options:(0,T.getOptions)(I.default)}]},{name:"userData",label:t("User Data"),type:"textarea-from-file",validator:k.asciiValidator,hidden:!e,extra:t("The user needs to ensure that the input is a shell script that can run completely and normally.")}]}}a.SystemStep=E;var R=(0,b.inject)("rootStore")((0,b.observer)(E));a.default=R},3558:function(e,t,a){var r=a(3559);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(65)(r,n);r.locals&&(e.exports=r.locals)},3559:function(e,t,a){(t=e.exports=a(64)(!1)).push([e.i,"/* init */\n/* specific color */\n/*  border */\n/*  background */\n/*  shadow */\n/*  font */\n/* 中号字体 */\n/*  animation */\n/*  size */\n/*  sider */\n/* login */\n.keypair__action-wrapper---KO5u {\n  margin-left: 8px;\n}\n.keypair__action-wrapper---KO5u .ant-btn-link {\n  padding: 5.6px 15px !important;\n  border-color: #0068ff;\n}\n",""]),t.locals={primaryColor:"#0068ff",successColor:"#57e39b",warnColor:"#fedf40",warnDarkColor:"#fa8c16",warnLightColor:"#f6b23d",errorColor:"#eb354d",dangerColor:"#c4233e",moneyColor:"#f50",infoColor:"rgba(0, 104, 255, 0.65)",headerHeight:"40px",productsColumnWidth:"230px","action-wrapper":"keypair__action-wrapper---KO5u"}},3560:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.NetworkStep=void 0;var l=i(r(63)),o=i(r(86)),s=i(r(54)),u=i(r(28)),d=i(r(91)),c=i(r(232)),f=i(r(49)),p=i(r(35)),h=i(r(92)),m=i(r(177)),g=i(r(0)),v=r(412),y=r(233),b=r(417),_=r(419),S=r(572),x=r(565),w=i(r(1250)),I=i(r(1444)),C=r(571),k=r(1326),D=r(1258),P=r(567),{isIPv4:T,isIpv6:A}=x.ipValidate;class M extends w.default{constructor(){var e;super(...arguments),e=this,(0,p.default)(this,"allowed",(()=>l.default.resolve())),(0,p.default)(this,"getSubnetPromise",function(){var t=(0,f.default)((function*(t){if(!e.subnetMap[t]){var a=yield e.subnetStore.fetchList({network_id:t});e.subnetMap[t]=a}return e.subnetMap[t]}));return function(e){return t.apply(this,arguments)}}()),(0,p.default)(this,"checkNetworks",(e=>!(!(0,h.default)(e)||(0,m.default)(e)||(0,m.default)(e[0].value))&&(!(0,o.default)(e).call(e,(e=>!e.value||!e.value.network))&&!(0,o.default)(e).call(e,(e=>1===e.value.ipType&&!T(e.value.ip)&&!A(e.value.ip)))))),(0,p.default)(this,"disabledNetwork",(e=>!e.subnets||0===e.subnets.length)),(0,p.default)(this,"onNetworkChange",(e=>{var{selectedRows:t}=e;this.setState({networkSelectRows:t},(()=>{this.getSubnets()})),this.updateContext({networkSelectRows:t})})),(0,p.default)(this,"checkNetworkAndPort",(e=>{var{getFieldValue:a}=e;return{validator(){var e=a("networkSelect"),r=a("ports"),{selectedRowKeys:n=[]}=e||{},{selectedRowKeys:i=[]}=r||{};return 0===n.length&&0===i?l.default.reject(t("Please select")):l.default.resolve()}}})),(0,p.default)(this,"onPortChange",(e=>{var{selectedRows:t=[]}=e||{};this.setState({portSelectRows:t}),this.updateContext({portSelectRows:t})}))}init(){var e,t;this.networkStore=new y.NetworkStore,this.subnetStore=new b.SubnetStore,this.securityGroupStore=new _.SecurityGroupStore,this.portStore=new S.PortStore,this.subnetMap={},this.state.networkSelectRows=(null===(e=this.props.context)||void 0===e?void 0:e.networkSelectRows)||[],this.state.portSelectRows=(null===(t=this.props.context)||void 0===t?void 0:t.portSelectRows)||[]}get title(){return"NetworkStep"}get name(){return"NetworkStep"}get defaultValue(){return{networks:[]}}getSubnets(){var e=this;return(0,f.default)((function*(){var{networkSelectRows:t,networks:a=[]}=e.state,r=yield l.default.all((0,s.default)(t).call(t,(t=>e.getSubnetPromise(t.id)))),n=[];(0,u.default)(r).call(r,(e=>{n.push(...e)}));var i=[],c=(0,s.default)(t).call(t,((e,t)=>{var r=(0,o.default)(n).call(n,(t=>t.network_id===e.id)),l=(0,o.default)(a).call(a,((t,a)=>t.value.network===e.id&&(i.push(a),!0)));return l||{value:{network:e.id,subnet:r.id,networkOption:e,subnetOption:r,ipTypeOption:C.ipTypeOptions[0],ipType:0},index:t}})),f=(0,s.default)(t).call(t,(e=>e.id));(0,u.default)(a).call(a,((e,t)=>{(0,d.default)(i).call(i,t)<0&&(0,d.default)(f).call(f,e.value.network)>=0&&c.push(e)})),e.updateFormValue("networks",c),e.setState({subnets:n,initValue:c})}))()}get nameForStateUpdate(){return["networkSelect","networks","ports"]}get showSecurityGroups(){var{networkSelectRows:e=[],portSelectRows:t=[]}=this.state;return!(!e.length&&!t.length)&&((!e.length||!(0,c.default)(e).call(e,(e=>!e.port_security_enabled)))&&(!t.length||!(0,c.default)(t).call(t,(e=>!e.port_security_enabled))))}get formItems(){var{networkSelectRows:e=[],subnets:a,initValue:r=[],ports:n=[]}=this.state,i=e.length>0,o=0===n.length,s=0===e.length;return[{name:"networkSelect",label:t("Networks"),type:"network-select-table",disabledFunc:this.disabledNetwork,onChange:this.onNetworkChange,showExternal:!0,isMulti:!0,required:o,otherRule:this.checkNetworkAndPort,dependencies:["ports"],header:g.default.createElement("div",null,t("Please reasonably plan the network and subnet to which the virtual network card belongs."),t(" You can go to the console to "),(0,P.getLinkRender)({key:"network",value:"".concat(t("create a new network/subnet")," > "),extra:{target:"_blank"}}))},{name:"networks",label:t("Virtual LAN"),type:"add-select",networks:e,hidden:!i,subnets:a,itemComponent:I.default,required:i,addTextTips:t("Virtual LANs"),addText:t("Add Virtual LAN"),minCount:e.length||0,optionsByIndex:!0,initValue:r,validator:(e,t)=>this.checkNetworks(t)?l.default.resolve():l.default.reject(""),wrapperCol:{span:19}},{name:"divider1",type:"divider"},{name:"ports",type:"select-table",label:t("Ports"),extraParams:{project_id:this.currentProjectId,status:"DOWN"},backendPageStore:this.portStore,isMulti:!0,header:t("Ports provide extra communication channels to your instances. You can select ports instead of networks or a mix of both (The port executes its own security group rules by default)."),filterParams:D.portFilters,columns:D.portColumns,dependencies:["networkSelect"],otherRule:this.checkNetworkAndPort,required:s,onChange:this.onPortChange},{name:"divider2",type:"divider"},{name:"securityGroup",label:t("Security Group"),type:"select-table",tip:t("Each instance belongs to at least one security group, which needs to be specified when it is created. Instances in the same security group can communicate with each other on the network, and instances in different security groups are disconnected from the internal network by default."),backendPageStore:this.securityGroupStore,extraParams:{project_id:this.currentProjectId},hidden:!this.showSecurityGroups,required:this.showSecurityGroups,isMulti:!0,header:g.default.createElement("div",{style:{marginBottom:8}},t("The security group is similar to the firewall function and is used to set up network access control. "),t(" You can go to the console to "),(0,P.getLinkRender)({key:"securityGroup",value:"".concat(t("create a new security group"),"> "),extra:{target:"_blank"}}),t("Note: The security group you use will act on all virtual adapters of the instance.")),filterParams:k.securityGroupFilter,columns:k.securityGroupColumns}]}}a.NetworkStep=M;var N=(0,v.inject)("rootStore")((0,v.observer)(M));a.default=N},3561:function(e,a,r){"use strict";var n=r(162),i=r(20),l=r(25),o=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var s=o(r(343)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var r={},n=i&&l;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=n?l(e,o):null;s&&(s.get||s.set)?i(r,o,s):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(r(0)),d=o(r(3562)),c=r(354),f=r(567);function p(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(p=function(e){return e?a:t})(e)}class h extends u.Component{getDetailUrl(e){var t=this.isAdminPage?"securityGroupDetailAdmin":"securityGroupDetail";return(0,f.getPath)({key:t,params:{id:e}})}render(){var{item:{security_group_rules:e=[]}={}}=this.props,a={buttonType:"link",title:t("Security Group Rules"),buttonText:t("View Rules"),modalSize:"middle",columns:(0,c.getSelfColumns)(this),data:e,hasPagination:!1};return u.default.createElement(d.default,(0,s.default)({},a,{style:{paddingLeft:0}}))}}a.default=h},3562:function(e,a,r){"use strict";var n=r(162),i=r(20),l=r(25),o=r(21);i(a,"__esModule",{value:!0}),a.default=void 0,r(584);var s=o(r(586)),u=o(r(35)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var r={},n=i&&l;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=n?l(e,o):null;s&&(s.get||s.set)?i(r,o,s):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(r(0)),c=o(r(1500)),f=o(r(16));r(161);function p(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(p=function(e){return e?a:t})(e)}class h extends d.Component{constructor(){super(...arguments),(0,u.default)(this,"renderTable",(()=>{var{data:e,columns:t,hasPagination:a}=this.props,r={columns:t,dataSource:e};return a||(r.pagination=!1),d.default.createElement(s.default,r)}))}static propTypes(){return{title:f.default.string.isRequired,buttonType:f.default.string,isDanger:f.default.bool,data:f.default.array,columns:f.default.array,modalSize:f.default.string,className:f.default.func,buttonText:f.default.string,style:f.default.string,hasPagination:f.default.bool}}render(){var{buttonType:e,isDanger:t,title:a,buttonText:r,modalSize:n,style:i}=this.props,l={buttonType:e,isDanger:t,title:a,buttonText:r,modalSize:n,style:i,render:this.renderTable};return d.default.createElement(c.default,l)}}a.default=h,(0,u.default)(h,"defaultProps",{buttonType:"link",isDanger:!1,data:[],columns:[],modalSize:"middle",className:"",buttonText:t("View Detail"),title:t("Detail"),hasPagination:!0})},3567:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.BaseStep=void 0;var p=f(r(63)),h=f(r(54)),m=f(r(29)),g=f(r(86));r(1246);var v=f(r(1247));r(1244);var y=f(r(1245)),b=f(r(49)),_=f(r(35)),S=f(r(0)),x=r(412),w=r(36),I=(r(161),r(566)),C=f(r(413)),k=f(r(577)),D=f(r(1391)),P=f(r(578)),T=f(r(1319)),A=r(414),M=r(574),N=f(r(1250)),E=f(r(1534)),R=r(1264),j=r(1461),F=f(r(1392));function L(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=L(Object(r),!0)).call(a,(function(t){(0,_.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=L(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}class z extends N.default{constructor(){var e;super(...arguments),e=this,(0,_.default)(this,"allowed",(()=>p.default.resolve())),(0,_.default)(this,"onImageTabChange",(e=>{this.setState({imageTab:e})})),(0,_.default)(this,"checkSystemDisk",((e,a)=>{var{size:r=10,type:n}=a||{},i=this.getSystemDiskMinSize();return n?r?r<i?p.default.reject(new Error(t("Please set a size no less than {minSize} GiB!",{minSize:i}))):p.default.resolve():p.default.reject(new Error(t("Please set the system disk size!"))):p.default.reject("")})),(0,_.default)(this,"onFlavorChange",(e=>{this.updateContext({flavor:e})})),(0,_.default)(this,"onChangeBootFromVolume",(e=>{var t={bootFromVolume:e};e||(t.dataDisk=[],this.updateFormValue("dataDisk",[])),this.updateContext(t)})),(0,_.default)(this,"onInstanceSnapshotChange",function(){var t=(0,b.default)((function*(t){var{min_disk:a,size:r,id:n}=t.selectedRows[0]||{};if(!n)return e.updateContext({instanceSnapshotDisk:null,instanceSnapshotDataVolumes:[]}),void e.setState({instanceSnapshotDisk:null,instanceSnapshotMinSize:0,instanceSnapshotDataVolumes:[]});var i=yield e.instanceSnapshotStore.fetchInstanceSnapshotVolumeData({id:n}),{snapshotDetail:{size:l=0}={},block_device_mapping:o="",volumeDetail:s,snapshotDetail:u,instanceSnapshotDataVolumes:d=[]}=i;s||(e.updateFormValue("bootFromVolume",!0),e.updateContext({instanceSnapshotDisk:null,instanceSnapshotDataVolumes:[],bootFromVolume:!0}),e.setState({instanceSnapshotDisk:null,instanceSnapshotMinSize:0,instanceSnapshotDataVolumes:[],bootFromVolume:!0}));var c=Math.max(a,r,l),f=(JSON.parse(o)||[])[0]||{},p=(0,j.getDiskInfo)({volumeDetail:s,snapshotDetail:u,selfBdmData:f});e.updateFormValue("instanceSnapshotDisk",p),e.updateContext({instanceSnapshotDisk:p,instanceSnapshotDataVolumes:d}),e.setState({instanceSnapshotDisk:p,instanceSnapshotMinSize:c,instanceSnapshotDataVolumes:d})}));return function(e){return t.apply(this,arguments)}}()),(0,_.default)(this,"onBootableVolumeChange",(e=>{this.updateContext({bootableVolume:e})})),(0,_.default)(this,"onSystemDiskChange",(e=>{this.updateContext({systemDisk:e})})),(0,_.default)(this,"onDataDiskChange",(e=>{this.updateContext({dataDisk:e})})),(0,_.default)(this,"getInstanceSnapshotDisk",(()=>{var{instanceSnapshotDisk:e}=this.state,{instanceSnapshotDisk:t}=this.props.context;return e||t})),(0,_.default)(this,"getSnapshotDataDisks",(()=>{var{instanceSnapshotDataVolumes:e}=this.state,{instanceSnapshotDataVolumes:t}=this.props.context;return e||t||[]})),(0,_.default)(this,"renderInstanceSnapshotDisk",(e=>{if(null===e)return null;var{deleteTypeLabel:a,typeOption:r={},size:n}=e||{};if(!n)return null;var i={marginRight:10,maxWidth:"20%"};return S.default.createElement(v.default,{gutter:24},S.default.createElement(y.default,{span:8},S.default.createElement("span",{style:i},t("Type")),r.label),S.default.createElement(y.default,{span:8},S.default.createElement("span",{style:i},t("Size")),n,S.default.createElement("span",{style:i},"GiB")),S.default.createElement(y.default,{span:8},a))})),(0,_.default)(this,"renderSnapshotDisk",(()=>{var e=this.getInstanceSnapshotDisk();return this.renderInstanceSnapshotDisk(e)})),(0,_.default)(this,"renderSnapshotDataDisk",(()=>{var e=this.getSnapshotDataDisks();return S.default.createElement(S.default.Fragment,null,null==e?void 0:(0,h.default)(e).call(e,(e=>{var t=(0,j.getInstanceSnapshotDataDisk)(e),a=(null==e?void 0:e.id)||(null==e?void 0:e.snapshot_id);return S.default.createElement("div",{style:{marginBottom:10},key:"data-disk-".concat(a)},this.renderInstanceSnapshotDisk(t))})))}))}init(){this.serverStore=C.default,this.imageStore=k.default,this.volumeStore=new A.VolumeStore,this.volumeTypeStore=P.default,this.instanceSnapshotStore=D.default,this.getAvailZones(),this.getImages(),this.getVolumeTypes(),this.getVolumes(),this.getInstanceSnapshots(),this.initSourceChange()}get title(){return"BaseStep"}get name(){return"BaseStep"}get isStep(){return!0}get defaultValue(){var{volume:e,snapshot:t}=this.locationParams,a=this.imageSourceType;e?a=this.volumeSourceType:t&&(a=this.snapshotSourceType);var r={systemDisk:this.defaultVolumeType,source:a,project:this.currentProjectName,dataDisk:[]};return"image"===a.value&&(r.bootFromVolume=!0),r}get availableZones(){var e,t;return(0,h.default)(e=(0,m.default)(t=T.default.list.data||[]).call(t,(e=>e.zoneState.available))).call(e,(e=>({value:e.zoneName,label:e.zoneName})))}get images(){var{imageTab:e}=this.state,{image:t}=this.locationParams,a=t?[(0,w.toJS)(this.imageStore.detail)]:this.imageStore.list.data||[],r=(0,m.default)(a).call(a,(t=>!!(0,M.canImageCreateInstance)(t)&&(e?(0,M.getImageOS)(t)===e:t)));return(0,h.default)(r).call(r,(e=>O(O({},e),{},{key:e.id})))}get snapshots(){var{snapshot:e}=this.locationParams;if(!e){var{list:{data:t}}=this.instanceSnapshotStore;return t||[]}return[(0,w.toJS)(this.instanceSnapshotStore.detail)]}get enableCinder(){return this.props.rootStore.checkEndpoint("cinder")}get volumeTypes(){return(0,j.volumeTypes)()}get volumes(){var e,t,a,{volume:r}=this.locationParams;return r?(0,m.default)(a=[(0,w.toJS)(this.volumeStore.detail)]).call(a,(e=>(0,I.canCreateInstance)(e))):(0,h.default)(e=(0,m.default)(t=this.volumeStore.list.data||[]).call(t,(e=>(0,I.canCreateInstance)(e)))).call(e,(e=>O(O({},e),{},{key:e.id})))}get defaultVolumeType(){return{size:10,deleteType:1}}get sourceTypes(){var{image:e,snapshot:a,volume:r}=this.locationParams,n=[{label:t("Image"),value:"image",disabled:r||a},{label:t("Instance Snapshot"),value:"instanceSnapshot",disabled:e||r}];return this.enableCinder&&n.push({label:t("Bootable Volume"),value:"bootableVolume",disabled:e||a}),n}get imageSourceType(){var e;return(0,g.default)(e=this.sourceTypes).call(e,(e=>"image"===e.value))}get snapshotSourceType(){var e;return(0,g.default)(e=this.sourceTypes).call(e,(e=>"instanceSnapshot"===e.value))}get volumeSourceType(){var e;return this.enableCinder?(0,g.default)(e=this.sourceTypes).call(e,(e=>"bootableVolume"===e.value)):{}}getAvailZones(){var e=this;return(0,b.default)((function*(){yield T.default.fetchListWithoutDetail(),e.availableZones.length&&e.updateFormValue("availableZone",e.availableZones[0])}))()}getImages(){var e=this;return(0,b.default)((function*(){var{volume:t,image:a,snapshot:r}=e.locationParams;t||r||(a?yield e.imageStore.fetchDetail({id:a}):yield e.imageStore.fetchList({all_projects:e.hasAdminRole}))}))()}getVolumeTypes(){var e=this;return(0,b.default)((function*(){e.enableCinder&&(yield e.volumeTypeStore.fetchList())}))()}getVolumes(){var e=this;return(0,b.default)((function*(){var{image:t,snapshot:a,volume:r}=e.locationParams;t||a||e.enableCinder&&(r?(yield e.volumeStore.fetchDetail({id:r}),e.updateContext({source:e.volumeSourceType})):yield e.volumeStore.fetchList({sortKey:"bootable",sortOrder:"ascend"}))}))()}getInstanceSnapshots(){var e=this;return(0,b.default)((function*(){var{image:t,snapshot:a,volume:r}=e.locationParams;t||r||(a?yield e.instanceSnapshotStore.fetchDetail({id:a}):e.instanceSnapshotStore.fetchList())}))()}get systemTabs(){return(0,M.getImageSystemTabs)()}get nameForStateUpdate(){return["source","image","instanceSnapshot","bootableVolume","flavor","bootFromVolume"]}getSystemDiskMinSize(){var e=(this.state.flavor||{}).disk||0,t=0;if(this.sourceTypeIsImage){var{min_disk:a=0,size:r=0}=this.state.image||{},n=Math.ceil(r/1024/1024/1024);return t=Math.max(a,n,1),Math.max(e,t,1)}if(this.sourceTypeIsSnapshot){var{instanceSnapshotMinSize:i=0}=this.state;return Math.max(e,i,1)}return Math.max(e,1)}get sourceTypeIsImage(){var{source:e}=this.state;return e===this.imageSourceType.value}get sourceTypeIsSnapshot(){var{source:e}=this.state;return e===this.snapshotSourceType.value}get sourceTypeIsVolume(){var{source:e}=this.state;return e===this.volumeSourceType.value}getImageExtraWords(){var{flavor:{category:e}={}}=this.state;return(0,R.isGpuCategory)(e)?t("For GPU type, you need to install GPU drivers in the instance operating system."):""}initSourceChange(){var{snapshot:e,volume:t}=this.locationParams;e?this.onSourceChange(this.snapshotSourceType):t?this.onSourceChange(this.volumeSourceType):this.onSourceChange(this.imageSourceType)}onSourceChange(e){this.updateContext({source:e})}get imageColumns(){return(0,M.getImageColumns)(this)}get instanceSnapshotColumns(){return[{title:t("Name"),dataIndex:"name"},{title:t("Disk Format"),dataIndex:"disk_format",valueMap:M.imageFormats},{title:t("Min System Disk"),dataIndex:"min_disk",unit:"GiB"},{title:t("Min Memory"),dataIndex:"min_ram",render:e=>"".concat(e/1024,"GiB")},{title:t("Status"),dataIndex:"status",valueMap:M.imageStatus},{title:t("Created At"),dataIndex:"created_at",isHideable:!0,valueRender:"sinceTime"}]}get volumeColumns(){return[{title:t("Name"),dataIndex:"name"},{title:t("Size"),dataIndex:"size",unit:"GiB",width:80},{title:t("Status"),dataIndex:"status",valueMap:I.volumeStatus,width:80},{title:t("Type"),dataIndex:"volume_type"},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime"}]}get supportNoBootFromVolume(){return!0}get showBootFromVolumeFormItem(){return!!this.supportNoBootFromVolume&&(!!this.enableCinder&&(!!this.sourceTypeIsImage||this.showSystemDisk))}get bootFromVolumeOptions(){return[{value:!0,label:t("Yes - Create a new system disk")},{value:!1,label:t("No - Do not create a new system disk")}]}get showSystemDisk(){var e=this.getInstanceSnapshotDisk();return this.enableCinder&&(this.sourceTypeIsImage||this.sourceTypeIsSnapshot&&null===e)}get showSystemDiskByBootFromVolume(){if(!this.showSystemDisk)return!1;if(!this.supportNoBootFromVolume)return!0;var{bootFromVolume:e=!0}=this.state;return!!e}get hideInstanceSnapshotSystemDisk(){return this.showSystemDisk||this.sourceTypeIsVolume}get hideInstanceSnapshotDataDisk(){return!!this.hideInstanceSnapshotSystemDisk||0===this.getSnapshotDataDisks().length}get hideDataDisk(){if(!this.supportNoBootFromVolume)return!1;if(this.sourceTypeIsVolume)return!1;var{bootFromVolume:e=!0}=this.state;return!e}getFlavorComponent(){return S.default.createElement(F.default,{onChange:this.onFlavorChange})}get formItems(){var{image:e}=this.locationParams,a=e?this.imageStore.isLoading:this.imageStore.list.isLoading;return[{name:"project",label:t("Project"),type:"label"},{name:"availableZone",label:t("Available Zone"),type:"select",placeholder:t("Please select"),isWrappedValue:!0,required:!0,options:this.availableZones,tip:t("Availability zone refers to a physical area where power and network are independent of each other in the same area. In the same region, the availability zone and the availability zone can communicate with each other in the intranet, and the available zones can achieve fault isolation.")},{type:"divider"},{name:"flavor",label:t("Specification"),type:"select-table",component:this.getFlavorComponent(),required:!0,wrapperCol:{xs:{span:24},sm:{span:18}}},{name:"source",label:t("Start Source"),type:"radio",options:this.sourceTypes,required:!0,isWrappedValue:!0,tip:t("The start source is a template used to create an instance. You can choose an image or a bootable volume."),onChange:e=>{this.onSourceChange(e)}},{name:"image",label:t("Operating System"),type:"select-table",data:this.images,isLoading:a,required:this.sourceTypeIsImage,isMulti:!1,display:this.sourceTypeIsImage,extra:this.getImageExtraWords(),filterParams:[{label:t("Name"),name:"name"}],columns:this.imageColumns,tabs:this.systemTabs,defaultTabValue:this.locationParams.os_distro||this.systemTabs[0].value,selectedLabel:t("Image"),onTabChange:this.onImageTabChange},{name:"instanceSnapshot",label:t("Instance Snapshot"),type:"select-table",data:this.snapshots,required:this.sourceTypeIsSnapshot,isMulti:!1,hidden:!this.sourceTypeIsSnapshot,display:this.sourceTypeIsSnapshot,onChange:this.onInstanceSnapshotChange,filterParams:[{label:t("Name"),name:"name"}],columns:this.instanceSnapshotColumns},{name:"bootableVolume",label:t("Bootable Volume"),type:"select-table",data:this.volumes,isLoading:this.volumeStore.list.isLoading,required:this.sourceTypeIsVolume,isMulti:!1,display:this.sourceTypeIsVolume&&this.enableCinder,onChange:this.onBootableVolumeChange,filterParams:[{label:t("Name"),name:"name"}],columns:this.volumeColumns},{type:"divider"},{name:"bootFromVolume",label:t("Boot From Volume"),type:"radio",required:this.showBootFromVolumeFormItem,hidden:!this.showBootFromVolumeFormItem,onChange:this.onChangeBootFromVolume,wrapperCol:{xs:{span:16},sm:{span:14}},options:this.bootFromVolumeOptions},{name:"systemDisk",label:t("System Disk"),type:"instance-volume",options:this.volumeTypes,required:this.showSystemDiskByBootFromVolume,hidden:!this.showSystemDiskByBootFromVolume,validator:this.checkSystemDisk,minSize:this.getSystemDiskMinSize(),extra:t("Disk size is limited by the min disk of flavor, image, etc."),onChange:this.onSystemDiskChange,dependencies:["flavor","image","instanceSnapshot","bootFromVolume"]},{name:"deleteVolumeInstance",label:t("Delete Volume on Instance Delete"),type:"check",hidden:!this.sourceTypeIsVolume},{name:"instanceSnapshotDisk",label:t("System Disk"),hidden:this.hideInstanceSnapshotSystemDisk,component:this.renderSnapshotDisk()},{name:"instanceSnapshotDataDisk",label:t("Required Data Disk"),hidden:this.hideInstanceSnapshotDataDisk,component:this.renderSnapshotDataDisk()},{name:"dataDisk",label:t("Data Disk"),type:"add-select",options:this.volumeTypes,defaultItemValue:this.defaultVolumeType,hidden:this.hideDataDisk,itemComponent:E.default,minCount:0,addTextTips:t("Data Disks"),addText:t("Add Data Disks"),extra:t("Too many disks mounted on the instance will affect the read and write performance. It is recommended not to exceed 16 disks."),onChange:this.onDataDiskChange,display:this.enableCinder}]}}a.BaseStep=z;var B=(0,x.inject)("rootStore")((0,x.observer)(z));a.default=B},3568:function(e,t,a){var r=a(3569);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(65)(r,n);r.locals&&(e.exports=r.locals)},3569:function(e,t,a){(t=e.exports=a(64)(!1)).push([e.i,".index__flavor-label--GI_En {\n  display: inline-block;\n  min-width: 50px;\n  margin-right: 16px;\n}\n.index__flavor-tab--2Mc6u {\n  margin-bottom: 16px;\n}\n",""]),t.locals={"flavor-label":"index__flavor-label--GI_En","flavor-tab":"index__flavor-tab--2Mc6u"}},3570:function(e,t,a){var r=a(3571);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(65)(r,n);r.locals&&(e.exports=r.locals)},3571:function(e,t,a){(t=e.exports=a(64)(!1)).push([e.i,"/* init */\n/* specific color */\n/*  border */\n/*  background */\n/*  shadow */\n/*  font */\n/* 中号字体 */\n/*  animation */\n/*  size */\n/*  sider */\n/* login */\n.index__input--2eKC2 {\n  margin-right: 32px;\n  margin-left: 16px;\n}\n.index__number-input--3TVxi {\n  min-width: 165px;\n}\n",""]),t.locals={primaryColor:"#0068ff",successColor:"#57e39b",warnColor:"#fedf40",warnDarkColor:"#fa8c16",warnLightColor:"#f6b23d",errorColor:"#eb354d",dangerColor:"#c4233e",moneyColor:"#f50",infoColor:"rgba(0, 104, 255, 0.65)",headerHeight:"40px",productsColumnWidth:"230px",input:"index__input--2eKC2","number-input":"index__number-input--3TVxi"}},3608:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.default=void 0,a(1317);var i=n(a(1318));a(1303);var l=n(a(1290)),o=n(a(54)),s=n(a(0)),u=(a(161),n(a(16))),d=a(163),c=n(a(3609)),f=e=>{var{title:t,descriptions:a,loading:r}=e,n=(0,o.default)(a).call(a,(e=>("number"==typeof e.content&&(e.content=e.content.toString()),s.default.createElement(l.default.Item,{label:e.label,className:c.default.item,key:"label-".concat((0,d.generateId)())},e.content))));return s.default.createElement(i.default,{loading:r},s.default.createElement(l.default,{colon:!1,title:t},n))},p=u.default.shape({label:u.default.oneOfType([u.default.string,u.default.node]),content:u.default.any});f.propTypes={title:u.default.oneOfType([u.default.string,u.default.node]),descriptions:u.default.arrayOf(p),loading:u.default.bool};var h=f;t.default=h},3609:function(e,t,a){var r=a(3610);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(65)(r,n);r.locals&&(e.exports=r.locals)},3610:function(e,t,a){(t=e.exports=a(64)(!1)).push([e.i,".index__item--3lFuh {\n  margin-bottom: 10px;\n  background-color: #fff;\n}\n.index__item--3lFuh .ant-descriptions-item-label {\n  width: 100px;\n  color: #8a8a8a;\n}\n.index__item--3lFuh .ant-descriptions-item-content {\n  word-break: break-all;\n}\n",""]),t.locals={item:"index__item--3lFuh"}},3611:function(e,t,a){var r=a(3612);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(65)(r,n);r.locals&&(e.exports=r.locals)},3612:function(e,t,a){(t=e.exports=a(64)(!1)).push([e.i,"/* init */\n/* specific color */\n/*  border */\n/*  background */\n/*  shadow */\n/*  font */\n/* 中号字体 */\n/*  animation */\n/*  size */\n/*  sider */\n/* login */\n.index__main--1q8mG {\n  position: relative;\n  height: 100%;\n  overflow: auto;\n}\n.index__sider--3LZqm {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 354px;\n  min-width: 354px;\n}\n@media screen and (max-width: 1280px) {\n  .index__sider--3LZqm {\n    width: 300px;\n    min-width: 300px;\n  }\n}\n.index__content--1OSKS {\n  padding-left: 374px;\n}\n@media screen and (max-width: 1280px) {\n  .index__content--1OSKS {\n    padding-left: 320px;\n  }\n}\n.index__nav--2zbId {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  height: 48px;\n  margin: 0 0 12px;\n  padding: 0 14px;\n  background-color: #124191;\n  border-radius: 4px;\n}\n.index__navItem--uT8lm {\n  min-width: 96px;\n  height: 32px;\n  margin: 0 6px;\n  padding: 0 14px;\n  color: #fff;\n  font-weight: 500;\n  line-height: 32px;\n  text-align: center;\n  border: 1px solid transparent;\n  -webkit-transition: all 0.3s;\n  transition: all 0.3s;\n}\n.index__navItem--uT8lm:first-child {\n  margin: 0 6px 0 0;\n}\n.index__navItem--uT8lm.index__active--oKb1h {\n  background-color: #1890ff;\n  border-color: #1890ff;\n  border-radius: 4px;\n  -webkit-box-shadow: none;\n          box-shadow: none;\n}\n.index__navItem--uT8lm.index__active--oKb1h:hover {\n  color: #fff;\n}\n.index__loading--3cfaa {\n  padding: 30px 0;\n  text-align: center;\n}\n.index__header--2mGuj {\n  padding-right: 16px;\n  padding-bottom: 30px;\n  padding-left: 16px;\n  background-color: #fff;\n}\n.index__header--2mGuj .ant-descriptions-title {\n  margin-bottom: 0;\n}\n.index__header-title--3X2Ku {\n  font-style: italic;\n}\n.index__title-label--3TrNR {\n  margin-right: 8px;\n  font-style: italic;\n}\n.index__header-button--2VTui {\n  float: right;\n}\n.index__header-divider--3b6-4 {\n  width: 2px;\n  margin: 0 14px 0 24px;\n  background-color: rgba(0, 0, 0, 0.45);\n}\n.index__tabs--VwWK2 {\n  margin-top: -42px;\n}\n.index__tabs--VwWK2 .ant-tabs-bar {\n  padding-right: 16px;\n  padding-left: 16px;\n}\n.index__tabs--VwWK2 .ant-tabs-nav-wrap {\n  padding-left: 30px;\n}\n.index__tab-wrapper--2DZuY {\n  width: 100%;\n}\n.index__tab-wrapper--2DZuY .list-container {\n  margin-top: 0;\n}\n.index__action-wrapper--pIcIO {\n  position: absolute;\n  right: 80px;\n}\n.index__action-wrapper--pIcIO .ant-btn-link {\n  padding: 5.6px 15px !important;\n  border-color: #0068ff;\n}\n.index__action-wrapper--pIcIO .ant-divider-vertical {\n  border-left: none;\n}\n.index__action-wrapper--pIcIO .ant-btn-dangerous {\n  color: #c4233e;\n  background: transparent;\n  border-color: #c4233e;\n}\n.index__action-wrapper--pIcIO .ant-btn-link[disabled],\n.index__action-wrapper--pIcIO .ant-btn-link[disabled]:hover,\n.index__action-wrapper--pIcIO .ant-btn-link[disabled]:focus,\n.index__action-wrapper--pIcIO .ant-btn-link[disabled]:active {\n  border-color: rgba(0, 0, 0, 0.25);\n}\n.index__action-wrapper--pIcIO .ant-btn-dangerous.ant-btn-link:active {\n  color: #c4233e;\n  background: transparent;\n  border-color: #c4233e;\n}\n.index__action-wrapper--pIcIO .ant-btn-dangerous:hover,\n.index__action-wrapper--pIcIO .ant-btn-dangerous:focus {\n  color: #f76070;\n  background: #fff;\n  border-color: #f76070;\n}\n",""]),t.locals={primaryColor:"#0068ff",successColor:"#57e39b",warnColor:"#fedf40",warnDarkColor:"#fa8c16",warnLightColor:"#f6b23d",errorColor:"#eb354d",dangerColor:"#c4233e",moneyColor:"#f50",infoColor:"rgba(0, 104, 255, 0.65)",headerHeight:"40px",productsColumnWidth:"230px",main:"index__main--1q8mG",sider:"index__sider--3LZqm",content:"index__content--1OSKS",nav:"index__nav--2zbId",navItem:"index__navItem--uT8lm",active:"index__active--oKb1h",loading:"index__loading--3cfaa",header:"index__header--2mGuj","header-title":"index__header-title--3X2Ku","title-label":"index__title-label--3TrNR","header-button":"index__header-button--2VTui","header-divider":"index__header-divider--3b6-4",tabs:"index__tabs--VwWK2","tab-wrapper":"index__tab-wrapper--2DZuY","action-wrapper":"index__action-wrapper--pIcIO"}},3613:function(e,t,a){"use strict";var r=a(32),n=a(42),i=a(29),l=a(25),o=a(28),s=a(44),u=a(45),d=a(20),c=a(21);d(t,"__esModule",{value:!0}),t.default=t.SnapshotVolumeStore=void 0;var f=c(a(63)),p=c(a(54)),h=c(a(28)),m=c(a(35)),g=c(a(49)),v=c(a(53)),y=a(163),b=a(566);function _(e,t){var a=r(e);if(n){var o=n(e);t&&(o=i(o).call(o,(function(t){return l(e,t).enumerable}))),a.push.apply(a,o)}return a}class S extends v.default{get mapper(){return e=>(0,b.updateVolume)(e)}get groupArraySize(){return 10}requestList(e,t){var a=this;return(0,g.default)((function*(){var{volumeIds:r=[]}=t,n=(0,y.groupArray)(r,a.groupArraySize),i=yield f.default.all((0,p.default)(n).call(n,(t=>{var r=function(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=_(Object(r),!0)).call(a,(function(t){(0,m.default)(e,t,r[t])}));else if(s)u(e,s(r));else{var n;o(n=_(Object(r))).call(n,(function(t){d(e,t,l(r,t))}))}}return e}({uuid:t},e);return a.skylineClient.extension.volumes(r)}))),c=[];return(0,h.default)(i).call(i,(e=>{c.push(...e.volumes)})),c}))()}}t.SnapshotVolumeStore=S;var x=new S;t.default=x},3617:function(e,t,a){var r=a(3618);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(65)(r,n);r.locals&&(e.exports=r.locals)},3618:function(e,t,a){(t=e.exports=a(64)(!1)).push([e.i,".index__input--1LaXS {\n  margin-right: 32px;\n  margin-left: 16px;\n}\n",""]),t.locals={input:"index__input--1LaXS"}},3619:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.EditAction=void 0;var l=i(r(63)),o=i(r(35)),s=r(412),u=r(1241),d=i(r(414)),c=r(566);class f extends u.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"onSubmit",(e=>{var{id:t}=this.item;return this.store.update(t,e)}))}get defaultValue(){var{name:e,description:t}=this.item;return{name:e,description:t}}get formItems(){return[{name:"name",label:t("Name"),type:"input-name",placeholder:t("Please input name"),required:!0},{name:"description",label:t("Description"),type:"textarea"}]}init(){this.store=d.default}}a.EditAction=f,(0,o.default)(f,"id","edit"),(0,o.default)(f,"title",t("Edit")),(0,o.default)(f,"policy","volume:update"),(0,o.default)(f,"allowed",(e=>l.default.resolve((0,c.isAvailableOrInUse)(e))));var p=(0,s.inject)("rootStore")((0,s.observer)(f));a.default=p},3620:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=void 0;var l=i(r(164)),o=i(r(28));r(344);var s=i(r(202)),u=i(r(1299));r(583);var d=i(r(420)),c=i(r(35)),f=i(r(92)),p=i(r(0)),h=r(1241),m=i(r(414));r(161),r(564);class g extends h.ConfirmAction{constructor(){super(...arguments),(0,c.default)(this,"policy","volume:delete"),(0,c.default)(this,"canDelete",(e=>{var{status:t,attachments:a=[]}=e,r=["available","error","error_extending"];return(0,l.default)(r).call(r,t)&&!(null!=a&&a.length)})),(0,c.default)(this,"allowedCheckFunc",(e=>this.canDelete(e))),(0,c.default)(this,"onSubmit",(e=>{var{id:t,isCascadeDeleted:a=!0}=e||this.item;return a?m.default.cascadeDelete({id:t}):m.default.delete({id:t})})),(0,c.default)(this,"initCascadeValue",(e=>{this.onChangeCascade(!0,e)})),(0,c.default)(this,"confirmContext",(e=>{var a=this.getName(e);return this.initCascadeValue(e),p.default.createElement("div",null,p.default.createElement("p",{style:{marginBottom:"16px"}},this.unescape(t("Are you sure to delete volume { name }? ",{name:a}))),p.default.createElement("div",null,this.renderCascadeDeletion(e),this.renderCascadeDeletionTip()))}))}get id(){return"delete"}get title(){return t("Delete Volume")}get name(){return t("Delete Volume")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete volume")}onChangeCascade(e,t){(0,f.default)(t)?(0,o.default)(t).call(t,(t=>{t.isCascadeDeleted=e})):t.isCascadeDeleted=e}renderCascadeDeletion(e){return p.default.createElement(d.default,{defaultChecked:!0,onChange:t=>{this.onChangeCascade(t.target.checked,e)}},t("Cascading deletion"))}get cascadeDeletionTip(){return t("Using cascading deletion, when the volume has snapshots, the associated snapshot will be automatically deleted first, and then the volume will be deleted, thereby improving the success rate of deleting the volume.")}renderCascadeDeletionTip(){return p.default.createElement(s.default,{title:this.cascadeDeletionTip},p.default.createElement(u.default,null))}}a.default=g},3621:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.RestoreAction=void 0;var l=i(r(77)),o=i(r(63)),s=i(r(35)),u=r(412),d=r(1241),c=r(414),f=i(r(592)),p=r(566),h=r(580);class m extends d.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"onSubmit",(e=>{var{snapshot:{selectedRowKeys:t=[]}={}}=e,{id:a}=this.item;return this.store.revert(a,{snapshot_id:t[0]})}))}init(){this.store=new c.VolumeStore,this.snapshotStore=f.default}static get modalSize(){return"large"}getModalSize(){return"large"}get defaultValue(){var e,t,{name:a,id:r="-",volume_type:n="-",size:i}=this.item;return{volume:(0,l.default)(e=(0,l.default)(t="".concat(a||r,"(")).call(t,n," | ")).call(e,i,"GiB)")}}get formItems(){var{id:e}=this.item;return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},{name:"snapshot",label:t("Select Volume Snapshot"),type:"select-table",backendPageStore:this.snapshotStore,extraParams:{volume_id:e},required:!0,isMulti:!1,isSortByBack:!0,defaultSortKey:"created_at",defaultSortOrder:"descend",filterParams:[{label:t("Name"),name:"name"}],columns:[{title:t("Name"),dataIndex:"name"},{title:t("Size"),dataIndex:"size",unit:"GiB",sorter:!1},{title:t("Status"),dataIndex:"status",valueMap:p.volumeStatus},{title:t("Created At"),dataIndex:"created_at",render:e=>(0,h.getSinceTime)(e)}]}]}get name(){return t("Restore from snapshot")}}a.RestoreAction=m,(0,s.default)(m,"id","Restore from snapshot"),(0,s.default)(m,"title",t("Restore From Snapshot")),(0,s.default)(m,"policy","volume:create"),(0,s.default)(m,"allowed",(e=>o.default.resolve("available"===e.status)));var g=(0,u.inject)("rootStore")((0,u.observer)(m));a.default=g},3622:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Attach=void 0;var p=f(r(86)),h=f(r(63)),m=f(r(54)),g=f(r(77)),v=f(r(35)),y=r(412),b=r(1241),_=r(413),S=f(r(414)),x=r(1248),w=r(566);function I(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=I(Object(r),!0)).call(a,(function(t){(0,v.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=I(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}class k extends b.ModalAction{constructor(){super(...arguments),(0,v.default)(this,"disabledInstance",(e=>!(0,x.allowAttachVolumeInstance)(e)||this.alreadyAttached(e))),(0,v.default)(this,"alreadyAttached",(e=>{var{attachments:t=[]}=this.item;return!!(0,p.default)(t).call(t,(t=>t.server_id===e.id))})),(0,v.default)(this,"onSubmit",(e=>{var{instance:t}=e,{id:a}=this.item,{selectedRowKeys:r}=t;return h.default.all((0,m.default)(r).call(r,(e=>this.vmStore.attachVolume({id:e,body:{volumeAttachment:{volumeId:a}}}))))}))}init(){this.store=S.default,this.vmStore=new _.ServerStore}get name(){return t("Attach")}get isAsyncAction(){return!0}static get modalSize(){return"large"}getModalSize(){return"large"}get defaultValue(){var e,t,{name:a,id:r,size:n,volume_type:i}=this.item;return{volume:(0,g.default)(e=(0,g.default)(t="".concat(a||r,"(")).call(t,i," | ")).call(e,n,"GiB)")}}get formItems(){return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},C({name:"instance",label:t("Instance"),type:"select-table",required:!0,backendPageStore:this.vmStore,disabledFunc:this.disabledInstance,extraParams:{noReminder:!0},isMulti:!1},x.instanceSelectTablePropsBackend)]}}a.Attach=k,(0,v.default)(k,"id","attach"),(0,v.default)(k,"title",t("Attach")),(0,v.default)(k,"policy","os_compute_api:os-volumes-attachments:create"),(0,v.default)(k,"allowed",(e=>h.default.resolve((0,w.isAvailable)(e)||(0,w.isMultiAttach)(e))));var D=(0,y.inject)("rootStore")((0,y.observer)(k));a.default=D},3623:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.Detach=void 0;var l=i(r(54)),o=i(r(77)),s=i(r(63)),u=i(r(1394)),d=i(r(35)),c=r(412),f=r(1241),p=i(r(413)),h=r(1460),m=r(566),g=r(1248);class v extends f.ModalAction{constructor(){super(...arguments),(0,d.default)(this,"disabledInstance",(e=>!(0,g.allowAttachVolumeInstance)(e))),(0,d.default)(this,"onSubmit",(e=>{var{instance:t}=e,{id:a}=this.item,{selectedRowKeys:r}=t,n=r[0];return this.store.detachVolume({id:n,volumes:[a]})}))}get name(){return t("Detach")}init(){this.store=p.default,this.instanceStore=new h.ServerGroupInstanceStore,this.getInstances()}static get modalSize(){return"large"}getModalSize(){return"large"}get instances(){return this.instanceStore.list.data||[]}getInstances(){var e,t=(0,l.default)(e=this.item.attachments||[]).call(e,(e=>e.server_id));this.instanceStore.fetchList({members:t})}get defaultValue(){var e,t,{name:a,size:r,volume_type:n}=this.item;return{volume:(0,o.default)(e=(0,o.default)(t="".concat(a,"(")).call(t,n," | ")).call(e,r,"GiB)")}}get formItems(){return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},{name:"instance",label:t("Instance"),type:"select-table",required:!0,data:this.instances,filterParams:[{label:t("Name"),name:"name"}],columns:g.instanceColumnsBackend,isLoading:this.instanceStore.list.isLoading,disabledFunc:this.disabledInstance}]}}a.Detach=v,(0,d.default)(v,"id","detach"),(0,d.default)(v,"title",t("Detach")),(0,d.default)(v,"isDanger",!0),(0,d.default)(v,"policy","os_compute_api:os-volumes-attachments:delete"),(0,d.default)(v,"allowed",(e=>s.default.resolve((0,m.isInUse)(e)&&!(0,m.isOsDisk)(e)&&(0,u.default)(e.attachments)&&e.attachments.length)));var y=(0,c.inject)("rootStore")((0,c.observer)(v));a.default=y},3624:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.CreateSnapshot=void 0;var p=f(r(77)),h=f(r(63)),m=f(r(49)),g=f(r(35)),v=r(412),y=r(1241),b=f(r(592)),_=r(566),S=f(r(340));function x(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=x(Object(r),!0)).call(a,(function(t){(0,g.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=x(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}var I=e=>{var{snapshots:t={}}=e,{currentVolumeType:a}=b.default;return{snapshotQuota:t,typeQuota:e["snapshots_".concat(a)]||{}}},C=e=>{var{snapshotQuota:t,typeQuota:a}=I(e),{left:r=0}=t||{},{left:n=0}=a||{};return 0!==r&&0!==n?1:0};class k extends y.ModalAction{constructor(){super(...arguments),(0,g.default)(this,"onSubmit",(e=>{var{id:t,status:a}=this.item,{name:r}=e,n={name:r,volume_id:t,force:"in-use"===a};return this.store.create(n)}))}init(){b.default.setCurrentVolumeType(this.item),this.state.quota={},this.state.quotaLoading=!0,this.store=b.default,this.projectStore=S.default,this.getQuota()}get name(){return t("create volume snapshot")}get defaultValue(){var e,t,{name:a,id:r,volume_type:n,size:i}=this.item;return{volume:(0,p.default)(e=(0,p.default)(t="".concat(a||r,"(")).call(t,n," | ")).call(e,i,"GiB)")}}static get disableSubmit(){var{cinderQuota:e={}}=S.default;return 0===C(e)}static get showQuota(){return!0}get showQuota(){return!0}getQuota(){var e=this;return(0,m.default)((function*(){e.setState({quotaLoading:!0});var t=yield e.projectStore.fetchProjectCinderQuota();e.setState({quota:t,quotaLoading:!1})}))()}get quotaInfo(){var{quota:e={},quotaLoading:a}=this.state;if(a)return[];var{snapshotQuota:r={},typeQuota:n={}}=I(e),i=C(e),l=w(w({},r),{},{add:i,name:"snapshot",title:t("Volume Snapshot")}),{volume_type:o}=this.item;return[l,w(w({},n),{},{add:i,name:"type",title:t("{name} type snapshots",{name:o}),type:"line"})]}get formItems(){return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},{name:"name",label:t("Volume Snapshot Name"),type:"input-name",placeholder:t("Please input snapshot name"),required:!0}]}}a.CreateSnapshot=k,(0,g.default)(k,"id","create-snapshot"),(0,g.default)(k,"title",t("Create Volume Snapshot")),(0,g.default)(k,"buttonText",t("Create Snapshot")),(0,g.default)(k,"policy","volume:create_snapshot"),(0,g.default)(k,"allowed",(e=>h.default.resolve((0,_.isAvailableOrInUse)(e))));var D=(0,v.inject)("rootStore")((0,v.observer)(k));a.default=D},3625:function(e,a,r){"use strict";var n=r(162),i=r(20),l=r(25),o=r(21);i(a,"__esModule",{value:!0}),a.default=a.ExtendVolume=void 0;var s=o(r(63)),u=o(r(77)),d=o(r(58)),c=o(r(49)),f=o(r(35)),p=o(r(177)),h=r(412),m=r(1241),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=b(t);if(a&&a.has(e))return a.get(e);var r={},n=i&&l;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=n?l(e,o):null;s&&(s.get||s.set)?i(r,o,s):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(r(414)),v=o(r(340)),y=r(566);function b(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(b=function(e){return e?a:t})(e)}class _ extends m.ModalAction{constructor(){var e;super(...arguments),e=this,(0,f.default)(this,"onSizeChange",(e=>{var t=e-this.itemSize;(0,y.setCreateVolumeSize)(t)})),(0,f.default)(this,"checkInstance",(()=>{var{lockedError:e}=this.state;return e?s.default.reject(e):s.default.resolve()})),(0,f.default)(this,"onSubmit",function(){var t=(0,c.default)((function*(t){var{new_size:a}=t,{id:r}=e.item;return e.store.extendSize(r,{new_size:a})}));return function(e){return t.apply(this,arguments)}}())}get name(){return t("Extend volume")}init(){this.store=g.default,this.state.showNotice=!0,this.volumeStore=new g.VolumeStore,this.projectStore=v.default,(0,y.fetchQuota)(this,1,this.item.volume_type)}get tips(){return t("After the volume is expanded, the volume cannot be reduced.")}static get disableSubmit(){return(0,y.checkQuotaDisable)(!1)}static get showQuota(){return!0}get showQuota(){return!0}get quotaInfo(){var{quota:e={},quotaLoading:t}=this.state;if(t||(0,p.default)(e))return[];var[a,r,n,i]=(0,y.getQuotaInfo)(this,!1),{type:l}=r;return[(0,d.default)(r,["type"]),i]}get isQuotaLimited(){var{gigabytes:{limit:e}={}}=this.projectStore.cinderQuota||{};return-1!==e}get leftSize(){var{gigabytes:{left:e=0}={}}=this.projectStore.cinderQuota||{};return e}get itemSize(){var{size:e}=this.item;return e}get minSize(){return this.itemSize+1}get maxSize(){var{size:e}=this.item;return e+this.leftSize}get defaultValue(){var e,t,{name:a,id:r,volume_type:n,size:i}=this.item;return{volume:(0,u.default)(e=(0,u.default)(t="".concat(a||r,"(")).call(t,n," | ")).call(e,i,"GiB)"),new_size:this.minSize}}get formItems(){var e;return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},{name:"new_size",label:t("Capacity (GiB)"),type:"slider-input",max:this.maxSize,min:this.minSize,description:(0,u.default)(e="".concat(this.minSize,"GiB-")).call(e,this.maxSize,"GiB"),required:!0,display:this.isQuotaLimited,onChange:this.onSizeChange,validator:this.checkInstance},{name:"new_size",label:t("Capacity (GiB)"),type:"input-int",min:this.minSize,required:!0,display:!this.isQuotaLimited,onChange:this.onSizeChange,validator:this.checkInstance}]}}a.ExtendVolume=_,(0,f.default)(_,"id","extend-snapshot"),(0,f.default)(_,"title",t("Extend Volume")),(0,f.default)(_,"policy","volume:extend"),(0,f.default)(_,"allowed",(e=>s.default.resolve((0,y.isAvailableOrInUse)(e))));var S=(0,h.inject)("rootStore")((0,h.observer)(_));a.default=S},3626:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.ChangeType=void 0;var l=i(r(54)),o=i(r(29)),s=i(r(77)),u=i(r(63)),d=i(r(35)),c=r(412),f=r(1241),p=i(r(414)),h=i(r(578)),m=r(566);class g extends f.ModalAction{constructor(){super(...arguments),(0,d.default)(this,"onSubmit",(e=>{var{id:t}=this.item,{new_type:a}=e,r={new_type:a,migration_policy:"on-demand"};return this.store.retype(t,r)}))}get name(){return t("Change type")}get tips(){return t("If the capacity of the disk is large, the type modify operation may take several hours. Please be cautious.")}init(){this.store=p.default,this.volumeTypeStore=h.default,this.getVolumeTypes()}getVolumeTypes(){this.volumeTypeStore.fetchList()}get isAsyncAction(){return!0}get volumeTypes(){var e,{volume_type:t}=this.item,{data:a=[]}=this.volumeTypeStore.list;return(0,l.default)(e=(0,o.default)(a).call(a,(e=>e.name!==t))).call(e,(e=>({label:e.name,value:e.id})))}get defaultValue(){var e,t,{name:a,id:r,volume_type:n,size:i}=this.item;return{volume:(0,s.default)(e=(0,s.default)(t="".concat(a||r,"(")).call(t,n," | ")).call(e,i,"GiB)"),volume_type:(this.volumeTypes[0]||{}).value}}get formItems(){return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},{name:"new_type",label:t("Volume Type"),type:"select",required:!0,options:this.volumeTypes}]}}a.ChangeType=g,(0,d.default)(g,"id","change-type"),(0,d.default)(g,"title",t("Change Type")),(0,d.default)(g,"policy","volume:retype"),(0,d.default)(g,"allowed",(e=>u.default.resolve((0,m.isAvailableOrInUse)(e)&&!(0,m.isOsDisk)(e))));var v=(0,c.inject)("rootStore")((0,c.observer)(g));a.default=v},3627:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.CloneVolume=void 0;var p=f(r(86)),h=f(r(77)),m=f(r(63)),g=f(r(49)),v=f(r(58)),y=f(r(35)),b=r(412),_=r(1241),S=f(r(414)),x=r(566);function w(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=w(Object(r),!0)).call(a,(function(t){(0,y.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=w(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}class C extends _.ModalAction{constructor(){super(...arguments),(0,y.default)(this,"onSubmit",(e=>{var{volume:t,more:a}=e,r=I(I({},(0,v.default)(e,["volume","more"])),{},{source_volid:this.item.id});return this.store.create(r)}))}get name(){return t("Clone volume")}get tips(){return t("It is recommended that you perform this cloning operation on a disk without any reading/writing")}init(){this.store=S.default,this.getVolumeTypes(),(0,x.fetchQuota)(this,this.item.size)}getVolumeTypes(){var e=this;return(0,g.default)((function*(){var t;yield e.store.fetchVolumeTypes();var a=(0,p.default)(t=e.volumeTypes).call(t,(t=>t.label===e.item.volume_type));e.defaultType=a,a&&(0,x.setCreateVolumeType)(e.item.volume_type),e.updateDefaultValue()}))()}get volumeTypes(){return this.store.volumeTypes}static get disableSubmit(){return(0,x.checkQuotaDisable)()}static get showQuota(){return!0}get showQuota(){return!0}get quotaInfo(){return(0,x.getQuotaInfo)(this)}get defaultValue(){var e,t,{name:a,id:r,volume_type:n,size:i}=this.item;return{volume:(0,h.default)(e=(0,h.default)(t="".concat(a||r,"(")).call(t,n," | ")).call(e,i,"GiB)"),volume_type:(this.defaultType||{}).value,size:i}}get maxSize(){var{quota:{gigabytes:{left:e=0}={}}={}}=this.state;return-1===e?1/0:e}get formItems(){var{size:e}=this.item,{more:a}=this.state;return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},{name:"name",label:t("Volume Name"),type:"input-name",required:!0},{name:"size",label:t("Capacity (GiB)"),type:"input-int",min:e,max:this.maxSize,required:!0,onChange:x.onVolumeSizeChange},{name:"more",type:"more",label:t("Advanced Options")},{name:"volume_type",label:t("Volume Type"),type:"select",options:this.volumeTypes,onChange:x.onVolumeTypeChange,allowClear:!1,hidden:!a}]}}a.CloneVolume=C,(0,y.default)(C,"id","clone-volume"),(0,y.default)(C,"title",t("Clone Volume")),(0,y.default)(C,"policy","volume:create"),(0,y.default)(C,"allowed",(e=>m.default.resolve((0,x.isAvailableOrInUse)(e))));var k=(0,b.inject)("rootStore")((0,b.observer)(C));a.default=k},3628:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.UpdateStatus=void 0;var l=i(r(77)),o=i(r(63)),s=i(r(35)),u=r(412),d=r(1241),c=i(r(414));class f extends d.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"handleStatusChange",(e=>{this.setState({status:e})})),(0,s.default)(this,"onSubmit",(e=>{var{id:t}=this.item;return delete e.volume,this.store.resetStatus(t,e)}))}get name(){return t("update status")}get defaultValue(){var e,t,{name:a,id:r,volume_type:n,size:i}=this.item;return{volume:(0,l.default)(e=(0,l.default)(t="".concat(a||r,"(")).call(t,n," | ")).call(e,i,"GiB)"),status:"available"}}get tips(){return t('Do not reset the normally mounted volume to the "available"、"maintenance" or "error" status. The reset state does not remove the volume from the instance. If you need to remove the volume from the instance, please go to the console of the corresponding project and use the "detach" operation.')}get formItems(){var{status:e}=this.state,a=[{value:"available",label:t("Available")},{value:"maintenance",label:t("Maintained")},{value:"error",label:t("Error")},{value:"in-use",label:t("In Use")}];return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},{name:"status",label:t("Status"),type:"select",required:!0,options:a,onChange:this.handleStatusChange,extra:"in-use"===e?t("The volume status can be reset to in-use only when the previous status is in-use."):""}]}init(){this.store=c.default}}a.UpdateStatus=f,(0,s.default)(f,"id","update-status"),(0,s.default)(f,"title",t("Update Status")),(0,s.default)(f,"policy","volume_extension:volume_admin_actions:reset_status"),(0,s.default)(f,"allowed",(()=>o.default.resolve(!0)));var p=(0,u.inject)("rootStore")((0,u.observer)(f));a.default=p},3629:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.Migrate=void 0;var l=i(r(77)),o=i(r(63)),s=i(r(35)),u=r(412),d=r(1241),c=i(r(414)),f=r(566),p=i(r(1604)),h=r(1465);class m extends d.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"disableFunc",(e=>{var{host:t}=this.item;return e.name===t})),(0,s.default)(this,"onSubmit",(e=>{var{pool:t}=e,{item:{id:a}}=this,{selectedRowKeys:r=[]}=t||{};return c.default.migrate(a,{host:r[0]})}))}static get modalSize(){return"large"}getModalSize(){return"large"}get name(){return t("Migrate volume")}init(){this.poolStore=p.default,this.getPools()}get defaultValue(){var e,t,{name:a,id:r,volume_type:n,size:i,host:o}=this.item;return{volume:(0,l.default)(e=(0,l.default)(t="".concat(a||r,"(")).call(t,n," | ")).call(e,i,"GiB)"),host:o}}getPools(){this.poolStore.fetchList()}get pools(){return this.poolStore.list.data||[]}get formItems(){return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},{name:"host",label:t("Current Storage Backend"),type:"label",iconType:"instance"},{name:"pool",label:t("Target Storage Backend"),type:"select-table",required:!0,data:this.pools,isLoading:this.poolStore.list.isLoading,disabledFunc:this.disableFunc,rowKey:"name",columns:h.poolColumns}]}}a.Migrate=m,(0,s.default)(m,"id","migrate-volume"),(0,s.default)(m,"title",t("Migrate Volume")),(0,s.default)(m,"policy","volume_extension:volume_admin_actions:migrate_volume"),(0,s.default)(m,"allowed",(e=>o.default.resolve((0,f.isAvailableOrInUse)(e))));var g=(0,u.inject)("rootStore")((0,u.observer)(m));a.default=g},3630:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.CreateImage=void 0;var l=i(r(54)),o=i(r(32)),s=i(r(63)),u=i(r(35)),d=r(412),c=r(1241),f=r(574),p=i(r(414)),h=r(566);class m extends c.ModalAction{constructor(){super(...arguments),(0,u.default)(this,"onSubmit",(e=>{var{id:t}=this.item;return this.store.uploadImage(t,e)}))}get name(){return t("Create Image")}get defaultValue(){return{disk_format:"raw"}}get osList(){var e;return(0,l.default)(e=(0,o.default)(f.imageOS)).call(e,(e=>({value:e,label:f.imageOS[e]})))}get formatList(){var e;return(0,l.default)(e=(0,o.default)(f.volumeCreateImageTypes)).call(e,(e=>({label:f.volumeCreateImageTypes[e],value:e})))}get formItems(){return[{name:"image_name",label:t("Image Name"),type:"input-name",placeholder:t("Please input name"),isImage:!0,required:!0},{name:"disk_format",label:t("Format"),type:"select",options:this.formatList,required:!0}]}init(){this.store=p.default}}a.CreateImage=m,(0,u.default)(m,"id","create-image"),(0,u.default)(m,"title",t("Create Image")),(0,u.default)(m,"policy","volume_extension:volume_actions:upload_image"),(0,u.default)(m,"allowed",(e=>s.default.resolve((0,h.isAvailable)(e))));var g=(0,d.inject)("rootStore")((0,d.observer)(m));a.default=g},3631:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.AcceptVolumeTransfer=void 0;var l=i(r(63)),o=i(r(35)),s=r(412),u=r(1241),d=i(r(414));class c extends u.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"onSubmit",(e=>{var{transfer_id:t,auth_key:a}=e;return d.default.acceptVolumeTransfer(t,{auth_key:a})}))}get name(){return t("Accept Volume Transfer")}get defaultValue(){return{}}get messageHasItemName(){return!1}get formItems(){return[{name:"transfer_id",label:t("Transfer ID"),type:"input",placeholder:t("Please input transfer id"),required:!0},{name:"auth_key",label:t("Auth Key"),type:"input",placeholder:t("Please input auth key"),required:!0}]}}a.AcceptVolumeTransfer=c,(0,o.default)(c,"id","accept-volume-transfer"),(0,o.default)(c,"title",t("Accept Volume Transfer")),(0,o.default)(c,"policy",(()=>"volume:accept_transfer")),(0,o.default)(c,"allowed",(()=>l.default.resolve(!0)));var f=(0,s.inject)("rootStore")((0,s.observer)(c));a.default=f},3632:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.CreateTransfer=void 0;var l=i(r(77)),o=i(r(63)),s=i(r(35)),u=r(412),d=r(1241),c=i(r(414)),f=r(566);class p extends d.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"downloadTxt",((e,t)=>{var a=document.createElement("a");a.href="data:text/plain;charset=utf-8,".concat(t),a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a)})),(0,s.default)(this,"onSubmit",(e=>{var{name:t}=e,{id:a}=this.item;return this.store.createTransfer({name:t,volume_id:a}).then((e=>{if(e&&e.transfer){var t,a,{id:r,name:n,auth_key:i}=e.transfer;this.downloadTxt("Volume Transfer ".concat(r,".txt"),(0,l.default)(t=(0,l.default)(a="Transfer Name: ".concat(n,"\nTransfer ID: ")).call(a,r,"\nAuth Key: ")).call(t,i))}}))}))}get name(){return t("Create Transfer")}get defaultValue(){return{name:""}}get tips(){return t("Ownership of a volume can be transferred from one project to another. The transfer process of the volume needs to perform the transfer operation in the original owner's project, and complete the \"accept\" operation in the receiver's project.")}get formItems(){return[{name:"name",label:t("Transfer Name"),type:"input-name",required:!0,placeholder:t("Please input name")}]}init(){this.store=c.default}}a.CreateTransfer=p,(0,s.default)(p,"id","create-transfer"),(0,s.default)(p,"title",t("Create Transfer")),(0,s.default)(p,"policy","volume:create_transfer"),(0,s.default)(p,"allowed",(e=>o.default.resolve((0,f.isAvailable)(e)&&!e.encrypted)));var h=(0,u.inject)("rootStore")((0,u.observer)(p));a.default=h},3633:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=void 0;var l=i(r(63)),o=i(r(35)),s=r(1241),u=i(r(414));class d extends s.ConfirmAction{constructor(){super(...arguments),(0,o.default)(this,"policy","volume:delete_transfer"),(0,o.default)(this,"allowedCheckFunc",(e=>l.default.resolve("awaiting-transfer"===e.status))),(0,o.default)(this,"confirmContext",(e=>{var{name:a}=e;return t("Are you sure to cancel transfer volume { name }? ",{name:a})})),(0,o.default)(this,"onSubmit",(e=>{var{id:t}=e;return u.default.cancelTransfer({id:t})}))}get id(){return"cancel-transfer"}get title(){return t("Cancel Transfer")}get name(){return t("Cancel Transfer")}get buttonText(){return t("Cancel Transfer")}get actionName(){return t("Cancel Transfer")}}a.default=d},3634:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.StepCreate=void 0;var l=i(r(63)),o=i(r(35)),s=r(412),u=i(r(1304)),d=r(566);class c extends u.default{static path(e){return"/compute/instance/create?volume=".concat(e.id)}static allowed(e){return l.default.resolve((0,d.canCreateInstance)(e))}}a.StepCreate=c,(0,o.default)(c,"id","instance-create"),(0,o.default)(c,"title",t("Create Instance")),(0,o.default)(c,"policy","os_compute_api:servers:create:attach_volume");var f=(0,s.inject)("rootStore")((0,s.observer)(c));a.default=f},3635:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.Bootable=void 0;var l=i(r(63)),o=i(r(1252)),s=i(r(35)),u=r(412),d=r(1241),c=i(r(414));class f extends d.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"onSubmit",(e=>{var{bootable:t}=e,{id:a}=this.item;return c.default.changeBootable(a,{bootable:t})}))}static allowed(){return l.default.resolve(!0)}get name(){var{bootable:e}=(0,o.default)(this);return e?t("Bootable"):t("Unbootable")}get defaultValue(){var{item:e}=this.props;return{bootable:"true"===e.bootable}}get formItems(){return[{name:"bootable",label:t("Bootable"),checkedText:t("Bootable"),uncheckedText:t("Unbootable"),type:"switch",required:!0}]}}a.Bootable=f,(0,s.default)(f,"id","volume-bootable"),(0,s.default)(f,"title",t("Bootable")),(0,s.default)(f,"buttonText",t("Bootable")),(0,s.default)(f,"policy","volume:update");var p=(0,u.inject)("rootStore")((0,u.observer)(f));a.default=p},3636:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Allocate=void 0;var p=f(r(54)),h=f(r(63)),m=f(r(58)),g=f(r(49)),v=f(r(35)),y=f(r(0)),b=r(412),_=r(1241),S=r(346),x=r(233),w=f(r(340)),I=f(r(417)),C=r(576),k=r(1357),D=r(66),P=r(1265),T=r(163),A=r(36);function M(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=M(Object(r),!0)).call(a,(function(t){(0,v.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=M(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}class E extends _.ModalAction{constructor(){var e;super(...arguments),e=this,(0,v.default)(this,"handleNetworkChange",function(){var t=(0,g.default)((function*(t){var a=yield I.default.fetchList({network_id:t});e.setState({subnets:(0,p.default)(a).call(a,(e=>({allocation_pools:e.allocation_pools,ip_version:e.ip_version,value:e.id,label:e.name}))),selectedNetwork:t}),e.formRef.current.setFieldsValue({subnet_id:null})}));return function(e){return t.apply(this,arguments)}}()),(0,v.default)(this,"handleSubnetChange",(e=>{this.setState({selectedSubnet:e})})),(0,v.default)(this,"onSubmit",(e=>{var{subnet_id:t,batch_allocate:a,count:r,qos_policy_id:n,project_id:i}=e,l=(0,m.default)(e,["subnet_id","batch_allocate","count","qos_policy_id","project_id"]);if(t&&(l.subnet_id=t.value),n&&n.selectedRowKeys.length>0&&(l.qos_policy_id=n.selectedRowKeys[0]),a){l.floating_ip_address=null;for(var o=[],s=0;s<r;s++)o.push(this.store.create(l));return h.default.all(o)}return this.store.create(N(N({},l),{},{project_id:i?i.selectedRowKeys[0]:this.currentProjectId}))})),(0,v.default)(this,"onCountChange",(e=>{this.setState({count:e})})),(0,v.default)(this,"onProjectChange",(e=>{var{selectedRowKeys:t}=e;this.setState({projectId:t[0]},(()=>{this.getQuota()}))}))}get name(){return t("Allocate IP")}static get modalSize(){var{pathname:e}=window.location;return(0,D.qosEndpoint)()||(0,T.isAdminPage)(e)?"large":"small"}getModalSize(){return(0,D.qosEndpoint)()||this.isAdminPage?"large":"small"}get qosEndpoint(){return(0,D.qosEndpoint)()}init(){this.store=new S.FloatingIpStore,this.networkStore=new x.NetworkStore,this.qosPolicyStore=new C.QoSPolicyStore,this.projectStore=w.default,this.state=N(N({},this.state||{}),{},{selectedNetwork:null,selectedSubnet:null,networks:[],subnets:[],qosPolicy:null,count:2,quota:{},quotaLoading:!0,projectId:this.currentProjectId,maxCount:2}),this.getExternalNetworks(),this.isAdminPage&&this.fetchProjectList(),this.getQuota()}fetchProjectList(){var e=this;return(0,g.default)((function*(){yield e.projectStore.fetchProjectsWithDomain(),e.updateDefaultValue()}))()}getExternalNetworks(){var e=this;return(0,g.default)((function*(){var t=yield e.networkStore.pureFetchList({"router:external":!0});e.setState({networks:t})}))()}get messageHasItemName(){return!1}get projects(){return(0,A.toJS)(this.projectStore.list.data)||[]}static get disableSubmit(){var{neutronQuota:{floatingip:{left:e=0}={}}}=w.default;return 0===e}static get showQuota(){return!0}get showQuota(){return!0}getQuota(){var e=this;return(0,g.default)((function*(){var{projectId:t,count:a}=e.state;e.setState({quotaLoading:!0});var r=yield e.projectStore.fetchProjectNeutronQuota(t),{floatingip:n={}}=r||{},{left:i=0}=n;e.setState({quota:n,quotaLoading:!1,maxCount:i});var l=a;i<a?l=i:i>0&&0===a&&(l=1),l!==a&&(e.updateFormValue("count",l),e.setState({count:l}))}))()}get quotaInfo(){var{quota:e={},quotaLoading:a,batchAllocate:r=!1,count:n}=this.state;if(a)return[];var{left:i=0}=e,l=0;return 0!==i&&(l=r?n:1),[N(N({},e),{},{add:l,name:"floatingip",title:t("Floating IP")})]}get defaultValue(){var e={count:2};return this.isAdminPage&&(e.project_id={selectedRowKeys:[this.currentProjectId]}),e}get formItems(){var e,{networks:a,selectedNetwork:r,subnets:n,selectedSubnet:i,batchAllocate:l=!1,maxCount:o}=this.state,s=(0,p.default)(a).call(a,(e=>({label:e.name,value:e.id})));return[{name:"floating_network_id",label:t("Network"),type:"select",options:s,onChange:this.handleNetworkChange,required:!0},N({name:"project_id",label:t("Project"),type:"select-table",hidden:!this.isAdminPage,required:this.isAdminPage,isLoading:this.projectStore.list.isLoading,data:this.projects,onChange:this.onProjectChange},P.projectTableOptions),{name:"subnet_id",label:t("Owned Subnet"),type:"select",options:n,isWrappedValue:!0,onChange:e=>this.handleSubnetChange(e),extra:i&&y.default.createElement(y.default.Fragment,null,y.default.createElement("span",null,t("Allocation Pools")),(0,p.default)(e=i.allocation_pools).call(e,((e,t)=>y.default.createElement("div",{key:"pool.start.".concat(t)},e.start,"--",e.end)))),hidden:!r,required:!1},{name:"batch_allocate",label:t("Batch Allocate"),type:"check",onChange:e=>{this.setState({batchAllocate:e})}},{name:"count",label:t("Count"),type:"input-int",min:1,max:o,hidden:!l,required:!0,onChange:this.onCountChange},{name:"floating_ip_address",label:t("Floating IP Address"),hidden:!i||l,type:"ip-input",version:i&&(i.ip_version||4)},{name:"description",label:t("Description"),type:"textarea"},{name:"qos_policy_id",label:t("QoS Policy"),type:"tab-select-table",tabs:k.getQoSPolicyTabs.call(this),isMulti:!1,tip:t("Choosing a QoS policy can limit bandwidth and DSCP"),onChange:this.onQosChange,display:!!this.qosEndpoint}]}}a.Allocate=E,(0,v.default)(E,"id","allocate"),(0,v.default)(E,"title",t("Allocate IP")),(0,v.default)(E,"policy","create_floatingip"),(0,v.default)(E,"allowed",(()=>h.default.resolve(!0)));var R=(0,b.inject)("rootStore")((0,b.observer)(E));a.default=R},3637:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(162),p=r(21);c(a,"__esModule",{value:!0}),a.default=a.Associate=void 0;var h=p(r(63)),m=p(r(1252)),g=p(r(54)),v=p(r(49)),y=p(r(35)),b=p(r(1314)),_=p(r(570)),S=p(r(0)),x=r(412),w=r(1241),I=R(r(413)),C=R(r(575)),k=p(r(597)),D=r(1267),P=p(r(346)),T=r(582),A=r(1248),M=r(1258),N=r(1273);function E(e){if("function"!=typeof f)return null;var t=new f,a=new f;return(E=function(e){return e?a:t})(e)}function R(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=E(t);if(a&&a.has(e))return a.get(e);var r={},n=c&&o;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=n?o(e,i):null;l&&(l.get||l.set)?c(r,i,l):r[i]=e[i]}return r.default=e,a&&a.set(e,r),r}function j(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=j(Object(r),!0)).call(a,(function(t){(0,y.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=j(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}class L extends w.ModalAction{constructor(){var e;super(...arguments),e=this,(0,y.default)(this,"routersDisableFunc",(e=>{var{floating_network_id:t}=this.item;return!(e.hasExternalGateway&&e.external_gateway_info&&e.external_gateway_info.network_id===t&&0===e.external_gateway_info.external_fixed_ips.length)})),(0,y.default)(this,"portsDisableFunc",(e=>0===e.fixed_ips.length)),(0,y.default)(this,"onValuesChange",(e=>{if((0,_.default)(e,"resourceType")){var{resourceType:t}=e;this.setState({resourceType:t})}})),(0,y.default)(this,"handleInstanceSelect",function(){var t=(0,v.default)((function*(t){if(e.setState({instanceLoading:!0}),0===t.selectedRows.length)return e.setState({instanceFixedIPs:l,instanceLoading:!1}),h.default.resolve().then((()=>{e.formRef.current.setFieldsValue({port:null})}));var{id:a}=t.selectedRows[0],r=yield I.default.fetchInterfaceList({id:a}),n=yield(0,N.getInterfaceWithReason)(r),{canReachSubnetIdsWithRouterId:i}=e.state,l=(0,M.getPortsAndReasons)(n,i,!0);return e.setState({instanceFixedIPs:l,instanceLoading:!1}),h.default.resolve().then((()=>{e.formRef.current.setFieldsValue({port:null})}))}));return function(e){return t.apply(this,arguments)}}()),(0,y.default)(this,"handlePortSelect",function(){var t=(0,v.default)((function*(t){e.setState({fixedIpLoading:!0});var{canReachSubnetIdsWithRouterId:a}=e.state,r=yield(0,N.getInterfaceWithReason)(t.selectedRows),n=(0,M.getPortsAndReasons)(r,a,!0);return e.setState({portFixedIPs:n,fixedIpLoading:!1}),h.default.resolve().then((()=>{e.formRef.current.setFieldsValue({fixed_ip_address:null})}))}));return function(e){return t.apply(this,arguments)}}()),(0,y.default)(this,"onSubmit",(e=>{var{resourceType:t}=e,{id:a}=this.item,r={};if(r.id=a,"instance"===t){var{port:{selectedRows:n=[]}={}}=e;r.port_id=n[0].port_id,r.fixed_ip_address=n[0].fixed_ip_address}else if("port"===t){var{virtual_adapter:{selectedRows:i=[]}={},fixed_ip_address:{selectedRows:l=[]}={}}=e;r.port_id=i[0].id,r.fixed_ip_address=l[0].fixed_ip_address}else if("router"===t){var{router:o}=e,s=o.selectedRows[0];return C.default.associateFip({id:s.id,fip:this.item,router:s})}return P.default.associateFip(r)}))}get name(){return t("Associate Floating IP")}init(){this.store=new I.ServerStore,this.routersStore=new C.RouterStore,this.portStore=new T.PortStore,D.getCanReachSubnetIdsWithRouterIdInComponent.call(this,(e=>{var{item:t}=this;return e.external_gateway_info&&e.external_gateway_info.network_id===t.floating_network_id})),this.state={instanceFixedIPs:[],portFixedIPs:[],canReachSubnetIdsWithRouterId:[],routerIdWithExternalNetworkInfo:[]},this.getPorts()}get instanceName(){return this.item.floating_ip_address||(0,m.default)(this).name}static get modalSize(){return"large"}getModalSize(){return"large"}get instances(){return this.store.list.data||[]}get resourceTypeMap(){return[{value:"instance",label:t("Instance")},{value:"port",label:t("Virtual Adapter")}]}get defaultValue(){var{floating_ip_address:e}=this.item;return{floatingIp:e,resourceType:"instance"}}get portDeviceOwner(){return[""]}getPorts(){M.getPortsForPortFormItem.call(this,this.portDeviceOwner)}get formItems(){var{resourceType:e="instance",instanceFixedIPs:a,instanceLoading:r}=this.state,n=[{name:"floatingIp",label:t("Floating Ip"),type:"label",iconType:"floatingIp"},{name:"resourceType",label:t("Resource Type"),type:"radio",required:!0,options:this.resourceTypeMap}];switch(e){case"instance":n.push(F({name:"instance",label:t("Instance"),type:"select-table",required:!0,backendPageStore:this.store,extraParams:{noReminder:!0},disabledFunc:e=>0===e.fixed_addresses.length,onChange:this.handleInstanceSelect,isMulti:!1},A.instanceSelectTablePropsBackend),{name:"port",label:t("Instance IP"),type:"select-table",required:!0,data:a,isLoading:r,isMulti:!1,filterParams:[{label:t("Ip Address"),name:"name"}],columns:[{title:t("Ip Address"),dataIndex:"name"},{title:t("Mac Address"),dataIndex:"mac_address"},{title:t("Network"),dataIndex:"network_name"},{title:t("Reason"),dataIndex:"reason"}],disabledFunc:e=>!e.available});break;case"lb":n.push({name:"loadbalance",label:t("Load Balancer"),type:"select-table",required:!0,data:[],isMulti:!1,filterParams:[{label:t("Name"),name:"name"},{label:t("IP"),name:"private_ip"}],columns:[{title:t("Name"),dataIndex:"name"},{title:t("Image"),dataIndex:"image",render:e=>S.default.createElement(k.default,{type:e,title:e})},{title:t("Fixed IP"),dataIndex:"fixed_addresses",render:e=>(0,g.default)(e).call(e,(e=>S.default.createElement("span",{key:e},e,S.default.createElement("br",null))))},{title:t("Floating IP"),dataIndex:"floating_addresses",render:e=>e?(0,g.default)(e).call(e,(e=>S.default.createElement("span",{key:e},e,S.default.createElement("br",null)))):"-"},{title:t("Flavor"),dataIndex:"flavor"},{title:t("Created At"),dataIndex:"created",valueRender:"sinceTime"}]});break;case"router":n.push(F({name:"router",label:t("Router"),type:"select-table",required:!0,backendPageStore:this.routersStore,disabledFunc:this.routersDisableFunc,isMulti:!1},(0,D.getRouterSelectTablePropsBackend)(this)));break;case"port":n.push(...M.getPortFormItem.call(this,!1))}return n}}a.Associate=L,(0,y.default)(L,"id","associate"),(0,y.default)(L,"title",t("Associate")),(0,y.default)(L,"policy","update_floatingip"),(0,y.default)(L,"allowed",(e=>h.default.resolve(!(0,N.disableFIPAssociate)(e)&&(0,b.default)(e.fixed_ip_address)&&"DOWN"===e.status&&(0,b.default)(e.port_details))));var O=(0,x.inject)("rootStore")((0,x.observer)(L));a.default=O},3638:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=void 0;var l=i(r(63)),o=i(r(28)),s=i(r(29)),u=i(r(58));r(583);var d=i(r(420)),c=i(r(35)),f=i(r(1314)),p=i(r(92)),h=i(r(0)),m=r(1241),g=i(r(346));r(161);class v extends m.ConfirmAction{constructor(){super(...arguments),(0,c.default)(this,"policy","delete_floatingip"),(0,c.default)(this,"getItemName",(e=>e.floating_ip_address)),(0,c.default)(this,"confirmContext",(e=>{var a=null;if(this.needForceRelease(e)&&(a=h.default.createElement("div",null,h.default.createElement(d.default,{style:{marginTop:"14px"},onChange:t=>{this.onChangeType(t.target.checked,e)}},t("Force release")))),!this.messageHasItemName)return h.default.createElement("div",null,h.default.createElement("p",null," ",t("Are you sure to {action}?",{action:this.actionNameDisplay||this.title})),a);var r=this.getName(e);return h.default.createElement("div",null,h.default.createElement("p",null," ",this.unescape(t("Are you sure to {action} (instance: {name})?",{action:this.actionNameDisplay||this.title,name:r}))),a)})),(0,c.default)(this,"onSubmit",(e=>{var{forceRelease:a}=e,r=(0,u.default)(e,["forceRelease"]);if(this.hasCheckBox&&!a){var n=t("Floating ip has already been associate, Please check Force release");return l.default.reject(n)}return g.default.delete(r)}))}get id(){return"delete"}get title(){return t("Release")}get isDanger(){return!0}get buttonText(){return t("Release")}get actionName(){return t("Release")}onChangeType(e,t){(0,p.default)(t)?(0,o.default)(t).call(t,(t=>{t.forceRelease=e})):t.forceRelease=e}needForceRelease(e){var t=!1;(0,p.default)(e)?((0,o.default)(e).call(e,(e=>{e.forceRelease=!1})),(0,s.default)(e).call(e,(e=>!((0,f.default)(e.fixed_ip_address)&&"DOWN"===e.status&&(0,f.default)(e.port_details))))[0]&&(t=!0)):(e.forceRelease=!1,t=!((0,f.default)(e.fixed_ip_address)&&"DOWN"===e.status&&(0,f.default)(e.port_details)));return this.hasCheckBox=t,t}}a.default=v},3639:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=void 0;var l=i(r(35)),o=i(r(1314)),s=r(1241),u=i(r(346));class d extends s.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","update_floatingip"),(0,l.default)(this,"allowedCheckFunc",(e=>!(0,o.default)(e.fixed_ip_address)&&"DOWN"!==e.status)),(0,l.default)(this,"getItemName",(e=>e.floating_ip_address)),(0,l.default)(this,"onSubmit",(e=>u.default.disassociateFip(e)))}get id(){return"disassociate"}get title(){return t("Disassociate")}get buttonText(){return t("Disassociate")}get actionName(){return t("Disassociate")}}a.default=d},3640:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var p=f(r(63)),h=f(r(35)),m=r(412),g=r(1241),v=f(r(346)),y=r(1357),b=r(576),_=r(66);function S(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}class x extends g.ModalAction{constructor(){super(...arguments),(0,h.default)(this,"onSubmit",(e=>{var{description:t,qos_policy_id:a}=e,r={description:t};return this.qosEndpoint&&(r.qos_policy_id=a&&a.selectedRowKeys.length?a.selectedRowKeys[0]:null),v.default.edit({id:this.item.id},r)}))}static get modalSize(){return(0,_.qosEndpoint)()?"large":"small"}getModalSize(){return(0,_.qosEndpoint)()?"large":"small"}get qosEndpoint(){return(0,_.qosEndpoint)()}init(){this.qosPolicyStore=new b.QoSPolicyStore}get defaultValue(){var{item:e}=this.props;return function(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=S(Object(r),!0)).call(a,(function(t){(0,h.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=S(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}({description:this.item.description},this.qosEndpoint?{qos_policy_id:{selectedRowKeys:e.qos_policy_id?[e.qos_policy_id]:[],selectedRows:e.qos_policy_id?[{id:e.qos_policy_id,name:e.qos_policy_id}]:[]}}:{})}get instanceName(){return this.item.floating_ip_address}get formItems(){return[{name:"description",label:t("Description"),type:"textarea"},{name:"qos_policy_id",label:t("QoS Policy"),type:"tab-select-table",tabs:y.getQoSPolicyTabs.call(this),isMulti:!1,tip:t("Choosing a QoS policy can limit bandwidth and DSCP"),display:!!this.qosEndpoint}]}}a.Edit=x,(0,h.default)(x,"id","edit-floating-ip"),(0,h.default)(x,"policy","update_floatingip"),(0,h.default)(x,"allowed",(()=>p.default.resolve(!0)));var w=(0,m.inject)("rootStore")((0,m.observer)(x));a.default=w},3641:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.CreateAction=void 0;var p=f(r(54)),h=f(r(63));r(231);var m=f(r(341)),g=f(r(1378)),v=f(r(58)),y=f(r(49)),b=f(r(35)),_=f(r(0)),S=r(412),x=r(1241),w=(r(564),r(161),r(233)),I=r(419),C=r(576),k=f(r(572)),D=f(r(340)),P=r(417),T=r(1357),A=r(66);function M(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=M(Object(r),!0)).call(a,(function(t){(0,b.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=M(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}class E extends x.ModalAction{constructor(){var e;super(...arguments),e=this,(0,b.default)(this,"fetchSubnetDetails",function(){var t=(0,y.default)((function*(t){var a=yield e.subnetStore.fetchList({network_id:t});e.setState({subnetDetails:a||[]})}));return function(e){return t.apply(this,arguments)}}()),(0,b.default)(this,"handleOwnedNetworkChange",(e=>{var t=e.selectedRowKeys[0];this.setState({network_id:t}),this.formRef.current.setFieldsValue({fixed_ips:void 0}),this.getSubnets(t)})),(0,b.default)(this,"onSubmit",(e=>{var{mac_address:{type:t,mac:a},security_groups:r,enableQosPolicy:n,qos_policy_id:i,more:l,network_id:o,fixed_ips:s,bindingProfile:u}=e,d=(0,v.default)(e,["mac_address","security_groups","enableQosPolicy","qos_policy_id","more","network_id","fixed_ips","bindingProfile"]),c=N(N({},s&&s.length>0?{fixed_ips:(0,p.default)(s).call(s,(e=>{var t={subnet_id:e.subnet};return e.ip_address&&"manual"===e.ip_address.type&&(t.ip_address=e.ip_address.ip),t}))}:{}),{},{network_id:o.selectedRowKeys[0]},d);return t&&"auto"!==t&&(c.mac_address=a),n&&i&&(c.qos_policy_id=0===i.selectedRowKeys.length?null:i.selectedRowKeys[0]),r&&(c.security_groups=r.selectedRowKeys||void 0),c.project_id=this.currentProjectId,u&&(c["binding:profile"]=JSON.parse(u)),k.default.create(c)}))}get qosEndpoint(){return(0,A.qosEndpoint)()}init(){this.state.quota={},this.state.quotaLoading=!0,this.projectStore=D.default,this.networkStore=new w.NetworkStore,this.securityGroupStore=new I.SecurityGroupStore,this.qosPolicyStore=new C.QoSPolicyStore,this.subnetStore=new P.SubnetStore,this.getQuota()}getSubnets(e){var t=this;return(0,y.default)((function*(){yield t.networkStore.fetchDetail({id:e}),yield t.fetchSubnetDetails(e)}))()}get name(){return t("Create Virtual Adapter")}static get modalSize(){return"large"}getModalSize(){return"large"}get tips(){return t("Virtual adapter mainly used for binding instance and other operations, occupying the quota of the port.")}static get disableSubmit(){var{neutronQuota:{port:{used:e=0,limit:t=0}={}}}=D.default;return-1!==t&&e>=t}static get showQuota(){return!0}get showQuota(){return!0}getQuota(){var e=this;return(0,y.default)((function*(){e.setState({quotaLoading:!0});var t=yield e.projectStore.fetchProjectNeutronQuota(),{port:a={}}=t||{};e.setState({quota:a,quotaLoading:!1})}))()}get quotaInfo(){var{quota:e={},quotaLoading:a}=this.state;if(a)return[];var{used:r=0,limit:n=0}=e,i=-1!==n&&r>=n?0:1;return[N(N({},e),{},{add:i,name:"port",title:t("Ports")})]}get defaultValue(){return{more:!1,mac_address:{type:"auto"},qos_policy:"disable",port_security_enabled:!0,enableQosPolicy:!1}}get securityGroups(){var e;return(0,p.default)(e=this.securityGroupStore.list.data||[]).call(e,(e=>N(N({},e),{},{key:e.id})))}get formItems(){var e,{more:a,network_id:r,subnetDetails:n=[],port_security_enabled:i=!0,enableQosPolicy:l=!1}=this.state,o=(0,p.default)(e="normal,macvtap,direct,baremetal,direct-physical,virtio-forwarder,smart-nic".split(",")).call(e,(e=>({label:e,value:e})));return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea",required:!1},{name:"network_id",label:t("Owned Network"),type:"network-select-table",onChange:this.handleOwnedNetworkChange,required:!0},{name:"fixed_ips",label:t("Owned Subnet"),type:"ip-distributor",subnets:n,hidden:!r},{name:"ipv6",label:"IPv6",type:"label",style:{marginBottom:24},content:_.default.createElement("span",null,t("The selected VPC/subnet does not have IPv6 enabled.")," ",_.default.createElement(m.default,{type:"link"},t("To open")," ",_.default.createElement(g.default,null))," "),hidden:!0},{name:"mac_address",label:t("Mac Address"),wrapperCol:{span:16},required:!0,type:"mac-address"},{name:"port_security_enabled",label:t("Port Security"),type:"switch",tip:t("Disabling port security will turn off the security group policy protection and anti-spoofing protection on the port. General applicable scenarios: NFV or operation and maintenance Debug."),onChange:e=>{this.setState({port_security_enabled:e})}},{name:"security_groups",label:t("Security Group"),type:"select-table",tips:t("The security group is similar to the firewall function for setting up network access control, or you can go to the console and create a new security group. (Note: The security group you selected will work on all virtual LANs on the instances.)"),data:this.securityGroups,isLoading:this.securityGroupStore.list.isLoading,extraParams:{project_id:this.currentProjectId},backendPageStore:this.securityGroupStore,isMulti:!0,hidden:!i,required:i,filterParams:[{label:t("Name"),name:"name"}],columns:[{title:t("Name"),dataIndex:"name"},{title:t("Description"),dataIndex:"description"},{title:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime"}]},{name:"binding:vnic_type",label:t("Port Type"),type:"select",options:o,hidden:!a},{name:"enableQosPolicy",label:t("Enable QoS Policy"),type:"switch",onChange:e=>{this.setState({enableQosPolicy:e})},hidden:!a,display:!!this.qosEndpoint},{name:"qos_policy_id",label:t("QoS Policy"),type:"tab-select-table",tabs:T.getQoSPolicyTabs.call(this),isMulti:!1,required:l,tip:t("Choosing a QoS policy can limit bandwidth and DSCP"),hidden:!(a&&l),display:!!this.qosEndpoint},{name:"bindingProfile",label:t("Binding Profile"),type:"aceEditor",hidden:!a,mode:"json",wrapEnabled:!0,tabSize:2,width:"100%",height:"200px",setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0},validator:(e,a)=>{if(void 0!==a&&""!==a)try{return JSON.parse(a),h.default.resolve(!0)}catch(e){return h.default.reject(new Error(t("Illegal JSON scheme")))}return h.default.resolve(!0)}},{name:"more",label:t("Advanced Options"),type:"more"}]}}a.CreateAction=E,(0,b.default)(E,"id","create-virtual-adapter"),(0,b.default)(E,"title",t("Create Virtual Adapter")),(0,b.default)(E,"policy","create_port"),(0,b.default)(E,"allowed",(()=>h.default.resolve(!0)));var R=(0,S.inject)("rootStore")((0,S.observer)(E));a.default=R},3642:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=void 0;var l=i(r(35)),o=r(1241),s=i(r(572));class u extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","delete_port"),(0,l.default)(this,"allowedCheckFunc",(e=>!e||this.isOwnerOrAdmin(e))),(0,l.default)(this,"onSubmit",(e=>s.default.delete(e)))}get id(){return"delete"}get title(){return t("Delete Virtual Adapter")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete virtual adapter")}isOwnerOrAdmin(){return!0}}a.default=u},3643:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var p,h=f(r(58)),m=f(r(35)),g=f(r(54)),v=f(r(63)),y=r(412),b=r(1241),_=f(r(572));function S(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=S(Object(r),!0)).call(a,(function(t){(0,m.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=S(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}var w=(0,g.default)(p="normal,macvtap,direct,baremetal,direct-physical,virtio-forwarder,smart-nic".split(",")).call(p,(e=>({label:e,value:e})));class I extends b.ModalAction{constructor(){super(...arguments),(0,m.default)(this,"onSubmit",(e=>{var{item:{id:t}={}}=this.props,{mac_address:{type:a,mac:r},more:n}=e,i=x({},(0,h.default)(e,["mac_address","more"]));return a&&"auto"!==a&&(i.mac_address=r),_.default.update({id:t},i)}))}get defaultValue(){var{item:e}=this.props;return x(x({},e),{},{mac_address:{type:"manual",mac:e.mac_address},"binding:vnic_type":e.binding_vnic_type})}get formItems(){var{more:e}=this.state;return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"mac_address",label:t("Mac Address"),wrapperCol:{span:16},type:"mac-address",required:!0},{name:"binding:vnic_type",label:t("Port Type"),type:"select",required:!0,options:w,hidden:!e},{name:"description",label:t("Description"),type:"textarea"},{name:"more",label:t("Advanced Options"),type:"more"}]}}a.Edit=I,(0,m.default)(I,"id","edit-virtual-adapter"),(0,m.default)(I,"title",t("Edit")),(0,m.default)(I,"buttonText",t("Edit")),(0,m.default)(I,"policy","update_port"),(0,m.default)(I,"allowed",(()=>v.default.resolve(!0)));var C=(0,y.inject)("rootStore")((0,y.observer)(I));a.default=C},3644:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(162),p=r(21);c(a,"__esModule",{value:!0}),a.default=a.Attach=void 0;var h=p(r(164)),m=p(r(63)),g=p(r(35)),v=r(412),y=r(1241),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=S(t);if(a&&a.has(e))return a.get(e);var r={},n=c&&o;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=n?o(e,i):null;l&&(l.get||l.set)?c(r,i,l):r[i]=e[i]}r.default=e,a&&a.set(e,r);return r}(r(413)),_=r(1248);function S(e){if("function"!=typeof f)return null;var t=new f,a=new f;return(S=function(e){return e?a:t})(e)}function x(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=x(Object(r),!0)).call(a,(function(t){(0,g.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=x(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}class I extends y.ModalAction{constructor(){super(...arguments),(0,g.default)(this,"onSubmit",(e=>{var{id:t}=this.props.item,{instance:{selectedRowKeys:a=[]}={}}=e;return b.default.addInterface({id:a[0],body:{interfaceAttachment:{port_id:t}}})}))}init(){this.store=new b.ServerStore}get name(){return t("Attach Instance")}static get modalSize(){return"large"}getModalSize(){return"large"}get defaultValue(){var{name:e,id:t}=this.item;return{virtual_adapter:e,virtual_adapter_id:t}}get formItems(){return[{name:"virtual_adapter",label:t("Virtual Adapter"),type:"label"},{name:"virtual_adapter_id",label:t("Virtual Adapter ID"),type:"label",hidden:!0},w({name:"instance",label:t("Instance"),type:"select-table",backendPageStore:this.store,extraParams:{noReminder:!0},disabledFunc:e=>e.locked||!(0,h.default)(_.allowAttachInterfaceStatus).call(_.allowAttachInterfaceStatus,e.vm_state),required:!0,isMulti:!1},_.instanceSelectTablePropsBackend)]}}a.Attach=I,(0,g.default)(I,"id","attach_instance"),(0,g.default)(I,"title",t("Attach Instance")),(0,g.default)(I,"policy","os_compute_api:os-attach-interfaces:create"),(0,g.default)(I,"allowed",(e=>m.default.resolve(""===e.device_id)));var C=(0,v.inject)("rootStore")((0,v.observer)(I));a.default=C},3645:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=void 0;var l=i(r(49)),o=i(r(35)),s=r(1241),u=i(r(413));class d extends s.ConfirmAction{constructor(){var e;super(...arguments),e=this,(0,o.default)(this,"policy","os_compute_api:os-attach-interfaces:delete"),(0,o.default)(this,"allowedCheckFunc",(e=>!!e.device_id&&"compute:nova"===e.device_owner)),(0,o.default)(this,"onSubmit",(0,l.default)((function*(){var{id:t,device_id:a}=e.item;return u.default.detachInterface({id:a,ports:[t]})})))}get id(){return"detach_instance"}get title(){return t("Detach Instance")}get buttonText(){return t("Detach")}get actionName(){return t("detach instance")}get isAsyncAction(){return!0}}a.default=d},3646:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.ModifyQoS=void 0;var l=i(r(63)),o=i(r(49)),s=i(r(35)),u=i(r(0)),d=r(412),c=r(1241),f=r(576),p=i(r(572)),h=r(1357),m=r(66);class g extends c.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"onSubmit",(e=>{var{id:t}=this.item,{enableQosPolicy:a,qos_policy_id:r}=e,n={qos_policy_id:null};return a&&r&&(n.qos_policy_id=0===r.selectedRowKeys.length?null:r.selectedRowKeys[0]),p.default.update({id:t},n)}))}get name(){return t("Modify QoS")}get labelCol(){return{xs:{span:6},sm:{span:4}}}static get modalSize(){return"large"}getModalSize(){return"large"}init(){this.qosPolicyStore=new f.QoSPolicyStore,this.state={qosPolicy:{name:"",id:""}},this.item.qos_policy_id&&this.getQosPolicyItem()}getQosPolicyItem(){var e=this;return(0,o.default)((function*(){var t=yield e.qosPolicyStore.fetchDetail({id:e.item.qos_policy_id});e.setState({qosPolicy:t})}))()}get instanceName(){return this.item.name||this.item.id}get defaultValue(){var e=null!==this.item.qos_policy_id;return{enableQosPolicy:e,qos_policy_id:{selectedRowKeys:e?[this.item.qos_policy_id]:[],selectedRows:e?[{id:this.item.qos_policy_id,name:this.item.qos_policy_id}]:[]}}}get formItems(){var{enableQosPolicy:e=null!==this.item.qos_policy_id,qosPolicy:a}=this.state;return[{name:"enableQosPolicy",label:t("Enable QoS Policy"),type:"switch",onChange:e=>{this.setState({enableQosPolicy:e})}},{name:"name",label:t("Current QoS policy name"),type:"label",content:u.default.createElement("div",null,a.name||t("Not yet bound")),hidden:!e},{name:"qos_policy_id",label:t("QoS Policy"),type:"tab-select-table",tabs:h.getQoSPolicyTabs.call(this,{disabledFunc:e=>e.id===this.item.qos_policy_id}),isMulti:!1,required:!0,tip:t("Choosing a QoS policy can limit bandwidth and DSCP"),hidden:!e}]}}a.ModifyQoS=g,(0,s.default)(g,"id","modify_qos"),(0,s.default)(g,"title",t("Modify QoS")),(0,s.default)(g,"policy","update_port"),(0,s.default)(g,"allowed",(()=>l.default.resolve(!!(0,m.qosEndpoint)())));var v=(0,d.inject)("rootStore")((0,d.observer)(g));a.default=v},3647:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.AssociateFip=void 0;var l=i(r(63)),o=i(r(49)),s=i(r(35)),u=r(412),d=i(r(346)),c=r(1241),f=r(1248),p=r(1258),h=r(1267),m=r(1273);class g extends c.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"handleFixedIPChange",(e=>m.handleFixedIPChange.call(this,e))),(0,s.default)(this,"onSubmit",(e=>{var{fixed_ip:t,fip:a}=e,r=t.selectedRows[0],n=a.selectedRowKeys[0];return d.default.associateFip({id:n,port_id:this.item.id,fixed_ip_address:r.fixed_ip_address})}))}init(){this.getInterfaces(),h.getCanReachSubnetIdsWithRouterIdInComponent.call(this),this.state={interfaces:[],fixed_ip:null,canAssociateFloatingIPs:[],canReachSubnetIdsWithRouterId:[],portLoading:!0}}getInterfaces(){var e=this;return(0,o.default)((function*(){var t=[e.item],a=yield(0,m.getInterfaceWithReason)(t);e.setState({interfaces:a,portLoading:!1})}))()}static get modalSize(){return"large"}getModalSize(){return"large"}get name(){return t("Associate Floating IP")}get ports(){var{interfaces:e,canReachSubnetIdsWithRouterId:t}=this.state;return p.getPortsAndReasons.call(this,e,t)}get defaultValue(){var{name:e}=this.item;return{virtualAdapter:e}}getFIPFormItemExtra(){return(0,m.getFIPFormItemExtra)()}disableFIPAssociate(e){return(0,m.disableFIPAssociate)(e)}get formItems(){var e=(0,m.getFixedIPFormItemForAssociate)(t("Fixed IP"),this),a=(0,m.getFIPFormItemForAssociate)(this);return[{name:"virtualAdapter",label:t("Virtual Adapter"),type:"label",iconType:"instance"},e,a]}}a.AssociateFip=g,(0,s.default)(g,"id","AssociateFip"),(0,s.default)(g,"title",t("Associate Floating IP")),(0,s.default)(g,"policy","update_floatingip"),(0,s.default)(g,"allowed",((e,t)=>{var{isAdminPage:a=!1}=t;return l.default.resolve(!a&&(0,f.isNotError)(e)&&e.associatedDetail&&e.associatedDetail.length<e.ipv4.length)}));var v=(0,u.inject)("rootStore")((0,u.observer)(g));a.default=v},3648:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.DisAssociateFip=void 0;var l=i(r(63)),o=i(r(35)),s=r(412),u=i(r(346)),d=r(1241),c=r(1248);class f extends d.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"onSubmit",(e=>{var{floating_ip:t}=e,{id:a}=t.selectedRows[0];return u.default.disassociateFip({id:a})}))}static get modalSize(){return"large"}getModalSize(){return"large"}get name(){return t("Disassociate Floating IP")}get defaultValue(){var{name:e}=this.item;return{virtualAdapter:e}}get formItems(){var{associatedDetail:e}=this.item;return[{name:"virtualAdapter",label:t("Virtual Adapter"),type:"label",iconType:"instance"},{name:"floating_ip",label:t("Floating IP"),type:"select-table",required:!0,data:e,isMulti:!1,tagKey:"floating_ip_address",filterParams:[{label:t("Fixed IP Address"),name:"fixed_ip_address"}],columns:[{title:t("Fixed IP Address"),dataIndex:"fixed_ip_address"},{title:t("Floating IP Address"),dataIndex:"floating_ip_address"}]}]}}a.DisAssociateFip=f,(0,o.default)(f,"id","DisAssociateFip"),(0,o.default)(f,"title",t("Disassociate Floating IP")),(0,o.default)(f,"policy","update_floatingip"),(0,o.default)(f,"allowed",((e,t)=>{var{isAdminPage:a=!1}=t;return l.default.resolve(!a&&(0,c.isNotError)(e)&&e.associatedDetail&&e.associatedDetail.length)}));var p=(0,s.inject)("rootStore")((0,s.observer)(f));a.default=p},3653:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(91)),l=n(a(54)),o=n(a(29));a(589);var s=n(a(590)),u=n(a(606));a(1317);var d=n(a(1318));a(1246);var c=n(a(1247));a(1244);var f=n(a(1245));a(344);var p=n(a(202));a(594);var h=n(a(595)),m=n(a(351)),g=n(a(119)),v=n(a(570)),y=n(a(0)),b=(a(161),a(564),n(a(16))),_=n(a(4)),S=a(163),x=a(418),w=n(a(650)),I=n(a(3654)),{Paragraph:C}=h.default,k=(e,t)=>{var{content:a,dataIndex:r,render:n,valueRender:l,copyable:o,valueMap:s,unit:u}=t;if((0,v.default)(t,"content"))return o?y.default.createElement(C,{copyable:o},a):a;var d=(0,g.default)(e,r);if(n)d=n(d,e);else if(l){var c=S.renderFilterMap[l];d=c&&c(d)}else s?d=(0,x.getValueMapRender)(t)(d):u&&(d=(0,x.getUnitRender)(t)(d));return(0,m.default)(d)||(d=d||"-"),((e,t,a,r)=>{var n,l,o=(0,g.default)(a,t);return(0,i.default)(n=t.toLowerCase()).call(n,"status")>=0||(0,i.default)(l=t.toLowerCase()).call(l,"state")>=0?y.default.createElement(w.default,{status:o,text:e}):"-"!==e&&(/_?id/g.test(t.toLowerCase())&&!1!==r||r)?y.default.createElement(C,{copyable:r},e):e||"-"})(d,r,e,o)},D=(e,t,a,r,n)=>{var i;return(0,l.default)(i=(0,o.default)(e).call(e,(e=>!e.hidden))).call(i,((e,i)=>{var l=(0,v.default)(e,"labelCol")?e.labelCol:r,o=(0,v.default)(e,"contentCol")?e.contentCol:n;return y.default.createElement(d.default,{loading:a,key:"detail-row-".concat(i)},y.default.createElement(c.default,{className:(0,_.default)(I.default["card-item"],"sl-card-item")},y.default.createElement(f.default,{span:l},(e=>{var{label:t,tooltip:a=""}=e;return a?y.default.createElement(p.default,{title:a},y.default.createElement("span",null,t)):t})(e)),y.default.createElement(f.default,{span:o},k(t,e))))}))},P=e=>{var t,{title:a,titleHelp:r,loading:n,options:i,data:l,labelCol:o,contentCol:f,className:p,button:h}=e;return r&&(t=y.default.createElement(s.default,{arrowPointAtCenter:"true",placement:"rightTop",content:r,getPopupContainer:e=>e.parentNode},y.default.createElement(u.default,{className:I.default["title-help"]}))),y.default.createElement("div",{className:(0,_.default)(I.default.card,p)},y.default.createElement("div",{className:I.default["card-content"]},y.default.createElement(d.default,{loading:n},y.default.createElement(c.default,{className:(0,_.default)(I.default["card-item"],"sl-card-item")},y.default.createElement("h3",null," ",a," "),t,h)),D(i,l,n,o,f)))},T=b.default.shape({label:b.default.oneOfType([b.default.string,b.default.node]),content:b.default.any,tooltip:b.default.oneOfType([b.default.string,b.default.node]),dataIndex:b.default.string,valueRender:b.default.string,labelCol:b.default.number,contentCol:b.default.number});P.defaultProps={labelCol:8,contentCol:16,options:[],title:"",titleHelp:"",loading:!1,data:{}},P.propTypes={title:b.default.oneOfType([b.default.string,b.default.node]),titleHelp:b.default.any,options:b.default.arrayOf(T),loading:b.default.bool,data:b.default.object,labelCol:b.default.number,contentCol:b.default.number};var A=P;t.default=A},3654:function(e,t,a){var r=a(3655);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(65)(r,n);r.locals&&(e.exports=r.locals)},3655:function(e,t,a){(t=e.exports=a(64)(!1)).push([e.i,"/* init */\n/* specific color */\n/*  border */\n/*  background */\n/*  shadow */\n/*  font */\n/* 中号字体 */\n/*  animation */\n/*  size */\n/*  sider */\n/* login */\n.index__card--Na2sx {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  margin-bottom: 16px;\n  background-color: #fff;\n  border-radius: 4px;\n  -webkit-box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.05);\n          box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.05);\n}\n.index__card--Na2sx .index__card-content--26JCN {\n  padding: 16px;\n}\n.index__card--Na2sx .index__card-content--26JCN .index__card-item--1w9VY {\n  margin-bottom: 8px;\n}\n.index__card--Na2sx .index__card-content--26JCN .index__card-item--1w9VY h3 {\n  margin-bottom: 0;\n}\n.index__card--Na2sx .index__card-content--26JCN .index__card-item--1w9VY .index__title-help--8XKV- {\n  margin-left: 8px;\n  line-height: 26px;\n}\n.index__card--Na2sx .index__card-content--26JCN .index__card-item--1w9VY div {\n  word-break: break-all;\n}\n.index__card--Na2sx .index__card-content--26JCN :last-child {\n  margin-bottom: 0;\n}\n.index__card--Na2sx .index__card-content--26JCN .ant-typography {\n  word-break: break-all;\n}\n",""]),t.locals={primaryColor:"#0068ff",successColor:"#57e39b",warnColor:"#fedf40",warnDarkColor:"#fa8c16",warnLightColor:"#f6b23d",errorColor:"#eb354d",dangerColor:"#c4233e",moneyColor:"#f50",infoColor:"rgba(0, 104, 255, 0.65)",headerHeight:"40px",productsColumnWidth:"230px",card:"index__card--Na2sx","card-content":"index__card-content--26JCN","card-item":"index__card-item--1w9VY","title-help":"index__title-help--8XKV-"}},3656:function(e,t,a){var r=a(3657);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(65)(r,n);r.locals&&(e.exports=r.locals)},3657:function(e,t,a){(t=e.exports=a(64)(!1)).push([e.i,"/* init */\n/* specific color */\n/*  border */\n/*  background */\n/*  shadow */\n/*  font */\n/* 中号字体 */\n/*  animation */\n/*  size */\n/*  sider */\n/* login */\n.index__main--TubAm {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  padding: 0 16px;\n}\n.index__main--TubAm .index__left-side--pbUVD {\n  width: 380px;\n  padding-right: 16px;\n}\n.index__main--TubAm .index__right-side--3v5zG {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n}\n",""]),t.locals={primaryColor:"#0068ff",successColor:"#57e39b",warnColor:"#fedf40",warnDarkColor:"#fa8c16",warnLightColor:"#f6b23d",errorColor:"#eb354d",dangerColor:"#c4233e",moneyColor:"#f50",infoColor:"rgba(0, 104, 255, 0.65)",headerHeight:"40px",productsColumnWidth:"230px",main:"index__main--TubAm","left-side":"index__left-side--pbUVD","right-side":"index__right-side--3v5zG"}},3681:function(e,t,a){var r=a(3682);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(65)(r,n);r.locals&&(e.exports=r.locals)},3682:function(e,t,a){(t=e.exports=a(64)(!1)).push([e.i,"/* init */\n/* specific color */\n/*  border */\n/*  background */\n/*  shadow */\n/*  font */\n/* 中号字体 */\n/*  animation */\n/*  size */\n/*  sider */\n/* login */\n.index__wrapper--26YmP {\n  min-height: calc(100vh - 108px);\n}\n.index__wrapper--26YmP .ant-tabs-content {\n  height: 100vh;\n}\n.index__wrapper--26YmP .ant-tabs > .ant-tabs-nav {\n  background-color: #fff;\n}\n.index__wrapper--26YmP .ant-tabs-nav-wrap {\n  padding: 0 16px;\n}\n.index__wrapper--26YmP .list-container {\n  margin-top: 0;\n}\n",""]),t.locals={primaryColor:"#0068ff",successColor:"#57e39b",warnColor:"#fedf40",warnDarkColor:"#fa8c16",warnLightColor:"#f6b23d",errorColor:"#eb354d",dangerColor:"#c4233e",moneyColor:"#f50",infoColor:"rgba(0, 104, 255, 0.65)",headerHeight:"40px",productsColumnWidth:"230px",wrapper:"index__wrapper--26YmP"}},4075:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.detailConfigs=t.actionConfigs=void 0;var i=n(a(4076)),l=n(a(4077)),o={rowActions:{firstAction:l.default},batchActions:[l.default],primaryActions:[i.default]};t.actionConfigs=o;var s={rowActions:{firstAction:l.default},batchActions:[l.default],primaryActions:[]};t.detailConfigs=s},4076:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.Create=void 0;var l=i(r(54)),o=i(r(29)),s=i(r(32)),u=i(r(345)),d=i(r(63)),c=i(r(58)),f=i(r(35)),p=r(412),h=r(1241),m=i(r(1475)),g=i(r(112)),v=i(r(133)),y=r(36),b=i(r(1352));class _ extends h.ModalAction{constructor(){super(...arguments),(0,f.default)(this,"onSubmit",(e=>{var t,a;(e.expires_at&&(e.expires_at=e.expires_at.clone().endOf("day")),e.roles)&&(e.roles=(0,l.default)(t=(0,o.default)(a=(0,s.default)(e.roles)).call(a,(t=>e.roles[t]))).call(t,(e=>({id:e}))));return m.default.create(e).then((e=>{var t=e.application_credential,{links:a,roles:r,system:n,unrestricted:i,user_id:l,name:o}=t,s=(0,c.default)(t,["links","roles","system","unrestricted","user_id","name"]),d="".concat(o,".json"),f=new Blob([(0,u.default)(s,null,2)],{type:"text/plain;charset=utf-8"});b.default.saveAs(f,d)}))}))}static get modalSize(){return"middle"}getModalSize(){return"middle"}get name(){return t("Create Application Credentials")}static allowed(){return d.default.resolve(!0)}get roleOptions(){var e=(0,y.toJS)(v.default.roles);return(0,l.default)(e).call(e,(e=>({label:e.name,value:e.id})))}get formItems(){return[{name:"name",label:t("Name"),type:"input-name",required:!0},{name:"expires_at",label:t("Expires At"),type:"date-picker",showToday:!1,disabledDate:e=>e&&e<(0,g.default)().subtract(1,"days").endOf("d"),required:!1},{name:"roles",label:t("Roles"),type:"check-group",options:this.roleOptions,extra:t("If not provided, the roles assigned to the application credential will be the same as the roles in the current token."),span:12},{name:"unrestricted",label:t("Unrestricted"),type:"check",content:t("Unrestricted"),extra:t("By default, for security reasons, application credentials are forbidden from being used for creating or destructing additional application credentials or keystone trusts. If your application credential needs to be able to perform these actions, check unrestricted.")},{name:"description",label:t("Description"),type:"textarea",required:!1}]}}a.Create=_,(0,f.default)(_,"id","create-application_credentials"),(0,f.default)(_,"title",t("Create Application Credentials")),(0,f.default)(_,"policy","identity:create_application_credential");var S=(0,p.inject)("rootStore")((0,p.observer)(_));a.default=S},4077:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=void 0;var l=i(r(35)),o=r(1241),s=i(r(1475));class u extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","identity:delete_application_credential"),(0,l.default)(this,"onSubmit",(e=>{var{user_id:t,id:a}=e;return s.default.client.delete(t,a)}))}get id(){return"delete"}get title(){return t("Delete Application Credential")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete application credential")}}a.default=u}}]);