(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1114:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=void 0;var p=f(r(536)),h=f(r(82)),m=f(r(101)),g=f(r(35)),v=f(r(1252)),y=f(r(91)),b=f(r(33)),_=f(r(320)),S=f(r(195)),x=f(r(28)),w=f(r(62)),I=f(r(1150)),C=f(r(3336));r(3342);var k=f(r(1441));r(1144);var D=f(r(393));r(3347);var T=f(r(3350));r(535);var A=f(r(397));r(318);var P=f(r(317)),M=f(r(71)),E=f(r(385)),N=f(r(52)),R=f(r(37)),j=f(r(0)),F=r(327),L=f(r(4)),O=r(32),z=r(47),B=(r(167),f(r(1442))),V=r(135),q=f(r(1145)),U=r(527),Q=f(r(1123)),G=f(r(1215)),K=r(1296),H=r(517),W=f(r(3366));function Y(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}function Z(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=Y(Object(r),!0)).call(a,(function(t){(0,R.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=Y(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}class J extends j.default.Component{constructor(e){var a,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),a=this,(0,R.default)(this,"setRefreshDataTimerTransition",(()=>{this.stopRefreshAuto(),this.dataTimerTransition||(this.dataTimerTransition=(0,p.default)((()=>{this.handleRefresh(),this.dataTimerTransition=null}),1e3*this.dataDurationTransition))})),(0,R.default)(this,"setRefreshDataTimerAuto",(()=>{if(this.stopRefreshTransition(),this.ableAutoFresh){var{autoRefresh:e}=this.state;e&&!this.dataTimerAuto&&(this.dataTimerAuto=(0,p.default)((()=>{this.autoRefreshCount+=1,this.handleRefresh(),this.dataTimerAuto=null}),1e3*this.dataDurationAuto))}})),(0,R.default)(this,"onStopRefreshAuto",(()=>{this.setState({autoRefresh:!1}),this.stopRefreshAuto()})),(0,R.default)(this,"onClickAction",(()=>{this.inAction=!0,this.autoRefreshCount=0})),(0,R.default)(this,"onFinishAction",(()=>{this.inAction=!1,this.handleSelectRowKeys([]),this.handleRefresh(!0)})),(0,R.default)(this,"onCancelAction",(()=>{this.inAction=!1,this.getDataSource()})),(0,R.default)(this,"handleInputFocus",(e=>{this.inAction=e,e||this.setRefreshDataTimerAuto()})),(0,R.default)(this,"fetchListWithTry",function(){var e=(0,N.default)((function*(e){try{e&&(yield e())}catch(e){var{message:r="",data:n,status:i}=(e||{}).response||e||{};if(401===i){var l=t("The session has expired, please log in again.");q.default.errorWithDetail(null,l)}else if(500===i){var s,o=t("System is error, please try again later."),u=(0,h.default)(s="".concat(t("Get {name} error.",{name:a.name.toLowerCase()})," ")).call(s,o);q.default.errorWithDetail(null,u)}else{var d={message:n||r||e||"",status:i};q.default.errorWithDetail(d,t("Get {name} error.",{name:a.name.toLowerCase()}))}a.list.isLoading=!1,a.list.silent=!1}}));return function(t){return e.apply(this,arguments)}}()),(0,R.default)(this,"updateFetchParamsByPage",(e=>e)),(0,R.default)(this,"updateFetchParams",(e=>e)),(0,R.default)(this,"fetchDataByPage",function(){var e=(0,N.default)((function*(e){yield a.store.fetchListByPage(e),a.list.silent=!1}));return function(t){return e.apply(this,arguments)}}()),(0,R.default)(this,"fetchData",function(){var e=(0,N.default)((function*(e){yield a.store.fetchList(e),a.list.silent=!1}));return function(t){return e.apply(this,arguments)}}()),(0,R.default)(this,"fetchDownloadData",function(){var e=(0,N.default)((function*(e){return a.isFilterByBackend?yield a.downloadStore.fetchListByPage(a.updateFetchParamsByPage(e)):yield a.downloadStore.fetchList(a.updateFetchParams(e))}));return function(t){return e.apply(this,arguments)}}()),(0,R.default)(this,"getDownloadData",(0,N.default)((function*(){var e=(0,E.default)({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{filters:t}=a.state,r=Z(Z(Z(Z({},a.props.match.params),e),t),{},{sortKey:e.sortKey||a.isSortByBackend&&a.defaultSortKey||"",sortOrder:e.sortOrder||a.isSortByBackend&&a.defaultSortOrder||""});!a.isAdminPage&&a.fetchDataByCurrentProject?r.project_id=a.currentProjectId:a.isAdminPage&&a.fetchDataByAllProjects&&a.allProjectsKey&&(r[a.allProjectsKey]=!0);var n=yield a.fetchDownloadData(r);return n}))),(0,R.default)(this,"startRefreshAuto",(()=>{this.autoRefreshCount=0,this.setState({autoRefresh:!0}),this.handleRefresh()})),(0,R.default)(this,"stopRefreshAuto",(()=>{clearTimeout(this.dataTimerAuto),this.dataTimerAuto=null})),(0,R.default)(this,"stopRefreshTransition",(()=>{clearTimeout(this.dataTimerTransition),this.dataTimerTransition=null})),(0,R.default)(this,"getFilteredValue",(e=>this.list.filters[e])),(0,R.default)(this,"checkIsProjectFilter",(e=>e.name===this.projectFilterKey)),(0,R.default)(this,"getSearchFilters",(()=>{var e=this.searchFilters;return this.isAdminPage&&this.adminPageHasProjectFilter?(0,m.default)(e).call(e,(e=>this.checkIsProjectFilter(e)))?e:[...e,{label:t("Project ID"),name:this.projectFilterKey}]:e})),(0,R.default)(this,"filterDataByTime",(e=>{if(!this.filterTimeKey)return!0;var{timeFilter:{value:t=0,start:a,end:r}={}}=this.state;if(0===t)return!0;var n=(0,z.get)(e,this.filterTimeKey,0);return 1!==t?(0,U.checkTimeIn)(n,(new Date).getTime()-t,null):(0,U.checkTimeIn)(n,a,r)})),(0,R.default)(this,"checkFilterInclude",(e=>{var t,a=(0,m.default)(t=this.searchFilters).call(t,(t=>t.name===e));return(0,z.has)(a,"include")?a.include:!(0,z.has)(a,"options")})),(0,R.default)(this,"filterData",(e=>{var t;if(!this.filterDataByTime(e))return!1;var{filters:a}=this.state;if(1===(0,g.default)(a).length&&a.keywords){var r,{keywords:n}=a;return!!(0,m.default)(r=(0,v.default)(e)).call(r,(e=>((0,z.isString)(e)||(0,z.isArray)(e))&&(0,y.default)(e).call(e,n)>=0))}return!(0,m.default)(t=(0,g.default)(a)).call(t,(t=>{var r,n=(0,z.get)(e,t),i=a[t],{filterFunc:l}=(0,m.default)(r=this.getSearchFilters()).call(r,(e=>e.name===t));if(l)return!l(n,i);var s,o=this.checkFilterInclude(t);return(0,z.isString)(n)&&(0,z.isString)(i)?o?(0,y.default)(s=n.toLowerCase()).call(s,i.toLowerCase())<0:n.toLowerCase()!==i.toLowerCase():!(0,z.isEqual)(n,i)}))})),(0,R.default)(this,"getDataSource",(()=>{var e,{data:t,filters:a={}}=this.list,{timeFilter:r={}}=this.state,{id:n,tab:i}=a,l=(0,M.default)(a,["id","tab"]),s=[];this.isFilterByBackend?s=(0,O.toJS)(t):(s=(0,b.default)(e=(0,O.toJS)(t)||[]).call(e,(e=>this.filterData(e,(0,O.toJS)(l),(0,O.toJS)(r)))),this.updateList({total:s.length}));return(0,_.default)(s).call(s,(e=>this.itemInTransitionFunction(e)))?this.setRefreshDataTimerTransition():this.setRefreshDataTimerAuto(),this.updateHintsByData(s),this.setTableHeight(),s})),(0,R.default)(this,"getFilters",(()=>{var e,{filters:t}=this.list;return Z(Z({},(0,F.parse)((0,S.default)(e=this.location.search).call(e,1))),(0,O.toJS)(t))})),(0,R.default)(this,"handleMoreMenuClick",(e=>(t,a)=>{var r,n=(0,m.default)(r=this.enabledItemActions).call(r,(e=>e.key===a));n&&n.onClick&&n.onClick(e)})),(0,R.default)(this,"refreshDetailData",(()=>{var{refreshDetail:e}=this.props;e&&e()})),(0,R.default)(this,"handleRefresh",(e=>{var{inAction:t,inSelect:a}=this;if(!(t||a&&!e)&&(e||!(this.autoRefreshCount>=this.autoRefreshCountMax))){e&&(this.autoRefreshCount=0);var{page:r,limit:n,sortKey:i,sortOrder:l,filters:s}=this.list,o=Z(Z({page:r,limit:n,sortKey:i,sortOrder:l},(0,O.toJS)(s)),{},{silent:!e});this.handleFetch(o,!0),this.inDetailPage&&(e||this.forceRefreshTopDetailWhenListRefresh)&&this.shouldRefreshDetail&&this.refreshDetailData()}})),(0,R.default)(this,"updateList",(e=>{var t;this.list&&(this.list.update?this.list.update(e):(0,x.default)(t=(0,g.default)(e)).call(t,(t=>{this.list[t]=e[t]})))})),(0,R.default)(this,"handleFetch",((e,t)=>{if(!t||this.isFilterByBackend){var{sortKey:a,limit:r,page:n,current:i,sortOrder:l}=e;(0,M.default)(e,["sortKey","limit","page","current","sortOrder"]);n===this.list.page&&r===this.list.limit||(this.autoRefreshCount=0),this.isFilterByBackend?this.getDataWithPolicy(Z(Z({},e),this.list.filters||{})):this.updateList({page:n,limit:r,sortKey:a,sortOrder:l})}else this.getDataWithPolicy(e)})),(0,R.default)(this,"handleFetchBySort",(e=>{if(this.isSortByBackend){var t=Z(Z({},e),{},{page:1});this.handleFetch(t,!0)}else{var{sortKey:a,limit:r,page:n,sortOrder:i}=e;this.updateList({page:n,limit:r,sortKey:a,sortOrder:i})}})),(0,R.default)(this,"handleFilterChange",((e,t)=>{var{page:a,limit:r,sortKey:n,sortOrder:i}=e,l=(0,M.default)(e,["page","limit","sortKey","sortOrder"]);this.isFilterByBackend?(this.list.filters=e,this.setState({timeFilter:t},(()=>{this.handleFetch(e,!0)}))):(this.updateList({page:a,sortKey:n,sortOrder:i,filters:l}),this.setState({filters:l,timeFilter:t}))})),(0,R.default)(this,"handleSelectRowKeys",(e=>{this.store.setSelectRowKeys("list",e),e&&0!==e.length?(this.inSelect=!0,this.autoRefreshCount=0):(this.inSelect=!1,this.getDataSource())})),(0,R.default)(this,"onCloseSuccessHint",(()=>{})),(0,R.default)(this,"renderMore",((e,t)=>{if((0,z.isEmpty)(this.enabledItemActions))return null;var a=this.renderMoreMenu(t);return null===a?null:j.default.createElement(A.default,{content:a,trigger:"click",placement:"bottomRight"},j.default.createElement(P.default,{icon:"more",type:"flat"}))})),(0,R.default)(this,"renderMoreMenu",(e=>{var t,a=(0,w.default)(t=this.enabledItemActions).call(t,(t=>((0,z.isFunction)(t.show)?t.show(e):t.show||!0)?j.default.createElement(D.default.MenuItem,{key:t.key},j.default.createElement(T.default,{name:t.icon})," ",j.default.createElement("span",null,t.text)):null));return(0,I.default)(a).call(a,(e=>null===e))?null:j.default.createElement(D.default,{onClick:this.handleMoreMenuClick(e)},a)})),this.options=n,this.state={filters:{},timeFilter:{},autoRefresh:!0,newHints:!1,tableHeight:this.getTableHeight()},this.dataTimerTransition=null,this.dataTimerAuto=null,this.dataDurationTransition=10,this.dataDurationAuto=30,this.autoRefreshTotalTime=600,this.autoRefreshCount=0,this.autoRefreshCountMax=Math.floor(this.autoRefreshTotalTime/this.dataDurationAuto),this.infoMessage="",this.successMessage="",this.errorMessage="",this.warnMessage="",this.inAction=!1,this.inSelect=!1,this.setTableHeight=(0,C.default)(r=this.setTableHeight).call(r,this),this.debounceSetTableHeight=this.debounceSetTableHeight.call(this),this.init()}componentDidMount(){this.unsubscribe=this.routing.history.subscribe((e=>{if(e.pathname===this.props.match.url&&e.key===this.props.location.key){var t=this.initFilter,{tags:a=[]}=(0,K.getTags)(t,this.searchFilters);if(!a.length&&!this.filterTimeKey){var{limit:r,page:n}=this.store.list;this.list.filters={},this.handleFetch(Z(Z({},t),{},{limit:r,page:n}),!0)}}})),window.addEventListener("resize",this.debounceSetTableHeight)}componentDidUpdate(e){if(this.inDetailPage){var{detail:t}=e,{detail:a}=this.props;(0,z.isEmpty)(t)||(0,z.isEmpty)(a)||(0,z.isEqual)(t,a)||this.handleRefresh(!0)}}componentWillUnmount(){this.unsubscribe&&this.unsubscribe(),this.disposer&&this.disposer(),this.unMountActions&&this.unMountActions(),this.stopRefreshTransition(),this.stopRefreshAuto(),this.clearListUnmount&&this.store.clearData&&this.store.clearData("listUnmount"),window.removeEventListener("resize",this.debounceSetTableHeight)}get policy(){return""}get aliasPolicy(){return""}get name(){return""}get title(){return"".concat(this.name,"s")}get className(){return""}get path(){var{location:{pathname:e=""}={}}=this.props;return e||""}get inDetailPage(){var{detail:e}=this.props;return!!e}get detailName(){if(!this.inDetailPage)return"";var{detailName:e}=this.props;return e}get shouldRefreshDetail(){return!0}get location(){return this.props.location}get isAdminPage(){var{pathname:e}=this.location;return(0,V.isAdminPage)(e)}get hasAdminRole(){return this.props.rootStore.hasAdminRole}getRouteName(e){return this.isAdminPage?"".concat(e,"Admin"):e}getRoutePath(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getRouteName(e);return(0,H.getPath)({key:r,params:t,query:a})}getLinkRender(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getRouteName(e);return(0,H.getLinkRender)({key:n,params:a,query:r,value:t})}get prefix(){return this.props.match.url}get params(){return this.props.match.params||{}}get routing(){return this.props.rootStore.routing}get list(){return this.store.list}get isLoading(){return this.list.isLoading||this.store.isSubmitting}get tips(){return[]}get rowKey(){return"id"}get hasTab(){return!1}get hasSubTab(){return!1}get hideCustom(){return!1}get hideSearch(){return!1}get hideRefresh(){return!1}get hideDownload(){return!1}get checkEndpoint(){return!1}get endpoint(){return""}get endpointError(){return this.checkEndpoint&&!this.endpoint}get initFilter(){var e;return(0,F.parse)((0,S.default)(e=this.location.search).call(e,1))||{}}get hintHeight(){var e=0;return this.infoMessage&&(e+=50),this.warnMessage&&(e+=50),this.errorMessage&&(e+=50),this.successMessage&&(e+=50),e}get tableTopHeight(){return this.hasSubTab?376:this.hasTab?326:272}getTableHeight(){var e=window.innerHeight;return this.params&&this.params.id?-1:e-this.tableTopHeight-this.hintHeight}get tableWidth(){return 800}get isFilterByBackend(){return!1}get isSortByBackend(){return!1}get isCourier(){return!1}get enabledItemActions(){var e;return(0,b.default)(e=this.itemActions).call(e,(e=>!e.action))}get adminPageHasProjectFilter(){return!1}get transitionStatusList(){return[]}get fetchDataByAllProjects(){return!0}get currentUser(){var{user:e}=this.props.rootStore||{};return e||{}}get currentProjectId(){return this.props.rootStore.projectId}get fetchDataByCurrentProject(){return!1}get defaultSortKey(){return""}get defaultSortOrder(){return"descend"}get clearListUnmount(){return!1}get itemInTransitionFunction(){return e=>{var t,{status:a}=e;return(0,y.default)(t=this.transitionStatusList).call(t,a)>=0}}get ableAutoFresh(){return!0}get actionConfigs(){return{batchActions:[],primaryActions:[],rowActions:[]}}get primaryActions(){return this.actionConfigs.primaryActions}get batchActions(){return this.actionConfigs.batchActions}get itemActions(){return this.actionConfigs.rowActions}get searchFilters(){return[]}get expandable(){}get filterTimeKey(){}get projectFilterKey(){return"project_id"}get pageSizeOptions(){}get hideTotal(){return!1}get primaryActionsExtra(){return null}get allProjectsKey(){return"all_projects"}get forceRefreshTopDetailWhenListRefresh(){return!1}getEmptyProps(){return{}}getEnabledTableProps(){var e=this.getTableProps();return(0,z.isEmpty)(this.batchActions)&&(e.onSelectRowKeys=null),e}getCheckboxProps(e){return{disabled:!1,name:e.name}}getBaseTableProps(){var{keyword:e,selectedRowKeys:a,total:r,page:n,limit:i,silent:l,sortKey:s,sortOrder:o,timerFilter:u}=this.list,d={total:r,current:Number(n),pageSize:i||10,showTotal:e=>t("Total {total} items",{total:e}),showSizeChanger:!0};this.pageSizeOptions&&(d.pageSizeOptions=this.pageSizeOptions);var{autoRefresh:c,tableHeight:f}=this.state;return Z({resourceName:this.name,detailName:this.detailName,data:this.getDataSource(),columns:this.getColumns(),filters:this.getFilters(),timerFilter:u,searchFilters:this.getSearchFilters(),keyword:e,pagination:d,primaryActions:this.primaryActions,batchActions:this.batchActions,itemActions:this.itemActions,getCheckboxProps:this.getCheckboxProps,isLoading:this.isLoading,silentLoading:l,rowKey:this.rowKey,selectedRowKeys:(0,O.toJS)(a),scrollY:f,sortKey:s,sortOrder:o,defaultSortKey:this.defaultSortKey,defaultSortOrder:this.defaultSortOrder,getDownloadData:this.getDownloadData,containerProps:this.props,expandable:this.expandable,showTimeFilter:!!this.filterTimeKey,filterTimeDefaultValue:this.filterTimeDefaultValue,isPageByBack:this.isFilterByBackend,isSortByBack:this.isSortByBackend,isCourier:this.isCourier,autoRefresh:c,startRefreshAuto:this.startRefreshAuto,stopRefreshAuto:this.onStopRefreshAuto,onClickAction:this.onClickAction,onFinishAction:this.onFinishAction,onCancelAction:this.onCancelAction,dataDurationAuto:this.dataDurationAuto,handleInputFocus:this.handleInputFocus,hideTotal:this.hideTotal,hideDownload:this.hideDownload,primaryActionsExtra:this.primaryActionsExtra,isAdminPage:this.isAdminPage,initFilter:this.initFilter},this.getEnabledTableProps())}getTableProps(){return{onRefresh:this.handleRefresh,onFetch:this.handleFetch,onFetchBySort:this.handleFetchBySort,onSelectRowKeys:this.handleSelectRowKeys,onFilterChange:this.handleFilterChange,hideCustom:this.hideCustom,hideSearch:this.hideSearch,hideRefresh:this.hideRefresh,hideAutoRefresh:!this.ableAutoFresh}}getData(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{silent:t}=e,a=(0,M.default)(e,["silent"]);t&&(this.list.silent=!0);var r=Z(Z(Z({},this.props.match.params),a),{},{sortKey:a.sortKey||this.isSortByBackend&&this.defaultSortKey||"",sortOrder:a.sortOrder||this.isSortByBackend&&this.defaultSortOrder||""});!this.isAdminPage&&this.fetchDataByCurrentProject?r.project_id=this.currentProjectId:this.isAdminPage&&this.fetchDataByAllProjects&&this.allProjectsKey&&(r[this.allProjectsKey]=!0),this.isFilterByBackend?this.fetchListWithTry((()=>this.fetchDataByPage(this.updateFetchParamsByPage(r)))):this.fetchListWithTry((()=>this.fetchData(this.updateFetchParams(r))))}getDataWithPolicy(e){if(this.currentUser&&!(0,z.isEmpty)(this.currentUser)&&!this.endpointError){if(!(0,Q.default)({policy:this.policy,aliasPolicy:this.aliasPolicy,actionName:this.name})){var a={message:t("You don't have access to get {name}.",{name:this.name.toLowerCase()}),status:401};return q.default.errorWithDetail(a,t("Unable to get {name}.",{name:this.name.toLowerCase()})),this.list.isLoading=!1,void(this.list.silent=!1)}this.getData(e)}}setTableHeight(){var e=this.getTableHeight(),{tableHeight:t}=this.state;e!==t&&this.setState({tableHeight:e})}getColumns(){return[]}debounceSetTableHeight(){return(0,z.debounce)(this.setTableHeight,1e3)}updateHintsByOthers(){this.updateHints&&(this.updateHints(),(0,p.default)(this.setTableHeight,0),this.setState({newHints:!0}))}updateHintsByData(e){}init(){this.store={list:{}},this.downloadStore={}}renderTable(){try{var e=this.getBaseTableProps();return j.default.createElement(B.default,e)}catch(e){var t=this.getRoutePath("overview");return j.default.createElement(G.default,{title:this.name,link:t,codeError:!0})}}renderInfoHint(){return this.infoMessage?j.default.createElement(k.default,{message:this.infoMessage,type:"info",showIcon:!0,className:W.default.hint}):null}renderSuccessHint(){return this.successMessage?j.default.createElement(k.default,{message:this.successMessage,type:"success",showIcon:!0,closable:!0,className:W.default.hint,onClose:this.onCloseSuccessHint}):null}renderWarnHint(){return this.warnMessage?j.default.createElement(k.default,{message:this.warnMessage,type:"warning",showIcon:!0,className:W.default.hint}):null}renderErrorHint(){return this.errorMessage?j.default.createElement(k.default,{message:this.errorMessage,type:"error",showIcon:!0,closable:!0,className:W.default.hint}):null}renderHint(){var{newHints:e}=this.state;return e||this.infoMessage||this.warnMessage||this.successMessage||this.errorMessage?j.default.createElement("div",{className:(0,L.default)(W.default.hints,"list-hints")},this.renderInfoHint(),this.renderSuccessHint(),this.renderWarnHint(),this.renderErrorHint()):null}renderHeader(){return null}render(){if(this.endpointError){var e=this.getRoutePath("overview");return j.default.createElement(G.default,{title:this.name,link:e,endpointError:!0})}var t=this.renderTable();return j.default.createElement("div",{className:(0,L.default)(W.default.wrapper,"list-container",this.className)},this.renderHeader(),this.renderHint(),t)}}a.default=J},1119:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=void 0;var p=f(r(219)),h=f(r(195)),m=f(r(101)),g=f(r(62)),v=f(r(33)),y=f(r(91)),b=f(r(82));r(1178);var _=f(r(1179)),S=f(r(385)),x=f(r(1192));r(318);var w=f(r(317));r(1167);var I=f(r(1168)),C=f(r(1240)),k=f(r(547));r(1189);var D=f(r(1190)),T=f(r(37)),A=f(r(0)),P=r(327),M=f(r(4)),E=r(47),N=r(135),R=(r(167),r(513),f(r(1215))),j=f(r(3433)),F=f(r(1145)),L=r(32),O=f(r(1123)),z=f(r(1166)),B=r(319),V=r(517),q=f(r(3436));function U(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=U(Object(r),!0)).call(a,(function(t){(0,T.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=U(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}class G extends A.default.Component{constructor(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),(0,T.default)(this,"onCollapsedCallback",(()=>{})),(0,T.default)(this,"handleChangeTab",(e=>{this.handleFetch({tab:e},!0)})),(0,T.default)(this,"handleFetch",((e,t)=>{this.routing.query(e,t)})),(0,T.default)(this,"handleDetailInfo",(()=>{var{collapsed:e}=this.state;this.setState({collapsed:!e},(()=>{this.onCollapsedCallback(!e)}))})),(0,T.default)(this,"getDesc",((e,t)=>{var{dataIndex:a,render:r,valueRender:n}=t;if(r)return r(e[a],e);if(n){var i=N.renderFilterMap[n];return i&&i(e[a])}var l=(0,E.get)(e,a);return void 0===l||""===l?"-":l})),(0,T.default)(this,"fetchData",((e,t)=>{if(this.store.fetchDetail){var a=Q(Q(Q({},this.params),e||{}),{},{all_projects:this.isAdminPage,silent:t}),r=this.updateFetchParams(a);this.store.fetchDetail(r).catch(this.catch)}})),(0,T.default)(this,"getRouteProps",(()=>({}))),(0,T.default)(this,"fetchDataWithPolicy",((e,a)=>{if((0,O.default)({policy:this.policy,aliasPolicy:this.aliasPolicy,actionName:this.name}))this.fetchData(a,e);else{var r={message:t("You don't have access to get {name}.",{name:this.name.toLowerCase()}),status:401};F.default.errorWithDetail(r,t("Unable to get {name} detail.",{name:this.name.toLowerCase()}))}})),(0,T.default)(this,"refreshDetailByTab",(()=>{this.fetchDataWithPolicy(!0)})),(0,T.default)(this,"refreshDetailByAction",(e=>{this.fetchDataWithPolicy(e)})),(0,T.default)(this,"handleRefresh",(()=>{this.fetchDataWithPolicy(!1)})),(0,T.default)(this,"catch",(e=>{var{data:a,status:r}=(e||{}).response||e||{};if(401===r){var n=t("The session has expired, please log in again.");F.default.errorWithDetail(null,n)}else if(404===r)this.setState({notFound:!0}),F.default.warn(t("{name} {id} could not be found.",{name:this.name.toLowerCase(),id:this.id}));else{var i={message:a,status:r};F.default.errorWithDetail(i,t("Get {name} detail error.",{name:this.name.toLowerCase()}))}})),(0,T.default)(this,"goBack",(()=>{this.routing.push(this.listUrl)})),(0,T.default)(this,"updateFetchParams",(e=>e)),(0,T.default)(this,"onFinishAction",((e,t,a)=>{if(e&&a)this.goBack();else{var r,n=!(0,p.default)(r=this.forceLoadingTabs).call(r,this.tab.key);this.refreshDetailByAction(n)}})),this.options=a,this.state={notFound:!1,collapsed:!1},this.init()}componentDidMount(){this.fetchDataWithPolicy()}componentDidUpdate(e){var{id:t}=e.match.params;this.id!==t&&this.handleRefresh(!0)}get params(){return this.props.match.params||{}}get id(){return this.props.match.params.id}get policy(){return""}get aliasPolicy(){return""}get name(){return""}get routing(){return this.props.rootStore.routing}get path(){var{location:{pathname:e=""}={}}=this.props;return e||""}get isAdminPage(){var{pathname:e}=this.props.location;return(0,N.isAdminPage)(e)}getRouteName(e){return this.isAdminPage?"".concat(e,"Admin"):e}getRoutePath(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getRouteName(e);return(0,V.getPath)({key:r,params:t,query:a})}getLinkRender(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getRouteName(e);return(0,V.getLinkRender)({key:n,params:a,query:r,value:t})}get tabs(){return[]}get tab(){var e,t;if(0===this.tabs.length)return null;var a=(0,P.parse)((0,h.default)(e=this.routing.location.search).call(e,1)),{tab:r}=a;return(0,m.default)(t=this.tabs).call(t,(e=>e.key===r))||this.tabs[0]}get actionConfigs(){return B.emptyActionConfig}get rowActions(){return[]}get detailTabs(){return[{title:"tab1",key:"tab1",component:null},{title:"tab2",key:"tab2",component:null}]}get titleLabel(){return"ID:"}get titleValue(){return this.params.id}get detailTitle(){var{collapsed:e}=this.state,{Paragraph:a}=D.default,r=e?A.default.createElement(k.default,null):A.default.createElement(C.default,null);return A.default.createElement("div",null,A.default.createElement("span",{className:q.default["title-label"]},this.titleLabel),A.default.createElement("span",{className:q.default["header-title"]},A.default.createElement(a,{style:{display:"inherit"},copyable:!0},this.titleValue)),A.default.createElement(I.default,{type:"vertical",className:q.default["header-divider"]}),A.default.createElement(w.default,{onClick:this.goBack,type:"link"},t("Back")),A.default.createElement(w.default,{type:"link",icon:A.default.createElement(x.default,null),onClick:this.handleRefresh}),A.default.createElement(w.default,{onClick:this.handleDetailInfo,icon:r,type:"link",className:q.default["header-button"]}))}get className(){return""}get listUrl(){return""}get detailData(){return(0,L.toJS)(this.store.detail)||{}}get isLoading(){return this.store.isLoading}get detailInfos(){return[]}get forceLoadingTabs(){return[]}getActionData(){return this.detailData}init(){this.store={detail:{},isLoading:!0}}renderDetailInfos(){var e,t,{Paragraph:a}=D.default,{collapsed:r}=this.state;if((0,E.isEmpty)(this.detailData))return A.default.createElement(j.default,{title:this.detailTitle,descriptions:[],loading:this.isLoading});var n=r?[]:(0,g.default)(e=(0,v.default)(t=this.detailInfos).call(t,(e=>!e.hidden))).call(e,(e=>{var t,r,n,{title:i,dataIndex:l,copyable:s}=e;this.isLoading||!this.detailData||(0,E.isEmpty)(this.detailData)?t="-":"-"!==(t=this.getDesc(this.detailData,e))&&(s||0===(0,y.default)(r=l.toLowerCase()).call(r,"id")||(0,y.default)(n=l.toLowerCase()).call(n,"_id")>=0)&&(t=A.default.createElement(a,{style:{margin:0},copyable:s},t));return{label:i,content:t}}));return A.default.createElement(j.default,{title:this.detailTitle,descriptions:n,loading:this.isLoading})}renderTabComponent(e){var t,{component:a,key:r}=e;return a?A.default.createElement(e.component,(0,S.default)({},this.props,{detail:this.detailData,detailName:(0,b.default)(t="".concat(this.name,"-")).call(t,this.id),refreshDetail:this.refreshDetailByTab})):A.default.createElement("span",null,r)}renderTab(e,t){return e!==t.key?A.default.createElement(_.default.TabPane,{tab:t.title,key:t.key}):A.default.createElement(_.default.TabPane,{tab:t.title,key:t.key},this.renderTabComponent(t))}renderTabs(){var e;if((0,E.isEmpty)(this.detailData)||this.isLoading)return null;if(!this.tab)return null;var t=(0,g.default)(e=this.tabs).call(e,(e=>this.renderTab(this.tab.key,e)));return A.default.createElement("div",{className:(0,M.default)(q.default["tab-wrapper"],this.className)},A.default.createElement(_.default,{activeKey:this.tab.key,onChange:this.handleChangeTab},t))}renderActions(){var e=this.getActionData();return(0,E.isEmpty)(e)||this.store.isLoading?null:A.default.createElement(z.default,{actions:this.actionConfigs.rowActions||this.actions,onFinishAction:this.onFinishAction,item:this.getActionData(),containerProps:{isAdminPage:this.isAdminPage},isAdminPage:this.isAdminPage})}render(){return this.state.notFound?A.default.createElement(R.default,{title:this.name,link:this.listUrl,goList:!0}):A.default.createElement("div",{className:(0,M.default)(q.default.main,this.className,"detail-main")},A.default.createElement("div",{className:q.default["action-wrapper"]},this.renderActions()),A.default.createElement("div",{className:q.default.header},this.renderDetailInfos()),A.default.createElement("div",{className:q.default.tabs},this.renderTabs()))}}a.default=G},1120:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(156),p=r(21);c(a,"__esModule",{value:!0}),a.isBootFromVolume=a.allowAttachInterfaceStatus=a.SimpleTag=a.actionColumn=a.actionEvent=a.actionMap=a.instanceStatusFilter=a.allowAttachVolumeInstance=a.canCreateIronicByEndpoint=a.instanceSelectTablePropsBackend=a.instanceSortProps=a.instanceFilters=a.instanceColumnsBackend=a.isIronicInstance=a.physicalNodeTypes=a.getIpInitValue=a.getUserData=a.hasRootVolume=a.isIsoInstance=a.isNotError=a.isPaused=a.isStopped=a.isActive=a.isShutOff=a.isActiveOrShutOff=a.isNotLockedOrAdmin=a.checkStatus=a.lockRender=a.isLocked=a.isNotDeleting=a.isNotLocked=a.isBuilding=a.instanceStatus=a.powerStatus=a.taskStatus=a.stableStatus=a.transitionStatus=void 0;var h=p(r(219)),m=p(r(101)),g=p(r(62)),v=p(r(536)),y=p(r(598)),b=p(r(195));r(1185);var _=p(r(1186));r(532);var S=p(r(533));r(530);var x=p(r(531)),w=p(r(52)),I=p(r(37));r(387);var C=p(r(220)),k=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=j(t);if(a&&a.has(e))return a.get(e);var r={},n=c&&s;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=n?s(e,i):null;l&&(l.get||l.set)?c(r,i,l):r[i]=e[i]}r.default=e,a&&a.set(e,r);return r}(r(0)),D=p(r(542)),T=r(527),A=(r(167),p(r(1443))),P=r(83),M=r(319),E=p(r(3368)),N=p(r(3369)),R=r(47);function j(e){if("function"!=typeof f)return null;var t=new f,a=new f;return(j=function(e){return e?a:t})(e)}function F(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=F(Object(r),!0)).call(a,(function(t){(0,I.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=F(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}var O=k.default.createElement(C.default,{title:t("The instance has been locked. If you want to do more, please unlock it first.")},k.default.createElement("img",{src:E.default,alt:"lock",style:{width:"12px"}})),z=k.default.createElement("img",{src:N.default,alt:"unlock",style:{width:"12px"}}),B={build:t("Build"),building:t("Building"),stopped:t("Stopped"),recovering:t("Recovering"),rescued:t("Rescued"),resized:t("Resized"),scheduling:t("Scheduling"),reboot:t("Reboot"),hard_reboot:t("Hard Reboot"),migrating:t("Migrating")};a.transitionStatus=B;var V={deleted:t("Deleted"),active:t("Active"),shutoff:t("Shutoff"),paused:t("Paused"),error:t("Error"),resize:t("Resizing or Migrating"),verify_resize:t("Resizing or Migrating"),revert_resize:t("Revert Resize/Migrate"),password:t("Password"),rebuild:t("Rebuild"),rescue:t("Rescue"),"soft-delete":t("Soft Deleted"),soft_deleted:t("Soft Deleted"),shelved:t("Shelved"),shelved_offloaded:t("Shelved Offloaded"),suspended:t("Suspended"),stopped:t("Shutoff")};a.stableStatus=V;var q={null:t("No Task"),scheduling:t("Scheduling"),block_device_mapping:t("Block Device Mapping"),networking:t("Networking"),spawning:t("Spawning"),image_snapshot:t("Snapshotting"),image_snapshot_pending:t("Image Snapshot Pending"),image_pending_upload:t("Image Pending Upload"),image_uploading:t("Image Uploading"),image_backup:t("Image Backup"),updating_password:t("Updating Password"),resize_prep:t("Resizing or Migrating"),resize_migrating:t("Resizing or Migrating"),resize_migrated:t("Resizing or Migrating"),resize_finish:t("Resizing or Migrating"),resize_reverting:t("Reverting Resize or Migrate"),resize_confirming:t("Confirming Resize or Migrate"),rebooting:t("Rebooting"),reboot_pending:t("Rebooting"),reboot_started:t("Rebooting"),rebooting_hard:t("Hard Rebooting"),reboot_pending_hard:t("Hard Rebooting"),reboot_started_hard:t("Hard Rebooting"),pausing:t("Pausing"),unpausing:t("Resuming"),suspending:t("Suspending"),resuming:t("Resuming"),"powering-off":t("Powering Off"),"powering-on":t("Powering On"),rescuing:t("Rescuing"),unrescuing:t("Unrescuing"),rebuilding:t("Rebuilding"),rebuild_block_device_mapping:t("Rebuild Block Device Mapping"),rebuild_spawning:t("Rebuild Spawning"),migrating:t("Migrating"),deleting:t("Deleting"),"soft-deleting":t("Soft Deleting"),restoring:t("Restoring"),shelving:t("Shelving"),shelving_image_pending_upload:t("Shelving Image Pending Upload"),shelving_image_uploading:t("Shelving Image Uploading"),shelving_offloading:t("Shelving Offloading"),unshelving:t("Unshelving")};a.taskStatus=q;var U={"NO STATE":t("No State"),RUNNING:t("Running"),BLOCKED:t("Blocked"),PAUSED:t("Paused"),SHUTDOWN:t("Shut Down"),SHUTOFF:t("Shut Off"),CRASHED:t("Crashed"),SUSPENDED:t("Suspended"),FAILED:t("Failed"),BUILDING:t("Building")};a.powerStatus=U;var Q=L(L(L(L({},B),V),q),U);a.instanceStatus=Q;a.isBuilding=e=>"build"===e.status;var G=e=>!e.locked;a.isNotLocked=G;var K=e=>!e.task_state||"deleting"!==e.task_state.toLowerCase();a.isNotDeleting=K;var H=e=>!!e.locked;a.isLocked=H;var W=e=>e?O:z;a.lockRender=W;var Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],{status:r,vm_state:n}=t;return(0,h.default)(e).call(e,r.toLowerCase())||a&&n&&(0,h.default)(e).call(e,n.toLowerCase())};a.checkStatus=Y;a.isNotLockedOrAdmin=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!H(e)||t};a.isActiveOrShutOff=e=>Y(["active","shutoff"],e);a.isShutOff=e=>Y(["shutoff"],e);a.isActive=e=>Y(["active"],e);a.isStopped=e=>Y(["stopped"],e);a.isPaused=e=>Y(["paused"],e);a.isNotError=e=>!Y(["error"],e);a.isIsoInstance=e=>{var{iso_server:t=!1}=e;return t};a.hasRootVolume=e=>{var{root_device_name:t="/dev/vda",volumes_attached:a=[]}=e;return!!(0,m.default)(a).call(a,(e=>e.is_root_volume||e.device===t))};var Z='Content-Type: multipart/mixed; boundary="===============2309984059743762475=="\nMIME-Version: 1.0\n\n--===============2309984059743762475==\nContent-Type: text/cloud-config; charset="us-ascii" \nMIME-Version: 1.0\nContent-Transfer-Encoding: 7bit\nContent-Disposition: attachment; filename="ssh-pwauth-script.txt" \n\n#cloud-config\ndisable_root: false\nssh_pwauth: true\npassword: USER_PASSWORD\n\n--===============2309984059743762475==\nContent-Type: text/x-shellscript; charset="us-ascii" \nMIME-Version: 1.0\nContent-Transfer-Encoding: 7bit\nContent-Disposition: attachment; filename="passwd-script.txt" \n\n#!/bin/sh\necho \'root:USER_PASSWORD\' | chpasswd\n\n--===============2309984059743762475==\nContent-Type: text/x-shellscript; charset="us-ascii" \nMIME-Version: 1.0\nContent-Transfer-Encoding: 7bit\nContent-Disposition: attachment; filename="init-shell.txt" \n\nUSER_DATA\n\n--===============2309984059743762475==--',J='Content-Type: multipart/mixed; boundary="===============2309984059743762475==" \nMIME-Version: 1.0\n\n--===============2309984059743762475==\nContent-Type: text/cloud-config; charset="us-ascii" \nMIME-Version: 1.0\nContent-Transfer-Encoding: 7bit\nContent-Disposition: attachment; filename="ssh-pwauth-script.txt" \n\n#cloud-config\ndisable_root: false\nssh_pwauth: true\npassword: USER_PASSWORD\n\n--===============2309984059743762475==\nContent-Type: text/x-shellscript; charset="us-ascii" \nMIME-Version: 1.0\nContent-Transfer-Encoding: 7bit\nContent-Disposition: attachment; filename="passwd-script.txt" \n\n#!/bin/sh\necho \'root:USER_PASSWORD\' | chpasswd\n\n--===============2309984059743762475==--',X='Content-Type: multipart/mixed; boundary="===============2309984059743762475==" \nMIME-Version: 1.0\n\n--===============2309984059743762475==\nContent-Type: text/x-shellscript; charset="us-ascii" \nMIME-Version: 1.0\nContent-Transfer-Encoding: 7bit\nContent-Disposition: attachment; filename="init-shell.txt" \n\nUSER_DATA\n\n--===============2309984059743762475==--';a.getUserData=(e,t)=>e&&t?Z.replace(/USER_PASSWORD/g,e).replace(/USER_DATA/g,t):e?J.replace(/USER_PASSWORD/g,e):X.replace(/USER_DATA/g,t);a.getIpInitValue=e=>{if(!e)return null;var{start:t}=e.allocation_pools[0];return t};var $=[{label:t("Smart Scheduling"),value:"smart"},{label:t("Manually Specify"),value:"manually"}];a.physicalNodeTypes=$;var ee=e=>{var{flavor_info:{extra_specs:t={}}={}}=e;return"bare_metal"===t[":architecture"]};a.isIronicInstance=ee;var te=[{title:t("Name"),dataIndex:"name",sortKey:"display_name"},{title:t("Image"),sorter:!1,dataIndex:"image_os_distro",render:(e,t)=>k.default.createElement(D.default,{type:e,title:t.image_name})},{title:t("Fixed IP"),dataIndex:"fixed_addresses",width:120,sorter:!1,render:e=>e&&e.length?(0,g.default)(e).call(e,(e=>k.default.createElement("span",{key:e},e,k.default.createElement("br",null)))):"-"},{title:t("Floating IP"),dataIndex:"floating_addresses",width:120,sorter:!1,render:e=>e&&e.length?(0,g.default)(e).call(e,(e=>k.default.createElement("span",{key:e},e,k.default.createElement("br",null)))):"-"},{title:t("Flavor"),dataIndex:"flavor",sorter:!1},{title:t("Status"),dataIndex:"status",sorter:!1,render:e=>Q[e&&e.toLowerCase()]||"-"},{title:t("Locked"),dataIndex:"locked",isHideable:!0,render:W},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime"}];a.instanceColumnsBackend=te;var ae=[{label:t("Name"),name:"name"}];a.instanceFilters=ae;var re={isSortByBack:!0,defaultSortKey:"created_at",defaultSortOrder:"descend"};a.instanceSortProps=re;var ne=L(L({},re),{},{filterParams:ae,columns:te});a.instanceSelectTablePropsBackend=ne;a.canCreateIronicByEndpoint=()=>(0,P.ironicOriginEndpoint)();a.allowAttachVolumeInstance=e=>Y(["active","paused","stopped","resized","soft-delete","shelved","shelved_offloaded"],e)&&K(e)&&G(e)&&!ee(e);var ie={label:t("Status"),name:"status",options:[{label:t("Active"),key:"ACTIVE"},{label:t("Building"),key:"BUILD"},{label:t("Paused"),key:"PAUSED"},{label:t("Suspended"),key:"SUSPENDED"},{label:t("Error"),key:"ERROR"},{label:t("Shutoff"),key:"SHUTOFF"},{label:t("Shelved Offloaded"),key:"SHELVED_OFFLOADED"}]};a.instanceStatusFilter=ie;var le={attach_interface:t("Attach Interface"),detach_interface:t("Detach Interface"),attach_volume:t("Attach Volume"),detach_volume:t("Detach Volume"),create:t("Create"),stop:t("Stop"),reboot:t("Reboot"),suspend:t("Suspend"),resume:t("Resume"),shelve:t("Shelve"),unshelve:t("Unshelve"),start:t("Start"),lock:t("Lock"),unlock:t("Unlock"),pause:t("Pause"),unpause:t("Unpause"),createImage:t("Create Snapshot"),resize:t("Extend Root Volume"),confirmResize:t("Resize"),"live-resize":t("Online Resize"),extend_volume:t("Extend Volume"),changePassword:t("Change Password"),rebuild:t("Rebuild"),migrate:t("Migrate"),"live-migration":t("Live Migrate"),delete:t("Delete"),restore:t("Recover")};a.actionMap=le;var se={compute_restore_instance:t("Resume Instance"),compute_soft_delete_instance:t("Soft Delete Instance"),compute_post_live_migration_at_destination:t("Live Migration At Destination"),compute_pre_live_migration:t("Pre Live Migration"),compute_live_migration:t("Compute Live Migration"),compute_check_can_live_migrate_source:t("Check Can Live Migrate Source"),compute_check_can_live_migrate_destination:t("Check Can Live Migrate Destination"),conductor_live_migrate_instance:t("Conductor Live Migrate Instance"),compute_confirm_resize:t("Resized"),compute_finish_resize:t("Finish Resize"),compute_resize_instance:t("Resize Instance"),compute_prep_resize:t("Prep Resize"),cold_migrate:t("Cold Migrate"),conductor_migrate_server:t("Conductor Migrate Server"),compute_rebuild_instance:t("Rebuild Instance"),rebuild_server:t("Rebuild Instance"),compute_set_admin_password:t("Set Admin Password"),compute_extend_volume:t("Extend Volume"),compute_live_resize_instance:t("Compute Live Resize Instance"),conductor_live_resize_instance:t("Conductor Live Resize Instance"),api_snapshot_instance:t("Snapshot Instance"),api_lock:t("Lock"),api_unlock:t("Unlock"),compute_detach_volume:t("Detach Volume"),compute_attach_volume:t("Attach Volume"),compute_detach_interface:t("Detach Interface"),compute_attach_interface:t("Attach Interface"),compute__do_build_and_run_instance:t("Do Build And Run Instance"),compute_suspend_instance:t("Compute Suspend Instance"),compute_start_instance:t("Compute Start Instance"),compute_stop_instance:t("Compute Stop Instance"),compute_resume_instance:t("Compute Resume Instance"),compute_pause_instance:t("Compute Pause Instance"),compute_unpause_instance:t("Compute Unpause Instance"),compute_reboot_instance:t("Compute Reboot Instance")};function oe(e){var{id:a,requestId:r}=e,[n,i]=(0,k.useState)([]),[l,s]=(0,k.useState)(!1);(0,k.useEffect)((()=>{var e=null;return(0,w.default)((function*(){s(!0);var t=yield A.default.fetchDetail({id:a,requestId:r}),{events:n=[]}=t;e=(0,v.default)((()=>{var e;s(!1),i((0,y.default)(e=(0,b.default)(n).call(n)).call(e))}),200)}))(),()=>{clearTimeout(e)}}),[]);var o=[{title:t("Operation Name"),dataIndex:"event",key:"event",render:e=>se[e]},{title:t("Start Time"),dataIndex:"start_time",key:"start_time",render:e=>(0,T.getLocalTimeStr)(e)},{title:t("End Time"),dataIndex:"finish_time",key:"finish_time",render:e=>e?(0,T.getLocalTimeStr)(e):"-"},{title:t("Execution Result"),dataIndex:"result",key:"result",render:e=>"Success"===e?t("Success"):"-"}];return k.default.createElement(x.default,{columns:o,dataSource:n,pagination:!1,loading:l,size:"small",rowKey:"event"})}a.actionEvent=se;a.actionColumn=e=>[{title:t("Operation Name"),dataIndex:"action",render:e=>le[e]},{title:t("Project ID/Name"),dataIndex:"project_name",isHideable:!0,hidden:!e.isAdminPage},{title:t("Operation Time"),dataIndex:"start_time",valueRender:"toLocalTimeMoment"},{title:t("Request ID"),dataIndex:"request_id",isHideable:!0,render:(e,t)=>{var a=k.default.createElement(oe,{id:t.instance_uuid,requestId:e});return k.default.createElement(k.default.Fragment,null,e&&k.default.createElement(S.default,{content:a,destroyTooltipOnHide:!0,trigger:"click"},k.default.createElement("span",{className:"link-class"},e)))}},{title:t("User ID"),dataIndex:"user_id",isHideable:!0,hidden:!e.isAdminPage,render:t=>e.getLinkRender("userDetail",t,{id:t},null)}];a.SimpleTag=e=>{var{tag:t,index:a}=e,r=t.length>20,n=r?"".concat((0,b.default)(t).call(t,0,20),"..."):t,i=k.default.createElement(_.default,{key:t,color:M.projectTagsColors[a%10],style:{marginTop:2,marginBottom:2}},k.default.createElement("span",{style:{whiteSpace:"pre-wrap"}},n));return r?k.default.createElement(C.default,{key:t,title:k.default.createElement("span",{style:{whiteSpace:"pre-wrap"}},t)},i):i};a.allowAttachInterfaceStatus=["active","paused","stopped"];a.isBootFromVolume=e=>{var{origin_data:t}=e||{};return t&&!(0,R.isEmpty)(t)?!t.image:!e.image}},1122:function(e,t,a){"use strict";var r=a(35),n=a(44),i=a(33),l=a(25),s=a(28),o=a(45),u=a(46),d=a(19),c=a(21);d(t,"__esModule",{value:!0}),t.default=void 0;var f=c(a(62)),p=c(a(37)),h=c(a(0)),m=c(a(4)),g=c(a(3479)),v=a(32),y=a(47),b=a(135),_=a(517),S=c(a(3482));function x(e,t){var a=r(e);if(n){var s=n(e);t&&(s=i(s).call(s,(function(t){return l(e,t).enumerable}))),a.push.apply(a,s)}return a}class w extends h.default.Component{constructor(e){super(e),(0,p.default)(this,"fetchData",(e=>{this.shouldFetchDetail&&this.store.fetchDetail&&this.store.fetchDetail(function(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=x(Object(r),!0)).call(a,(function(t){(0,p.default)(e,t,r[t])}));else if(o)u(e,o(r));else{var n;s(n=x(Object(r))).call(n,(function(t){d(e,t,l(r,t))}))}}return e}({id:this.id},e)).catch(this.catch)})),this.init()}componentDidMount(){this.fetchData()}get id(){var{id:e}=this.props.match.params;return e}get currentUser(){var{user:e}=this.props.rootStore||{};return e||{}}get currentProjectId(){return this.props.rootStore.projectId}get projectId(){var{project_id:e,tenant_id:t,owner:a,owner_id:r}=this.detailData;return e||t||a||r}get isMyResource(){return this.projectId===this.currentProjectId}get detailData(){return this.props.detail||(0,v.toJS)(this.store.detail)}get isLoading(){return this.store.isLoading}get routing(){return this.props.rootStore.routing}get path(){var{location:{pathname:e=""}={}}=this.props;return e||""}get leftCards(){return[]}get rightCards(){return[]}get isAdminPage(){var{pathname:e=""}=this.props.location||{};return(0,b.isAdminPage)(e)}get shouldFetchDetail(){return!1}get leftCardsStyle(){return{}}getRouteName(e){return this.isAdminPage?"".concat(e,"Admin"):e}getRoutePath(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getRouteName(e);return(0,_.getPath)({key:r,params:t,query:a})}getLinkRender(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getRouteName(e);return(0,_.getLinkRender)({key:n,params:a,query:r,value:t})}init(){this.store={}}renderLeftCards(){var e;return(0,f.default)(e=this.leftCards).call(e,((e,t)=>{var{title:a,titleHelp:r,options:n,render:i,labelCol:l,contentCol:s,button:o,sourceData:u}=e;return i?i():h.default.createElement(g.default,{key:"card-left-".concat(t),className:"detail-left-card",data:u||this.detailData,title:a,titleHelp:r,options:n,loading:this.isLoading,labelCol:l,contentCol:s,button:o})}))}renderRightCards(){var e;return(0,f.default)(e=this.rightCards).call(e,((e,t)=>{var{title:a,options:r,labelCol:n,titleHelp:i,render:l,button:s,className:o}=e;if(l)return l();var u=8,d=16;return(0,y.has)(e,"labelCol")&&(d=24-(u=n)),h.default.createElement(g.default,{key:"card-right-".concat(t),className:(0,m.default)("detail-right-card",o),data:this.detailData,title:a,titleHelp:i,options:r,loading:this.isLoading,labelCol:u,contentCol:d,button:s})}))}renderModal(){return null}render(){return h.default.createElement("div",{className:(0,m.default)(S.default.main)},h.default.createElement("div",{className:S.default["left-side"],id:"detail-left-side",style:this.leftCardsStyle},this.renderLeftCards()),h.default.createElement("div",{className:S.default["right-side"],id:"detail-right-side"},this.renderRightCards()),this.renderModal())}}t.default=w},1126:function(e,t,a){"use strict";var r=a(35),n=a(44),i=a(33),l=a(25),s=a(28),o=a(45),u=a(46),d=a(19),c=a(21);d(t,"__esModule",{value:!0}),t.default=t.UserStore=void 0;var f,p,h=c(a(28)),m=c(a(101)),g=c(a(35)),v=c(a(65)),y=c(a(62)),b=c(a(33)),_=c(a(25)),S=c(a(52)),x=c(a(71)),w=c(a(72)),I=c(a(37)),C=c(a(55)),k=(c(a(73)),a(32)),D=c(a(403)),T=c(a(49)),A=c(a(136)),P=c(a(384)),M=c(a(1156)),E=c(a(54));function N(e,t){var a=r(e);if(n){var s=n(e);t&&(s=i(s).call(s,(function(t){return l(e,t).enumerable}))),a.push.apply(a,s)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=N(Object(r),!0)).call(a,(function(t){(0,I.default)(e,t,r[t])}));else if(o)u(e,o(r));else{var n;s(n=N(Object(r))).call(n,(function(t){d(e,t,l(r,t))}))}}return e}var j=(f=class extends E.default{constructor(){super(...arguments),(0,w.default)(this,"userProjects",p,this),(0,I.default)(this,"addGroupUsers",((e,t)=>M.default.addGroupUsers({id:e,userId:t}))),(0,I.default)(this,"addProjectUser",((e,t,a)=>P.default.assignUserRole({id:e,userId:t,roleId:a}))),(0,I.default)(this,"getProjectMapRoles",((e,t,a,r)=>{var n={},{id:i}=e;return(0,h.default)(t).call(t,(e=>{var{scope:{project:{id:t}={}}={},role:{id:l}={},user:{id:s}={}}=e;if(s===i&&l&&t){var o=(0,m.default)(a).call(a,(e=>e.id===l));if(n[t])n[t].roles=[...n[t].roles,o];else{var u=(0,m.default)(r).call(r,(e=>e.id===t));n[t]={project:u,roles:[o]}}}})),n})),(0,I.default)(this,"getSystemRoles",((e,t,a,r)=>{var n=[],{id:i}=e||{};return(0,h.default)(t).call(t,(e=>{var{role:{id:t}={},user:{id:r}={}}=e;if(r===i&&t){var l=(0,m.default)(a).call(a,(e=>e.id===t));n.push(l)}})),n})),(0,I.default)(this,"updateUser",((e,t,a,r,n,i)=>{var l=this.getProjectMapRoles(e,t,r,n),s=this.getSystemRoles(e,a,r,n),o=(0,m.default)(i).call(i,(t=>t.id===e.domain_id));return R(R({},e),{},{projects:l,projectCount:(0,g.default)(l).length,domain:o,domainName:(o||{}).name||e.domain_id,systemRoles:s})}))}get client(){return T.default.keystone.users}get domainClient(){return T.default.keystone.domains}get systemGroupClient(){return T.default.keystone.systemGroups}get roleClient(){return T.default.keystone.roles}get roleAssignmentClient(){return T.default.keystone.roleAssignments}get projectClient(){return T.default.keystone.projects}get systemUserClient(){return T.default.keystone.systemUsers}get groupClient(){return T.default.keystone.groups}listFetchByClient(e,t){var{groupId:a}=t;return a?this.groupClient.users.list(a,e):this.client.list(e)}get paramsFunc(){return e=>{var{id:t,projectId:a,groupId:r,roleId:n,withProjectRole:i,withSystemRole:l,all_projects:s}=e;return(0,x.default)(e,["id","projectId","groupId","roleId","withProjectRole","withSystemRole","all_projects"])}}create(e){var t=this;return(0,S.default)((function*(){var a,r={},{select_project:n,select_user_group:i=[],projectRoles:l,defaultRole:s}=e,o=(0,x.default)(e,["select_project","select_user_group","projectRoles","defaultRole"]);r[t.responseKey]=o,t.isSubmitting=!0;var u=yield t.client.create(r),{user:{id:d}}=u,c=[];return(0,h.default)(i).call(i,(e=>{c.push(t.addGroupUsers(e,d))})),(0,h.default)(a=(0,g.default)(l)).call(a,(e=>{var a=l[e];(0,h.default)(a).call(a,(a=>{c.push(t.addProjectUser(e,d,a))}))})),yield v.default.all(c),t.isSubmitting=!1,u}))()}getUserProjects(){var e=this;return(0,S.default)((function*(){e.userProjects.update({isLoading:!0});var{user:{user:{id:t}}}=A.default,{projects:a}=yield e.client.projects.list(t);return e.userProjects.update({data:a,isLoading:!1}),a}))()}listDidFetch(e,t,a){var r=this;return(0,S.default)((function*(){if(!e.length)return e;var{withProjectRole:t=!0,withSystemRole:n=!0,projectId:i,roleId:l,domain_id:s}=a,o=t||n,u={};l&&(u["role.id"]=l),i&&(u["scope.project.id"]=i);var d=[t?r.roleAssignmentClient.list(u):null,n?r.roleAssignmentClient.list({"scope.system":"all"}):null,o?r.roleClient.list():null,t?r.projectClient.list():null,s?null:r.domainClient.list()],[c,f,p,h,g]=yield v.default.all(d),{roles:_=[]}=p||{},{domains:S=[]}=g||{},{role_assignments:x=[]}=c||{},{role_assignments:w=[]}=f||{},{projects:I=[]}=h||{},C=(0,y.default)(e).call(e,(e=>r.updateUser(e,x,w,_,I,S)));return i?(0,b.default)(C).call(C,(e=>!!e.projectCount)):l?(0,b.default)(C).call(C,(e=>{var{projectCount:t,systemRoles:a}=e;return!!t||!!(0,m.default)(a).call(a,(e=>e.id===l))})):C}))()}detailDidFetch(e){var t=this;return(0,S.default)((function*(){var{id:a}=e,r={"user.id":a,"scope.system":"all"},n=[t.roleAssignmentClient.list(r),t.roleClient.list(),t.domainClient.list()],[i,l,s]=yield v.default.all(n),{roles:o=[]}=l||{},{domains:u=[]}=s,{role_assignments:d=[]}=i||{};return t.updateUser(e,[],d,o,[],u)}))()}enable(e){var t=this;return(0,S.default)((function*(){var{id:a}=e;return t.submitting(t.client.patch(a,{user:{enabled:!0}}))}))()}forbidden(e){var t=this;return(0,S.default)((function*(){var{id:a}=e;return t.submitting(t.client.patch(a,{user:{enabled:!1}}))}))()}changePassword(e){var t=this;return(0,S.default)((function*(){var{id:a,password:r}=e,n={user:{password:r}};return t.submitting(t.client.patch(a,n))}))()}changePasswordUser(e){var t=this;return(0,S.default)((function*(){var{id:a,password:r,original_password:n}=e,i={user:{password:r,original_password:n}};return t.submitting(t.client.updatePassword(a,i))}))()}assignSystemRole(e){var t=this;return(0,S.default)((function*(){var{id:a,roleId:r}=e;return t.systemUserClient.roles.update(a,r)}))()}deleteSystemRole(e){var t=this;return(0,S.default)((function*(){var{id:a,roleId:r}=e;return t.systemUserClient.roles.delete(a,r)}))()}edit(e,t){var a=this;return(0,S.default)((function*(){var{email:r,phone:n,real_name:i,description:l,name:s}=t,o={user:{email:r,phone:n,real_name:i,description:l,name:s}};return a.submitting(a.client.patch(e,o))}))()}},p=(0,C.default)(f.prototype,"userProjects",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new D.default}}),(0,C.default)(f.prototype,"create",[k.action],(0,_.default)(f.prototype,"create"),f.prototype),(0,C.default)(f.prototype,"getUserProjects",[k.action],(0,_.default)(f.prototype,"getUserProjects"),f.prototype),(0,C.default)(f.prototype,"enable",[k.action],(0,_.default)(f.prototype,"enable"),f.prototype),(0,C.default)(f.prototype,"forbidden",[k.action],(0,_.default)(f.prototype,"forbidden"),f.prototype),(0,C.default)(f.prototype,"changePassword",[k.action],(0,_.default)(f.prototype,"changePassword"),f.prototype),(0,C.default)(f.prototype,"changePasswordUser",[k.action],(0,_.default)(f.prototype,"changePasswordUser"),f.prototype),(0,C.default)(f.prototype,"assignSystemRole",[k.action],(0,_.default)(f.prototype,"assignSystemRole"),f.prototype),(0,C.default)(f.prototype,"deleteSystemRole",[k.action],(0,_.default)(f.prototype,"deleteSystemRole"),f.prototype),(0,C.default)(f.prototype,"edit",[k.action],(0,_.default)(f.prototype,"edit"),f.prototype),f);t.UserStore=j;var F=new j;t.default=F},1129:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.getPortsAndReasons=function(e,a){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,h.default)(e).call(e,(e=>{var n=!0,i="",l=e.fixed_ip_address;if(S(l))if(e["router:external"])i=t("Is external network port"),n=!1;else if(e.floatingIP){var s;i=(0,m.default)(s="".concat(t("Is associate to floating ip: ")," ")).call(s,e.floatingIP),n=!1}else(0,g.default)(a).call(a,(t=>t.subnet_id===e.subnet_id))<0&&(i="".concat(r?t("It is unreachable for this floating ip."):t("It is unreachable for all floating ips.")),n=!1);else i="".concat(t("It is IPv6 type.")),n=!1;return _(_({},e),{},{key:l,name:l,available:n,reason:i})}))},a.getPortFormItem=function(e){var{portFixedIPs:a,fixedIpLoading:r}=this.state;return[_(_({name:"virtual_adapter",label:t("Virtual Adapter"),type:"select-table",required:!0,rowKey:"id",backendPageStore:this.portStore,disabledFunc:this.portsDisableFunc,onChange:this.handlePortSelect,extraParams:{device_owner:e,project_id:this.currentProjectId},isMulti:!1},C),{},{filterParams:[{label:t("Name"),name:"name"},{label:t("Fixed IP"),name:"fixedIP"}],columns:[{title:t("ID/Name"),dataIndex:"name",routeName:this.getRouteName("virtualAdapterDetail")},{title:t("Description"),dataIndex:"description",sorter:!1},{title:t("Fixed IPs"),dataIndex:"fixed_ips",sorter:!1,render:e=>v.default.createElement(v.default.Fragment,null,(0,h.default)(e).call(e,((e,t)=>v.default.createElement("div",{key:"ip_address_".concat(t)},e.ip_address))))},{title:t("Status"),dataIndex:"status",render:e=>x[e]||e},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime",isHideable:!0,sorter:!1}]}),{name:"fixed_ip_address",label:t("Fixed IP"),type:"select-table",rowKey:"fixed_ip_address",required:!0,data:a,isLoading:r,isMulti:!1,filterParams:[{label:t("Ip Address"),name:"name"}],columns:[{title:t("Ip Address"),dataIndex:"name"},{title:t("Subnet ID"),dataIndex:"subnet_id"},{title:t("Reason"),dataIndex:"reason"}],disabledFunc:e=>!e.available}]},a.portFilters=a.portColumns=a.portSortProps=a.bindingTypes=a.portState=a.portStatus=void 0;var p=f(r(37)),h=f(r(62)),m=f(r(82)),g=f(r(1194)),v=f(r(0)),y=r(514);function b(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=b(Object(r),!0)).call(a,(function(t){(0,p.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=b(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}var{isIPv4:S}=y.ipValidate,x={ACTIVE:t("Active"),BUILD:t("Build"),DOWN:t("Down"),ERROR:t("Error")};a.portStatus=x;var w={UP:t("Up"),DOWN:t("Down")};a.portState=w;var I={normal:t("Normal"),direct:t("Direct"),macvtap:t("MacVTap")};a.bindingTypes=I;var C={isSortByBack:!0,defaultSortKey:"status",defaultSortOrder:"descend"};a.portSortProps=C;var k=[{title:t("ID/Name"),dataIndex:"name",sorter:!1,render:(e,t)=>v.default.createElement("div",null,v.default.createElement("div",null,t.id),v.default.createElement("div",null,e||"-"))},{title:t("Owned Network"),dataIndex:"network_name",isLink:!0,idKey:"network_id",sorter:!1},{title:t("IPv4 Address"),dataIndex:"ipv4",render:e=>(0,h.default)(e).call(e,(e=>v.default.createElement("div",{key:e},e))),sorter:!1},{title:t("IPv6 Address"),dataIndex:"ipv6",render:e=>(0,h.default)(e).call(e,(e=>v.default.createElement("div",{key:e},e))),sorter:!1},{title:t("Mac Address"),dataIndex:"mac_address",sorter:!1},{title:t("Status"),dataIndex:"status",render:e=>x[e]||e,sorter:!1}];a.portColumns=k;var D=[{label:t("Name"),name:"name"}];a.portFilters=D},1130:function(e,t,a){"use strict";var r=a(19),n=a(21);r(t,"__esModule",{value:!0}),t.default=t.BaseLayout=void 0;var i=a(0),l=a(382),s=n(a(389));class o extends i.Component{constructor(e){super(e),this.routes=e.route.routes}render(){var{isAdminPage:e,sliderCollapsed:t}=this.props,a={isAdminPage:e,sliderCollapsed:t};return(0,s.default)(this.routes,a)}}t.BaseLayout=o;var u=(0,l.inject)("rootStore")((0,l.observer)(o));t.default=u},1131:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.getFlavorArchInfo=a.isBareMetalFlavor=a.isBareMetal=a.getFamilyItemValue=a.getAllArchitecture=a.gpuColumns=a.cpuArchColumn=a.extraColumns=a.getBaseColumns=a.isComputeOptimized=a.isGpuVisual=a.isGpuCategory=a.categoryHasEphemeral=a.categoryHasIOPS=a.hasEphemeralTypes=a.hasIOPSTypes=a.flavorCategoryList=a.bareMetalCategoryList=a.heterogeneousCategoryList=a.armCategoryList=a.ironicCategoryList=a.x86CategoryList=a.flavorArchitectures=a.pageTypeMap=a.pageTypeList=a.cpuThreadPolicyMap=a.cpuThreadPolicyList=a.cpuPolicyList=void 0;var p=f(r(91)),h=f(r(101)),m=f(r(28)),g=f(r(82)),v=f(r(37)),y=r(135);function b(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=b(Object(r),!0)).call(a,(function(t){(0,v.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=b(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}var S={dedicated:t("Dedicated"),shared:t("Shared")};a.cpuPolicyList=S;var x=[{label:t("Prefer(Thread siblings are preferred)"),value:"prefer"},{label:t("Isolate(No multithreading)"),value:"isolate"},{label:t("Require(Need multithreading)"),value:"require"}];a.cpuThreadPolicyList=x;var w={prefer:t("Prefer"),isolate:t("Isolate"),require:t("Require")};a.cpuThreadPolicyMap=w;var I=[{label:t("Large(Optimal performance)"),value:"large"},{label:t("Small(Not recommended)"),value:"small"},{label:t("Any(Random)"),value:"any"},{label:t("Custom"),value:"custom"}];a.pageTypeList=I;var C={large:t("Large"),small:t("Small"),any:t("Any")};a.pageTypeMap=C;var k={x86_architecture:t("X86 Architecture"),heterogeneous_computing:t("Heterogeneous Computing"),bare_metal:t("Bare Metal"),arm_architecture:t("ARM Architecture"),custom:t("Custom"),all:t("All Flavors")};a.flavorArchitectures=k;var D={general_purpose:t("General Purpose"),compute_optimized:t("Compute Optimized"),memory_optimized:t("Memory Optimized"),big_data:t("Big Data"),local_ssd:t("Local SSD"),high_clock_speed:t("High Clock Speed")};a.x86CategoryList=D;var T={general_purpose:t("General Purpose")};a.ironicCategoryList=T;var A=D;a.armCategoryList=A;var P={compute_optimized_type_with_gpu:t("Compute Optimized Type with GPU"),visualization_compute_optimized_type_with_gpu:t("Visualization Compute Optimized Type with GPU"),compute_optimized_type:t("Compute Optimized Type")};a.heterogeneousCategoryList=P;var M={general_purpose:t("General Purpose")};a.bareMetalCategoryList=M;var E=_(_({},D),P);a.flavorCategoryList=E;var N=["general_purpose","compute_optimized","memory_optimized","high_clock_speed","compute_optimized_type_with_gpu","visualization_compute_optimized_type_with_gpu","compute_optimized_type"];a.hasIOPSTypes=N;var R=["big_data","local_ssd","compute_optimized_type_with_gpu"];a.hasEphemeralTypes=R;a.categoryHasIOPS=e=>e&&(0,p.default)(N).call(N,e)>=0;a.categoryHasEphemeral=e=>e&&(0,p.default)(R).call(R,e)>=0;a.isGpuCategory=e=>e&&(0,p.default)(e).call(e,"_gpu")>=0;a.isGpuVisual=e=>"visualization_compute_optimized_type_with_gpu"===e;a.isComputeOptimized=e=>"compute_optimized_type"===e;a.getBaseColumns=e=>[{title:t("ID/Name"),dataIndex:"name",routeName:e?e.getRouteName("flavorDetail"):""},{title:t("Category"),dataIndex:"category",render:e=>E[e]||e},{title:t("CPU"),dataIndex:"vcpus",isHideable:!0},{title:t("Memory"),dataIndex:"ram",isHideable:!0,render:e=>(0,y.formatSize)(e,2)},{title:t("Internal Network Bandwidth(Gbps)"),dataIndex:"quota:vif_outbound_average",isHideable:!0,width:120,render:e=>e?e/1e3/125:"-"},{title:t("Ephemeral Disk(GiB)"),dataIndex:"OS-FLV-EXT-DATA:ephemeral",isHideable:!0},{title:t("Storage IOPS"),dataIndex:"quota:disk_total_iops_sec",isHideable:!0,render:e=>e||"-"}];var j=[{title:t("Public"),dataIndex:"is_public",isHideable:!0,valueRender:"yesNo"}];a.extraColumns=j;var F={title:t("CPU Arch"),dataIndex:"cpu_arch",isHideable:!0};a.cpuArchColumn=F;var L=[{title:t("GPU Type"),dataIndex:"gpuType",isHideable:!0},{title:t("GPU Count"),dataIndex:"gpuCount",isHideable:!0},{title:t("NUMA Nodes"),dataIndex:"hw:numa_nodes",isHideable:!0},{title:t("CPU Policy"),dataIndex:"hw:cpu_policy",isHideable:!0,render:e=>S[e]||"-"},{title:t("CPU Thread Policy"),dataIndex:"hw:cpu_thread_policy",isHideable:!0,render:e=>w[e]||"-"},{title:t("Memory Page"),dataIndex:"hw:mem_page_size",isHideable:!0,render:e=>C[e]||"-"}];a.gpuColumns=L;a.getAllArchitecture=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=[];try{var r,n,i=(0,h.default)(r=e||[]).call(r,(e=>"flavor_families"===e.key));(0,m.default)(n=i&&i.value||[]).call(n,(e=>{e.architecture&&a.push(e.architecture)}))}catch(e){}return t&&a.push("custom"),a};a.getFamilyItemValue=e=>{var t,a=(0,h.default)(t=e||[]).call(t,(e=>"flavor_families"===e.key));return a?a.value:[]};var O=e=>"bare_metal"===e;a.isBareMetal=O;a.isBareMetalFlavor=e=>{var{extra_specs:t={}}=e.originData||e||{};return O(t[":architecture"])||"required"===t["trait:CUSTOM_GOLD"]};a.getFlavorArchInfo=e=>{var t,{architecture:a="",category:r=""}=e||{};return a?"custom"===a?k[a]:(0,g.default)(t="".concat(k[a]||a," - ")).call(t,E[r]||r):"-"}},1132:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(156),p=r(21);c(a,"__esModule",{value:!0}),a.default=void 0,r(1117);var h=p(r(1118)),m=p(r(1436));r(1115);var g=p(r(1116));r(1124);var v=p(r(1125)),y=p(r(37)),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=S(t);if(a&&a.has(e))return a.get(e);var r={},n=c&&s;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=n?s(e,i):null;l&&(l.get||l.set)?c(r,i,l):r[i]=e[i]}r.default=e,a&&a.set(e,r);return r}(r(0)),_=(r(167),p(r(16)));r(513);function S(e){if("function"!=typeof f)return null;var t=new f,a=new f;return(S=function(e){return e?a:t})(e)}function x(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=x(Object(r),!0)).call(a,(function(t){(0,y.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=x(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}class I extends b.Component{constructor(e){super(e),(0,y.default)(this,"onChange",(e=>{var{onChange:t}=this.props;t&&t(e)})),(0,y.default)(this,"onKeyChange",(e=>{this.onChange(w(w({},this.state),{},{key:e.target.value}))})),(0,y.default)(this,"onValueChange",(e=>{this.onChange(w(w({},this.state),{},{value:e.target.value}))})),this.state={key:"",value:""}}static getDerivedStateFromProps(e,t){var{key:a,value:r}=e.value||{};return a!==t.key||r!==t.value?{key:a,value:r}:null}render(){var{key:e,value:a}=this.state,{keyReadonly:r,valueReadonly:n,keySpan:i,valueSpan:l}=this.props;return b.default.createElement(h.default,null,b.default.createElement(g.default,{span:i||4},b.default.createElement(v.default,{value:e,placeholder:t["Please input key"],onChange:this.onKeyChange,readOnly:r,required:!0})),b.default.createElement(g.default,{span:1,style:{textAlign:"center",lineHeight:"30px"}},b.default.createElement(m.default,{rotate:90})),b.default.createElement(g.default,{span:l||8},b.default.createElement(v.default,{value:a,placeholder:t["Please input key"],onChange:this.onValueChange,readOnly:n,required:!0})))}}a.default=I,(0,y.default)(I,"propTypes",{onChange:_.default.func,value:_.default.object,keyReadonly:_.default.bool,valueReadonly:_.default.bool,keySpan:_.default.number,valueSpan:_.default.number}),(0,y.default)(I,"defaultProps",{onChange:null,value:{key:"",value:""},keyReadonly:!1,valueReadonly:!1})},1137:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.getRoutersWithIDAndExtInfo=T,a.getLinkedRouterIdsByFip=function(e,t){return P.apply(this,arguments)},a.getCanReachSubnetIdsWithRouterId=M,a.getCanReachSubnetIdsWithRouterIdInComponent=function(e){return N.apply(this,arguments)},a.getRouterSelectTablePropsBackend=a.routerSortProps=a.routerFilters=a.getRouterColumns=a.getRouterState=a.routerState=a.routerStatus=void 0;var p=f(r(52)),h=f(r(37)),m=f(r(62)),g=f(r(33)),v=f(r(0)),y=f(r(526)),b=r(1151),_=r(135);function S(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=S(Object(r),!0)).call(a,(function(t){(0,h.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=S(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}var w={ACTIVE:t("Active"),ERROR:t("Error")};a.routerStatus=w;var I={UP:t("Up"),DOWN:t("Down")};a.routerState=I;a.getRouterState=e=>e?t("Up"):t("Down");var C=e=>[{title:t("ID/Name"),dataIndex:"name",routeName:e.getRouteName("routerDetail")},{title:t("Project ID/Name"),dataIndex:"project_name",isHideable:!0,hidden:!e.isAdminPage,sortKey:"project_id"},{title:t("Status"),dataIndex:"status",render:e=>w[e]||"-"},{title:t("Open External Gateway"),dataIndex:"hasExternalGateway",valueRender:"yesNo",isHideable:!0,sorter:!1},{title:t("External Network"),dataIndex:"externalNetworkId",isHideable:!0,sorter:!1,render:t=>e.getLinkRender("networkDetail",t,{id:t})},{title:t("External Fixed IP"),dataIndex:"externalFixedIps",isHideable:!0,sorter:!1,render:e=>(0,m.default)(e).call(e,(e=>v.default.createElement("div",{key:e.ip_address},e.ip_address)))||"-",stringify:e=>(0,m.default)(e).call(e,(e=>e.ip_address)).join(",")||"-"},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime",isHideable:!0,sorter:!1}];a.getRouterColumns=C;var k=[{label:t("Name"),name:"name"},{label:t("Status"),name:"status",options:(0,_.getOptions)(w)}];a.routerFilters=k;var D={isSortByBack:!0,defaultSortKey:"status",defaultSortOrder:"descend"};a.routerSortProps=D;function T(e){return A.apply(this,arguments)}function A(){return(A=(0,p.default)((function*(e){var t={fields:["id","external_gateway_info"],project_id:e};return yield y.default.pureFetchList(t)}))).apply(this,arguments)}function P(){return(P=(0,p.default)((function*(e,t){var a,r=yield T(e);return(0,m.default)(a=(0,g.default)(r).call(r,(e=>e.external_gateway_info&&e.external_gateway_info.network_id===t.floating_network_id))).call(a,(e=>e.id))}))).apply(this,arguments)}function M(e,t){return E.apply(this,arguments)}function E(){return(E=(0,p.default)((function*(e,t){var a=yield T(e);t&&(a=(0,g.default)(a).call(a,t));var r=yield(0,b.getPortsWithFixedIPs)();return{canReachSubnetIdsWithRouterId:(0,b.getSubnetToRouter)(r,a),routerIdWithExternalNetworkInfo:a}}))).apply(this,arguments)}function N(){return(N=(0,p.default)((function*(e){var{canReachSubnetIdsWithRouterId:t,routerIdWithExternalNetworkInfo:a}=yield M(this.currentProjectId,e);return this.setState({canReachSubnetIdsWithRouterId:t,routerIdWithExternalNetworkInfo:a}),t}))).apply(this,arguments)}a.getRouterSelectTablePropsBackend=e=>x(x({},D),{},{columns:C(e),filterParams:k})},1141:function(e,t,a){"use strict";var r=a(35),n=a(44),i=a(33),l=a(25),s=a(28),o=a(45),u=a(46),d=a(19),c=a(21);d(t,"__esModule",{value:!0}),t.default=t.FlavorStore=void 0;var f,p,h=c(a(219)),m=c(a(33)),g=c(a(65)),v=c(a(62)),y=c(a(28)),b=c(a(25)),_=c(a(52)),S=c(a(71)),x=c(a(72)),w=c(a(37)),I=c(a(55)),C=(c(a(73)),a(32)),k=c(a(49)),D=c(a(54));function T(e,t){var a=r(e);if(n){var s=n(e);t&&(s=i(s).call(s,(function(t){return l(e,t).enumerable}))),a.push.apply(a,s)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=T(Object(r),!0)).call(a,(function(t){(0,w.default)(e,t,r[t])}));else if(o)u(e,o(r));else{var n;s(n=T(Object(r))).call(n,(function(t){d(e,t,l(r,t))}))}}return e}var P=(f=class extends D.default{constructor(){super(...arguments),(0,x.default)(this,"access",p,this),(0,w.default)(this,"getGpuInfo",(e=>{var{extra_specs:t={}}=e||{},a=t["pci_passthrough:alias"],r=t["resources:VGPU"],n=t[":category"],i="-",l="-",s="-",o="-";if(r&&(i="vgpu",l=r),a)if(n&&!(0,h.default)(n).call(n,"visualization_")){var u=a.split(",")[0],d=a.split(",")[1];i=u.split(":")[0],l=u.split(":")[1],d&&(s=d.split(":")[0],o=d.split(":")[1])}else{var c=a.split(",")[0];s=c.split(":")[0],o=c.split(":")[1]}return{gpuType:i,gpuCount:l,usbType:s,usbCount:o}}))}get listWithDetail(){return!0}get client(){return k.default.nova.flavors}get mapperBeforeFetchProject(){return e=>{var{extra_specs:{key:t}={}}=e,a=(0,S.default)(e.extra_specs,["key"]),r=(0,S.default)(e,["extra_specs"]),n=this.getGpuInfo(e);return A(A(A(A({},r),a),{},{architecture:a[":architecture"]||"custom",category:a[":category"]},n),{},{is_public:r["os-flavor-access:is_public"],originData:e})}}get paramsFunc(){return e=>{var{all_projects:t,name:a}=e,r=(0,S.default)(e,["all_projects","name"]);return t?A(A({},r),{},{is_public:"None"}):A({name:a},r)}}listDidFetch(e,t,a){return(0,_.default)((function*(){var{tab:t}=a;return t?(0,m.default)(e).call(e,(e=>e.architecture===t)):e}))()}fetchAccess(e){var t=this;return(0,_.default)((function*(){var a=yield t.client.access.list(e);t.access=a.flavor_access}))()}create(e,t,a){var r=this;return(0,_.default)((function*(){var n={};n[r.responseKey]=e,r.isSubmitting=!0;var i=yield r.client.create(n),{id:l}=i.flavor,s={extra_specs:t};return a&&a.length>0&&(yield g.default.all((0,v.default)(a).call(a,(e=>{var t={addTenantAccess:{tenant:e}};return r.client.action(l,t)})))),r.submitting(r.client.extraSpecs.create(l,s))}))()}updateAccess(e,t,a){var r=this;return(0,_.default)((function*(){return r.isSubmitting=!0,yield g.default.all((0,v.default)(t).call(t,(t=>{var a={addTenantAccess:{tenant:t}};return r.client.action(e,a)}))),r.submitting(g.default.all((0,v.default)(a).call(a,(t=>{var a={removeTenantAccess:{tenant:t}};return r.client.action(e,a)}))))}))()}createExtraSpecs(e,t){var a=this;return(0,_.default)((function*(){var r={extra_specs:t};return a.submitting(a.client.extraSpecs.create(e,r))}))()}deleteExtraSpecs(e,t){var a=this;return(0,_.default)((function*(){return a.submitting(a.client.extraSpecs.delete(e,t))}))()}putExtraSpecs(e,t,a){var r=this;return(0,_.default)((function*(){return r.submitting(r.client.extraSpecs.update(e,t,a))}))()}updateExtraSpecs(e){var t=arguments,a=this;return(0,_.default)((function*(){var r=t.length>1&&void 0!==t[1]?t[1]:[],n=t.length>2&&void 0!==t[2]?t[2]:[],i=t.length>3&&void 0!==t[3]?t[3]:[];if(r.length>0){var l={};(0,y.default)(r).call(r,(e=>{l[e.key]=e.value})),yield a.createExtraSpecs(e,l)}return n.length>0&&(yield g.default.all((0,v.default)(n).call(n,(t=>a.putExtraSpecs(e,t.key,{[t.key]:t.value}))))),i.length>0&&(yield g.default.all((0,v.default)(i).call(i,(t=>a.deleteExtraSpecs(e,t))))),g.default.resolve()}))()}},p=(0,I.default)(f.prototype,"access",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,I.default)(f.prototype,"fetchAccess",[C.action],(0,b.default)(f.prototype,"fetchAccess"),f.prototype),(0,I.default)(f.prototype,"create",[C.action],(0,b.default)(f.prototype,"create"),f.prototype),(0,I.default)(f.prototype,"updateAccess",[C.action],(0,b.default)(f.prototype,"updateAccess"),f.prototype),(0,I.default)(f.prototype,"createExtraSpecs",[C.action],(0,b.default)(f.prototype,"createExtraSpecs"),f.prototype),(0,I.default)(f.prototype,"deleteExtraSpecs",[C.action],(0,b.default)(f.prototype,"deleteExtraSpecs"),f.prototype),(0,I.default)(f.prototype,"putExtraSpecs",[C.action],(0,b.default)(f.prototype,"putExtraSpecs"),f.prototype),(0,I.default)(f.prototype,"updateExtraSpecs",[C.action],(0,b.default)(f.prototype,"updateExtraSpecs"),f.prototype),f);t.FlavorStore=P;var M=new P;t.default=M},1145:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=void 0;var l=i(r(221)),s=i(r(82));r(1580);var o=i(r(589)),u=i(r(554)),d=i(r(558)),c=i(r(557)),f=i(r(550)),p=i(r(0)),h=(r(167),i(r(16))),m=(r(513),i(r(1234))),g=i(r(1350)),v=i(r(136)),y=r(135),b=r(1602),_=r(47),S=i(r(1603)),x=e=>{var{title:a=t("Error"),type:r="error",description:n="",onClose:i,top:l=48}=e,s="#F5222D",h=null;"info"===r?(s="#0068FF",h=p.default.createElement(f.default,{theme:"filled",style:{color:s}})):"success"===r?(s="#57E39B",h=p.default.createElement(c.default,{theme:"filled",style:{color:s}})):"error"===r?(s="#EB354D",h=p.default.createElement(d.default,{theme:"filled",style:{color:s}})):"process"===r?(s="#0068FF",h=p.default.createElement(u.default,{style:{color:s}})):"warn"===r&&(s="#FEDF40",h=p.default.createElement(f.default,{theme:"filled",style:{color:s}}));var m="error"===r||"warn"===r?0:4.5;o.default.open({message:(0,y.unescapeHtml)(a),duration:m,icon:h,description:(0,y.unescapeHtml)(n),className:S.default.notify,onClose:i,top:l,style:{whiteSpace:"pre-line"}})};x.propTypes={title:h.default.string,type:h.default.string,description:h.default.string};var w=(e,t)=>{v.default.addNoticeCount(),x({title:e,description:t,type:"error",onClose:()=>{v.default.removeNoticeCount()}})},I={open:x,success:(e,t)=>{x({title:e,description:t,type:"success"})},error:w,warn:(e,t)=>{x({title:e,description:t,type:"warn"})},info:(e,t)=>{x({title:e,description:t,type:"info"})},process:(e,t)=>{x({title:e,description:t,type:"process"})},errorWithDetail:(e,a)=>{var r,{status:n,message:i}=e||{},o=a;if(n&&(0,l.default)(n,10)>=500)if((0,_.isEmpty)(i)||b.statusMap[n])o+=b.statusMap[n];else{var u,d;if((0,_.isString)(i))o+=(0,s.default)(d="".concat(t("message"))).call(d,t("."));else if(i.reason){var c;o+=(0,s.default)(c="".concat(t("message.reason"))).call(c,t("."))}o+=(0,s.default)(u="".concat(t("Status Code"),": ")).call(u,n)}else r=e?p.default.createElement(g.default,{style:{float:"right"},buttonType:"link",buttonText:t("Click to show detail"),component:p.default.createElement(m.default,{className:S.default["code-editor"],value:e,mode:"json",options:{readOnly:!0}})}):"";w(o,r)}};a.default=I},1151:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.getSubnetToRouter=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];return(0,s.default)(e).call(e,(e=>{(0,s.default)(e).call(e,(e=>{var n,i=(0,o.default)(t).call(t,(t=>!(a&&!t.external_gateway_info)&&t.id===e.device_id));i&&i.id===e.device_id&&(0,s.default)(n=e.fixed_ips).call(n,(t=>{r.push({subnet_id:t.subnet_id,router_id:e.device_id})}))}))})),r},a.getPortsWithFixedIPs=function(){return w.apply(this,arguments)},a.getInterfaceWithReason=function(e){return I.apply(this,arguments)},a.saveAndBuildPromisesFromInterfaces=C,a.getReasonForExternalNetworkPortOrAlreadyBindFip=D,a.getFipsFromRouterId=A,a.handleFixedIPChange=function(e){return M.apply(this,arguments)},a.getFIPFormItemForAssociate=a.disableFIPAssociate=a.getFIPFormItemExtra=a.getFixedIPFormItemForAssociate=a.transitionStatuses=a.resourceType=a.floatingIpStatus=void 0;var l=i(r(52)),s=i(r(28)),o=i(r(101)),u=i(r(65)),d=i(r(62)),c=i(r(320)),f=i(r(219)),p=i(r(33)),h=i(r(1252)),m=i(r(529)),g=i(r(321)),v=r(514),y=i(r(323)),b=r(1257),{isIPv4:_}=v.ipValidate,S={AVAILABLE:t("Available"),PENDING:t("Pending"),ACTIVE:t("Active"),ERROR:t("Error"),DOWN:t("Down")};a.floatingIpStatus=S;var x={compute:t("Instance"),Octavia:t("Load Balancer"),"network:router_gateway":t("Router"),database:t("Database Instance"),null:"-"};a.resourceType=x;function w(){return(w=(0,l.default)((function*(){var e=["network:router_interface_distributed","network:router_interface","network:ha_router_replicated_interface"];return yield u.default.all((0,d.default)(e).call(e,(e=>m.default.pureFetchList({device_owner:e,fields:["fixed_ips","device_id"]}))))}))).apply(this,arguments)}function I(){return(I=(0,l.default)((function*(e){var[t,a,r]=yield C(e);return yield D(t,a,r)}))).apply(this,arguments)}function C(e){return k.apply(this,arguments)}function k(){return(k=(0,l.default)((function*(e){var t=[],a=[],r=[];return(0,s.default)(e).call(e,(e=>{var n,i=e.port_id||e.id,l=e.mac_addr||e.mac_address||"",o=e.net_id||e.network_id;(0,s.default)(n=e.fixed_ips).call(n,(e=>{r.push({port_id:i,fixed_ip_address:e.ip_address,mac_address:l,subnet_id:e.subnet_id,network_id:o}),t.push(g.default.fetchDetail({id:o})),_(e.ip_address)?a.push(y.default.pureFetchList({fixed_ip_address:e.ip_address})):a.push(u.default.resolve([]))}))})),[r,t,a]}))).apply(this,arguments)}function D(e,t,a){return T.apply(this,arguments)}function T(){return(T=(0,l.default)((function*(e,t,a){var r=[...e],n=yield u.default.all(t);(0,s.default)(n).call(n,((e,t)=>{r[t].network_name=e.name}));var i=yield g.default.pureFetchList({"router:external":!0});(0,s.default)(r).call(r,(e=>{(0,c.default)(i).call(i,(t=>{var a;return(0,f.default)(a=t.subnets).call(a,e.subnet_id)}))?e["router:external"]=!0:e["router:external"]=!1}));var l=yield u.default.all(a);return(0,s.default)(l).call(l,((e,t)=>{r[t].floatingIP=e[0]&&e[0].port_id===r[t].port_id&&e[0].floating_ip_address||""})),r}))).apply(this,arguments)}function A(e){return P.apply(this,arguments)}function P(){return(P=(0,l.default)((function*(e){var t,{routerIdWithExternalNetworkInfo:a}=this.state,r=(0,o.default)(a).call(a,(t=>t.id===e.router_id));if(!r.external_gateway_info)return[];var n=r.external_gateway_info.network_id,i=yield y.default.pureFetchList({floating_network_id:n,status:"DOWN",project_id:this.currentProjectId}),l=yield g.default.fetchDetail({id:n});return(0,d.default)(t=(0,p.default)(i).call(i,(e=>!e.fixed_ip_address&&!e.port_details))).call(t,(e=>(e.network_name=l.name,e.name=e.floating_ip_address,e)))}))).apply(this,arguments)}function M(){return(M=(0,l.default)((function*(e){this.setState({fipLoading:!0});var{canReachSubnetIdsWithRouterId:t}=this.state;e.selectedRows.length||this.setState({fixed_ip:null,canAssociateFloatingIPs:[],fipLoading:!1});var a=e.selectedRows[0],r=[],n=(0,p.default)(t).call(t,(e=>e.subnet_id===a.subnet_id)),i=yield u.default.all((0,d.default)(n).call(n,(e=>A.call(this,e))));(0,s.default)(i).call(i,(e=>{r.push(...e)}));var l={};(0,s.default)(r).call(r,(e=>{l[e.id]=e}));var o=(0,h.default)(l);this.setState({fixed_ip:a,canAssociateFloatingIPs:o,fipLoading:!1})}))).apply(this,arguments)}a.transitionStatuses=["PENDING"];a.getFixedIPFormItemForAssociate=(e,a)=>{var{portLoading:r}=a.state;return{name:"fixed_ip",label:e,type:"select-table",required:!0,data:a.ports,isLoading:r,isMulti:!1,filterParams:[{label:t("Ip Address"),name:"name"}],columns:[{title:t("Ip Address"),dataIndex:"name"},{title:t("Mac Address"),dataIndex:"mac_address"},{title:t("Network"),dataIndex:"network_name"},{title:t("Subnet ID"),dataIndex:"subnet_id"},{title:t("Reason"),dataIndex:"reason"}],disabledFunc:e=>!e.available,onChange:a.handleFixedIPChange}};a.getFIPFormItemExtra=()=>(0,b.enablePFW)()?t("The floating IP configured with port forwarding rules cannot be bound"):"";a.disableFIPAssociate=e=>!!(e.port_forwardings||[]).length;a.getFIPFormItemForAssociate=e=>{var{canAssociateFloatingIPs:a,fipLoading:r}=e.state;return{name:"fip",label:t("Floating Ip Address"),type:"select-table",required:!0,data:a,isLoading:r,isMulti:!1,extra:e.getFIPFormItemExtra(),disabledFunc:e.disableFIPAssociate,filterParams:[{label:t("Floating Ip Address"),name:"name"}],columns:[{title:t("Floating Ip Address"),dataIndex:"name"},{title:t("Network"),dataIndex:"network_name"},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime"}]}}},1152:function(e,t,a){"use strict";var r=a(156),n=a(19),i=a(25),l=a(21);n(t,"__esModule",{value:!0}),t.default=void 0;var s=l(a(195)),o=l(a(101)),u=l(a(62));a(1178);var d=l(a(1179)),c=l(a(385)),f=l(a(37)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=_(t);if(a&&a.has(e))return a.get(e);var r={},l=n&&i;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=l?i(e,s):null;o&&(o.get||o.set)?n(r,s,o):r[s]=e[s]}r.default=e,a&&a.set(e,r);return r}(a(0)),h=a(327),m=l(a(4)),g=(a(167),a(135)),v=a(517),y=l(a(1215)),b=l(a(3506));function _(e){if("function"!=typeof r)return null;var t=new r,a=new r;return(_=function(e){return e?a:t})(e)}class S extends p.Component{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),(0,f.default)(this,"handleFetch",((e,t)=>{this.routing.query(e,t)})),(0,f.default)(this,"handleChangeTab",(e=>{this.handleFetch({tab:e},!0)})),this.options=t,this.state={},this.init()}get routing(){return this.props.rootStore.routing}get location(){return this.props.location||{}}get isAdminPage(){var{pathname:e}=this.location;return(0,g.isAdminPage)(e)}get hasAdminRole(){return this.props.rootStore.hasAdminRole}get endpoint(){return""}get checkEndpoint(){return!1}get name(){return""}get endpointError(){return this.checkEndpoint&&!this.endpoint}getRouteName(e){return this.isAdminPage?"".concat(e,"Admin"):e}getRoutePath(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getRouteName(e);return(0,v.getPath)({key:r,params:t,query:a})}getLinkRender(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getRouteName(e);return(0,v.getLinkRender)({key:n,params:a,query:r,value:t})}get tabs(){return[{title:"tab1",key:"tab1",component:null},{title:"tab2",key:"tab2",component:null}]}getTab(){var e,t=(0,h.parse)((0,s.default)(e=this.routing.location.search).call(e,1)),{tab:a}=t;return a}get tab(){var e;if(0===this.tabs.length)return null;var t=this.getTab();return(0,o.default)(e=this.tabs).call(e,(e=>e.key===t))||this.tabs[0]}init(){}renderTabComponent(e){var{component:t,key:a}=e;return t?p.default.createElement(e.component,(0,c.default)({},this.props,{tab:this.tab.key})):p.default.createElement("span",{key:a},a)}renderTab(e,t){return e!==t.key?p.default.createElement(d.default.TabPane,{tab:t.title,key:t.key}):p.default.createElement(d.default.TabPane,{tab:t.title,key:t.key},this.renderTabComponent(t))}renderTabs(){var e;if(!this.tab)return null;if(this.endpointError){var t=this.getRoutePath("overview");return p.default.createElement(y.default,{title:this.name,link:t,endpointError:!0})}var a=(0,u.default)(e=this.tabs).call(e,(e=>this.renderTab(this.tab.key,e)));return p.default.createElement("div",{className:(0,m.default)(b.default.wrapper,this.className)},p.default.createElement(d.default,{activeKey:this.tab.key,onChange:this.handleChangeTab},a))}render(){return this.renderTabs()}}t.default=S},1153:function(e,a,r){"use strict";r(19)(a,"__esModule",{value:!0}),a.projectTableOptions=a.projectColumns=a.projectFilter=void 0;var n=r(319),i=[{label:t("Project Name"),name:"name"},{label:t("Enabled"),name:"enabled",options:n.yesNoOptions}];a.projectFilter=i;var l=[{title:t("Project Name"),dataIndex:"name"},{title:t("User Num"),dataIndex:"userCount"},{title:t("Enabled"),dataIndex:"enabled",valueRender:"yesNo"},{title:t("description"),dataIndex:"description",isHideable:!0}];a.projectColumns=l;var s={filterParams:i,columns:l};a.projectTableOptions=s},1156:function(e,t,a){"use strict";var r=a(35),n=a(44),i=a(33),l=a(25),s=a(28),o=a(45),u=a(46),d=a(19),c=a(21);d(t,"__esModule",{value:!0}),t.default=t.GroupStore=void 0;var f,p,h,m,g=c(a(28)),v=c(a(101)),y=c(a(35)),b=c(a(65)),_=c(a(33)),S=c(a(62)),x=c(a(25)),w=c(a(52)),I=c(a(71)),C=c(a(72)),k=c(a(37)),D=c(a(55)),T=(c(a(73)),a(32)),A=c(a(49)),P=c(a(54));function M(e,t){var a=r(e);if(n){var s=n(e);t&&(s=i(s).call(s,(function(t){return l(e,t).enumerable}))),a.push.apply(a,s)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=M(Object(r),!0)).call(a,(function(t){(0,k.default)(e,t,r[t])}));else if(o)u(e,o(r));else{var n;s(n=M(Object(r))).call(n,(function(t){d(e,t,l(r,t))}))}}return e}var N=(f=class extends P.default{constructor(){super(...arguments),(0,C.default)(this,"systemRoles",p,this),(0,C.default)(this,"domainRoles",h,this),(0,C.default)(this,"groupUsers",m,this),(0,k.default)(this,"updateUserGroup",((e,t,a,r,n)=>{var i={},{id:l}=e||{};(0,g.default)(t).call(t,(e=>{var{scope:{project:{id:t}={}}={},group:{id:r}={},role:{id:s}={}}=e;if(r===l&&s){var o=(0,v.default)(a).call(a,(e=>e.id===s));if(t)if(i[t])i[t].roles=[...i[t].roles,o];else{var u=(0,v.default)(n).call(n,(e=>e.id===t));i[t]={project:u,roles:[o]}}}}));var s=(0,v.default)(r).call(r,(t=>t.id===e.domain_id));return E(E({},e),{},{projects:i,projectCount:(0,y.default)(i).length,domain:s,domainName:(s||{}).name||e.domain_id})}))}get client(){return A.default.keystone.groups}get domainClient(){return A.default.keystone.domains}get systemGroupClient(){return A.default.keystone.systemGroups}get roleClient(){return A.default.keystone.roles}get roleAssignmentClient(){return A.default.keystone.roleAssignments}get userClient(){return A.default.keystone.users}get projectClient(){return A.default.keystone.projects}get paramsFunc(){return e=>{var{id:t,userId:a,groupId:r,roleId:n,projectId:i,domainId:l,withRole:s,all_projects:o}=e;return(0,I.default)(e,["id","userId","groupId","roleId","projectId","domainId","withRole","all_projects"])}}listFetchByClient(e,t){var{userId:a}=t;return a?this.userClient.groups.list(a,e):this.client.list(e)}edit(e){var t=this;return(0,w.default)((function*(){var{id:a,description:r,name:n}=e,i={group:{description:r,name:n}};return t.submitting(t.client.patch(a,i))}))()}fetchSystemRole(e){var t=this;return(0,w.default)((function*(){var{id:a}=e;t.systemRoles=[];var r=yield t.systemGroupClient.roles.list(a);t.systemRoles=r.roles}))()}assignSystemRole(e){var t=this;return(0,w.default)((function*(){var{id:a,roleId:r}=e;return t.systemGroupClient.roles.update(a,r)}))()}deleteSystemRole(e){var t=this;return(0,w.default)((function*(){var{id:a,roleId:r}=e;return t.systemGroupClient.roles.delete(a,r)}))()}fetchDomainRole(e){var t=this;return(0,w.default)((function*(){var{id:a,domain_id:r}=e;t.domainRoles=[];var n=yield t.domainClient.groups.roles.list(r,a);t.domainRoles=n.roles}))()}assignDomainRole(e){var t=this;return(0,w.default)((function*(){var{id:a,roleId:r,domain_id:n}=e;return t.domainClient.groups.roles.update(n,a,r)}))()}deleteDomainRole(e){var t=this;return(0,w.default)((function*(){var{id:a,roleId:r,domain_id:n}=e;return t.domainClient.groups.roles.delete(n,a,r)}))()}fetchGroupUsers(e){var t=this;return(0,w.default)((function*(){var{id:a}=e,r=yield t.client.users.list(a),{users:n}=r;return t.groupUsers=n,n}))()}deleteGroupUsers(e){var t=this;return(0,w.default)((function*(){var{id:a,userId:r}=e;return t.client.users.delete(a,r)}))()}addGroupUsers(e){var t=this;return(0,w.default)((function*(){var{id:a,userId:r}=e;return t.client.users.update(a,r)}))()}listDidFetch(e,t,a){var r=this;return(0,w.default)((function*(){if(!e.length)return e;var{projectId:t,roleId:n,domainId:i,withRole:l=!0}=a,s={};t&&(s["scope.project.id"]=t),n&&(s["role.id"]=n);var[o,u,d,c]=yield b.default.all([l?r.roleAssignmentClient.list(s):null,l?r.roleClient.list():null,r.domainClient.list(),l?r.projectClient.list():null]),{roles:f=[]}=u||{},{domains:p=[]}=d,{projects:h=[]}=c||{},{role_assignments:m=[]}=o||{},g=e;return i&&(g=(0,_.default)(e).call(e,(e=>e.domain_id===i))),g=(0,S.default)(g).call(g,(e=>r.updateUserGroup(e,m,f,p,h))),t||n?(0,_.default)(g).call(g,(e=>e.projectCount)):g}))()}detailDidFetch(e){var t=this;return(0,w.default)((function*(){var{id:a}=e,[r,n]=yield b.default.all([t.domainClient.list(),t.client.users.list(a)]),{domains:i=[]}=r,{users:l=[]}=n,s=t.updateUserGroup(e,[],[],i,[]);return s.userCount=l.length,s}))()}},p=(0,D.default)(f.prototype,"systemRoles",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=(0,D.default)(f.prototype,"domainRoles",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=(0,D.default)(f.prototype,"groupUsers",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,D.default)(f.prototype,"edit",[T.action],(0,x.default)(f.prototype,"edit"),f.prototype),(0,D.default)(f.prototype,"fetchSystemRole",[T.action],(0,x.default)(f.prototype,"fetchSystemRole"),f.prototype),(0,D.default)(f.prototype,"assignSystemRole",[T.action],(0,x.default)(f.prototype,"assignSystemRole"),f.prototype),(0,D.default)(f.prototype,"deleteSystemRole",[T.action],(0,x.default)(f.prototype,"deleteSystemRole"),f.prototype),(0,D.default)(f.prototype,"fetchDomainRole",[T.action],(0,x.default)(f.prototype,"fetchDomainRole"),f.prototype),(0,D.default)(f.prototype,"assignDomainRole",[T.action],(0,x.default)(f.prototype,"assignDomainRole"),f.prototype),(0,D.default)(f.prototype,"deleteDomainRole",[T.action],(0,x.default)(f.prototype,"deleteDomainRole"),f.prototype),(0,D.default)(f.prototype,"fetchGroupUsers",[T.action],(0,x.default)(f.prototype,"fetchGroupUsers"),f.prototype),(0,D.default)(f.prototype,"deleteGroupUsers",[T.action],(0,x.default)(f.prototype,"deleteGroupUsers"),f.prototype),(0,D.default)(f.prototype,"addGroupUsers",[T.action],(0,x.default)(f.prototype,"addGroupUsers"),f.prototype),f);t.GroupStore=N;var R=new N;t.default=R},1160:function(e,t,a){"use strict";var r=a(35),n=a(44),i=a(33),l=a(25),s=a(28),o=a(45),u=a(46),d=a(19),c=a(21);d(t,"__esModule",{value:!0}),t.default=t.BackupStore=void 0;var f,p,h=c(a(82)),m=c(a(25)),g=c(a(71)),v=c(a(52)),y=c(a(72)),b=c(a(37)),_=c(a(55)),S=(c(a(73)),a(32)),x=c(a(49)),w=c(a(54)),I=a(386);function C(e,t){var a=r(e);if(n){var s=n(e);t&&(s=i(s).call(s,(function(t){return l(e,t).enumerable}))),a.push.apply(a,s)}return a}var k=(f=class extends w.default{constructor(){super(...arguments),(0,y.default)(this,"currentVolumeSize",p,this),(0,b.default)(this,"updateParamsSortPage",((e,t,a)=>{var r;t&&a&&(e.sort=(0,h.default)(r="".concat(t,":")).call(r,"descend"===a?"desc":"asc"))}))}get client(){return x.default.cinder.backups}get listWithDetail(){return!0}detailDidFetch(e){return(0,v.default)((function*(){var{volume_id:t}=e;try{var a=new I.VolumeStore,r=yield a.fetchDetail({id:t});e.volume=r,e.volume_name=r.name}catch(e){}return e}))()}get paramsFuncPage(){return e=>{var{current:t,all_projects:a}=e;return function(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=C(Object(r),!0)).call(a,(function(t){(0,b.default)(e,t,r[t])}));else if(o)u(e,o(r));else{var n;s(n=C(Object(r))).call(n,(function(t){d(e,t,l(r,t))}))}}return e}({all_tenants:a},(0,g.default)(e,["current","all_projects"]))}}restore(e,t){var a={restore:t||{}};return this.submitting(this.client.restore(e,a))}setCurrentVolume(e){var{size:t=0}=e||{};this.currentVolumeSize=t||0}},p=(0,_.default)(f.prototype,"currentVolumeSize",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),(0,_.default)(f.prototype,"restore",[S.action],(0,m.default)(f.prototype,"restore"),f.prototype),(0,_.default)(f.prototype,"setCurrentVolume",[S.action],(0,m.default)(f.prototype,"setCurrentVolume"),f.prototype),f);t.BackupStore=k;var D=new k;t.default=D},1161:function(e,t,a){"use strict";var r=a(35),n=a(44),i=a(33),l=a(25),s=a(28),o=a(45),u=a(46),d=a(19),c=a(21);d(t,"__esModule",{value:!0}),t.default=t.MetadataStore=void 0;var f,p,h,m=c(a(65)),g=c(a(62)),v=c(a(28)),y=c(a(25)),b=c(a(52)),_=c(a(72)),S=c(a(37)),x=c(a(55)),w=(c(a(73)),a(32)),I=c(a(49)),C=c(a(54));function k(e,t){var a=r(e);if(n){var s=n(e);t&&(s=i(s).call(s,(function(t){return l(e,t).enumerable}))),a.push.apply(a,s)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=k(Object(r),!0)).call(a,(function(t){(0,S.default)(e,t,r[t])}));else if(o)u(e,o(r));else{var n;s(n=k(Object(r))).call(n,(function(t){d(e,t,l(r,t))}))}}return e}var T=(f=class extends C.default{constructor(){super(...arguments),(0,_.default)(this,"resourceTypes",p,this),(0,_.default)(this,"resourceTypeLoading",h,this)}get client(){return I.default.glance.namespaces}get resourceTypeClient(){return I.default.glance.resourceTypes}get needGetProject(){return!1}listDidFetch(e,t,a){var r=this;return(0,b.default)((function*(){var{manage:t,resource_types:n}=a;if(!t)return e;var i=yield m.default.all((0,g.default)(e).call(e,(e=>{var{namespace:t}=e;return r.client.show(t,{resource_type:n})})));(0,v.default)(e).call(e,((e,t)=>{e.detail=i[t]}));var l=[];return(0,v.default)(e).call(e,(e=>{var t;e.detail.objects?(0,v.default)(t=e.detail.objects).call(t,(t=>{l.push(D(D({},e),{},{detail:t,isObject:!0,objName:t.name,objDescription:t.description}))})):l.push(e)})),l}))()}get mapper(){return e=>{var{visibility:t,namespace:a,display_name:r,resource_type_associations:n=[]}=e;return(0,v.default)(n).call(n,(e=>{e.prefix=e.prefix||""})),D(D({},e),{},{public:"public"===t,id:a,name:r,resource_type_associations:n})}}fetchDetail(e){var t=this;return(0,b.default)((function*(){var{id:a}=e;t.isLoading=!0;var r=yield t.client.show(a);return t.detail=r,t.isLoading=!1,r}))()}edit(e,t){var{id:a}=e;return this.submitting(this.client.update(a,t))}create(e){return this.submitting(this.client.create(e))}fetchResourceTypes(e){var t=this;return(0,b.default)((function*(){t.resourceTypeLoading=!0;var a=yield t.resourceTypeClient.list(),{resource_type_associations:r=[]}=e||{},{resource_types:n=[]}=a,i={};(0,v.default)(r).call(r,(e=>{i[e.name]=e.prefix||""})),(0,v.default)(n).call(n,(e=>{e.id=e.name,i[e.name]&&(e.prefix=i[e.name])})),t.resourceTypes=n,t.resourceTypeLoading=!1}))()}manageResourceTypes(e,t,a){var r=this;return(0,b.default)((function*(){return r.isSubmitting=!0,yield m.default.all((0,g.default)(t).call(t,(t=>r.client.resourceTypes.delete(e,t.name)))),r.submitting(m.default.all((0,g.default)(a).call(a,(t=>{var a={name:t.name,prefix:t.prefix};return r.client.resourceTypes.create(e,a)}))))}))()}},p=(0,x.default)(f.prototype,"resourceTypes",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=(0,x.default)(f.prototype,"resourceTypeLoading",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,x.default)(f.prototype,"fetchDetail",[w.action],(0,y.default)(f.prototype,"fetchDetail"),f.prototype),(0,x.default)(f.prototype,"edit",[w.action],(0,y.default)(f.prototype,"edit"),f.prototype),(0,x.default)(f.prototype,"create",[w.action],(0,y.default)(f.prototype,"create"),f.prototype),(0,x.default)(f.prototype,"fetchResourceTypes",[w.action],(0,y.default)(f.prototype,"fetchResourceTypes"),f.prototype),(0,x.default)(f.prototype,"manageResourceTypes",[w.action],(0,y.default)(f.prototype,"manageResourceTypes"),f.prototype),f);t.MetadataStore=T;var A=new T;t.default=A},1163:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.getFormDefaultValues=a.getFormItems=a.getFormItemType=a.getTemplate=a.rollbackTip=a.paramTip=a.yamlTip=a.getYaml=a.validateYaml=a.stackStatus=void 0;var p=f(r(37)),h=f(r(65)),m=f(r(28)),g=f(r(35)),v=f(r(1285)),y=r(47),b=r(319);function _(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}var S={INIT_IN_PROGRESS:t("Init In Progress"),INIT_COMPLETE:t("Init Complete"),INIT_FAILED:t("Init Failed"),CREATE_IN_PROGRESS:t("Create In Progress"),CREATE_COMPLETE:t("Create Complete"),CREATE_FAILED:t("Create Failed"),DELETE_IN_PROGRESS:t("Delete In Progress"),DELETE_COMPLETE:t("Delete Complete"),DELETE_FAILED:t("Delete Failed"),UPDATE_IN_PROGRESS:t("Update In Progress"),UPDATE_COMPLETE:t("Update Complete"),UPDATE_FAILED:t("Update Failed"),ROLLBACK_IN_PROGRESS:t("Rollback In Progress"),ROLLBACK_COMPLETE:t("Rollback Complete"),ROLLBACK_FAILED:t("Rollback Failed"),SUSPEND_IN_PROGRESS:t("Suspend In Progress"),SUSPEND_COMPLETE:t("Suspend Complete"),SUSPEND_FAILED:t("Suspend Failed"),RESUME_IN_PROGRESS:t("Resume In Progress"),RESUME_COMPLETE:t("Resume Complete"),RESUME_FAILED:t("Resume Failed"),ADOPT_IN_PROGRESS:t("Adopt In Progress"),ADOPT_COMPLETE:t("Adopt Complete"),ADOPT_FAILED:t("Adopt Failed"),SNAPSHOT_IN_PROGRESS:t("Snapshot In Progress"),SNAPSHOT_COMPLETE:t("Snapshot Complete"),SNAPSHOT_FAILED:t("Snapshot Failed"),CHECK_IN_PROGRESS:t("Check In Progress"),CHECK_COMPLETE:t("Check Complete"),CHECK_FAILED:t("Check Failed")};a.stackStatus=S;a.validateYaml=(e,a)=>{try{v.default.load(a)}catch(e){return h.default.reject(t("A template is a YAML file that contains configuration information, please enter the correct format."))}return h.default.resolve()};a.getYaml=e=>{try{return v.default.load(e,{schema:v.default.JSON_SCHEMA})}catch(e){return null}};var x=t("A template is a YAML file that contains configuration information.");a.yamlTip=x;var w=t("When your Yaml file is a fixed template, variable variables can be stored in an environment variable file to implement template deployment. The parameters in the environment variable file need to match the parameters defined in the template file.");a.paramTip=w;var I=t('If "Enable" fails to roll back, the resource will be deleted after the creation fails; if "Disable" fails to roll back, the resource will be retained after the creation fails.');a.rollbackTip=I;a.getTemplate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{content:t}=e;return t};var C=e=>{switch(e){case"number":return{type:"input-number"};case"json":return{type:"input-json"};case"boolean":return{type:"radio",options:b.yesNoOptions};default:return{type:"input"}}};a.getFormItemType=C;a.getFormItems=e=>{var t=[];try{var a,r=v.default.load(e);if(!(0,y.isObject)(r))return t;var n=r.parameters;(0,m.default)(a=(0,g.default)(n)).call(a,(e=>{var a=n[e],{type:r="string",description:i="",label:l,hidden:f}=a,h=function(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=_(Object(r),!0)).call(a,(function(t){(0,p.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=_(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}({name:e,label:l||e,extra:i,required:!0,hidden:f},C(r));t.push(h)}))}catch(e){}return t};a.getFormDefaultValues=e=>{var t={};try{var a,r=v.default.load(e);if(!(0,y.isObject)(r))return t;var n=r.parameters||{};(0,m.default)(a=(0,g.default)(n)).call(a,(e=>{var a=n[e];(0,y.has)(a,"default")?t[e]=a.default:"boolean"===a.type&&(t[e]=!1)}))}catch(e){}return t}},1170:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.StepCreate=void 0;var p=f(r(65)),h=f(r(219)),m=f(r(516)),g=f(r(62)),v=f(r(1254)),y=f(r(82)),b=f(r(28)),_=f(r(35)),S=f(r(91));r(1157);var x=f(r(1158)),w=f(r(385));r(548);var I=f(r(549));r(1313);var C=f(r(405)),k=f(r(52)),D=f(r(37)),T=f(r(0)),A=r(382),P=r(32),M=(r(167),r(1113)),E=f(r(383)),N=f(r(384)),R=f(r(4)),j=r(47),F=r(1120),L=r(135),O=f(r(1145)),z=f(r(3381)),B=f(r(3385)),V=f(r(3387)),q=f(r(3394)),U=f(r(1448));function Q(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}function G(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=Q(Object(r),!0)).call(a,(function(t){(0,D.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=Q(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}class K extends M.StepAction{constructor(){super(...arguments),(0,D.default)(this,"onCountChange",(e=>{var{data:t}=this.state;this.setState({data:G(G({},t),{},{count:e})})})),(0,D.default)(this,"onSubmit",(e=>e?this.store.create(e):(this.errorMsg&&O.default.error(this.errorMsg),p.default.reject()))),(0,D.default)(this,"onOk",(()=>{var{data:e}=this.state;this.values=e;var a=this.getSubmitData(e);a?this.onSubmit(a).then((()=>{this.routing.push(this.listUrl),O.default.success(this.successText)}),(e=>{if(e&&!(0,j.isEmpty)(e)){var{response:{data:a}={}}=e||{},{forbidden:{message:r=""}={}}=a||{};r&&(0,j.isString)(r)&&(0,h.default)(r).call(r,"Quota exceeded")?O.default.error(t("Quota exceeded")):O.default.errorWithDetail(a,this.errorText)}})):O.default.errorWithDetail(null,this.errorText)}))}init(){this.store=E.default,this.projectStore=N.default,this.getQuota(),this.status="success",this.errorMsg=""}static allowed(e,t){var{isAdminPage:a=!1}=t;return p.default.resolve(!a)}getQuota(){var e=this;return(0,k.default)((function*(){yield p.default.all([e.projectStore.fetchProjectNovaQuota(),e.projectStore.fetchProjectCinderQuota()]),e.onCountChange(1)}))()}get disableNext(){return!!this.errorMsg}get disableSubmit(){return!!this.errorMsg}get instanceQuota(){var{instances:{left:e=0}={}}=(0,P.toJS)(this.projectStore.novaQuota)||{};return-1===e?1/0:e}get name(){return t("Create instance")}get enableCinder(){return this.props.rootStore.checkEndpoint("cinder")}get listUrl(){var{image:e,volume:t,servergroup:a}=this.locationParams;return e?this.getRoutePath("image"):t?this.getRoutePath("volume"):a?this.getRoutePath("serverGroupDetail",{id:a}):this.getRoutePath("instance")}get hasConfirmStep(){return!1}get steps(){return[{title:t("Base Config"),component:q.default},{title:t("Network Config"),component:V.default},{title:t("System Config"),component:B.default},{title:t("Confirm Config"),component:z.default}]}get instanceName(){var e,t,{name:a,count:r=1}=(0,m.default)(this)||{};return 1===r?this.unescape(a):this.unescape((0,g.default)(e=(0,v.default)(t=new Array(r)).call(t,r)).call(e,((e,t)=>{var r;return(0,y.default)(r="".concat(a,"-")).call(r,t+1)})).join(", "))}get successText(){return t("The creation instruction was issued successfully, instance: {name}. \n You can wait for a few seconds to follow the changes of the list data or manually refresh the data to get the final display result.",{action:this.name.toLowerCase(),name:this.instanceName})}get showQuota(){return!0}get quotaInfo(){var{instances:e={},cores:a={},ram:r={}}=(0,P.toJS)(this.projectStore.novaQuota)||{},{limit:n}=e||{};if(!n)return[];var{data:i={}}=this.state,{count:l=1}=i,s=G(G({},e),{},{add:l,name:"instance",title:t("Instance")}),{newCPU:o,newRam:u}=this.getFlavorInput(),d=G(G({},a),{},{add:o,name:"cpu",title:t("CPU"),type:"line"}),c=G(G({},r),{},{add:u,name:"ram",title:t("Memory (GiB)"),type:"line"}),f=this.getVolumeQuota(),{totalNewCount:p,totalNewSize:h}=this.getVolumeInputMap();return[s,d,c,G(G({},f.volumes),{},{add:p,name:"volume",title:t("Volume"),type:"line"}),G(G({},f.gigabytes),{},{add:h,name:"volumeSize",title:t("Volume Size"),type:"line"})]}get errorText(){var{status:e}=this.state;return"error"===e?t("Unable to create instance: insufficient quota to create resources."):this.ipBatchError?t("Unable to create instance: batch creation is not supported when specifying IP."):t("The creation instruction has been issued, please refresh to see the actual situation in the list.")}getVolumeQuota(){var e,t=(0,P.toJS)(this.projectStore.cinderQuota)||{},a={};return(0,b.default)(e=(0,_.default)(t)).call(e,(e=>{((0,h.default)(e).call(e,"volumes")||(0,h.default)(e).call(e,"gigabytes"))&&(a[e]=t[e])})),a}getQuotaMessage(e,a,r){var{left:n=0}=a||{};return-1===n?"":e>n?t("Insufficient {name} quota to create resources(left { quota }, input { input }).",{name:r,quota:n,input:e}):""}getVolumeInputMap(){var{data:e}=this.state,{systemDisk:t={},dataDisk:a=[],count:r=1,source:{value:n}={},instanceSnapshotDisk:i={}}=e,l={},s={},o=0,u=0;if("instanceSnapshot"===n&&i){var{size:d,typeOption:{label:c}={}}=i;c&&(l[c]=l[c]?l[c]+1:1,s[c]=s[c]?s[c]+d:d,o+=1*r,u+=d*r)}else if(t.type){var{size:f}=t,{label:p}=t.typeOption||{};l[p]=l[p]?l[p]+1:1,s[p]=s[p]?s[p]+f:f,o+=1*r,u+=f*r}return a&&(0,b.default)(a).call(a,(e=>{if(e.value&&e.value.type){var{size:t}=e.value,{label:a}=e.value.typeOption||{};l[a]=l[a]?l[a]+1*r:1*r,s[a]=s[a]?s[a]+t*r:t*r,o+=1*r,u+=t*r}})),{totalNewCount:o,totalNewSize:u,newCountMap:l,newSizeMap:s}}checkVolumeQuota(){var e,a;if(!this.enableCinder)return"";var r="",{totalNewCount:n,totalNewSize:i,newCountMap:l,newSizeMap:s}=this.getVolumeInputMap(),o=this.getVolumeQuota(),u=this.getQuotaMessage(n,o.volumes,t("volume"));if(u)return u;var d=this.getQuotaMessage(i,o.gigabytes,t("volume gigabytes"));return d||((0,b.default)(e=(0,_.default)(l)).call(e,(e=>{var a=this.getQuotaMessage(l[e],o["volumes_".concat(e)],t("volume type {type}",{type:e}));a&&(r=a)})),r||((0,b.default)(a=(0,_.default)(s)).call(a,(e=>{var a=this.getQuotaMessage(s[e],o["gigabytes_".concat(e)],t("volume type {type} gigabytes",{type:e}));a&&(r=a)})),r))}getFlavorInput(){var{data:e}=this.state,{flavor:t={},count:a=1}=e,{selectedRows:r=[]}=t,{vcpus:n=0,ram:i=0}=r[0]||{};return{newCPU:n*a,newRam:(0,L.getGiBValue)(i)*a}}checkFlavorQuota(){var{newCPU:e,newRam:a}=this.getFlavorInput(),{cores:r={},ram:n={}}=this.projectStore.novaQuota,{left:i=0}=r||{},{left:l=0}=n||{};return-1!==i&&i<e?this.getQuotaMessage(e,r,t("CPU")):-1!==l&&l<a?this.getQuotaMessage(a,n,t("Memory")):""}get badgeStyle(){return{marginTop:8,marginBottom:8,marginLeft:10,maxWidth:600}}renderBadge(){var e=this.checkFlavorQuota(),t=this.checkVolumeQuota();if(!e&&!t)return this.status="success",this.errorMsg="",null;this.status="error";var a=e||t;return this.errorMsg!==a&&C.default.error(a),this.errorMsg=a,T.default.createElement("div",{style:this.badgeStyle},T.default.createElement(I.default,{status:"error",text:a}))}renderExtra(){return null}renderFooterLeft(){var{data:e}=this.state,{count:a=1,source:{value:r}={}}=e,n={min:1,max:"bootableVolume"===r?1:(0,j.isFinite)(this.instanceQuota)?this.instanceQuota:100,precision:0,onChange:this.onCountChange,formatter:e=>"$ ".concat(e).replace(/\D/g,"")};return T.default.createElement("div",{style:{display:"flex"}},T.default.createElement("div",{style:{display:"flex",alignItems:"center"}},T.default.createElement("div",{className:U.default["number-input"]},T.default.createElement("span",null,t("Count")),T.default.createElement(x.default,(0,w.default)({},n,{value:a,className:(0,R.default)(U.default.input,"instance-count")}))),this.renderExtra()),this.renderBadge())}getVolumeAndImageData(e){if("error"===this.status)return null;var{bootableVolume:t,dataDisk:a,image:r,instanceSnapshot:n,instanceSnapshotDisk:i,source:l,systemDisk:s}=e,{value:o}=l,u="bootableVolume"===o?null:"image"===o?r.selectedRowKeys[0]:n.selectedRowKeys[0];if(!this.enableCinder)return{imageRef:u};var d={};if("bootableVolume"!==o){var{deleteType:c,type:f,size:p}=s||{};d={boot_index:0,uuid:u,source_type:"image",volume_size:p,destination_type:"volume",volume_type:f,delete_on_termination:1===c},"instanceSnapshot"===o&&i&&(delete d.volume_size,delete d.volume_type,delete d.delete_on_termination)}else d={boot_index:0,uuid:t.selectedRowKeys[0],source_type:"volume",destination_type:"volume"};var h=a?(0,g.default)(a).call(a,(e=>{var{size:t,type:a,deleteType:r}=e.value||{};return{source_type:"blank",volume_size:t,destination_type:"volume",volume_type:a,delete_on_termination:1===r}})):[];return"image"===o&&"iso"===r.selectedRows[0].disk_format&&h[0]&&(h[0].boot_index=0,h[0].device_type="disk",d.boot_index=1,d.device_type="cdrom"),{volumes:[d,...h],imageRef:u}}getNetworkData(e){var{networks:t=[],ports:a={}}=e,r=!1,n=[];(0,b.default)(t).call(t,(e=>{var t={uuid:e.value.network};1===e.value.ipType&&e.value.ip&&(t.fixed_ip=e.value.ip,r=!0),n.push(t)}));var{selectedRowKeys:i=[]}=a||{};return(0,b.default)(i).call(i,(e=>{var t={port:e};n.push(t)})),{data:n,hasIp:r}}getSubmitData(e){if("error"===this.status)return null;var{volumes:t,imageRef:a}=this.getVolumeAndImageData(e),{data:r,hasIp:n}=this.getNetworkData(e),{availableZone:i,keypair:l,loginType:s,password:o,physicalNode:u,physicalNodeType:d,securityGroup:c,flavor:f,userData:p="",serverGroup:h,name:m,count:v=1}=e;if(n&&v>1)return this.ipBatchError=!0,null;var{selectedRows:y=[]}=c||{},b={security_groups:(0,g.default)(y).call(y,(e=>({name:e.id}))),name:m,flavorRef:f.selectedRowKeys[0],availability_zone:i.value,networks:r};this.enableCinder&&(b.block_device_mapping_v2=t),a&&!t&&(b.imageRef=a),"keypair"===s.value?b.key_name=l.selectedRowKeys[0]:b.adminPass=o,v>1&&(b.min_count=v,b.max_count=v,b.return_reservation_id=!0),"smart"!==d.value&&(b.hypervisor_hostname=u.selectedRows[0].hypervisor_hostname),(b.adminPass||p)&&(b.user_data=btoa((0,F.getUserData)(b.adminPass,p)));var _={server:b};return h&&h.selectedRowKeys.length>0&&(_["OS-SCH-HNT:scheduler_hints"]={group:h.selectedRowKeys[0]}),_}}a.StepCreate=K,(0,D.default)(K,"id","instance-create"),(0,D.default)(K,"title",t("Create Instance")),(0,D.default)(K,"path",((e,t)=>{var a,{detail:r,match:n}=t||{};return!r||(0,j.isEmpty)(r)?"/compute/instance/create":(0,S.default)(a=n.path).call(a,"/compute/server")>=0?"/compute/instance/create?servergroup=".concat(r.id):void 0})),(0,D.default)(K,"policy",["os_compute_api:servers:create","os_compute_api:os-availability-zone:list"]);var H=(0,A.inject)("rootStore")((0,A.observer)(K));a.default=H},1180:function(e,t,a){"use strict";var r=a(35),n=a(44),i=a(33),l=a(25),s=a(28),o=a(45),u=a(46),d=a(19),c=a(21);d(t,"__esModule",{value:!0}),t.default=t.AvailabilityZoneStore=void 0;var f,p=c(a(28)),h=c(a(35)),m=c(a(62)),g=c(a(25)),v=c(a(37)),y=c(a(52)),b=c(a(55)),_=a(32),S=a(47),x=c(a(49)),w=c(a(54));function I(e,t){var a=r(e);if(n){var s=n(e);t&&(s=i(s).call(s,(function(t){return l(e,t).enumerable}))),a.push.apply(a,s)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=I(Object(r),!0)).call(a,(function(t){(0,v.default)(e,t,r[t])}));else if(o)u(e,o(r));else{var n;s(n=I(Object(r))).call(n,(function(t){d(e,t,l(r,t))}))}}return e}var k=(f=class extends w.default{get client(){return x.default.nova.zone}get listResponseKey(){return this.responseKey}get listWithDetail(){return!0}get mapper(){return e=>{var{available:t}=e.zoneState;return e.available=t,e}}listDidFetch(e){return(0,y.default)((function*(){var t=[];return(0,p.default)(e).call(e,(e=>{var{hosts:a}=e;if((0,S.isNull)(a))t.push(e);else{var r,n={};(0,p.default)(r=(0,h.default)(a)).call(r,(e=>{var t=a[e];t["nova-compute"]&&(n[e]=t)})),(0,S.isEmpty)(n)||t.push(C(C({},e),{},{host:n}))}})),t}))()}fetchListWithoutDetail(){var e=this;return(0,y.default)((function*(){var t=(yield e.client.list())[e.listResponseKey];e.list.data=(0,m.default)(t).call(t,e.mapper)}))()}},(0,b.default)(f.prototype,"fetchListWithoutDetail",[_.action],(0,g.default)(f.prototype,"fetchListWithoutDetail"),f.prototype),f);t.AvailabilityZoneStore=k;var D=new k;t.default=D},1181:function(e,a,r){"use strict";r(19)(a,"__esModule",{value:!0}),a.getNeutronAgentServiceStatus=a.getNeutronAgentServiceState=a.serviceState=a.serviceStatus=void 0;var n={enabled:t("Enabled"),disabled:t("Disabled")};a.serviceStatus=n;var i={up:t("Up"),down:t("Down")};a.serviceState=i;a.getNeutronAgentServiceState=e=>e?i.up:i.down;a.getNeutronAgentServiceStatus=e=>e?n.enabled:n.disabled},1193:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.securityGroupFilter=a.securityGroupColumns=void 0;var l=i(r(0)),s=i(r(3388)),o=[{title:t("Name"),dataIndex:"name"},{title:t("Description"),dataIndex:"description"},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime"},{title:t("Rules"),dataIndex:"rules",render:(e,t)=>l.default.createElement(s.default,{item:t})}];a.securityGroupColumns=o;var u=[{label:t("Name"),name:"name"}];a.securityGroupFilter=u},1195:function(e,a,r){"use strict";var n=r(156),i=r(19),l=r(25),s=r(21);i(a,"__esModule",{value:!0}),a.default=a.FlavorSelectTable=void 0;var o=s(r(101)),u=s(r(33)),d=s(r(91)),c=s(r(518)),f=s(r(62));r(538);var p=s(r(399)),h=s(r(52)),m=s(r(37)),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=I(t);if(a&&a.has(e))return a.get(e);var r={},n=i&&l;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=n?l(e,s):null;o&&(o.get||o.set)?i(r,s,o):r[s]=e[s]}r.default=e,a&&a.set(e,r);return r}(r(0)),v=r(382),y=r(32),b=s(r(1241)),_=(r(167),s(r(1196))),S=s(r(1141)),x=r(1131),w=s(r(3395));function I(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(I=function(e){return e?a:t})(e)}class C extends g.Component{constructor(e){super(e),(0,m.default)(this,"onArchChange",(e=>{this.setState({arch:e.target.value})})),(0,m.default)(this,"onCategoryChange",(e=>{this.setState({category:e.target.value})})),(0,m.default)(this,"onChange",(e=>{var{onChange:t}=this.props;t&&t(e)})),this.state={arch:null,category:null},this.init()}get labelStyle(){return{marginRight:16}}getSettings(){var e=this;return(0,h.default)((function*(){yield e.settingStore.fetchList(),e.initDefaultValue()}))()}getFlavors(){var e=this;return(0,h.default)((function*(){var{allProjects:t=!1}=e.props;yield e.flavorStore.fetchList({all_projects:t}),e.initDefaultValue()}))()}get architectures(){var e,t={architecture:"custom"},a={architecture:"all"},{isIronic:r=!1,filterIronic:n=!0}=this.props,i=(0,o.default)(e=this.settingStore.list.data||[]).call(e,(e=>"flavor_families"===e.key));if(!i)return[a,t];var l=[];try{var s;l=(0,u.default)(s=i.value||[]).call(s,(e=>{var{architecture:t}=e;return!!t&&(!n||(r?(0,x.isBareMetal)(t):!(0,x.isBareMetal)(t)))}))}catch(e){}return[a,...l,t]}get categories(){var e,{arch:t}=this.state;if(!t)return[];var a=(0,o.default)(e=this.architectures).call(e,(e=>e.architecture===t));return a&&a.categories||[]}get flavors(){var e,t,a,r,{flavor:n,isIronic:i=!1,filterIronic:l=!0,excludeFlavors:s=[]}=this.props,{arch:o,category:c}=this.state;return o?(0,u.default)(e=(0,u.default)(t=(0,u.default)(a=(0,u.default)(r=this.flavorStore.list.data||[]).call(r,(e=>!(s.length>0)||(0,d.default)(s).call(s,e.id)<0))).call(a,(e=>!n||e.name!==n))).call(t,(e=>!l||(i?(0,x.isBareMetalFlavor)(e):!(0,x.isBareMetalFlavor)(e))))).call(e,(e=>"all"===o||("custom"===o?e.architecture===o:e.architecture===o&&e.category===c))):[]}getBaseColumns(){var{category:e,arch:a}=this.state,r=[...(0,x.getBaseColumns)()];return r[0].title=t("Name"),(0,c.default)(r).call(r,1,1),(0,x.categoryHasIOPS)(e)||(r=(0,u.default)(r).call(r,(e=>"quota:disk_total_iops_sec"!==e.dataIndex))),(0,x.categoryHasEphemeral)(e)||(r=(0,u.default)(r).call(r,(e=>"OS-FLV-EXT-DATA:ephemeral"!==e.dataIndex))),"all"===a&&(r=[...r,{title:t("Architecture"),dataIndex:"id",render:(e,t)=>(0,x.getFlavorArchInfo)(t)}]),r}getGpuColumns(){var{category:e}=this.state;return"compute_optimized_type"===e?(0,u.default)(x.gpuColumns).call(x.gpuColumns,(e=>{var t;return(0,d.default)(t=e.dataIndex).call(t,"gpu")<0})):(0,u.default)(x.gpuColumns).call(x.gpuColumns,(e=>{var t;return(0,d.default)(t=e.dataIndex).call(t,"gpu")>=0}))}get columns(){var{arch:e}=this.state,t=this.getBaseColumns();if((0,x.isBareMetal)(e))return[...(0,u.default)(t).call(t,((e,t)=>t<3))];if("heterogeneous_computing"!==e)return t;var a=this.getGpuColumns();return[...t,...a]}initDefaultValue(){var{value:{selectedRowKeys:e=[]}={}}=this.props;if(e.length>0){var t,a=(0,o.default)(t=(0,y.toJS)(this.flavorStore.list.data)||[]).call(t,(t=>t.id===e[0]));if(a){var{architecture:r,category:n}=a;this.setState({arch:r,category:n})}}else{var i=this.architectures[0].architecture,l=null;this.architectures[0].categories&&(l=this.architectures[0].categories[0].name),this.setState({arch:i,category:l})}}init(){this.settingStore=_.default,this.flavorStore=S.default,this.getSettings(),this.getFlavors()}renderArchButtons(){var e,{arch:t}=this.state,a=(0,f.default)(e=this.architectures).call(e,(e=>{var{architecture:t}=e,a=x.flavorArchitectures[t]||t;return g.default.createElement(p.default.Button,{value:t,key:t},a)}));return g.default.createElement(p.default.Group,{id:"flavor-select-arch",onChange:this.onArchChange,value:t,buttonStyle:"solid"},a)}renderCategoryButtons(){var e,{category:t}=this.state,a=(0,f.default)(e=this.categories).call(e,(e=>{var{name:t}=e,a=x.flavorCategoryList[t]||t;return g.default.createElement(p.default.Button,{value:t,key:t},a)}));return g.default.createElement(p.default.Group,{id:"flavor-select-category",onChange:this.onCategoryChange,value:t,buttonStyle:"solid"},a)}renderArchSelect(){return g.default.createElement("div",{className:w.default["flavor-tab"]},g.default.createElement("span",{className:w.default["flavor-label"]},t("Architecture")),this.renderArchButtons())}renderCategorySelect(){var{arch:e}=this.state;return"custom"===e||"all"===e?null:g.default.createElement("div",{className:w.default["flavor-tab"]},g.default.createElement("span",{className:w.default["flavor-label"]},t("Category")),this.renderCategoryButtons())}renderTableHeader(){return g.default.createElement("div",null,this.renderArchSelect(),this.renderCategorySelect())}render(){var{value:e,disabledFunc:a}=this.props,r=this.settingStore.list.isLoading&&this.flavorStore.list.isLoading,n={columns:this.columns,data:this.flavors,tableHeader:this.renderTableHeader(),isLoading:r,filterParams:[{label:t("Name"),name:"name"}],value:e,onChange:this.onChange,disabledFunc:a};return g.default.createElement(b.default,n)}}a.FlavorSelectTable=C;var k=(0,v.inject)("rootStore")((0,v.observer)(C));a.default=k},1196:function(e,t,a){"use strict";var r=a(19),n=a(21);r(t,"__esModule",{value:!0}),t.default=t.SettingStore=void 0;var i,l=n(a(33)),s=n(a(25)),o=n(a(52)),u=n(a(55)),d=a(32),c=n(a(49)),f=n(a(54)),p=(i=class extends f.default{get client(){return c.default.skyline.setting}listDidFetch(e){return(0,o.default)((function*(){return(0,l.default)(e).call(e,(e=>!e.hidden))}))()}update(e){return this.submitting(this.client.update(null,e))}},(0,u.default)(i.prototype,"update",[d.action],(0,s.default)(i.prototype,"update"),i.prototype),i);t.SettingStore=p;var h=new p;t.default=h},1218:function(e,a,r){"use strict";r(19)(a,"__esModule",{value:!0}),a.default=void 0;var n={"anti-affinity":t("Anti-Affinity"),affinity:t("Affinity"),"soft-anti-affinity":t("Soft-Anti-Affinity"),"soft-affinity":t("Soft-Affinity")};a.default=n},1219:function(e,a,r){"use strict";r(19)(a,"__esModule",{value:!0}),a.volumeTypeSelectProps=a.volumeTypeFilters=a.volumeTypeColumns=a.controls=a.creationMethod=a.consumerTypes=void 0;var n=r(515),i={"front-end":t("Frontend"),"back-end":t("Backend"),both:t("Both of Frontend and Backend")};a.consumerTypes=i;var l={manu:t("Manu"),auto:t("Auto")};a.creationMethod=l;var s={"front-end":t("Front End"),"back-end":t("Back End")};a.controls=s;var o=[{title:t("Name"),dataIndex:"name"},{title:t("Description"),dataIndex:"description",isHideable:!0,valueRender:"noValue"},{title:t("Public"),dataIndex:"is_public",valueRender:"yesNo"},{title:t("Shared"),dataIndex:"multiattach",valueRender:"yesNo",titleTip:n.multiTip,width:120}];a.volumeTypeColumns=o;var u=[{label:t("Name"),name:"name"}];a.volumeTypeFilters=u;var d={columns:o,filterParams:u};a.volumeTypeSelectProps=d},1220:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.fetchQuota=function(e){return P.apply(this,arguments)},a.checkQuotaDisable=a.getQuotaInfo=a.getAdd=a.getQuota=a.restoreTip=a.backupPointFilters=a.backupPointColumns=a.backupColumns=a.modeTip=a.backupModeList=a.createTip=a.backupStatus=void 0;var p=f(r(37)),h=f(r(52)),m=f(r(1300)),g=f(r(1433)),v=f(r(0)),y=r(135),b=(r(513),f(r(384))),_=f(r(1160));function S(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=S(Object(r),!0)).call(a,(function(t){(0,p.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=S(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}var w={available:t("Available"),error:t("Error"),updating:t("Updating"),deleting:t("Deleting"),error_deleting:t("Error Deleting"),restoring:t("Restoring"),creating:t("Creating")};a.backupStatus=w;var I=v.default.createElement("span",null,v.default.createElement("span",{style:{fontWeight:600}},t("When you do online backup of the volume that has been bound, you need to pay attention to the following points:")),v.default.createElement("p",null,t("1. The backup can only capture the data that has been written to the volume at the beginning of the backup task, excluding the data in the cache at that time.")),v.default.createElement("p",null,t("2. To ensure the integrity of the data, it is recommended that you suspend the write operation of all files when creating a backup.")));a.createTip=I;var C=[{value:!1,label:t("Full Backup")},{value:!0,label:t("Increment Backup")}];a.backupModeList=C;var k=t("Create a full backup, the system will automatically create a new backup chain, the full backup name is the backup chain name; Create an incremental backup, the system will automatically create an incremental backup under the newly created backup chain.");a.modeTip=k;a.backupColumns=[];var D=[{title:t("Name"),dataIndex:"name",ellipsis:!0},{title:t("Size"),dataIndex:"size",isHideable:!0,render:e=>"".concat(e," GiB")},{title:t("Status"),dataIndex:"status",render:e=>w[e]||e},{title:t("Backup Mode"),dataIndex:"is_incremental",isHideable:!0,render:e=>e?v.default.createElement(v.default.Fragment,null," ",v.default.createElement(g.default,null),v.default.createElement("span",{style:{marginLeft:8}},t("Incremental Backup"))):v.default.createElement(v.default.Fragment,null," ",v.default.createElement(m.default,null),v.default.createElement("span",{style:{marginLeft:8}},t("Full Backup"))),stringify:e=>e?t("Incremental Backup"):t("Full Backup")},{title:t("description"),dataIndex:"description",ellipsis:!0,isHideable:!0},{title:t("Created At"),dataIndex:"created_at",isHideable:!0,valueRender:"sinceTime"}];a.backupPointColumns=D;var T=[{label:t("Name"),name:"name",ellipsis:!0},{label:t("Status"),name:"status",options:(0,y.getOptions)(w)}];a.backupPointFilters=T;var A=v.default.createElement("span",null,v.default.createElement("span",{style:{fontWeight:600}},t("When you restore a backup, you need to meet one of the following conditions:")),v.default.createElement("p",null,t("1. The volume associated with the backup is available.")),v.default.createElement("p",null,t("2. The volume associated with the backup has been mounted, and the instance is shut down.")));function P(){return(P=(0,h.default)((function*(e){e.setState({quota:{},quotaLoading:!0});var t=yield b.default.fetchProjectCinderQuota();e.setState({quota:t,quotaLoading:!1})}))).apply(this,arguments)}a.restoreTip=A;var M=e=>{var{backups:t={},backup_gigabytes:a={}}=e||{};return{backups:t,gigabytes:a}};a.getQuota=M;var E=e=>{var{backups:t,gigabytes:a}=M(e),{left:r=0}=t||{},{left:n=0,limit:i}=a||{},{currentVolumeSize:l=0}=_.default,s=0!==r&&(-1===i||n>=l)?1:0;return{add:s,addSize:1===s?l:0}};a.getAdd=E;a.getQuotaInfo=e=>{var{quota:a={},quotaLoading:r}=e.state;if(r)return[];var{backups:n={},gigabytes:i={}}=M(a),{add:l,addSize:s}=E(a);return[x(x({},n),{},{add:l,name:"backup",title:t("Backup")}),x(x({},i),{},{add:s,name:"gigabytes",title:t("Backup gigabytes (GiB)"),type:"line"})]};a.checkQuotaDisable=()=>{var{cinderQuota:e={}}=b.default,{add:t}=E(e);return 0===t}},1221:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.getQoSPolicyTabs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=w({backendPageStore:this.qosPolicyStore},e),r=[{title:t("Current Project QoS Policy"),key:"project",props:(0,_.merge)({},a,w(w({},T({self:this})),{},{extraParams:{project_id:this.currentProjectId}}))},{title:t("Shared QoS Policy"),key:"shared",props:(0,_.merge)({},a,w(w({},T({shared:!0,self:this})),{},{extraParams:{shared:!0}}))}];this.hasAdminRole&&r.push({title:t("All QoS Policy"),key:"all",props:(0,_.merge)({},a,w(w({},T({all:!0,self:this})),{},{extraParams:{all_projects:!0}}))});return r},a.getQosPolicySelectTableProps=a.qosPolicySortProps=a.getQosPolicyFilters=a.getQosPolicyColumns=void 0;var p=f(r(37));r(1117);var h=f(r(1118));r(1115);var m=f(r(1116)),g=f(r(82)),v=f(r(62)),y=f(r(518)),b=f(r(0)),_=(r(167),r(47)),S=r(319);function x(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=x(Object(r),!0)).call(a,(function(t){(0,p.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=x(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}var I=e=>{var a,r,n,i,l,s,o,u,d;return"egress"===e.direction?(0,g.default)(s=(0,g.default)(o=(0,g.default)(u=(0,g.default)(d="".concat(t("Egress"),": ")).call(d,t("Max BandWidth"),": ")).call(u,e.max_kbps/1024," Mbps; ")).call(o,t("Max Burst"),": ")).call(s,e.max_burst_kbps/1024," Mbps"):"ingress"===e.direction?(0,g.default)(a=(0,g.default)(r=(0,g.default)(n=(0,g.default)(i="".concat(t("Ingress"),": ")).call(i,t("Max BandWidth"),": ")).call(n,e.max_kbps/1024," Mbps; ")).call(r,t("Max Burst"),": ")).call(a,e.max_burst_kbps/1024," Mbps"):(0,g.default)(l="".concat(t("DSCP Marking"),": ")).call(l,e.dscp_mark)},C=e=>{var{self:a,all:r=!1}=e,n=[{title:t("ID/Name"),dataIndex:"name",routeName:a.getRouteName("networkQosDetail")},{title:t("Description"),dataIndex:"description",sorter:!1},{title:t("Rules Number"),dataIndex:"rulesNumber",render:(e,t)=>t.rules.length,isHideable:!0,sorter:!1},{title:t("Rules"),dataIndex:"rules",render:e=>b.default.createElement(h.default,null,(0,v.default)(e).call(e,(e=>b.default.createElement(m.default,{span:24,key:e.direction},I(e))))),stringify:e=>(0,v.default)(e).call(e,(e=>I(e))).join("\n")},{title:t("Shared"),dataIndex:"shared",valueRender:"yesNo",width:80,sorter:!1},{title:t("Default Policy"),dataIndex:"is_default",valueRender:"yesNo",isHideable:!0,width:100,sorter:!1},{title:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime",isHideable:!0,sorter:!1}];return r&&(0,y.default)(n).call(n,2,0,{title:t("Project ID/Name"),dataIndex:"project_name",sortKey:"project_id"}),n};a.getQosPolicyColumns=C;var k=e=>{var{self:a,shared:r=!1}=e,n=[{label:t("Name"),name:"name"},{label:t("Description"),name:"description"}];return r||n.push({label:t("Shared"),name:"shared",options:S.yesNoOptions}),a.hasAdminRole&&n.push({label:t("Project ID"),name:"tenant_id"}),n};a.getQosPolicyFilters=k;var D={isSortByBack:!0,defaultSortKey:"name",defaultSortOrder:"descend"};a.qosPolicySortProps=D;var T=e=>{var{self:t,all:a,shared:r}=e;return w(w({},D),{},{columns:C({self:t,all:a}),filterParams:k({self:t,shared:r})})};a.getQosPolicySelectTableProps=T},1234:function(e,t,a){"use strict";var r=a(156),n=a(19),i=a(25),l=a(21);n(t,"__esModule",{value:!0}),t.default=void 0;var s=l(a(385)),o=l(a(37)),u=l(a(219)),d=l(a(28)),c=l(a(35)),f=l(a(322)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=_(t);if(a&&a.has(e))return a.get(e);var r={},l=n&&i;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=l?i(e,s):null;o&&(o.get||o.set)?n(r,s,o):r[s]=e[s]}r.default=e,a&&a.set(e,r);return r}(a(0)),h=l(a(16)),m=l(a(4)),g=a(1583),v=a(47),y=l(a(1584)),b=l(a(1586));function _(e){if("function"!=typeof r)return null;var t=new r,a=new r;return(_=function(e){return e?a:t})(e)}var S=e=>{if(!(0,v.isString)(e))return e;if((0,u.default)(e).call(e,"<html>")){var t=/<\/h1>[\r\n]([\s\S]*)<br \/><br \/>/.exec(e);if(t)return t[1]}try{return JSON.parse(e)}catch(t){return e}},x=(e,t)=>{var a;return(0,v.isString)(e)?S(e):((0,d.default)(a=(0,c.default)(e)).call(a,(t=>{(0,v.isString)(e[t])&&(e[t]=S(e[t]))})),"json"===t?(0,f.default)(e,null,2):"yaml"===t?(0,g.getValue)(e):e)};class w extends p.PureComponent{constructor(e){super(e),(0,o.default)(this,"handleChange",(e=>{var{onChange:t}=this.props;t(e)})),this.state={value:x(e.value,e.mode),originValue:e.value}}static getDerivedStateFromProps(e,t){var{value:a,mode:r}=e;return a!==t.originValue?{value:x(a,r),originValue:a}:null}render(){var{className:e,mode:t,options:a}=this.props;return p.default.createElement(b.default,(0,s.default)({},a,{className:(0,m.default)(y.default.editor,e),value:this.state.value,mode:t,onChange:this.handleChange}))}}(0,o.default)(w,"propTypes",{value:h.default.oneOfType([h.default.string,h.default.object]),mode:h.default.string,options:h.default.object,onChange:h.default.func}),(0,o.default)(w,"defaultProps",{value:{},mode:"yaml",options:{},onChange(){}});var I=w;t.default=I},1253:function(e,t,a){"use strict";var r=a(156),n=a(19),i=a(25),l=a(21);n(t,"__esModule",{value:!0}),t.default=void 0;var s=l(a(62)),o=l(a(385)),u=l(a(52)),d=l(a(37)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=v(t);if(a&&a.has(e))return a.get(e);var r={},l=n&&i;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=l?i(e,s):null;o&&(o.get||o.set)?n(r,s,o):r[s]=e[s]}r.default=e,a&&a.set(e,r);return r}(a(0)),f=l(a(16)),p=a(135),h=a(47),m=l(a(1291)),g=a(1290);function v(e){if("function"!=typeof r)return null;var t=new r,a=new r;return(v=function(e){return e?a:t})(e)}class y extends c.Component{static propTypes(){return{visibleButtonNumber:f.default.number,primaryActions:f.default.array,onFinishAction:f.default.func,onCancelAction:f.default.func,routing:f.default.object.isRequired,containerProps:f.default.object,onClickAction:f.default.func,primaryActionsExtra:f.default.any}}constructor(e){super(e),(0,d.default)(this,"onClickAction",(()=>{var{onClickAction:e}=this.props;e&&e()})),this.state={primaryAllowedResults:[]},this.actionList=this.getActionList(e)}componentDidMount(){this.getActionsAllowed()}componentDidUpdate(e){(0,h.isEqual)(e,this.props)||this.getActionsAllowed()}getActionsAllowed(){var e=this;return(0,u.default)((function*(){var{containerProps:t,primaryActionsExtra:a,isAdminPage:r}=e.props,{detail:n=null}=t,i=yield(0,g.getAllowedResults)({actions:e.actionList,data:n,containerProps:t,key:null,extra:a,isAdminPage:r});e.setState({primaryAllowedResults:i})}))()}getActionList(e){var{primaryActions:t,containerProps:a}=e;return(0,s.default)(t).call(t,(e=>(0,g.getAction)(e,null,a)))}render(){var e,{primaryAllowedResults:t}=this.state,{onFinishAction:a,routing:r,containerProps:n,onCancelAction:i,onClickAction:l}=this.props,u=(0,s.default)(e=this.actionList).call(e,((e,s)=>{var u="primary-".concat((0,p.generateId)()),{id:d,title:f,buttonType:h,actionType:g,buttonText:v,isDanger:y}=e,b={id:d,title:f,name:v||f,buttonType:h,isDanger:y,actionType:g,action:e};return c.default.createElement(m.default,(0,o.default)({},b,{key:u,isAllowed:t[s],onFinishAction:a,routing:r,containerProps:n,onClickAction:l,onCancelAction:i}))}));return c.default.createElement(c.default.Fragment,null,u)}}t.default=y,(0,d.default)(y,"defaultProps",{visibleButtonNumber:3,primaryActions:[],onFinishAction:null,onCancelAction:null,containerProps:{},primaryActionsExtra:null})},1255:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.hypervisorFilters=a.hypervisorColumns=void 0;var l=i(r(82));r(387);var s=i(r(220)),o=i(r(0)),u=i(r(1314)),d=(r(167),[{title:t("Hostname"),dataIndex:"service_host"},{title:t("Type"),dataIndex:"hypervisor_type"},{title:t("VCPU (Core)"),dataIndex:"vcpus_used_percent",render:(e,a)=>{var r;return"ironic"===a.hypervisor_type?o.default.createElement(s.default,{title:t("vCPUs and ram are not used for bare metal scheduling")},o.default.createElement("span",null,"-")):o.default.createElement(u.default,{value:e,label:(0,l.default)(r="".concat(a.vcpus_used," / ")).call(r,a.vcpus)})},width:180,stringify:(e,a)=>{var r,n,i,s;return(0,l.default)(r=(0,l.default)(n=(0,l.default)(i=(0,l.default)(s="".concat(e,"% (")).call(s,t("Used"),": ")).call(i,a.vcpus_used," / ")).call(n,t("Total"),": ")).call(r,a.vcpus,")")}},{title:t("Configured Memory (GiB)"),dataIndex:"memory_mb_percent",render:(e,a)=>{var r;return"ironic"===a.hypervisor_type?o.default.createElement(s.default,{title:t("vCPUs and ram are not used for bare metal scheduling")},o.default.createElement("span",null,"-")):o.default.createElement(u.default,{value:e,label:(0,l.default)(r="".concat(a.memory_mb_used_gb," / ")).call(r,a.memory_mb_gb)})},width:180,stringify:(e,a)=>{var r,n,i,s;return(0,l.default)(r=(0,l.default)(n=(0,l.default)(i=(0,l.default)(s="".concat(e,"% (")).call(s,t("Used"),": ")).call(i,a.memory_mb_used_gb," / ")).call(n,t("Total"),": ")).call(r,a.memory_mb_gb,")")}},{title:t("Instances"),dataIndex:"running_vms"}]);a.hypervisorColumns=d;var c=[{label:t("Hostname"),name:"service_host"},{label:t("Type"),name:"hypervisor_type"}];a.hypervisorFilters=c},1256:function(e,t,a){"use strict";var r=a(35),n=a(44),i=a(33),l=a(25),s=a(28),o=a(45),u=a(46),d=a(19),c=a(21);d(t,"__esModule",{value:!0}),t.default=t.InstanceSnapshotStore=void 0;var f=c(a(33)),p=c(a(65)),h=c(a(28)),m=c(a(101)),g=c(a(52)),v=c(a(71)),y=c(a(37)),b=c(a(49)),_=a(520),S=c(a(54));function x(e,t){var a=r(e);if(n){var s=n(e);t&&(s=i(s).call(s,(function(t){return l(e,t).enumerable}))),a.push.apply(a,s)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=x(Object(r),!0)).call(a,(function(t){(0,y.default)(e,t,r[t])}));else if(o)u(e,o(r));else{var n;s(n=x(Object(r))).call(n,(function(t){d(e,t,l(r,t))}))}}return e}class I extends S.default{constructor(){super(...arguments),(0,y.default)(this,"updateParamsSortPage",((e,t,a)=>{t&&a&&(e.sort_key=t,e.sort_dir="descend"===a?"desc":"asc")})),(0,y.default)(this,"updateParamsSort",this.updateParamsSortPage)}get client(){return b.default.glance.images}get listFilterByProject(){return!0}get fetchListByLimit(){return!0}get paramsFunc(){return this.paramsFuncPage}get paramsFuncPage(){return(e,t)=>{var{id:a,current:r,owner:n}=e,i=w({},(0,v.default)(e,["id","current","owner"]));return n?i.owner=n:t||(i.owner=this.currentProjectId),i}}get mapperBeforeFetchProject(){return e=>w(w({},e),{},{project_name:e.owner_project_name||e.project_name,project_id:e.owner||e.project_id})}listDidFetch(e,t,a){return(0,g.default)((function*(){if(0===e.length)return e;var r=(0,f.default)(e).call(e,_.isSnapshot),{id:n}=a;if(!n)return r;var i={all_tenants:t},l=yield p.default.all([b.default.cinder.snapshots.list(i),b.default.nova.servers.volumeAttachments.list(n,{})]),s=l[0].snapshots,o=l[1].volumeAttachments,u=[];return(0,h.default)(r).call(r,(e=>{var{block_device_mapping:t="[]",instance_id:a}=e;if(a===n)u.push(e);else{var r,i=(0,m.default)(r=JSON.parse(t)).call(r,(e=>0===e.boot_index));if(i){e.snapshotId=i.snapshot_id;var l=(0,m.default)(s).call(s,(e=>e.id===i.snapshot_id));if(l){var d=l.volume_id;(0,m.default)(o).call(o,(e=>e.volumeId===d))&&u.push(e)}}else{var{instance_uuid:c}=e;n===c&&u.push(e)}}})),u}))()}detailDidFetch(e){return(0,g.default)((function*(){var t;e.originData=w({},e);var{block_device_mapping:a="[]"}=e,r=(0,m.default)(t=JSON.parse(a)).call(t,(e=>0===e.boot_index)),n=null,i="";if(r){var{snapshot_id:l}=r;e.snapshotId=l;var s=(yield b.default.cinder.snapshots.show(l)).snapshot;e.snapshotDetail=s;var{volume_id:o}=s,u=(yield b.default.cinder.volumes.show(o)).volume;e.volumeDetail=u,n=u.attachments.length>0?u.attachments[0].server_id:""}else{var{instance_uuid:d}=e;n=d}var c={};try{if(n){c=yield b.default.nova.servers.show(n);var{server:{name:f}={}}=c;i=f}}catch(e){}return e.instance={server_id:n,server_name:i},e.instanceDetail=c.server||{},e}))()}}t.InstanceSnapshotStore=I;var C=new I;t.default=C},1257:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.enablePFW=function(){var{neutronExtensions:e}=s.default,t=!1,a=!1;return(0,l.default)(e).call(e,(e=>{"floating-ip-port-forwarding"===e.alias?t=!0:"expose-port-forwarding-in-fip"===e.alias&&(a=!0)})),t&&a},a.availabilityZoneResource=a.availabilityZoneState=void 0;var l=i(r(28)),s=i(r(136)),o={available:t("Available"),unavailable:t("Unavailable")};a.availabilityZoneState=o;var u={router:t("Router"),network:t("Network")};a.availabilityZoneResource=u},1306:function(e,t,a){var r=a(1909);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(76)(r,n);r.locals&&(e.exports=r.locals)},1307:function(e,a,r){"use strict";var n=r(156),i=r(19),l=r(25),s=r(21);i(a,"__esModule",{value:!0}),a.default=a.QuotaOverview=a.getVolumeTypeCards=a.zunQuotaCard=a.shareQuotaCard=a.quotaCardList=void 0;var o=s(r(62)),u=s(r(33)),d=s(r(82)),c=s(r(65)),f=s(r(35));r(548);var p=s(r(549)),h=s(r(52));r(1428);var m=s(r(1308));r(324);var g=s(r(325));r(1115);var v=s(r(1116));r(1146);var y=s(r(1147));r(1117);var b=s(r(1118));r(1139);var _=s(r(1140)),S=s(r(37));r(387);var x=s(r(220)),w=s(r(1176)),I=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=M(t);if(a&&a.has(e))return a.get(e);var r={},n=i&&l;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=n?l(e,s):null;o&&(o.get||o.set)?i(r,s,o):r[s]=e[s]}r.default=e,a&&a.set(e,r);return r}(r(0)),C=(r(167),r(513),r(382)),k=s(r(524)),D=s(r(384)),T=s(r(136)),A=r(47),P=s(r(1306));function M(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(M=function(e){return e?a:t})(e)}var E={normal:{color:"#4CC9F0",text:t("Normal")},danger:{color:"#4361EE",text:t("Danger")},full:{color:"#E8684A",text:t("Full")}},N=I.default.createElement("span",null,t("Key Pair"),I.default.createElement(x.default,{title:t("The number of allowed key pairs for each user.")},I.default.createElement(w.default,{style:{marginLeft:4}}))),R=[{text:t("Compute"),type:"compute",value:[{text:t("Instances"),key:"instances"},{text:t("vCPUs"),key:"cores"},{text:t("Memory (GiB)"),key:"ram"},{text:N,key:"key_pairs"},{text:t("Server Group"),key:"server_groups"}]},{text:t("Storage"),type:"storage",value:[{text:t("Volumes"),key:"volumes"},{text:t("Gigabytes (GiB)"),key:"gigabytes"},{text:t("Snapshots"),key:"snapshots"},{text:t("Backups"),key:"backups"},{text:t("Backup gigabytes (GiB)"),key:"backup_gigabytes"}]},{text:t("Network"),type:"networks",value:[{text:t("Router"),key:"router"},{text:t("Network"),key:"network"},{text:t("Subnet"),key:"subnet"},{text:t("Floating IP"),key:"floatingip"},{text:t("Port"),key:"port"},{text:t("Security Group"),key:"security_group"},{text:t("Security Group Rule"),key:"security_group_rule"}]}];a.quotaCardList=R;var j={text:t("Share"),type:"share",value:[{text:t("Share"),key:"shares"},{text:t("Share Gigabytes(GiB)"),key:"share_gigabytes"},{text:t("Share Network"),key:"share_networks"},{text:t("Share Group"),key:"share_groups"}]};a.shareQuotaCard=j;var F={text:t("Containers Management"),type:"zun",value:[{text:t("Containers"),key:"zun_containers"},{text:t("CPU"),key:"zun_cpu"},{text:t("Memory (MiB)"),key:"zun_memory"},{text:t("Disk (GiB)"),key:"zun_disk"}]};a.zunQuotaCard=F;var L=e=>{var a=(0,o.default)(e).call(e,((e,a)=>({index:a,value:[{text:t("{name} type",{name:e.name}),key:"volumes_".concat(e.name)},{text:t("{name} type gigabytes(GiB)",{name:e.name}),key:"gigabytes_".concat(e.name)},{text:t("{name} type snapshots",{name:e.name}),key:"snapshots_".concat(e.name)}]})));return{text:t("Storage Types"),type:"volumeTypes",value:a}};a.getVolumeTypeCards=L;class O extends I.Component{constructor(e){var a;super(e),a=this,(0,S.default)(this,"getFilteredValue",(e=>(0,u.default)(e).call(e,(e=>!e.hidden)))),(0,S.default)(this,"getItemInfo",((e,a)=>{var r=0;e[a.key]&&(0,A.isNumber)(e[a.key].used)&&-1!==e[a.key].limit&&(r=e[a.key].used/e[a.key].limit*100);var n,i="-";e[a.key]&&(0,A.isNumber)(e[a.key].used)&&(i=(0,d.default)(n="".concat(e[a.key].used," / ")).call(n,-1===e[a.key].limit?t("Unlimit"):e[a.key].limit));var l=r>=90&&E.full.color||r>=80&&E.danger.color||E.normal.color,s=I.default.createElement("span",null,a.text," : ",i),{server_group_members:o}=e;return"server_groups"===a.key&&o&&(s=I.default.createElement("span",null,s," (",t("Member in group")," :",-1===o.limit?t("Unlimit"):o.limit,")")),I.default.createElement(I.default.Fragment,null,I.default.createElement("div",{className:P.default["progress-title"]},s),I.default.createElement(x.default,{title:s,placement:"top",getPopupContainer:e=>e.parentNode},I.default.createElement(_.default,{style:{marginTop:13,marginBottom:13},percent:r,showInfo:!1,strokeColor:l})))})),(0,S.default)(this,"renderQuotaCardList",(()=>{var e,{isLoading:t}=this.state;return I.default.createElement(b.default,{className:P.default.content},(0,o.default)(e=this.quotaCardList).call(e,(e=>I.default.createElement(v.default,{className:P.default.card,span:24,key:e.type},I.default.createElement(y.default,{title:e.text,bordered:!1,loading:t,size:"small"},I.default.createElement(b.default,{gutter:24},this.renderQuotaCardContent(e)))))),this.enableCinder?I.default.createElement(v.default,{className:P.default.card,span:24,key:this.volumeTypesQuota.type},I.default.createElement(y.default,{title:this.volumeTypesQuota.text,bordered:!1,loading:t,size:"small"},this.renderVolumeTypes())):null)})),(0,S.default)(this,"renderQuotaCard",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,o.default)(t).call(t,(t=>I.default.createElement(v.default,{key:t.text,span:12},a.getItemInfo(e,t))))})),(0,S.default)(this,"renderVolumeTypes",(()=>{var{isLoading:e}=this.state;return e?I.default.createElement(g.default,null):I.default.createElement(m.default,{itemLayout:"vertical",size:"large",pagination:{hideOnSinglePage:!0,pageSize:5,size:"small"},dataSource:this.volumeTypesQuota.value,renderItem:e=>{var t;return I.default.createElement(b.default,{key:e.index,gutter:[16]},(0,o.default)(t=e.value).call(t,(e=>I.default.createElement(v.default,{span:8,key:e.text},this.getItemInfo(this.projectStore.quota,e)))))}})})),this.state={isLoading:!0};var{projectStore:r,volumeTypeStore:n}=e;this.projectStore=r||D.default,this.volumeTypeStore=n||k.default}componentDidMount(){this.getData()}getData(){var e=this;return(0,h.default)((function*(){var{getData:t}=e.props;if(t)yield t();else{var{user:a}=e.props.rootStore,{project:{id:r=""}={}}=a,n=[e.projectStore.fetchProjectQuota({project_id:r,withKeyPair:!0})];e.enableCinder&&n.push(e.volumeTypeStore.fetchList()),yield c.default.all(n)}e.setState({isLoading:!1})}))()}get enableCinder(){return T.default.checkEndpoint("cinder")}get enableShare(){return T.default.checkEndpoint("manilav2")}get enableZun(){return T.default.checkEndpoint("zun")}get volumeTypeData(){var{volumeTypeData:e}=this.props;return e||this.volumeTypeStore.list.data}get volumeTypesQuota(){return L(this.volumeTypeData)}get quotaCardList(){var e=[...this.props.quotaCardList||R];return this.enableCinder||(e=(0,u.default)(e).call(e,(e=>"storage"!==e.type))),this.enableShare&&e.push(j),this.enableZun&&e.push(F),e}get quotaAction(){return this.props.quotaAction}renderQuotaCardContent(e){var{isLoading:t}=this.state;return t?I.default.createElement(g.default,null):this.renderQuotaCard(this.projectStore.quota,this.getFilteredValue(e.value))}render(){var e,{isLoading:a}=this.state;return I.default.createElement(y.default,{className:P.default.bottom,bodyStyle:{padding:0},loading:a,headStyle:{paddingLeft:"20px"},title:I.default.createElement("div",{className:P.default.title},I.default.createElement("span",{className:P.default.text},t("Quota Overview")),(0,o.default)(e=(0,f.default)(E)).call(e,(e=>I.default.createElement("span",{key:e,className:P.default.badge},I.default.createElement(p.default,{color:E[e].color,text:E[e].text}))))),extra:this.quotaAction},this.renderQuotaCardList())}}a.QuotaOverview=O;var z=(0,C.inject)("rootStore")((0,C.observer)(O));a.default=z},1311:function(e,t,a){"use strict";var r=a(35),n=a(44),i=a(33),l=a(25),s=a(28),o=a(45),u=a(46),d=a(19),c=a(21);d(t,"__esModule",{value:!0}),t.default=t.ServerGroupInstanceStore=void 0;var f=c(a(65)),p=c(a(62)),h=c(a(28)),m=c(a(37)),g=c(a(52)),v=c(a(71)),y=a(135),b=c(a(54));function _(e,t){var a=r(e);if(n){var s=n(e);t&&(s=i(s).call(s,(function(t){return l(e,t).enumerable}))),a.push.apply(a,s)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=_(Object(r),!0)).call(a,(function(t){(0,m.default)(e,t,r[t])}));else if(o)u(e,o(r));else{var n;s(n=_(Object(r))).call(n,(function(t){d(e,t,l(r,t))}))}}return e}class x extends b.default{get listResponseKey(){return"servers"}get paramsFunc(){return e=>{var{all_projects:t,members:a,isServerGroup:r}=e;return(0,v.default)(e,["all_projects","members","isServerGroup"])}}get groupArraySize(){return 1}requestList(e,t){var a=this;return(0,g.default)((function*(){var{members:r,isServerGroup:n,all_projects:i}=t;if(r&&n&&0===r.length)return[];var l=(0,y.groupArray)(r,a.groupArraySize),s=yield f.default.all((0,p.default)(l).call(l,(t=>{var r=S(S({},e),{},{uuid:t,all_projects:i});return a.skylineClient.extension.servers(r)}))),o=[];return(0,h.default)(s).call(s,(e=>{o.push(...e[a.listResponseKey])})),o}))()}listDidFetch(e){return(0,g.default)((function*(){return 0===e.length?e:(0,p.default)(e).call(e,(e=>S(S({},e),{},{tags:(e.origin_data||{}).tags||[]})))}))()}}t.ServerGroupInstanceStore=x;var w=new x;t.default=w},1312:function(e,t,a){"use strict";var r=a(35),n=a(44),i=a(33),l=a(25),s=a(28),o=a(45),u=a(46),d=a(19),c=a(21);d(t,"__esModule",{value:!0}),t.default=t.InstanceVolumeStore=void 0;var f=c(a(65)),p=c(a(62)),h=c(a(33)),m=c(a(28)),g=c(a(52)),v=c(a(71)),y=c(a(37)),b=a(515),_=c(a(49)),S=c(a(54));function x(e,t){var a=r(e);if(n){var s=n(e);t&&(s=i(s).call(s,(function(t){return l(e,t).enumerable}))),a.push.apply(a,s)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=x(Object(r),!0)).call(a,(function(t){(0,y.default)(e,t,r[t])}));else if(o)u(e,o(r));else{var n;s(n=x(Object(r))).call(n,(function(t){d(e,t,l(r,t))}))}}return e}class I extends S.default{constructor(){super(...arguments),(0,y.default)(this,"getFatherResourceId",(e=>e.serverId))}get client(){return _.default.nova.servers.volumeAttachments}get isSubResource(){return!0}get paramsFunc(){return e=>{var{id:t,serverId:a,all_projects:r,projectId:n,serverName:i}=e;return(0,v.default)(e,["id","serverId","all_projects","projectId","serverName"])}}get mapperBeforeFetchProject(){return(e,t)=>{var{projectId:a}=t;return w(w({},e),{},{project_id:a})}}get mapper(){return e=>w(w({},e),{},{disk_tag:(0,b.isOsDisk)(e)?"os_disk":"data_disk",host:e["os-vol-host-attr:host"]})}listDidFetch(e,t,a){return(0,g.default)((function*(){if(0===e.length)return e;var{serverName:t,serverId:r}=a,{project_id:n,project_name:i}=e[0],l=yield f.default.all((0,p.default)(e).call(e,(e=>{var{volumeId:t}=e;return _.default.cinder.volumes.show(t)})));return(0,p.default)(l).call(l,(e=>{var{volume:a}=e,{attachments:l=[]}=a,s=(0,h.default)(l).call(l,(e=>e.server_id===r));return(0,m.default)(s).call(s,(e=>{e.server_name=t})),a.attachments=s,w(w({},a),{},{project_id:n,project_name:i})}))}))()}}t.InstanceVolumeStore=I;var C=new I;t.default=C},1314:function(e,t,a){"use strict";var r=a(156),n=a(19),i=a(25),l=a(21);n(t,"__esModule",{value:!0}),t.default=void 0,a(387);var s=l(a(220));a(1139);var o=l(a(1140)),u=l(a(37)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=f(t);if(a&&a.has(e))return a.get(e);var r={},l=n&&i;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=l?i(e,s):null;o&&(o.get||o.set)?n(r,s,o):r[s]=e[s]}r.default=e,a&&a.set(e,r);return r}(a(0)),c=(a(167),l(a(16)));function f(e){if("function"!=typeof r)return null;var t=new r,a=new r;return(f=function(e){return e?a:t})(e)}class p extends d.Component{constructor(){super(...arguments),(0,u.default)(this,"getColor",(()=>{var{value:e,wanValue:t,dangerValue:a,infoColor:r,warnColor:n,dangerColor:i}=this.props;return e<t?r:e<a?n:i}))}render(){var{value:e,label:t}=this.props,a={percent:e,size:"small",strokeColor:this.getColor()};t&&(a.showInfo=!1);var r=void 0===e?"-":"".concat(e,"%");return d.default.createElement(s.default,{title:r,placement:"top"},d.default.createElement(o.default,a),t)}}t.default=p,(0,u.default)(p,"propTypes",{wanValue:c.default.number,dangerValue:c.default.number,infoColor:c.default.string,warnColor:c.default.string,dangerColor:c.default.string,value:c.default.number,label:c.default.string}),(0,u.default)(p,"defaultProps",{wanValue:70,dangerValue:90,infoColor:"rgba(0, 104, 255, 0.65)",warnColor:"rgba(254, 223, 64, 0.65)",dangerColor:"rgba(235, 53, 77, 0.65)",label:""})},1316:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.FloatingIps=void 0;var p=f(r(219)),h=f(r(28)),m=f(r(35)),g=f(r(62)),v=f(r(33)),y=f(r(546)),b=f(r(82));r(532);var _=f(r(533)),S=f(r(551));r(1117);var x=f(r(1118));r(1115);var w=f(r(1116)),I=f(r(52)),C=f(r(71)),k=f(r(37)),D=f(r(0)),T=r(382),A=f(r(1114)),P=r(1151),M=r(323),E=r(319),N=(r(167),r(513),r(83)),R=r(135),j=f(r(3460)),F=f(r(1458));function L(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=L(Object(r),!0)).call(a,(function(t){(0,k.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=L(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}class z extends A.default{constructor(){var e;super(...arguments),e=this,(0,k.default)(this,"updateFetchParams",(e=>{if(this.inQosDetail){var{id:t}=e;return O({qos_policy_id:t},(0,C.default)(e,["id"]))}return e})),(0,k.default)(this,"fetchDataByPage",function(){var t=(0,I.default)((function*(t){yield e.store.fetchListWithResourceName(t),e.list.silent=!1}));return function(e){return t.apply(this,arguments)}}())}init(){this.store=new M.FloatingIpStore,this.downloadStore=new M.FloatingIpStore}get qosEndpoint(){return(0,N.qosEndpoint)()}get isFilterByBackend(){return!this.inQosDetail}get isSortByBackend(){return!this.inQosDetail}get defaultSortKey(){return"status"}get inQosDetail(){var e;return this.inDetailPage&&(0,p.default)(e=this.path).call(e,"qos")}get isRecycleBinDetail(){var e;return this.inDetailPage&&(0,p.default)(e=this.path).call(e,"recycle-bin")}get inInstanceDetail(){var e;return this.inDetailPage&&(0,p.default)(e=this.path).call(e,"instance")}getData(){var e=arguments,t=()=>super.getData,a=this;return(0,I.default)((function*(){var r=e.length>0&&void 0!==e[0]?e[0]:{},{silent:n}=r,i=(0,C.default)(r,["silent"]);if(a.inDetailPage&&!a.inQosDetail){var l;n&&(a.list.silent=!0);var{detail:{addresses:s=[]}={}}=a.props,o=[];(0,h.default)(l=(0,m.default)(s)).call(l,(e=>{var t,a;o.push(...(0,g.default)(t=(0,v.default)(a=s[e]).call(a,(e=>"fixed"===e["OS-EXT-IPS:type"]))).call(t,(e=>e.addr)))})),i.fixed_ip_address=o,i.all_projects=a.isAdminPage,o.length>0?yield a.store.fetchListWithResourceName(i):a.list.isLoading=!1}else t().call(a,O({silent:n},i))}))()}get fetchDataByCurrentProject(){return!0}get policy(){return"get_floatingip"}get name(){return t("floating ips")}get actionConfigs(){return this.isRecycleBinDetail?E.emptyActionConfig:this.inInstanceDetail?this.isAdminPage?F.default.instanceDetailAdminConfigs:F.default.instanceDetailConfigs:this.inQosDetail?this.isAdminPage?F.default.qosDetailAdminConfigs:F.default.qosDetailConfigs:this.isAdminPage?F.default.adminConfigs:F.default.actionConfigs}get transitionStatusList(){return P.transitionStatuses}get adminPageHasProjectFilter(){return!0}getRecordPortForwarding(e){var t;return(0,y.default)(t=e.port_forwardings||[]).call(t,((e,t)=>e.external_port-t.external_port))}getPortForwardingRender(e){var a=this.getRecordPortForwarding(e);return a.length?D.default.createElement(_.default,{content:D.default.createElement(x.default,{className:j.default["popover-row"],gutter:[8,8]},(0,g.default)(a).call(a,((t,a)=>{var r,n,i;return D.default.createElement(w.default,{span:24,key:"pfw-".concat(a)},(0,b.default)(r=(0,b.default)(n=(0,b.default)(i="".concat(e.floating_ip_address,":")).call(i,t.external_port," => ")).call(n,t.internal_ip_address,":")).call(r,t.internal_port))}))),title:t("Port Forwarding"),destroyTooltipOnHide:!0},t("{number} port forwarding rules",{number:a.length}),"",D.default.createElement(S.default,null)):null}getPortForwardingStringify(e){var a=this.getRecordPortForwarding(e);if(!a.length)return"";var r=(0,g.default)(a).call(a,(t=>{var a,r,n;return(0,b.default)(a=(0,b.default)(r=(0,b.default)(n="".concat(e.floating_ip_address,":")).call(n,t.external_port," => ")).call(r,t.internal_ip_address,":")).call(a,t.internal_port)}));return[t("{number} port forwarding rules",{number:a.length}),...r].join("\n")}getResourceRender(e,t){return e&&"-"!==e?e:this.getPortForwardingRender(t)||"-"}geResourceStringify(e,t){return e&&"-"!==e?e:this.getPortForwardingStringify(t)||"-"}getColumns(){return[{title:t("ID/Floating IP"),dataIndex:"floating_ip_address",isLink:!0,routeName:this.getRouteName("fipDetail")},{title:t("QoS Policy"),dataIndex:"qos_policy_name",isLink:!0,routeName:this.getRouteName("networkQosDetail"),idKey:"qos_policy_id",hidden:!this.qosEndpoint||this.inQosDetail},{title:t("Project ID/Name"),dataIndex:"project_name",hidden:!this.isAdminPage,sortKey:"project_id"},{title:t("Description"),dataIndex:"description",render:e=>e||"-",isHideable:!0,sorter:!1},{title:t("Associated Resource"),dataIndex:"resource_name",render:(e,t)=>this.getResourceRender(e,t),stringify:(e,t)=>this.geResourceStringify(e,t),isHideable:!0,sorter:!1},{title:t("Status"),dataIndex:"status",render:e=>P.floatingIpStatus[e]||"-"},{title:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime",isHideable:!0,sorter:!1}]}get searchFilters(){return[{label:t("Floating IP"),name:"floating_ip_address"},{label:t("Status"),name:"status",options:(0,R.getOptions)(P.floatingIpStatus)}]}}a.FloatingIps=z;var B=(0,T.inject)("rootStore")((0,T.observer)(z));a.default=B},1317:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.VirtualAdapter=void 0;var p=f(r(82)),h=f(r(62)),m=f(r(33)),g=f(r(219)),v=f(r(518)),y=f(r(71)),b=f(r(37)),_=f(r(0)),S=r(382),x=f(r(1114)),w=r(521),I=r(1129),C=r(319),k=f(r(1460));function D(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}class T extends x.default{constructor(){super(...arguments),(0,b.default)(this,"updateFetchParamsByPage",(e=>{var{id:t}=e,a=function(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=D(Object(r),!0)).call(a,(function(t){(0,b.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=D(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}({},(0,y.default)(e,["id"]));return this.isInstanceDetail?a.device_id=t:this.isNetworkDetail?a.network_id=t:a.device_owner=["compute:nova",""],a})),(0,b.default)(this,"getColumns",(()=>{var e=[{title:t("ID/Name"),dataIndex:"name",routeName:this.getRouteName("virtualAdapterDetail")},{title:t("Project ID/Name"),dataIndex:"project_name",hidden:!this.isAdminPage,isHideable:!0,sortKey:"project_id"},{title:t("Bind Resource"),dataIndex:"server_name",stringify:(e,t)=>{var a,r,n,i;return t.device_id&&"compute:nova"===t.device_owner?(0,p.default)(n=(0,p.default)(i="".concat(t.device_owner," \n ")).call(i,t.device_id," (")).call(n,e,")"):(0,p.default)(a=(0,p.default)(r="\n            ".concat(t.device_owner," ")).call(r,t.device_owner&&"\n","\n            ")).call(a,t.device_id||"-","\n          ")},render:(e,t)=>{var{device_id:a,device_owner:r}=t;if(a&&"compute:nova"===r){var n,i=e?(0,p.default)(n="".concat(a," (")).call(n,e,")"):a,l=this.getLinkRender("instanceDetail",i,{id:t.device_id},{tab:"interface"});return _.default.createElement(_.default.Fragment,null,t.device_owner,_.default.createElement("br",null),l)}return _.default.createElement(_.default.Fragment,null,t.device_owner,t.device_owner&&_.default.createElement("br",null),t.device_id||"-")},isHideable:!0,sorter:!1},{title:t("Owned Network"),dataIndex:"network_name",isLink:!0,routeName:this.getRouteName("networkDetail"),idKey:"network_id",sorter:!1},{title:t("IPv4 Address"),dataIndex:"ipv4",render:e=>(0,h.default)(e).call(e,(e=>_.default.createElement("div",{key:e},e))),isHideable:!0,stringify:e=>e.join(","),sorter:!1},{title:t("IPv6 Address"),dataIndex:"ipv6",render:e=>(0,h.default)(e).call(e,(e=>_.default.createElement("div",{key:e},e))),isHideable:!0,stringify:e=>e.join(","),sorter:!1},{title:t("Mac Address"),dataIndex:"mac_address",isHideable:!0},{title:t("Status"),dataIndex:"status",render:e=>I.portStatus[e]||e}];return this.isInstanceDetail?(0,m.default)(e).call(e,(e=>"server_name"!==e.dataIndex)):this.isNetworkDetail?(0,m.default)(e).call(e,(e=>"network_name"!==e.dataIndex)):e}))}init(){this.store=new w.VirtualAdapterStore,this.downloadStore=new w.VirtualAdapterStore}get isInstanceDetail(){var e,t;return this.inDetailPage&&((0,g.default)(e=this.path).call(e,"compute/instance")||(0,g.default)(t=this.path).call(t,"management/recycle-bin"))}get isNetworkDetail(){var e,t;return this.inDetailPage&&((0,g.default)(e=this.path).call(e,"networks/detail")||(0,g.default)(t=this.path).call(t,"networks-admin/detail"))}get isFilterByBackend(){return!0}get isSortByBackend(){return!0}get defaultSortKey(){return"status"}get policy(){return"get_port"}get name(){return t("virtual adapters")}get adminPageHasProjectFilter(){return!0}get isRecycleBinDetail(){var e;return this.inDetailPage&&(0,g.default)(e=this.path).call(e,"recycle-bin")}get actionConfigs(){return this.isRecycleBinDetail?C.emptyActionConfig:this.isAdminPage?k.default.adminActions:this.inDetailPage?this.isInstanceDetail?k.default.actionConfigsInDetail:k.default.noActions:k.default.actionConfigs}get searchFilters(){var e=[{label:t("Name"),name:"name"},{label:t("Status"),name:"status",options:[{label:t("Active"),key:"ACTIVE"},{label:t("Down"),key:"DOWN"},{label:t("Error"),key:"ERROR"},{label:t("Build"),key:"BUILD"},{label:t("N/A"),key:"N/A"}]}];return this.isNetworkDetail||(0,v.default)(e).call(e,1,0,{label:t("Owned Network"),name:"network_name"}),e}}a.VirtualAdapter=T;var A=(0,S.inject)("rootStore")((0,S.observer)(T));a.default=A},1324:function(e,t,a){"use strict";var r=a(19),n=a(21);r(t,"__esModule",{value:!0}),t.default=t.CredentialStore=void 0;var i,l=n(a(3825)),s=n(a(28)),o=n(a(25)),u=n(a(52)),d=n(a(71)),c=n(a(55)),f=a(32),p=n(a(49)),h=n(a(136)),m=n(a(1126)),g=n(a(54)),v=(i=class extends g.default{get isSubResource(){return!0}get client(){return p.default.keystone.users.applicationCredentials}get paramsFunc(){return e=>{var{current:t,id:a,all_projects:r}=e;return(0,d.default)(e,["current","id","all_projects"])}}create(e){var t={};return t[this.responseKey]=e,this.submitting(this.client.create(h.default.user.user.id,t))}listDidFetch(e,t){return(0,u.default)((function*(){if(!t)try{var a=yield m.default.getUserProjects(),r=new l.default;(0,s.default)(a).call(a,(e=>{r.set(e.id,e.name)})),(0,s.default)(e).call(e,(e=>{e.project_name=r.get(e.project_id)||"-"}))}catch(t){return e}return e}))()}},(0,c.default)(i.prototype,"create",[f.action],(0,o.default)(i.prototype,"create"),i.prototype),i);t.CredentialStore=v;var y=new v;t.default=y},1350:function(e,a,r){"use strict";var n=r(156),i=r(19),l=r(25),s=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var o=s(r(65));r(318);var u=s(r(317));r(1236);var d=s(r(1237)),c=s(r(37)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=m(t);if(a&&a.has(e))return a.get(e);var r={},n=i&&l;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=n?l(e,s):null;o&&(o.get||o.set)?i(r,s,o):r[s]=e[s]}r.default=e,a&&a.set(e,r);return r}(r(0)),p=(r(167),s(r(16))),h=r(135);function m(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(m=function(e){return e?a:t})(e)}class g extends f.Component{static propTypes(){return{title:p.default.string.isRequired,buttonType:p.default.string,render:p.default.func,component:p.default.node,item:p.default.any,modalSize:p.default.string,okText:p.default.string,cancelText:p.default.string,handleOk:p.default.func,className:p.default.func,buttonText:p.default.string,buttonClassName:p.default.string,showCancelButton:p.default.bool,style:p.default.object,onClickButton:p.default.func,onFinishAction:p.default.func,onCancelAction:p.default.func}}constructor(e){super(e),(0,c.default)(this,"getModalWidth",(e=>{switch(e){case"small":return 520;case"middle":return 720;case"large":return 1200;default:return 520}})),(0,c.default)(this,"onClick",(e=>{e&&e.stopPropagation();var{onClickButton:t}=this.props;t&&t(),this.showModal()})),(0,c.default)(this,"onFinishAction",(()=>{var{onFinishAction:e}=this.props;e&&e()})),(0,c.default)(this,"handleOk",(()=>{var{handleOk:e}=this.props;e?(this.setState({submitLoading:!0}),e()instanceof o.default?e().finally((()=>{this.hideModal(),this.onFinishAction(),this.setState({submitLoading:!1})})):(this.hideModal(),this.onFinishAction(),this.setState({submitLoading:!1}))):(this.hideModal(),this.onFinishAction())})),(0,c.default)(this,"handleCancel",(()=>{var{onCancelAction:e}=this.props;e&&e(),this.hideModal()})),(0,c.default)(this,"hideModal",(()=>{this.setState({visible:!1})})),(0,c.default)(this,"showModal",(()=>{this.setState({visible:!0})})),this.state={visible:!1,submitLoading:!1}}renderModal(){var{visible:e,submitLoading:t}=this.state;if(!e)return null;var{title:a,item:r,modalSize:n,className:i,okText:l,cancelText:s,render:o,component:u,showCancelButton:c}=this.props,p=this.getModalWidth(n),m=o?o(r):u,g={visible:e,title:a,key:"modal-".concat((0,h.generateId)()),className:i,width:p,onOk:this.handleOk,onCancel:this.handleCancel,okText:l,cancelText:s,confirmLoading:t};return c||(g.cancelButtonProps={style:{display:"none"}}),f.default.createElement(d.default,g,m)}render(){var{buttonText:e,title:t,danger:a,style:r,buttonType:n,buttonClassName:i}=this.props;return f.default.createElement(f.default.Fragment,null,f.default.createElement(u.default,{type:n,danger:a,onClick:this.onClick,className:i,style:r},e||t),this.renderModal())}}a.default=g,(0,c.default)(g,"defaultProps",{buttonType:"primary",render:null,component:null,item:null,okText:t("Confirm"),cancelText:t("Cancel"),handleOk:null,className:"",buttonClassName:"",showCancelButton:!1,style:{},onClickButton:null,onFinishAction:null,onCancelAction:null})},1442:function(e,a,r){"use strict";var n=r(219),i=r(35),l=r(44),s=r(33),o=r(25),u=r(28),d=r(45),c=r(46),f=r(19),p=r(21);f(a,"__esModule",{value:!0}),a.default=a.BaseTable=void 0;var h=p(r(62)),m=p(r(33)),g=p(r(219)),v=p(r(82)),y=p(r(28)),b=p(r(91));r(530);var _=p(r(531)),S=p(r(1437)),x=p(r(1435)),w=p(r(1192));r(535);var I=p(r(397)),C=p(r(1284));r(1124);var k=p(r(1125));r(318);var D=p(r(317)),T=p(r(71));r(1189);var A=p(r(1190)),P=p(r(1176));r(387);var M=p(r(220)),E=p(r(551)),N=p(r(37)),R=p(r(0)),j=p(r(16)),F=p(r(4)),L=p(r(1310)),O=r(32),z=r(47),B=(r(167),p(r(1296))),V=p(r(1365)),q=(r(513),p(r(3351))),U=r(541),Q=r(135),G=r(231),K=r(517),H=r(382),W=p(r(136)),Y=p(r(3354)),Z=p(r(1166)),J=p(r(1253)),X=p(r(3357)),$=p(r(3360)),ee=p(r(3364));function te(e,t){var a=i(e);if(l){var r=l(e);t&&(r=s(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function ae(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)u(a=te(Object(r),!0)).call(a,(function(t){(0,N.default)(e,t,r[t])}));else if(d)c(e,d(r));else{var n;u(n=te(Object(r))).call(n,(function(t){f(e,t,o(r,t))}))}}return e}class re extends R.default.Component{constructor(e){var a,r,i;super(e),(0,N.default)(this,"getDataIndex",(e=>(0,z.isArray)(e)?e.join(","):e)),(0,N.default)(this,"getSortKey",(e=>{var{field:t,column:a}=e;return t&&a?a.sortKey||a.dataIndex:null})),(0,N.default)(this,"handleChange",((e,t,a,r)=>{var{action:n}=r,i=ae({limit:e.pageSize,page:e.current,current:e.current,sortKey:this.getSortKey(a),sortOrder:a.order},t),{isCourier:l,isPageByBack:s}=this.props;if("sort"===n){if(!l&&s){var{pagination:o}=this.props;i=ae(ae({},i),{},{limit:o.pageSize,page:o.current,current:o.current})}this.sortKey=this.getSortKey(a),this.sortOrder=a.order,this.props.onFetchBySort(i)}else this.props.onFetch(i)})),(0,N.default)(this,"handlePageChange",((e,t)=>{var{filters:a}=this.state,{onFetch:r,defaultSortKey:n,defaultSortOrder:i}=this.props;r&&r(ae({limit:t,page:e,current:e,sortKey:this.sortKey||n,sortOrder:this.sortOrder||i},a))})),(0,N.default)(this,"handleRefresh",(()=>{this.props.onRefresh(!0)})),(0,N.default)(this,"handleRowHide",(e=>{var t,a=(0,h.default)(t=this.hideableRows).call(t,(e=>e.value));this.setState({hideRow:(0,m.default)(a).call(a,(t=>!(0,g.default)(e).call(e,t)))},(()=>{var e;(0,G.setLocalStorageItem)((0,v.default)(e="".concat(this.useId,"-")).call(e,this.props.resourceName),this.state.hideRow)}))})),(0,N.default)(this,"handleCancelSelect",(()=>{this.props.onSelectRowKeys([])})),(0,N.default)(this,"handleFilterChange",((e,t)=>{if(!(0,L.default)(e,this.props.filters)||!(0,L.default)(t,this.props.timeFilter)){this.setState({filters:e,timeFilter:t});var{pageSize:a}=this.props.pagination,{sortKey:r,sortOrder:n,onFilterChange:i}=this.props;i&&i(ae({limit:a,page:1,sortKey:r,sortOrder:n},e),t)}})),(0,N.default)(this,"handleTimeChange",(e=>{this.handleFilterChange(this.state.filters,e)})),(0,N.default)(this,"handleFilterInput",(e=>{var t={};(0,y.default)(e).call(e,(e=>{t[(0,m.default)(e).name]=e.value})),this.handleFilterChange(t,this.state.timeFilter)})),(0,N.default)(this,"handleInputFocus",(e=>{var{handleInputFocus:t}=this.props;t&&t(e)})),(0,N.default)(this,"handleFilterInputText",(e=>{var t={},{value:a}=e.currentTarget;a&&(t.keywords=a),this.handleFilterChange(t,this.state.timeFilter)})),(0,N.default)(this,"hasItemActions",(()=>{var{firstAction:e,moreActions:t,actionList:a}=this.itemActions;return!!e||(!(!t||!t.length)||a&&a.length>0)})),(0,N.default)(this,"getProjectId",(e=>e.project_id||e.owner||e.fingerprint||e.tenant)),(0,N.default)(this,"getProjectRender",(e=>e||((e,t)=>{var a=this.getProjectId(t);if(!a)return"-";var r=(0,K.getLinkRender)({key:"projectDetailAdmin",params:{id:a},value:a});return R.default.createElement(R.default.Fragment,null,R.default.createElement("div",null,W.default.hasAdminRole?r:a),R.default.createElement("div",null,e||"-"))}))),(0,N.default)(this,"getNoValueRender",(e=>e||(e=>(0,Q.getNoValue)(e)))),(0,N.default)(this,"getPriceRender",((e,t)=>e||(e=>{var t=(0,z.isString)(e)?e:(e||0).toFixed(2);return R.default.createElement("span",{style:{color:"#f50"}},t)}))),(0,N.default)(this,"getTipRender",(function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:E.default,n=(n,i)=>{var l=e(n,i),s=t?t(n,i):(0,z.get)(i,a);return l?R.default.createElement("div",null,s,R.default.createElement(M.default,{title:l},R.default.createElement(r,{style:{marginLeft:8}}))):s};return n})),(0,N.default)(this,"getColumnTitle",(e=>{var{title:t,titleTip:a}=e;return a?R.default.createElement("span",null,t,R.default.createElement(M.default,{title:a},R.default.createElement(P.default,{style:{marginLeft:8}}))):t})),(0,N.default)(this,"getBaseColumns",(e=>(0,h.default)(e).call(e,(e=>{var{Paragraph:t}=A.default,{sortable:a,dataIndex:r,valueRender:n,sorter:i,sortOrder:l,render:s,copyable:o,tip:u,isStatus:d,isName:c,isLink:f,routeName:p,linkPrefix:h,isPrice:m}=e,g=(0,T.default)(e,["sortable","dataIndex","valueRender","sorter","sortOrder","render","copyable","tip","isStatus","isName","isLink","routeName","linkPrefix","isPrice"]),v=(0,U.getColumnSorter)(e,this.props),y=l||v?(0,U.getSortOrder)(r,this.props):null,b=s||(0,U.getRender)(n);if((0,U.checkIsStatusColumn)(r,d)&&(b=(0,U.getStatusRender)(b)),"description"===r&&(b=this.getNoValueRender(b)),"project_name"===r&&(b=this.getProjectRender(b)),"name"===r&&p||f){var{rowKey:_}=this.props;b=(0,U.getNameRenderByRouter)(b,e,_)}if("name"===r&&h||c){var{rowKey:S}=this.props;b=(0,U.getNameRender)(b,e,S)}if(("cost"===r||m)&&(b=this.getPriceRender(b,e)),o&&(b=e=>e&&"-"!==e?R.default.createElement(t,{copyable:!0},e):"-"),u){var{tipIcon:x}=e;b=this.getTipRender(u,b,r,x)}var w=ae(ae({},g),{},{title:this.getColumnTitle(e),dataIndex:r,align:e.align||"left"});return v&&(w.sorter=v),l&&(w.sortOrder=y),(0,U.updateColumnSort)(w,this.props),b&&(w.render=b),ae(ae({},w),{},{render:(e,t)=>(0,U.columnRender)(w.render,e,t)})})))),(0,N.default)(this,"getColumns",(()=>{var e,{columns:a,containerProps:r,onClickAction:i,onFinishAction:l,onCancelAction:s,isAdminPage:o}=this.props,{hideRow:u}=this.state,d=(0,m.default)(e=(0,m.default)(a).call(a,(e=>!e.hidden))).call(e,(e=>!n(z)(u,this.getDataIndex(e.dataIndex)))),c=this.getBaseColumns(d);return this.hasItemActions()?[...c,{title:t("Action"),key:"operation",width:150,render:(e,t,a)=>R.default.createElement(Z.default,{isAdminPage:o,actions:this.itemActions,onFinishAction:l,onCancelAction:s,item:t,index:a,containerProps:r,onClickAction:i})}]:c})),(0,N.default)(this,"stopRefreshAuto",(()=>{this.setState({autoRefresh:!1});var{stopRefreshAuto:e}=this.props;e&&e()})),(0,N.default)(this,"startRefreshAuto",(()=>{this.setState({autoRefresh:!0});var{startRefreshAuto:e}=this.props;e&&e()})),(0,N.default)(this,"renderSelectedTitle",(()=>R.default.createElement("div",{className:ee.default["select-title"]},R.default.createElement("div",null,this.renderBatchActions()),R.default.createElement("div",null,R.default.createElement(D.default,{type:"flat",className:ee.default["cancel-select"],onClick:this.handleCancelSelect},t("Cancel Select")))))),(0,N.default)(this,"renderTableTitle",(()=>this.renderNormalTitle())),(0,N.default)(this,"renderRowMenu",(()=>{var{hideRow:e}=this.state;return R.default.createElement(Y.default,{className:ee.default["column-menu"],options:this.hideableRows,value:(e=>{var t,a=[];return(0,y.default)(t=this.hideableRows).call(t,(t=>{-1===(0,b.default)(e).call(e,t.value)&&a.push(t.value)})),a})(e),onChange:this.handleRowHide})})),(0,N.default)(this,"renderTableFooter",(e=>{var{page:t,current:a,pageSize:r,total:n,pageSizeOptions:i}=this.props.pagination,{isLoading:l,hideTotal:s}=this.props;return R.default.createElement(V.default,{current:t||a||1,pageSize:r,onChange:this.handlePageChange,currentDataSize:e.length,pageSizeOptions:i||[10,20,50,100],total:n,isLoading:l,onFocusChange:this.handleInputFocus,hideTotal:s})})),this.state={hideRow:(0,G.getLocalStorageItem)((0,v.default)(a="".concat(this.useId,"-")).call(a,this.props.resourceName))||[],filters:[],timeFilter:{},autoRefresh:e.autoRefresh},this.sortKey=e.defaultSortKey,this.sortOrder=e.defaultSortOrder,this.suggestions=(0,h.default)(r=(0,m.default)(i=e.columns).call(i,(e=>e.search&&e.dataIndex))).call(r,(e=>{var t;return{label:e.title,key:e.dataIndex,options:e.filters&&(0,h.default)(t=e.filters).call(t,(e=>({label:e.text,key:e.value})))}}))}get hideableRows(){var e,t,a;return(0,h.default)(e=(0,m.default)(t=(0,m.default)(a=this.props.columns).call(a,(e=>!e.hidden))).call(t,(e=>e.isHideable))).call(e,(e=>({label:e.title,value:this.getDataIndex(e.dataIndex)||e.key})))}get useId(){var{user:e={}}=(0,O.toJS)(this.props.rootStore)||{},{user:{id:t}={}}=e||{};return t}get itemActions(){var{itemActions:e={}}=this.props;return e}filterDownloadColumns(e){var a,r,{rowKey:n}=this.props,i=(0,h.default)(a=(0,m.default)(e).call(e,(e=>!e.hidden))).call(a,(e=>{var{title:a,splitColumnForDownload:r=!0}=e;if((0,g.default)(a).call(a,"/")&&r){var i,l,[s,o]=e.title.split("/"),u=o;if(s.length>2)u=(0,v.default)(l="".concat(s.split("ID")[0])).call(l,o);var d=e.idKey||n;return(0,g.default)(i=e.title).call(i,t("Project"))&&"project_name"===e.dataIndex&&(d="project_id"),[{title:s,dataIndex:d},ae(ae({},e),{},{title:u})]}return e}));return(0,v.default)(r=[]).call(r,...i)}renderBatchActions(){var{batchActions:e,selectedRowKeys:t,data:a,rowKey:r,containerProps:n,onClickAction:i,onFinishAction:l,onCancelAction:s,resourceName:o,isAdminPage:u}=this.props,d=(0,m.default)(a).call(a,(e=>(0,b.default)(t).call(t,e[r])>=0));return e?R.default.createElement(X.default,{isAdminPage:u,visibleButtonNumber:3,selectedItemKeys:t,selectedItems:d,batchActions:e,onFinishAction:l,onCancelAction:s,containerProps:n,onClickAction:i,resourceName:o}):null}renderTimeFilter(){var{showTimeFilter:e,filterTimeDefaultValue:t}=this.props;if(!e)return null;var a={onChange:this.handleTimeChange,className:ee.default.timer};return void 0!==t&&(a.defaultValue=t),R.default.createElement(q.default,a)}renderSearch(){var{hideSearch:e,searchFilters:a,initFilter:r={}}=this.props;return e?null:a.length>0?R.default.createElement("div",{className:ee.default["search-row"]},R.default.createElement(B.default,{filterParams:a,initValue:r,onInputChange:this.handleFilterInput,onInputFocus:this.handleInputFocus,placeholder:t("Multiple filter tags are separated by enter")})):R.default.createElement("div",{className:ee.default["search-row"]},R.default.createElement(k.default,{placeholder:t("Enter query conditions to filter"),onChange:this.handleFilterInputText}))}renderActions(){var{isAdminPage:e,primaryActions:t,containerProps:a,onClickAction:r,onFinishAction:n,onCancelAction:i,primaryActionsExtra:l}=this.props;return t?R.default.createElement(J.default,{isAdminPage:e,primaryActions:t,containerProps:a,onClickAction:r,onFinishAction:n,onCancelAction:i,primaryActionsExtra:l}):null}renderCustomButton(){var{hideCustom:e}=this.props;return e?null:R.default.createElement(I.default,{overlay:this.renderRowMenu()},R.default.createElement(D.default,{className:ee.default["custom-button"],type:"default",icon:R.default.createElement(C.default,null)}))}renderDownload(){var{pagination:e,data:t,columns:a,resourceName:r,detailName:n,getDownloadData:i,onClickAction:l,onCancelAction:s,hideDownload:o}=this.props;if(o)return null;var{total:u}=e,d={data:t,columns:this.filterDownloadColumns(a),total:u,getValueRenderFunc:U.getValueRenderFunc,resourceName:r,extraName:n,getData:i,onBeginDownload:l,onFinishDownload:s,onCancelDownload:s};return R.default.createElement($.default,d)}renderRefresh(){var{hideRefresh:e}=this.props;return e?null:R.default.createElement(D.default,{type:"default",icon:R.default.createElement(w.default,null),onClick:this.handleRefresh})}renderRefreshAuto(){var{hideAutoRefresh:e}=this.props;if(e)return null;var{autoRefresh:a}=this.state;if(a){var r=t("Stop auto refreshing data");return R.default.createElement(M.default,{title:r},R.default.createElement(D.default,{type:"primary",icon:R.default.createElement(x.default,null),onClick:this.stopRefreshAuto}))}var n=t("Start auto refreshing data");return R.default.createElement(M.default,{title:n},R.default.createElement(D.default,{type:"default",icon:R.default.createElement(S.default,null),onClick:this.startRefreshAuto}))}renderNormalTitle(){return R.default.createElement("div",{className:ee.default["table-header"]},R.default.createElement("div",{className:(0,F.default)(ee.default["table-header-btns"],"table-header-btns")},this.renderRefresh(),this.renderActions(),this.renderBatchActions(),this.renderCustomButton(),this.renderDownload(),this.renderRefreshAuto()),this.renderTimeFilter(),this.renderSearch())}render(){var{className:e,data:t,isLoading:a,silentLoading:r,rowKey:n,selectedRowKeys:i,onSelectRowKeys:l,hideHeader:s,getCheckboxProps:o,pagination:u,scrollY:d,expandable:c,isPageByBack:f=!0,isCourier:p,childrenColumnName:h}=this.props,m=null,g=!(!p&&f)&&ae(ae({},u),{},{size:"small"});s||this.renderTableTitle;var v=!p&&f?this.renderTableFooter:null;l&&(m={selectedRowKeys:i,getCheckboxProps:o,onChange:l});var y=this.renderTableTitle(),b=this.getColumns(),S={};return d>0&&(S.y=d||400),R.default.createElement("div",null,y,R.default.createElement(_.default,{className:(0,F.default)(ee.default.table,"sl-table",e),rowKey:n,columns:b,dataSource:(0,O.toJS)(t),loading:!r&&a,onChange:this.handleChange,pagination:g,rowSelection:m,sortDirections:["ascend","descend","ascend"],scroll:S,showSorterTooltip:!1,expandable:c,footer:v,childrenColumnName:h}))}}a.BaseTable=re,(0,N.default)(re,"propTypes",{data:j.default.oneOfType([j.default.array,j.default.object]).isRequired,columns:j.default.array.isRequired,selectedRowKeys:j.default.array,isLoading:j.default.bool,pagination:j.default.object,filters:j.default.object,keyword:j.default.string,rowKey:j.default.any,onFetch:j.default.func,onFilterChange:j.default.func,onSelectRowKeys:j.default.func,getCheckboxProps:j.default.func,hideHeader:j.default.bool,hideSearch:j.default.bool,hideCustom:j.default.bool,batchActions:j.default.array,alwaysUpdate:j.default.bool,emptyText:j.default.oneOfType([j.default.string||j.default.func]),resourceName:j.default.string,detailName:j.default.string,expandable:j.default.object,showTimeFilter:j.default.bool,timeFilter:j.default.any,isPageByBack:j.default.bool,isSortByBack:j.default.bool,autoRefresh:j.default.bool,hideRefresh:j.default.bool,hideAutoRefresh:j.default.bool,startRefreshAuto:j.default.func,stopRefreshAuto:j.default.func,dataDurationAuto:j.default.number,defaultSortKey:j.default.string,defaultSortOrder:j.default.string,hideTotal:j.default.bool,hideDownload:j.default.bool,primaryActionsExtra:j.default.any,isAdminPage:j.default.bool,containerProps:j.default.any}),(0,N.default)(re,"defaultProps",{rowKey:"name",selectedRowKeys:[],onFetch(){},hideHeader:!1,hideSearch:!1,hideCustom:!1,resourceName:"",detailName:"",expandable:void 0,showTimeFilter:!1,isPageByBack:!1,isSortByBack:!1,autoRefresh:!0,hideRefresh:!1,hideAutoRefresh:!1,dataDurationAuto:15,defaultSortKey:"",defaultSortOrder:"",hideTotal:!1,hideDownload:!1,primaryActionsExtra:null,isAdminPage:!1});var ne=(0,H.inject)("rootStore")(re);a.default=ne},1443:function(e,t,a){"use strict";var r=a(19),n=a(21);r(t,"__esModule",{value:!0}),t.default=t.ActionLogStore=void 0;var i=n(a(49)),l=n(a(54));class s extends l.default{get client(){return i.default.nova.servers.instanceActions}get isSubResource(){return!0}get paramsFunc(){return()=>({})}detailFetchByClient(e){var{id:t,requestId:a}=e;return this.client.show(t,a)}}t.ActionLogStore=s;var o=new s;t.default=o},1447:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.CreateKeypair=void 0;var p=f(r(65)),h=f(r(52)),m=f(r(37)),g=r(382),v=r(1113),y=f(r(396)),b=f(r(384)),_=f(r(1217));function S(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=S(Object(r),!0)).call(a,(function(t){(0,m.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=S(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}var w=()=>{var{total:e=0,data:t=[]}=y.default.list||{};return e||t.length},I=e=>{var{limit:t=0}=e||{};return-1===t||t>w()?1:0};class C extends v.ModalAction{constructor(){super(...arguments),(0,m.default)(this,"onSubmit",(e=>{var{name:t,public_key:a}=e,r={name:t,public_key:a,type:"ssh"};return y.default.create(r).then((e=>{if(!a){var{keypair:{private_key:r}}=e,n="".concat(t,".pem"),i=new Blob([r],{type:"text/plain;charset=utf-8"});_.default.saveAs(i,n)}}))}))}get name(){return t("Create Keypair")}init(){this.state.quota={},this.state.quotaLoading=!0,this.projectStore=b.default,this.getQuota()}get tips(){return t("Quota of key pair means: the number of allowed key pairs for each user.")}static get disableSubmit(){var{novaQuota:{key_pairs:e={}}}=b.default;return 0===I(e)}static get showQuota(){return!0}get showQuota(){return!0}getQuota(){var e=this;return(0,h.default)((function*(){e.setState({quotaLoading:!0});var t=yield e.projectStore.fetchProjectNovaQuota(),{key_pairs:a={}}=t||{};e.setState({quota:a,quotaLoading:!1})}))()}get quotaInfo(){var{quota:e={},quotaLoading:a}=this.state;if(a)return[];var r=I(e),n=w();return[x(x({},e),{},{add:r,used:n,name:"key_pair",title:t("Key Pair")})]}get defaultValue(){return{type:"create"}}get createTypeList(){return[{value:"create",label:t("Create Keypair")},{value:"import",label:t("Import Keypair")}]}get formItems(){var{type:e}=this.state,a="create"===e;return[{name:"type",label:t("Create Type"),type:"radio",options:this.createTypeList},{name:"name",label:t("Name"),type:"input-name",required:!0,isKeypair:!0},{name:"public_key",label:t("Public Key"),type:"textarea-from-file",hidden:a,required:!a}]}}a.CreateKeypair=C,(0,m.default)(C,"id","create-keypair"),(0,m.default)(C,"title",t("Create Keypair")),(0,m.default)(C,"policy","os_compute_api:os-keypairs:create"),(0,m.default)(C,"allowed",(()=>p.default.resolve(!0)));var k=(0,g.inject)("rootStore")((0,g.observer)(C));a.default=k},1448:function(e,t,a){var r=a(3386);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(76)(r,n);r.locals&&(e.exports=r.locals)},1451:function(e,a,r){"use strict";var n=r(156),i=r(19),l=r(25),s=r(21);i(a,"__esModule",{value:!0}),a.default=void 0,r(1117);var o=s(r(1118)),u=s(r(1213));r(1115);var d=s(r(1116));r(387);var c=s(r(220));r(1185);var f=s(r(1186));r(1124);var p=s(r(1125)),h=s(r(385)),m=s(r(33)),g=s(r(320)),v=s(r(62)),y=s(r(195)),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=x(t);if(a&&a.has(e))return a.get(e);var r={},n=i&&l;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=n?l(e,s):null;o&&(o.get||o.set)?i(r,s,o):r[s]=e[s]}r.default=e,a&&a.set(e,r);return r}(r(0)),_=(r(167),r(513),r(319)),S=s(r(16));function x(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(x=function(e){return e?a:t})(e)}var w=e=>{var{tags:a,onChange:r,maxLength:n,maxCount:i}=e,[l,s]=(0,b.useState)(a),[S,x]=(0,b.useState)(!1),[w,I]=(0,b.useState)(""),[C,k]=(0,b.useState)(-1),[D,T]=(0,b.useState)(""),A=n&&n>0?{maxLength:n}:{},P=i&&i>0||-1;var M=null,E=null,N=e=>{M=e};function R(e){T(e.target.value)}function j(){var e=[...l];e[C]=D,s(e),T(""),k(-1)}function F(){var e=w.toLocaleLowerCase();w&&!(0,g.default)(l).call(l,(t=>t.toLowerCase()===e))&&(-1!==P&&l.length<i||-1===P)&&s([...l,w]),x(!1),I("")}return(0,b.useEffect)((()=>{E&&E.focus()}),[S]),(0,b.useEffect)((()=>{M&&M.focus()}),[C]),(0,b.useEffect)((()=>{r(l)}),[l]),b.default.createElement(o.default,{gutter:[0,8]},(0,v.default)(l).call(l,((e,t)=>{if(C===t)return b.default.createElement(p.default,(0,h.default)({ref:N,style:{width:78,marginRight:8,verticalAlign:"top"},key:e,size:"small",value:D,onChange:R,onBlur:j,onPressEnter:j},A));var a=e.length>20,r=a?"".concat((0,y.default)(e).call(e,0,20),"..."):e,n=b.default.createElement(f.default,{key:e,closable:!0,onClose:()=>{return t=e,void s((0,m.default)(l).call(l,(e=>e!==t)));var t},color:_.projectTagsColors[t%10]},b.default.createElement("span",{style:{whiteSpace:"pre-wrap"},onDoubleClick:a=>{k(t),T(e),a.preventDefault()}},r));return b.default.createElement(d.default,{span:24,key:e},a?b.default.createElement(c.default,{title:b.default.createElement("span",{style:{whiteSpace:"pre-wrap"}},e)},n):n)})),b.default.createElement(d.default,{span:24},S&&b.default.createElement(p.default,(0,h.default)({ref:e=>{E=e},style:{width:78,marginRight:8,verticalAlign:"top"},type:"text",size:"small",value:w,onChange:function(e){I(e.target.value)},onBlur:F,onPressEnter:F},A)),!S&&b.default.createElement(f.default,{onClick:function(){x(!0)}},b.default.createElement(u.default,null)," ",t("New Tag"))))};w.propTypes={tags:S.default.array,onChange:S.default.func,maxLength:S.default.number,maxCount:S.default.number};var I=w;a.default=I},1452:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(156),p=r(21);c(a,"__esModule",{value:!0}),a.default=a.Volume=void 0;var h=p(r(219)),m=p(r(37)),g=r(382),v=p(r(1114)),y=r(515),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=w(t);if(a&&a.has(e))return a.get(e);var r={},n=c&&s;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=n?s(e,i):null;l&&(l.get||l.set)?c(r,i,l):r[i]=e[i]}r.default=e,a&&a.set(e,r);return r}(r(386)),_=r(1312),S=r(319),x=p(r(1453));function w(e){if("function"!=typeof f)return null;var t=new f,a=new f;return(w=function(e){return e?a:t})(e)}function I(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=I(Object(r),!0)).call(a,(function(t){(0,m.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=I(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}class k extends v.default{constructor(){super(...arguments),(0,m.default)(this,"getColumns",(()=>(0,y.getVolumeColumnsList)(this))),(0,m.default)(this,"updateFetchParams",(e=>{if(this.inDetailPage){var{match:t,detail:a}=this.props,{id:r}=t.params,{tenant_id:n,name:i}=a||{};return C(C({},e),{},{serverId:r,serverName:i,projectId:n})}return e}))}init(){this.inDetailPage?(this.store=new _.InstanceVolumeStore,this.downloadStore=this.store):(this.store=b.default,this.downloadStore=new b.VolumeStore)}get policy(){return"volume:get_all"}get name(){return t("volumes")}get isRecycleBinDetail(){var e;return this.inDetailPage&&(0,h.default)(e=this.path).call(e,"recycle-bin")}get actionConfigs(){return this.isRecycleBinDetail?S.emptyActionConfig:this.isAdminPage?this.inDetailPage?x.default.instanceDetailAdminConfig:x.default.adminConfig:this.inDetailPage?x.default.instanceDetailConfig:x.default.actionConfigs}get transitionStatusList(){return y.volumeTransitionStatuses}get isFilterByBackend(){return!this.inDetailPage}get isSortByBackend(){return this.isFilterByBackend}get adminPageHasProjectFilter(){return!0}get defaultSortKey(){return"created_at"}get searchFilters(){return y.volumeFilters}}a.Volume=k;var D=(0,g.inject)("rootStore")((0,g.observer)(k));a.default=D},1453:function(e,t,a){"use strict";var r=a(19),n=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(1454)),l=n(a(3443)),s=n(a(3444)),o=n(a(3445)),u=n(a(3446)),d=n(a(3447)),c=n(a(3448)),f=n(a(3449)),p=n(a(3450)),h=n(a(3451)),m=n(a(1455)),g=n(a(3452)),v=n(a(3453)),y=n(a(3454)),b=n(a(3455)),_=n(a(3456)),S=n(a(3457)),x=n(a(3458)),w=n(a(3459)),I={rowActions:{firstAction:c.default,moreActions:[{action:l.default},{action:w.default},{action:x.default},{action:y.default},{action:m.default},{action:u.default},{action:d.default},{action:f.default},{action:p.default},{action:h.default},{action:_.default},{action:S.default},{action:s.default},{action:o.default}]},batchActions:[s.default],primaryActions:[i.default,b.default]},C={rowActions:{firstAction:c.default,moreActions:[{action:l.default},{action:x.default},{action:y.default},{action:u.default},{action:d.default},{action:f.default},{action:p.default},{action:h.default},{action:_.default},{action:S.default},{action:s.default}]},batchActions:[],primaryActions:[]},k={actionConfigs:I,adminConfig:{rowActions:{firstAction:s.default,moreActions:[{action:g.default},{action:v.default}]},batchActions:[s.default],primaryActions:[]},instanceDetailConfig:C,instanceDetailAdminConfig:{rowActions:{firstAction:g.default,moreActions:[{action:v.default}]},batchActions:[],primaryActions:[]}};t.default=k},1454:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Create=void 0;var p=f(r(101)),h=f(r(65)),m=f(r(1315)),g=f(r(62)),v=f(r(1254)),y=f(r(82)),b=f(r(516)),_=f(r(28)),S=f(r(33));r(1157);var x=f(r(1158)),w=f(r(385)),I=f(r(52));r(1313);var C=f(r(405)),k=f(r(37)),D=f(r(0)),T=r(382),A=f(r(1292)),P=r(527),M=r(515),E=f(r(539)),N=f(r(523)),R=f(r(386)),j=f(r(524)),F=f(r(384)),L=f(r(1160)),O=(r(167),r(32)),z=r(1113),B=f(r(4)),V=r(520),q=r(1219),U=r(135),Q=f(r(3441));function G(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}function K(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=G(Object(r),!0)).call(a,(function(t){(0,k.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=G(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}class H extends z.FormAction{constructor(){super(...arguments),(0,k.default)(this,"onImageTabChange",(e=>{this.setState({imageTab:e})})),(0,k.default)(this,"onConfirmCancel",(()=>{var{initVolumeType:e}=this.state,{selectedRows:t,selectedRowKeys:a,snapshotId:r}=e,n={selectedRows:t,selectedRowKeys:a,snapshotId:"".concat(r,"-1")};this.setState({initVolumeType:n})})),(0,k.default)(this,"onVolumeTypeChange",(e=>{var{selectedRows:a=[]}=e;if(0===a.length)return(0,M.setCreateVolumeType)(""),void this.setState({multiattach:!1});var{id:r,extra_specs:{multiattach:n="False"}={},name:i}=a[0];if((0,M.setCreateVolumeType)(i),this.sourceTypeIsSnapshot){var{initVolumeType:{selectedRowKeys:l=[]},confirmCount:s=0}=this.state;r!==l[0]&&s<1&&(A.default.warn({title:t("Note: Are you sure you need to modify the volume type?"),content:M.snapshotTypeTip,onCancel:this.onConfirmCancel}),this.setState({confirmCount:1}))}this.setState({multiattach:"<is> True"===n})})),(0,k.default)(this,"onSnapshotChange",(e=>{var{selectedRows:t=[]}=e||{};if(t.length){var a,{origin_data:{volume_type_id:r}={},id:n}=t[0]||{},i=(0,p.default)(a=this.volumeTypes).call(a,(e=>e.id===r));if(i){var l={selectedRowKeys:[r],selectedRows:[i],snapshotId:n};this.setState({initVolumeType:l})}}})),(0,k.default)(this,"onCountChange",(e=>{(0,M.setCreateVolumeCount)(e),this.setState({count:e},(()=>{this.onCountChangeCallback&&this.onCountChangeCallback()}))})),(0,k.default)(this,"getCountMax",(()=>{var{volumes:{left:e=0}={}}=this.getVolumeQuota();return-1===e?1/0:e})),(0,k.default)(this,"onSubmit",(e=>{var t,a,{count:r}=this.state;if(this.message)return h.default.reject(this.message);var{backup:n,image:i,snapshot:l,size:s,availableZone:o,shared:u,name:d,volume_type:c}=e,f={name:d,size:s,availability_zone:"noSelect"!==o?o:null,multiattach:u,volume_type:c.selectedRowKeys[0]};return n&&(0,m.default)(n.selectedRowKeys)&&n.selectedRowKeys.length&&(f.backup_id=n.selectedRowKeys[0]),i&&(0,m.default)(i.selectedRowKeys)&&i.selectedRowKeys.length&&(f.imageRef=i.selectedRowKeys[0]),l&&(0,m.default)(l.selectedRowKeys)&&l.selectedRowKeys.length&&(f.snapshot_id=l.selectedRowKeys[0]),1===r?this.volumeStore.create(f):(0,U.allSettled)((0,g.default)(t=(0,v.default)(a=new Array(r)).call(a,r)).call(t,((e,t)=>{var a,r=K(K({},f),{},{name:(0,y.default)(a="".concat(f.name,"-")).call(a,t+1)});return this.volumeStore.create(r)})))}))}init(){this.state=K(K({},this.state),{},{quotaLoading:!0,count:1,sharedDisabled:!1,confirmCount:0}),this.message="",this.snapshotStore=E.default,this.imageStore=N.default,this.volumeStore=R.default,this.volumeTypeStore=j.default,this.backupStore=L.default,this.getQuota(),this.getAvailZones(),this.getImages(),this.getVolumeTypes()}get listUrl(){return this.getRoutePath("volume")}get name(){return t("create volume")}static allowed(){return h.default.resolve(!0)}get disableSubmit(){var{quotaLoading:e}=this.state;if(e)return!0;var{cinderQuota:t={}}=F.default,{add:a,error:r}=(0,M.getAdd)(t),n=0===a;return n?r!==this.message&&(C.default.error(r),this.message=r):this.message="",n}get instanceName(){var e,t,{name:a}=(0,b.default)(this)||{},{count:r=1}=this.state;return 1===r?a:(0,g.default)(e=(0,v.default)(t=new Array(r)).call(t,r)).call(e,((e,t)=>{var r;return(0,y.default)(r="".concat(a,"-")).call(r,t+1)})).join(", ")}get errorText(){return this.message?t("Unable to create volume: insufficient quota to create resources."):super.errorText}get showQuota(){return!0}getVolumeQuota(){var{quota:e={}}=this.state;return(0,M.getQuota)(e)}get quotaInfo(){return(0,M.getQuotaInfo)(this)}get defaultSize(){return this.quotaIsLimit&&this.maxSize<10?this.maxSize:10}get defaultValue(){var{initVolumeType:e}=this.state;return{source:this.sourceTypes[0],size:this.defaultSize,project:this.currentProjectName,availableZone:(this.availableZones[0]||[]).value,volume_type:e}}get availableZones(){var e,a,r=[{label:t("Not select"),value:"noSelect"}];return(0,_.default)(e=(0,S.default)(a=this.volumeStore.availabilityZones||[]).call(a,(e=>e.zoneState.available))).call(e,(e=>{r.push({value:e.zoneName,label:e.zoneName})})),r}get images(){var e,{imageTab:t}=this.state,a=(0,S.default)(e=this.imageStore.list.data||[]).call(e,(e=>!(!(0,V.canImageCreateInstance)(e)&&!(0,V.canImageCreateIronicInstance)(e))&&(t?(0,V.getImageOS)(e)===t&&"active"===e.status:e)));return(0,g.default)(a).call(a,(e=>K(K({},e),{},{key:e.id})))}get volumeTypes(){return(0,O.toJS)(this.volumeTypeStore.list.data||[])}get backups(){var e;return(0,g.default)(e=this.backupStore.list.data||[]).call(e,(e=>K(K({},e),{},{key:e.id})))}get sourceTypes(){return[{label:t("Blank Volume"),value:"blank-volume"},{label:t("Image"),value:"image"},{label:t("Snapshot"),value:"snapshot"}]}get quotaIsLimit(){var{gigabytes:{limit:e}={}}=this.getVolumeQuota();return-1!==e}get maxSize(){var{gigabytes:{left:e=0}={}}=this.getVolumeQuota();return-1===e?1e3:e}getAvailZones(){this.volumeStore.fetchAvailabilityZoneList()}getImages(){this.imageStore.fetchList({all_projects:this.hasAdminRole})}getVolumeTypes(){var e=this;return(0,I.default)((function*(){var t=yield e.volumeTypeStore.fetchList();if(t.length>0){var a=t[0],{id:r,name:n}=a,i={selectedRowKeys:[r],selectedRows:[a]};(0,M.setCreateVolumeType)(n),e.setState({initVolumeType:i,volume_type:a},(()=>{e.updateFormValue("volume_type",i),e.updateDefaultValue()}))}}))()}getQuota(){var e=this;return(0,I.default)((function*(){yield(0,M.fetchQuota)(e,0),(0,M.setCreateVolumeSize)(e.defaultSize),e.onCountChange(1),e.updateDefaultValue()}))()}get systemTabs(){return(0,V.getImageSystemTabs)()}getVolumeTypeExtra(){if(this.sourceTypeIsSnapshot)return M.snapshotTypeTip;var{multiattach:e=!1}=this.state;return e?M.multiTip:void 0}get sourceTypeIsImage(){var{source:e}=this.state;return e===this.sourceTypes[1].value}get sourceTypeIsSnapshot(){var{source:e}=this.state;return e===this.sourceTypes[2].value}getDiskMinSize(){var e=0;if(this.sourceTypeIsImage){var{min_disk:t=0,size:a=0}=this.state.image||{},r=Math.ceil(a/1024/1024/1024);e=Math.max(t,r,1)}else if(this.sourceTypeIsSnapshot){var{size:n=0}=this.state.snapshot||{};e=n}return Math.max(e,1)}get nameForStateUpdate(){return["source","image","snapshot","size","volume_type"]}get formItems(){var e,{initVolumeType:a}=this.state,r=this.getDiskMinSize();return[{name:"project",label:t("Project"),type:"label"},{name:"availableZone",label:t("Available Zone"),type:"select",placeholder:t("Please select"),options:this.availableZones,tip:t("Unless you know clearly which AZ to create the volume in, you don not need to fill in here.")},{type:"divider"},{name:"source",label:t("Data Source Type"),type:"radio",options:this.sourceTypes,required:!0,isWrappedValue:!0},{name:"image",label:t("Operating System"),type:"select-table",data:this.images,isLoading:this.imageStore.list.isLoading,required:this.sourceTypeIsImage,isMulti:!1,hidden:!this.sourceTypeIsImage,filterParams:[{label:t("Name"),name:"name"}],columns:(0,V.getImageColumns)(this),tabs:this.systemTabs,defaultTabValue:this.systemTabs[0].value,selectedLabel:t("Image"),onTabChange:this.onImageTabChange},{name:"snapshot",label:t("Snapshot"),type:"select-table",backendPageStore:this.snapshotStore,required:this.sourceTypeIsSnapshot,isMulti:!1,hidden:!this.sourceTypeIsSnapshot,isSortByBack:!0,defaultSortKey:"created_at",defaultSortOrder:"descend",onChange:this.onSnapshotChange,filterParams:[{label:t("Name"),name:"name"}],columns:[{title:t("Name"),dataIndex:"name"},{title:t("Size"),dataIndex:"size",render:e=>"".concat(e,"GiB"),sorter:!1},{title:t("Status"),dataIndex:"status",render:e=>M.volumeStatus[e]||"-"},{title:t("Description"),dataIndex:"description",sorter:!1},{title:t("Created At"),dataIndex:"created_at",render:e=>(0,P.getSinceTime)(e)}]},{type:"divider"},K(K({name:"volume_type",label:t("Volume Type"),type:"select-table",tip:t('The volume type needs to set "multiattach" in the metadata to support shared volume attributes.')},q.volumeTypeSelectProps),{},{data:this.volumeTypes,isLoading:this.volumeTypeStore.list.isLoading,required:!0,extra:this.getVolumeTypeExtra(),onChange:this.onVolumeTypeChange,initValue:a}),{name:"size",label:t("Capacity (GiB)"),type:"slider-input",max:this.maxSize,min:r,description:(0,y.default)(e="".concat(r,"GiB-")).call(e,this.maxSize,"GiB"),required:this.quotaIsLimit,hidden:!this.quotaIsLimit,onChange:M.onVolumeSizeChange},{name:"size",label:t("Capacity (GiB)"),type:"input-int",min:r,hidden:this.quotaIsLimit,required:!this.quotaIsLimit,onChange:M.onVolumeSizeChange},{type:"divider"},{name:"name",label:t("Name"),type:"input-name",placeholder:t("Please input name"),required:!0},{title:t("Description"),dataIndex:"description"}]}onCountChangeCallback(){}renderFooterLeft(){var{count:e=1}=this.state,a={min:1,max:this.getCountMax(),precision:0,onChange:this.onCountChange,formatter:e=>"$ ".concat(e).replace(/\D/g,"")};return D.default.createElement("div",null,D.default.createElement("span",null,t("Count")),D.default.createElement(x.default,(0,w.default)({},a,{value:e,className:(0,B.default)(Q.default.input,"volume-count")})))}}a.Create=H,(0,k.default)(H,"id","volume-create"),(0,k.default)(H,"title",t("Create Volume")),(0,k.default)(H,"path","/storage/volume/create"),(0,k.default)(H,"policy","volume:create");var W=(0,T.inject)("rootStore")((0,T.observer)(H));a.default=W},1455:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.CreateBackup=void 0;var l=i(r(82)),s=i(r(65)),o=i(r(37)),u=r(382),d=r(1113),c=i(r(1160)),f=r(515),p=r(1220);class h extends d.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"onSubmit",(e=>{var{id:t}=this.item,{name:a,incremental:r}=e,n={name:a,incremental:r,volume_id:t,force:(0,f.isInUse)(this.item)};return this.store.create(n)}))}get name(){return t("Create backup")}get tips(){return p.createTip}get defaultValue(){var e,t,{name:a,id:r,volume_type:n,size:i}=this.item;return{volume:(0,l.default)(e=(0,l.default)(t="".concat(a||r,"(")).call(t,n," | ")).call(e,i,"GiB)"),incremental:!1}}get formItems(){return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},{name:"name",label:t("Backup Name"),type:"input-name",required:!0},{name:"incremental",label:t("Backup Mode"),type:"radio",options:p.backupModeList,tip:p.modeTip}]}init(){this.store=c.default,c.default.setCurrentVolume(this.item),(0,p.fetchQuota)(this)}static get disableSubmit(){return(0,p.checkQuotaDisable)()}static get showQuota(){return!0}get showQuota(){return!0}get quotaInfo(){return(0,p.getQuotaInfo)(this)}}a.CreateBackup=h,(0,o.default)(h,"id","create-backup"),(0,o.default)(h,"title",t("Create Backup")),(0,o.default)(h,"policy","backup:create"),(0,o.default)(h,"aliasPolicy","cinder:backup:create"),(0,o.default)(h,"allowed",(e=>s.default.resolve((0,f.isAvailableOrInUse)(e))));var m=(0,u.inject)("rootStore")((0,u.observer)(h));a.default=m},1456:function(e,t,a){"use strict";var r=a(35),n=a(44),i=a(33),l=a(25),s=a(28),o=a(45),u=a(46),d=a(19),c=a(21);d(t,"__esModule",{value:!0}),t.default=t.PoolStore=void 0;var f=c(a(37)),p=c(a(71)),h=a(47),m=c(a(49)),g=c(a(54));function v(e,t){var a=r(e);if(n){var s=n(e);t&&(s=i(s).call(s,(function(t){return l(e,t).enumerable}))),a.push.apply(a,s)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=v(Object(r),!0)).call(a,(function(t){(0,f.default)(e,t,r[t])}));else if(o)u(e,o(r));else{var n;s(n=v(Object(r))).call(n,(function(t){d(e,t,l(r,t))}))}}return e}class b extends g.default{get client(){return m.default.cinder.pools}get listFilterByProject(){return!1}get paramsFunc(){return e=>{var{keywords:t}=e;return y(y({},(0,p.default)(e,["keywords"])),{},{detail:!0})}}get mapper(){return e=>{var{name:t,capabilities:a={}}=e,r=y({name:t},a),{total_capacity_gb:n,free_capacity_gb:i}=a;return(0,h.isNumber)(n)&&(0,h.isNumber)(i)&&(r.usedGB=(n-i).toFixed(2),r.usedGBPercent=100*(r.usedGB/n).toFixed(2)),r}}}t.PoolStore=b;var _=new b;t.default=_},1457:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.poolColumns=void 0;var l=i(r(82)),s=i(r(0)),o=i(r(1314)),u=[{title:t("Name"),dataIndex:"name"},{title:t("Protocol"),dataIndex:"storage_protocol"},{title:t("Backend Name"),dataIndex:"volume_backend_name",isHideable:!0},{title:t("Storage Capacity(GiB)"),dataIndex:"usedGBPercent",isHideable:!0,render:(e,t)=>{var a;return s.default.createElement(o.default,{value:e,label:(0,l.default)(a="".concat(t.usedGB," / ")).call(a,t.total_capacity_gb)})},stringify:(e,a)=>{var r,n,i,s;return(0,l.default)(r=(0,l.default)(n=(0,l.default)(i=(0,l.default)(s="".concat(e,"% (")).call(s,t("Used"),": ")).call(i,a.usedGB," / ")).call(n,t("Total"),": ")).call(r,a.total_capacity_gb,")")}}];a.poolColumns=u;var d=u;a.default=d},1458:function(e,t,a){"use strict";var r=a(19),n=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var i=a(319),l=n(a(3462)),s=n(a(3463)),o=n(a(3464)),u=n(a(3465)),d=n(a(3466)),c=n(a(1459)),f={firstAction:d.default,moreActions:[{action:s.default},{action:u.default},{action:c.default},{action:o.default}]},p={actionConfigs:{rowActions:f,batchActions:[o.default],primaryActions:[l.default]},adminConfigs:{rowActions:{firstAction:o.default},batchActions:[o.default],primaryActions:[l.default]},instanceDetailConfigs:{rowActions:{firstAction:u.default}},instanceDetailAdminConfigs:i.emptyActionConfig,qosDetailConfigs:{rowActions:f},qosDetailAdminConfigs:{rowActions:{firstAction:o.default}}};t.default=p},1459:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.CreateDNAT=void 0;var p=f(r(516)),h=f(r(65)),m=f(r(82)),g=f(r(320)),v=f(r(1194)),y=f(r(518)),b=f(r(1177)),_=f(r(71)),S=f(r(52)),x=f(r(37)),w=f(r(0)),I=r(382),C=(r(513),r(1113)),k=r(47),D=r(1137),T=r(529),A=r(1129),P=r(1151),M=f(r(553)),E=r(1257);function N(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}class R extends C.ModalAction{constructor(){var e;super(...arguments),e=this,(0,x.default)(this,"portsDisableFunc",(e=>0===e.fixed_ips.length)),(0,x.default)(this,"handlePortSelect",function(){var t=(0,S.default)((function*(t){e.setState({fixedIpLoading:!0});var{canReachSubnetIdsWithRouterId:a}=e.state,r=yield(0,P.getInterfaceWithReason)(t.selectedRows),n=(0,A.getPortsAndReasons)(r,a,!0);e.setState({portFixedIPs:n,fixed_ip_address:void 0,fixedIpLoading:!1}),e.formRef.current&&e.formRef.current.resetFields(["fixed_ip_address","internal_port"])}));return function(e){return t.apply(this,arguments)}}()),(0,x.default)(this,"onSubmit",(e=>{var{floatingIp:t,virtual_adapter:{selectedRows:a=[]}={},fixed_ip_address:{selectedRows:r=[]}={}}=e,n=function(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=N(Object(r),!0)).call(a,(function(t){(0,x.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=N(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}({},(0,_.default)(e,["floatingIp","virtual_adapter","fixed_ip_address"]));return n.internal_ip_address=r[0].fixed_ip_address,n.internal_port_id=a[0].id,M.default.create({id:this.item.id,data:n})}))}get name(){return t("Create DNAT rule")}init(){this.portStore=new T.PortStore,D.getCanReachSubnetIdsWithRouterIdInComponent.call(this,(e=>{var{item:t}=this;return e.external_gateway_info&&e.external_gateway_info.network_id===t.floating_network_id})),this.getFipAlreadyUsedPorts(),this.state={alreadyUsedPorts:[],instanceFixedIPs:[],portFixedIPs:[],canReachSubnetIdsWithRouterId:[],routerIdWithExternalNetworkInfo:[]}}getFipAlreadyUsedPorts(){var e=this;return(0,S.default)((function*(){var t=yield M.default.fetchList({fipId:e.item.id});e.setState({alreadyUsedPorts:t||[]})}))()}get instanceName(){return this.item.floating_ip_address||(0,p.default)(this).name}static get modalSize(){return"large"}getModalSize(){return"large"}get defaultValue(){var{floating_ip_address:e}=this.item;return{floatingIp:e}}get formItems(){var{fixed_ip_address:e={selectedRows:[]}}=this.state,a=[{name:"floatingIp",label:t("Floating Ip"),type:"label",icon:w.default.createElement(b.default,null)},{name:"protocol",label:t("Protocol"),type:"select",options:[{label:"TCP",value:"tcp"},{label:"UDP",value:"udp"}],required:!0},{name:"external_port",label:t("External Port"),type:"input-number",min:1,max:65535,required:!0,validator:(e,a)=>{var r;if(!a)return h.default.reject(new Error((0,m.default)(r="".concat(t("Please input")," ")).call(r,t("External Port"))));var{alreadyUsedPorts:n}=this.state;return(0,g.default)(n).call(n,(e=>e.external_port===a))?h.default.reject(new Error(t("The port of this fip is in use, Please change another port."))):h.default.resolve(!0)}},{name:"internal_port",label:t("Internal Port"),type:"input-number",hidden:0===e.selectedRows.length,min:1,max:65535,required:!0,validator:(e,a)=>{var r;if(!a)return h.default.reject(new Error((0,m.default)(r="".concat(t("Please input")," ")).call(r,t("Internal Port"))));var n=this.formRef.current.getFieldsValue(["virtual_adapter","fixed_ip_address"]),i=n.fixed_ip_address.selectedRows[0].fixed_ip_address,l=n.virtual_adapter.selectedRows[0].id,{alreadyUsedPorts:s}=this.state;return(0,g.default)(s).call(s,(e=>e.internal_port===a&&e.internal_port_id===l&&e.internal_ip_address===i))?h.default.reject(new Error(t("A DNAT rule has been created for this port of this IP, please choose another port."))):h.default.resolve(!0)}}],r=A.getPortFormItem.call(this,["compute:nova",""]);r[(0,v.default)(r).call(r,(e=>"virtual_adapter"===e.name))].label=t("Target Port");var n=(0,v.default)(r).call(r,(e=>"fixed_ip_address"===e.name));return r[n].label=t("Target IP Address"),r[n].onChange=e=>{this.setState({fixed_ip_address:e},(()=>{this.formRef.current.resetFields(["internal_port"])}))},(0,y.default)(a).call(a,3,0,...r),a}}a.CreateDNAT=R,(0,x.default)(R,"id","createDNAT"),(0,x.default)(R,"title",t("Create DNAT Rule")),(0,x.default)(R,"policy","create_floatingip_port_forwarding"),(0,x.default)(R,"allowed",(e=>h.default.resolve((0,k.isNull)(e.fixed_ip_address)&&(0,E.enablePFW)())));var j=(0,I.inject)("rootStore")((0,I.observer)(R));a.default=j},1460:function(e,t,a){"use strict";var r=a(19),n=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(3467)),l=n(a(3468)),s=n(a(3469)),o=n(a(3470)),u=n(a(3471)),d=n(a(3472)),c=n(a(3473)),f=n(a(3474)),p=n(a(1461)),h={actionConfigs:{rowActions:{firstAction:s.default,moreActions:[{action:o.default},{action:c.default},{action:f.default},{action:u.default},{action:d.default},{action:p.default},{},{action:l.default}]},batchActions:[l.default],primaryActions:[i.default]},actionConfigsInDetail:{rowActions:{firstAction:u.default,moreActions:[{action:d.default}]},batchActions:[],primaryActions:[]},noActions:{rowActions:{firstAction:null,moreActions:[]},batchActions:[],primaryActions:[]},adminActions:{rowActions:{firstAction:l.default,moreActions:[]},batchActions:[l.default],primaryActions:[]}};t.default=h},1461:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.ManageSecurityGroup=void 0;var l=i(r(65)),s=i(r(62)),o=i(r(52)),u=i(r(37)),d=r(382),c=r(1113),f=i(r(521)),p=r(392),h=r(1193),m=r(32),g=r(47);class v extends c.ModalAction{constructor(){super(...arguments),(0,u.default)(this,"onSubmit",(e=>{var{securityGroup:{selectedRowKeys:t=[]}={},port_security_enabled:a}=e,{id:r}=this.item,n={port:{security_groups:a?t:[],port_security_enabled:a}};return this.securityGroupStore.updatePortSecurityGroup({id:r,reqBody:n})}))}get name(){return t("Manage Security Group")}init(){this.securityGroupStore=new p.SecurityGroupStore,this.currentSecurityGroups=[],this.state.sgInitValue={selectedRowKeys:[],selectedRows:[]},this.detail=null,this.getPortDetail()}static get modalSize(){return"large"}getModalSize(){return"large"}get defaultValue(){var{sgInitValue:e}=this.state,{selectedRowKeys:t=[]}=e||{};return t.length?{port_security_enabled:this.item.port_security_enabled,securityGroup:e}:{}}getPortDetail(){var e=this;return(0,o.default)((function*(){var{id:t,security_groups:a,port_security_enabled:r}=e.item,n=a;a||(n=(yield f.default.fetchDetail({id:t})).security_groups);var i=yield l.default.all((0,s.default)(n).call(n,(t=>e.securityGroupStore.fetchDetail({id:t})))),o={selectedRowKeys:(0,s.default)(n).call(n,(e=>(0,m.toJS)(e))),selectedRows:(0,s.default)(i).call(i,(e=>(0,m.toJS)(e)))};e.setState({sgInitValue:o,port_security_enabled:r}),e.updateFormValue("securityGroup",o),e.updateFormValue("port_security_enabled",r)}))()}get messageHasItemName(){var{item:e}=this.props;return!!e&&e.name}get formItems(){var{sgInitValue:e,port_security_enabled:a}=this.state;return[{name:"port_security_enabled",label:t("Port Security"),type:"switch",onChange:e=>{this.setState({port_security_enabled:e})},required:!0},{name:"securityGroup",label:t("Security Group"),type:"select-table",tips:t("The security group is similar to the firewall function for setting up network access control, or you can go to the console and create a new security group. (Note: The security group you selected will work on all virtual LANS on the instances.)"),backendPageStore:this.securityGroupStore,extraParams:{project_id:this.currentProjectId},initValue:e,isMulti:!0,filterParams:h.securityGroupFilter,columns:h.securityGroupColumns,onRow:()=>{},hidden:!a}]}}a.ManageSecurityGroup=v,(0,u.default)(v,"id","manage-security-group"),(0,u.default)(v,"title",t("Manage Security Group")),(0,u.default)(v,"policy","update_port:port_security_enabled"),(0,u.default)(v,"allowed",(e=>l.default.resolve(0===(0,g.get)(e,"origin_data.allowed_address_pairs",[]).length)));var y=(0,d.inject)("rootStore")((0,d.observer)(v));a.default=y},1507:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Credentials=void 0;var p=f(r(62)),h=f(r(219)),m=f(r(37)),g=f(r(0)),v=r(382),y=f(r(1114)),b=r(1324),_=f(r(136)),S=r(3850);function x(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=x(Object(r),!0)).call(a,(function(t){(0,m.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=x(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}class I extends y.default{constructor(){super(...arguments),(0,m.default)(this,"getColumns",(()=>[{title:t("ID/Name"),dataIndex:"name",isName:!0,hasNoDetail:!0},{title:t("Project ID/Name"),dataIndex:"project_name"},{title:t("Description"),dataIndex:"description",isHideable:!0},{title:t("Expires At"),dataIndex:"expires_at",valueRender:"toLocalTime",isHideable:!0},{title:t("Roles"),dataIndex:"roles",render:e=>{var t;return(0,p.default)(t=e||[]).call(t,(e=>g.default.createElement("div",{key:e.id},e.name)))},stringify:e=>(0,p.default)(e).call(e,(e=>e.name)).join("\n")}])),(0,m.default)(this,"updateFetchParams",(e=>this.isUserDetail?e:w(w({},e),{},{id:_.default.user.user.id})))}init(){this.store=new b.CredentialStore,this.downloadStore=new b.CredentialStore}get isUserDetail(){var e;return this.inDetailPage&&(0,h.default)(e=this.path).call(e,"user-admin/detail")}get policy(){return"identity:get_application_credential"}get name(){return t("application credential")}get actionConfigs(){return this.isUserDetail?S.detailConfigs:S.actionConfigs}get searchFilters(){return[{label:t("Name"),name:"name"}]}}a.Credentials=I;var C=(0,v.inject)("rootStore")((0,v.observer)(I));a.default=C},1583:function(e,t,a){"use strict";var r=a(19),n=a(21);r(t,"__esModule",{value:!0}),t.getValue=void 0;var i=n(a(322)),l=a(47),s=n(a(1285));t.getValue=e=>{if((0,l.isObject)(e))try{return s.default.safeDump(e,{noRefs:!0})}catch(t){return(0,i.default)(e,null,2)}return String(e)}},1584:function(e,t,a){var r=a(1585);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(76)(r,n);r.locals&&(e.exports=r.locals)},1585:function(e,t,a){(t=e.exports=a(75)(!1)).push([e.i,".index__editor--3eLoM {\n  min-height: 60vh;\n  border-radius: 4px;\n}\n",""]),t.locals={editor:"index__editor--3eLoM"}},1586:function(e,t,a){"use strict";var r=a(19),n=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(385)),l=n(a(0)),s=n(a(1286));a(1592),a(1593),a(1594);class o extends l.default.Component{render(){return l.default.createElement(s.default,(0,i.default)({theme:"github",width:"auto",height:"100%",tabSize:2,debounceChangePeriod:200,editorProps:{$blockScrolling:!0},showPrintMargin:!1,wrapEnabled:!0},this.props))}}t.default=o},1594:function(e,t,a){var r=a(1595);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(76)(r,n);r.locals&&(e.exports=r.locals)},1595:function(e,t,a){(t=e.exports=a(75)(!1)).push([e.i,"/* stylelint-disable selector-class-pattern */\n.custom__ace_editor--2x9Bb {\n  font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;\n  line-height: 20px !important;\n  -webkit-font-smoothing: auto;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L {\n  color: #fff;\n  background-color: #242e42;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_gutter--1cP4P {\n  color: #537f7e;\n  background-color: #242e42;\n  border-right: 1px solid #4a5974;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_variable--ViPst,\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_identifier--249iw,\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_meta--2PQjL.custom__ace_tag--2I4Xk {\n  color: #75e0f2;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_keyword--TdUSy {\n  color: #fff;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_string--3lFMH {\n  color: #ebe087;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_constant--bDEu2.custom__ace_numeric--2gqBl {\n  color: #bd99ff;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_marker-layer--6Ofnc .custom__ace_active-line--3gBy- {\n  background-color: #36435c;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_indent-guide--2YcVM {\n  padding: 2px 0;\n  border-right: 1px dotted #777;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_marker-layer--6Ofnc .custom__ace_selection--1U_DQ {\n  background-color: #4a5974;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_comment--1foUc {\n  color: #aaa;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_fold--3dVBm:hover {\n  background-color: #fff;\n}\n.custom__ace_editor--2x9Bb.custom__ace-chaos--NJP1L .custom__ace_line--3FuBW .custom__ace_fold--3dVBm {\n  height: auto;\n}\n",""]),t.locals={ace_editor:"custom__ace_editor--2x9Bb","ace-chaos":"custom__ace-chaos--NJP1L",ace_gutter:"custom__ace_gutter--1cP4P",ace_variable:"custom__ace_variable--ViPst",ace_identifier:"custom__ace_identifier--249iw",ace_meta:"custom__ace_meta--2PQjL",ace_tag:"custom__ace_tag--2I4Xk",ace_keyword:"custom__ace_keyword--TdUSy",ace_string:"custom__ace_string--3lFMH",ace_constant:"custom__ace_constant--bDEu2",ace_numeric:"custom__ace_numeric--2gqBl","ace_marker-layer":"custom__ace_marker-layer--6Ofnc","ace_active-line":"custom__ace_active-line--3gBy-","ace_indent-guide":"custom__ace_indent-guide--2YcVM",ace_selection:"custom__ace_selection--1U_DQ",ace_comment:"custom__ace_comment--1foUc",ace_fold:"custom__ace_fold--3dVBm",ace_line:"custom__ace_line--3FuBW"}},1602:function(e,a,r){"use strict";r(19)(a,"__esModule",{value:!0}),a.statusMap=void 0;var n={500:t("Internal Server Error (code: 500) "),501:t("Not Implemented (code: 501) "),502:t("Bad Gateway (code: 502) "),503:t("Service Unavailable (code: 503) "),504:t("Gateway Time-out (code: 504) "),505:t("HTTP Version not supported (code: 505) ")};a.statusMap=n},1603:function(e,t,a){var r=a(1604);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(76)(r,n);r.locals&&(e.exports=r.locals)},1604:function(e,t,a){(t=e.exports=a(75)(!1)).push([e.i,".index__notify--2uuPy .ant-notification-notice-icon {\n  font-size: 18px;\n}\n.index__notify--2uuPy .ant-notification-notice-message {\n  font-size: 12px;\n  word-break: break-all;\n}\n.index__notify--2uuPy .ant-notification-notice-with-icon .ant-notification-notice-message {\n  margin-left: 32px;\n}\n.index__code-editor--D2lB7 {\n  height: 400px !important;\n  min-height: 400px !important;\n}\n",""]),t.locals={notify:"index__notify--2uuPy","code-editor":"index__code-editor--D2lB7"}},1909:function(e,t,a){(t=e.exports=a(75)(!1)).push([e.i,"/* stylelint-disable at-rule-empty-line-before,at-rule-name-space-after,at-rule-no-unknown */\n/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n/* init */\n/* specific color */\n/*  border */\n/*  background */\n/*  shadow */\n/*  font */\n/*  */\n/*  animation */\n/*  size */\n/*  sider */\n.style__container--3Y09L {\n  height: 100%;\n  padding: 44px;\n  overflow: auto;\n}\n.style__container--3Y09L .style__main-icon--1ECQa {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n}\n.style__container--3Y09L .style__action-button--2uJsF {\n  color: #a3a3a3;\n  font-size: 18px;\n  line-height: 88px;\n  background: #fff;\n  border-radius: 4px;\n  -webkit-box-shadow: 0 2px 20px 0 rgba(0, 0, 0, 0.09);\n          box-shadow: 0 2px 20px 0 rgba(0, 0, 0, 0.09);\n  opacity: 0.9;\n}\n.style__container--3Y09L .style__action-icon--3cQV7 {\n  display: block;\n  width: 50px;\n  height: 50px;\n  margin-left: 60px;\n}\n.style__container--3Y09L .ant-card {\n  -webkit-box-shadow: 0 2px 20px 0 rgba(0, 0, 0, 0.09);\n          box-shadow: 0 2px 20px 0 rgba(0, 0, 0, 0.09);\n}\n.style__container--3Y09L .ant-card-head {\n  font-size: 16px;\n}\n.style__container--3Y09L .style__left--2FbNm {\n  height: 100%;\n}\n.style__container--3Y09L .style__left--2FbNm .style__top--3UBpB .style__title--18DKB {\n  display: table-cell;\n  vertical-align: bottom;\n}\n.style__container--3Y09L .style__left--2FbNm .style__top--3UBpB .style__title--18DKB .style__text--2ZnVb {\n  color: #252525;\n  font-size: 21px;\n}\n.style__container--3Y09L .style__left--2FbNm .style__top--3UBpB .style__title--18DKB .style__action--1T3zl {\n  margin-left: 40px;\n  color: #000;\n  font-size: 16px;\n}\n.style__container--3Y09L .style__right--18Zal {\n  height: 100%;\n}\n.style__container--3Y09L .style__right--18Zal .style__project--2WhsJ {\n  position: relative;\n}\n.style__container--3Y09L .style__right--18Zal .style__project--2WhsJ .style__meta--VzBqf {\n  margin-bottom: 16px;\n  padding-bottom: 16px;\n  border-bottom: 1px dashed #e8e8e8;\n}\n.style__container--3Y09L .style__right--18Zal .style__project--2WhsJ .ant-descriptions-item-label {\n  width: 130px;\n}\n.style__container--3Y09L .style__right--18Zal .style__project--2WhsJ .style__role-button--1PSuQ {\n  position: absolute;\n  right: 24px;\n  bottom: 0;\n}\n.style__outer--GK3KD {\n  position: relative;\n  width: 100%;\n  height: 10rem;\n  overflow: hidden;\n  font-size: 12px;\n}\n.style__outer--GK3KD .style__inner--19_DW {\n  position: absolute;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  overflow-x: hidden;\n  overflow-y: scroll;\n}\n.style__outer--GK3KD .style__inner--19_DW::-webkit-scrollbar {\n  display: none;\n}\n.style__bottom--1cuhB {\n  border-radius: 4px;\n}\n.style__bottom--1cuhB .ant-card {\n  -webkit-box-shadow: unset;\n          box-shadow: unset;\n}\n.style__bottom--1cuhB .style__title--18DKB .style__text--2ZnVb {\n  color: #252525;\n  font-size: 16px;\n}\n.style__bottom--1cuhB .style__title--18DKB .style__badge--1KS_6 {\n  margin-left: 22px;\n}\n.style__bottom--1cuhB .style__title--18DKB .style__badge--1KS_6 .ant-badge-status-dot {\n  width: 10px;\n  height: 10px;\n}\n.style__bottom--1cuhB .style__title--18DKB .style__badge--1KS_6 .ant-badge-status-text {\n  font-size: 14px;\n}\n.style__bottom--1cuhB .style__action--1T3zl {\n  float: right;\n  margin-top: 6px;\n  color: #0068ff;\n  font-size: 12px;\n  cursor: pointer;\n}\n.style__bottom--1cuhB .style__content--1BVOG .style__card--3BNS7 {\n  padding: 8px;\n}\n.style__bottom--1cuhB .style__content--1BVOG .style__card--3BNS7 .ant-card-head {\n  border-bottom: none;\n}\n.style__bottom--1cuhB .style__content--1BVOG .style__card--3BNS7 .ant-card-head .ant-card-head-title {\n  padding-bottom: 0;\n  color: #565656;\n  font-weight: 500;\n  font-size: 16px;\n}\n.style__bottom--1cuhB .style__content--1BVOG .style__card--3BNS7 .style__progress-title--1khEP {\n  overflow: hidden;\n  font-size: 14px;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n",""]),t.locals={container:"style__container--3Y09L","main-icon":"style__main-icon--1ECQa","action-button":"style__action-button--2uJsF","action-icon":"style__action-icon--3cQV7",left:"style__left--2FbNm",top:"style__top--3UBpB",title:"style__title--18DKB",text:"style__text--2ZnVb",action:"style__action--1T3zl",right:"style__right--18Zal",project:"style__project--2WhsJ",meta:"style__meta--VzBqf","role-button":"style__role-button--1PSuQ",outer:"style__outer--GK3KD",inner:"style__inner--19_DW",bottom:"style__bottom--1cuhB",badge:"style__badge--1KS_6",content:"style__content--1BVOG",card:"style__card--3BNS7","progress-title":"style__progress-title--1khEP"}},3351:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(156),p=r(21);c(a,"__esModule",{value:!0}),a.default=void 0,r(538);var h=p(r(399)),m=p(r(37));r(1238);var g=p(r(1239)),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=S(t);if(a&&a.has(e))return a.get(e);var r={},n=c&&s;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=n?s(e,i):null;l&&(l.get||l.set)?c(r,i,l):r[i]=e[i]}r.default=e,a&&a.set(e,r);return r}(r(0)),y=(r(167),r(319)),b=r(527),_=p(r(3352));function S(e){if("function"!=typeof f)return null;var t=new f,a=new f;return(S=function(e){return e?a:t})(e)}function x(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=x(Object(r),!0)).call(a,(function(t){(0,m.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=x(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}var{RangePicker:I}=g.default,{h:C,d:k,w:D}=y.MILLISECOND_IN_TIME_UNIT;class T extends v.Component{constructor(e){super(e),(0,m.default)(this,"onChangeType",(e=>{var t={value:e};1!==e&&(t.start=void 0,t.end=void 0),this.setState(w({},t),(()=>{this.onChange(t)}))})),(0,m.default)(this,"onChange",(e=>{var{onChange:t}=this.props;t&&t(w(w({},this.state),e))})),(0,m.default)(this,"onDateChange",(e=>{var t={start:e?e[0]:null,end:e?e[1]:null};this.setState(w({},t),(()=>{this.onChange(t)}))}));var{defaultValue:t}=e;this.state={defaultValue:void 0!==t?t:C,value:null,start:null,end:null}}componentDidMount(){var{defaultValue:e,value:t}=this.state;this.onChangeType(t||e)}get options(){return[{label:t("All"),value:0},{label:t("In the last hour"),value:C},{label:t("Recently a day"),value:k},{label:t("In the last 7 days"),value:D},{label:t("In the last 30 days"),value:30*k},{label:t("Custom"),value:1}]}render(){var{defaultValue:e,value:t}=this.state;return v.default.createElement("div",{className:_.default.wrapper},v.default.createElement(h.default.Group,{defaultValue:e,value:t,options:this.options,buttonStyle:"solid",optionType:"button",onChange:e=>this.onChangeType(e.target.value)}),1===t&&v.default.createElement(I,{onCalendarChange:this.onDateChange,format:b.timeFormatStr.YMDHm,showTime:!0}))}}a.default=T},3352:function(e,t,a){var r=a(3353);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(76)(r,n);r.locals&&(e.exports=r.locals)},3353:function(e,t,a){(t=e.exports=a(75)(!1)).push([e.i,".index__wrapper--2C8q2 {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  min-width: 450px;\n}\n",""]),t.locals={wrapper:"index__wrapper--2C8q2"}},3354:function(e,t,a){"use strict";var r=a(219),n=a(156),i=a(19),l=a(25),s=a(21);i(t,"__esModule",{value:!0}),t.default=void 0;var o=s(a(62)),u=s(a(576));a(1144);var d=s(a(393)),c=s(a(37)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=g(t);if(a&&a.has(e))return a.get(e);var r={},n=i&&l;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=n?l(e,s):null;o&&(o.get||o.set)?i(r,s,o):r[s]=e[s]}r.default=e,a&&a.set(e,r);return r}(a(0)),p=s(a(16)),h=(a(167),a(513),a(47)),m=s(a(3355));function g(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(g=function(e){return e?a:t})(e)}class v extends f.Component{constructor(){super(...arguments),(0,c.default)(this,"changeVisibleList",(e=>{var t=e.key,{value:a,onChange:n}=this.props,[...i]=a;r(h)(i,t)?(0,h.remove)(i,(e=>e===t)):i.push(t),n(i)}))}isVisibleOption(e){var{value:t}=e,{value:a}=this.props;return r(h)(a,t)}renderHeader(){var{title:e}=this.props;return(0,h.isUndefined)(e)?null:f.default.createElement("header",null,e)}renderOptions(){var{options:e}=this.props,t=(0,o.default)(e).call(e,(e=>this.renderOption(e)));return f.default.createElement(d.default,{onClick:this.changeVisibleList,theme:"light"},t)}renderOption(e){var t=this.isVisibleOption(e),{value:a,label:r}=e,n=t?f.default.createElement(u.default,null):f.default.createElement("span",{className:m.default.empty});return f.default.createElement(d.default.Item,{key:a},n,r)}render(){var{className:e}=this.props;return f.default.createElement("div",{className:e},this.renderHeader(),this.renderOptions())}}(0,c.default)(v,"propTypes",{value:p.default.array,onChange:p.default.func.isRequired,className:p.default.string,title:p.default.node,options:p.default.array.isRequired}),(0,c.default)(v,"defaultProps",{value:[]});var y=v;t.default=y},3355:function(e,t,a){var r=a(3356);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(76)(r,n);r.locals&&(e.exports=r.locals)},3356:function(e,t,a){(t=e.exports=a(75)(!1)).push([e.i,".index__empty--2DMK4 {\n  display: inline-block;\n  width: 24px;\n}\n",""]),t.locals={empty:"index__empty--2DMK4"}},3357:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=x,r(387);var l=i(r(220));r(535);var s=i(r(397));r(318);var o=i(r(317)),u=i(r(547)),d=i(r(385));r(1144);var c=i(r(393)),f=i(r(62)),p=i(r(195)),h=i(r(0)),m=(r(167),r(513),i(r(16))),g=r(135),v=i(r(1291)),y=r(1290),b=i(r(3358)),_=(e,t)=>{var{id:a,title:r,actionType:n,buttonType:i,buttonText:l,isDanger:s}=e;return{id:a,title:r,name:l||r,actionType:n,buttonType:i,isDanger:s,action:e,isAllowed:t.length>0,items:t,isBatch:!0,needHide:!1}};function S(e){var{actions:a,selectedItems:r,onFinishAction:n,containerProps:i,onClickAction:l,onCancelAction:p}=e;if(a.length<1)return null;var m=(0,f.default)(a).call(a,(e=>{var t="table-batch-more-".concat((0,g.generateId)()),a=_(e,r),{isDanger:s,name:o}=a;return a.onFinishAction=n,a.isDanger=!!s,r.length?h.default.createElement(c.default.Item,{key:t},h.default.createElement(v.default,(0,d.default)({},a,{buttonType:"link",onFinishAction:n,containerProps:i,onClickAction:l,onCancelAction:p,buttonClassName:b.default["more-action-btn"]}))):h.default.createElement(c.default.Item,{key:t,disabled:!0,style:{textAlign:"center"}},o)})),y=h.default.createElement(c.default,null,m);return h.default.createElement(s.default,{overlay:y,overlayClassName:b.default["table-batch-menu"]},h.default.createElement(o.default,{type:"primary"},t("More Actions")," ",h.default.createElement(u.default,null)))}function x(e){var a,r,{selectedItems:n,visibleButtonNumber:i,batchActions:s,onFinishAction:u,containerProps:c,onClickAction:m,onCancelAction:b,resourceName:x,isAdminPage:w}=e,I=[],C=[],k=(0,y.getActionsByPolicy)({actions:s,containerProps:c,isAdminPage:w});return i<k.length?i<0?C=k:(I=(0,p.default)(k).call(k,0,i),C=(0,p.default)(k).call(k,i)):I=k,r=(0,f.default)(I).call(I,(e=>{var{isDanger:a=!1,buttonType:r="default"}=e;return n&&0!==n.length?h.default.createElement(v.default,(0,d.default)({},_(e,n),{key:"table-batch-action-".concat((0,g.generateId)()),onFinishAction:u,containerProps:c,onClickAction:m,onCancelAction:b})):h.default.createElement(l.default,{title:t("Please select {name} first",{name:x}),key:"tooltip-".concat((0,g.generateId)())},h.default.createElement(o.default,{type:r,disabled:!0,danger:a},e.buttonText||e.title))})),a=h.default.createElement(S,{actions:C,selectedItems:n,onFinishAction:u,containerProps:c,onClickAction:m,onCancelAction:b}),h.default.createElement(h.default.Fragment,null,r,a)}x.defaultProps={visibleButtonNumber:1},x.prototypes={visibleButtonNumber:m.default.number}},3358:function(e,t,a){var r=a(3359);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(76)(r,n);r.locals&&(e.exports=r.locals)},3359:function(e,t,a){(t=e.exports=a(75)(!1)).push([e.i,".index__table-action--1o0Rg {\n  margin-right: 5px;\n}\n.index__more-action-btn--oi5mL {\n  width: 100%;\n  text-align: center;\n}\n.index__table-batch-menu--39tMs .ant-dropdown-menu-item {\n  padding-right: 0;\n  padding-left: 0;\n}\n",""]),t.locals={"table-action":"index__table-action--1o0Rg","more-action-btn":"index__more-action-btn--oi5mL","table-batch-menu":"index__table-batch-menu--39tMs"}},3360:function(e,a,r){"use strict";var n=r(156),i=r(19),l=r(25),s=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var o=s(r(62)),u=s(r(219)),d=s(r(82)),c=s(r(28)),f=s(r(65));r(535);var p=s(r(397));r(1144);var h=s(r(393)),m=s(r(556));r(1139);var g=s(r(1140));r(387);var v=s(r(220));r(318);var y=s(r(317)),b=s(r(1298)),_=s(r(52)),S=s(r(37)),x=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=M(t);if(a&&a.has(e))return a.get(e);var r={},n=i&&l;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=n?l(e,s):null;o&&(o.get||o.set)?i(r,s,o):r[s]=e[s]}r.default=e,a&&a.set(e,r);return r}(r(0)),w=s(r(16)),I=s(r(1217)),C=(r(513),r(167),r(47)),k=r(3361),D=r(135),T=s(r(1145)),A=s(r(1292)),P=s(r(3362));function M(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(M=function(e){return e?a:t})(e)}class E extends x.Component{constructor(e){var a;super(e),a=this,(0,S.default)(this,"getSimpleValue",((e,t,a)=>{var r,n;return(0,C.isArray)(e)?(0,o.default)(e).call(e,((e,r)=>{if(x.default.isValidElement(e))try{return t[a][r]}catch(e){return""}return e})).join("\n"):(0,C.isObject)(e)?x.default.isValidElement(e)?(0,u.default)(n=[void 0,"",null]).call(n,t[a])?"-":t[a].toString():t[a]:(0,u.default)(r=[void 0,"",null]).call(r,e)?"-":e})),(0,S.default)(this,"getColumnData",((e,t)=>{var{dataIndex:a,render:r,valueRender:n,stringify:i}=t,{getValueRenderFunc:l}=this.props,s=(0,C.get)(e,a);if(!r&&!n&&!i)return this.getSimpleValue(s,e,a);if(i)return i(s,e);if(n){var o=l(n);return this.getSimpleValue(o(s,e),e,a)}return r?this.getSimpleValue(r(s,e),e,a):void 0})),(0,S.default)(this,"confirmExportMax",(()=>{var{totalMax:e,total:a}=this.props;A.default.warn({title:t("Are you sure to download data?"),content:t("The total amount of data is { total }, and the interface can support downloading { totalMax } pieces of data. If you need to download all the data, please contact the administrator.",{totalMax:e,total:a}),onCancel:this.onConfirmCancel,onOk:this.beginDownload})})),(0,S.default)(this,"downloadAllData",(()=>{var{total:e,totalMax:t}=this.props;e&&e>t?this.confirmExportMax():this.beginDownload()})),(0,S.default)(this,"getFileName",(e=>{var a,r,n,i,l=(0,D.toLocalTimeFilter)((new Date).getTime()),{resourceName:s,extraName:o}=this.props,u=o?(0,d.default)(a="".concat(o,"-")).call(a,s):s;return e?(0,d.default)(r=(0,d.default)(n="".concat(u,"-")).call(n,t("all"),"-")).call(r,l,".csv"):(0,d.default)(i="".concat(u,"-")).call(i,l,".csv")})),(0,S.default)(this,"exportCurrentData",((e,a)=>{var r=this.getDownloadHeader(),n=this.getDownloadData(),i=new k.Parser({fields:r}).parse(n),l=new Blob(["\ufeff"+i],{type:"text/plain;charset=utf-8"}),s=a?this.getFileName("all"):this.getFileName();I.default.saveAs(l,s),a?T.default.success(t("All data downloaded.")):T.default.success(t("Current data downloaded."))})),(0,S.default)(this,"exportCurrentDataAll",(()=>{this.exportCurrentData(null,!0)})),(0,S.default)(this,"exportAllData",(()=>{var e=this.getDownloadHeader(),a=this.getDownloadDataAll(),r=new k.Parser({fields:e}).parse(a),n=new Blob(["\ufeff"+r],{type:"text/plain;charset=utf-8"}),i=this.getFileName("all");I.default.saveAs(n,i),T.default.success(t("All data downloaded."))})),(0,S.default)(this,"cancelDownload",(()=>{this.setState({isDownloading:!1},(()=>{var{onFinishDownload:e}=this.props;e&&e()})),T.default.warn(t("Download canceled!"))})),(0,S.default)(this,"beginDownload",(()=>{this.setState({isDownloading:!0,percent:0,current:1,allData:[]},(()=>{var{onBeginDownload:e}=this.props;e&&e(),this.getDownloadDataForAll()}))})),(0,S.default)(this,"finishDownload",(()=>{this.setState({isDownloading:!1},(()=>{this.exportAllData();var{onFinishDownload:e}=this.props;e&&e()}))})),(0,S.default)(this,"getDownloadDataForAll",(0,_.default)((function*(){var{current:e,allData:t,isDownloading:r}=a.state,{totalMax:n}=a.props,i=Math.min(a.total||0,n);if(r){var{getData:l}=a.props,s=yield l({page:e,limit:a.pageSize}),o=[...t,...s];if(s.length<a.pageSize||o.length>=i)a.setState({allData:o,percent:100},(()=>{a.finishDownload()}));else{var u=0;(u=i?Math.floor(o.length/i*100):10*e)>100&&(u=100),a.setState({allData:o,current:e+1,percent:u},(()=>{a.getDownloadDataForAll()}))}}}))),this.state={isDownloading:!1,current:1,allData:[]}}get pageSize(){return 100}get total(){return this.props.total}getDownloadHeader(){var{columns:e}=this.props;return(0,o.default)(e).call(e,(e=>({label:e.title,value:e.dataIndex,default:""})))}getDownloadData(){var{columns:e,data:t}=this.props;return(0,o.default)(t).call(t,(t=>{var a={};return(0,c.default)(e).call(e,(e=>{var r=this.getColumnData(t,e);a[e.dataIndex]=r})),a}))}getDownloadDataAll(){var{columns:e}=this.props,{allData:t}=this.state;return(0,o.default)(t).call(t,(t=>{var a={};return(0,c.default)(e).call(e,(e=>{var r=this.getColumnData(t,e);a[e.dataIndex]=r})),a}))}renderDownloadCurrent(){return x.default.createElement(v.default,{title:t("Download all data")},x.default.createElement(y.default,{type:"default",onClick:this.exportCurrentDataAll,icon:x.default.createElement(b.default,null)}))}renderProgress(){var{isDownloading:e,percent:t}=this.state;return e?x.default.createElement(g.default,{percent:t,status:"active",className:P.default.progress}):null}renderCancelBtn(){var{isDownloading:e}=this.state;return e?x.default.createElement(v.default,{title:t("Cancel Download")},x.default.createElement(y.default,{type:"danger",shape:"circle",onClick:this.cancelDownload,icon:x.default.createElement(m.default,null),size:"small"})):null}renderDownloadAll(){var e=x.default.createElement(h.default,null,x.default.createElement(h.default.Item,{key:"current",onClick:this.exportCurrentData},t("Download current data")),x.default.createElement(h.default.Item,{key:"all",onClick:this.downloadAllData},t("Download all data")));return x.default.createElement(x.default.Fragment,null,x.default.createElement(p.default,{overlay:e},x.default.createElement(y.default,{type:"default",icon:x.default.createElement(b.default,null)})),this.renderProgress(),this.renderCancelBtn())}render(){var{total:e,data:t}=this.props;return e===t.length?this.renderDownloadCurrent():this.renderDownloadAll()}}a.default=E,(0,S.default)(E,"propTypes",{columns:w.default.array,data:w.default.array,total:w.default.number,getValueRenderFunc:w.default.func.isRequired,resourceName:w.default.string,extraName:w.default.string,getData:w.default.func,totalMax:w.default.number}),(0,S.default)(E,"defaultProps",{columns:[],data:[],total:0,totalMax:1e4,resourceName:"",extraName:"",getData:()=>f.default.resolve({data:{items:[],count:0}})})},3362:function(e,t,a){var r=a(3363);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(76)(r,n);r.locals&&(e.exports=r.locals)},3363:function(e,t,a){(t=e.exports=a(75)(!1)).push([e.i,".index__progress--1I8an {\n  width: 100px;\n  margin-right: 10px;\n}\n",""]),t.locals={progress:"index__progress--1I8an"}},3364:function(e,t,a){var r=a(3365);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(76)(r,n);r.locals&&(e.exports=r.locals)},3365:function(e,t,a){(t=e.exports=a(75)(!1)).push([e.i,"/* init */\n/* specific color */\n/*  border */\n/*  background */\n/*  shadow */\n/*  font */\n/*  */\n/*  animation */\n/*  size */\n/*  sider */\n.index__table--33j8W {\n  overflow: hidden;\n  background-color: #fff;\n  border-radius: 4px;\n  -webkit-box-shadow: 0 4px 8px 0 rgba(36, 46, 66, 0.06);\n          box-shadow: 0 4px 8px 0 rgba(36, 46, 66, 0.06);\n}\n.index__table--33j8W .ant-table-container {\n  -webkit-box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.05);\n          box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.05);\n}\n.index__table--33j8W .ant-table-pagination.ant-pagination {\n  margin: 0;\n  padding: 8px 16px;\n}\n.index__button--3bdor {\n  min-width: 96px;\n  margin-left: 10px;\n}\n.index__select-title--1m-fB {\n  padding: 2px;\n}\n.index__cancel-select--1WxJX {\n  color: #fff;\n}\n.index__create--2BjrH {\n  min-width: 96px;\n  margin-left: 12px;\n}\n.index__action--2MndJ {\n  padding: 0 4px;\n  color: #329dce;\n  font-weight: 600;\n  cursor: pointer;\n}\n.index__column-menu--3pO2n {\n  width: 160px;\n  overflow: hidden;\n  border-radius: 4px;\n  -webkit-box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.2);\n          box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.2);\n}\n.index__column-menu--3pO2n .ant-menu-vertical > .ant-menu-item {\n  height: 30px;\n  line-height: 30px;\n}\n.index__custom-button--3b70- {\n  margin-left: 0;\n}\n.index__table-header--3WB0r {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n.index__table-header-btns--2QPSM {\n  position: relative;\n  display: inline-block;\n  margin-bottom: 16px;\n}\n.index__table-header-btns--2QPSM button {\n  margin-right: 10px;\n}\n.index__table-header-btns--2QPSM .ant-btn[disabled] {\n  -webkit-box-shadow: 0 2px 0 rgba(0, 0, 0, 0.045);\n          box-shadow: 0 2px 0 rgba(0, 0, 0, 0.045);\n}\n.index__search-row--7P1c7 {\n  float: right;\n  min-width: 350px;\n}\n.index__search-input--1izmf {\n  width: 288px;\n  height: 32px;\n}\n",""]),t.locals={table:"index__table--33j8W",button:"index__button--3bdor","select-title":"index__select-title--1m-fB","cancel-select":"index__cancel-select--1WxJX",create:"index__create--2BjrH",action:"index__action--2MndJ","column-menu":"index__column-menu--3pO2n","custom-button":"index__custom-button--3b70-","table-header":"index__table-header--3WB0r","table-header-btns":"index__table-header-btns--2QPSM","search-row":"index__search-row--7P1c7","search-input":"index__search-input--1izmf"}},3366:function(e,t,a){var r=a(3367);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(76)(r,n);r.locals&&(e.exports=r.locals)},3367:function(e,t,a){(t=e.exports=a(75)(!1)).push([e.i,"/* init */\n/* specific color */\n/*  border */\n/*  background */\n/*  shadow */\n/*  font */\n/*  */\n/*  animation */\n/*  size */\n/*  sider */\n.index__wrapper--3q1S2 {\n  min-height: calc(100vh - 108px);\n  margin-top: 16px;\n  padding: 0 16px;\n}\n.index__hint--3yEH0 {\n  margin-bottom: 16px;\n}\n.index__hints--1QRzH .ant-alert-warning {\n  background-color: #fffbe6;\n  border: 1px solid #ffe58f;\n}\n.index__hints--1QRzH .ant-alert-warning .ant-alert-icon {\n  color: #faad14;\n}\n",""]),t.locals={wrapper:"index__wrapper--3q1S2",hint:"index__hint--3yEH0",hints:"index__hints--1QRzH"}},3368:function(e,t,a){"use strict";a.r(t),t.default="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMThweCIgaGVpZ2h0PSIyNHB4IiB2aWV3Qm94PSIwIDAgMTggMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+bG9jazwvdGl0bGU+CiAgICA8ZyBpZD0i6K6+6K6h6KeE6IyDIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0ibG9jayIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuMDAwMDAwLCAwLjAwMDAwMCkiIGZpbGw9IiNFQjM1NEQiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi4zOTk0MDY2LDkuNzYzMzE4ODEgTDE1LjA2MjEzMTksOS43OTg4MTMxIEwxNS4wNjIxMzE5LDcuMDI2OTIzMDggQzE1LjA2MjEzMTksMi43NTc2OTIzMSAxMi42MjMwNTQ0LDAgOC44NDkwOTg1NiwwIEM1LjA3NTE0MjczLDAgMi42MzYwODc3NCwyLjc1NzY5MjMxIDIuNjM2MDg3NzQsNy4wMjY5MjMwOCBMMi42MzYwODc3NCw5Ljc2MzMxODgxIEw1LjI5ODgxMzEsOS43NjMzMTg4MSBMNS4yOTg4MTMxLDcuMDI2OTIzMDggQzUuMjk4ODEzMSw1LjcxNDE5NzcyIDUuNjQ0OTY2OTUsMi42NjI3MjUzNiA4Ljg0OTA5ODU2LDIuNjYyNzI1MzYgQzExLjkzNzg2ODEsMi42NjI3MjUzNiAxMi4zOTk0MDY2LDUuMzk3MzQwNzUgMTIuMzk5NDA2Niw3LjAyNjkyMzA4IEwxMi4zOTk0MDY2LDkuNzYzMzE4ODEgWiIgaWQ9Iui3r+W+hCI+PC9wYXRoPgogICAgICAgICAgICA8cGF0aCBkPSJNMTUuMDg4NzQ3LDkuNzk4ODEzMSBMMi42NjI3MjUzNiw5Ljc5ODgxMzEgQzEuMTkyOTAxMTUsOS43OTg4MTMxIDAsMTAuOTkxNzE0MiAwLDEyLjQ2MTUzODUgTDAsMjEuMzM3Mjc0NiBDMCwyMi44MDcwOTg5IDEuMTkyOTAxMTUsMjQgMi42NjI3MjUzNiwyNCBMMTUuMDg4NzQ3LDI0IEMxNi41NTg1NzEyLDI0IDE3Ljc1MTQ3MjQsMjIuODA3MDk4OSAxNy43NTE0NzI0LDIxLjMzNzI3NDYgTDE3Ljc1MTQ3MjQsMTIuNDYxNTM4NSBDMTcuNzUxNDcyNCwxMC45OTE3MzY4IDE2LjU1ODU3MTIsOS43OTg4MTMxIDE1LjA4ODc0Nyw5Ljc5ODgxMzEgWiBNOS43NjMyOTYyOCwxNy41NDExMjA4IEw5Ljc2MzI5NjI4LDE5LjU2MjEzMTkgQzkuNzYzMjk2MjgsMjAuMDUxMTY0NCA5LjM2NDc5MTE3LDIwLjQ0OTcxNDUgOC44NzU3MzYxOCwyMC40NDk3MTQ1IEM4LjM4NjY4MTE5LDIwLjQ0OTcxNDUgNy45ODgxNTM1NSwyMC4wNTExODY5IDcuOTg4MTUzNTUsMTkuNTYyMTMxOSBMNy45ODgxNTM1NSwxNy41NDExMjA4IEM3LjQ1OTE2NDY3LDE3LjIzMzE0MyA3LjEwMDU5MzQ1LDE2LjY2Nzc1ODQgNy4xMDA1OTM0NSwxNi4wMTE4MjM5IEM3LjEwMDU5MzQ1LDE1LjAzMTk1NjEgNy44OTU4NDU4NiwxNC4yMzY2ODEyIDguODc1NzM2MTgsMTQuMjM2NjgxMiBDOS44NTU2MjY1MSwxNC4yMzY2ODEyIDEwLjY1MDkwMTUsMTUuMDMxOTU2MSAxMC42NTA5MDE1LDE2LjAxMTg0NjUgQzEwLjY1MDkwMTUsMTYuNjY2ODU3IDEwLjI5MjMwNzcsMTcuMjMzMTQzIDkuNzYzMjk2MjgsMTcuNTQxMTQzMyBMOS43NjMyOTYyOCwxNy41NDExMjA4IFoiIGlkPSLlvaLnirYiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},3369:function(e,t,a){"use strict";a.r(t),t.default="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjRweCIgaGVpZ2h0PSIyNHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+amllc3VvPC90aXRsZT4KICAgIDxnIGlkPSLorr7orqHop4TojIMiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSIzLi1JY29uIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNzguMDAwMDAwLCAtNzI5LjAwMDAwMCkiIGZpbGw9IiM1MTUxNTEiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgIDxnIGlkPSJqaWVzdW8iIHRyYW5zZm9ybT0idHJhbnNsYXRlKDc4LjAwMDAwMCwgNzI5LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjE1MzgyODEsNy4zMDggTDEwLjE1MzgyODEsOC4zMDc3MDMxMiBMMTIuOTIzMDg1OSw4LjMwNzcwMzEyIEwxMi45MjMwODU5LDcuMzA4IEMxMi45MjMwODU5LDIuODY4IDEwLjM4NjQ0NTMsMCA2LjQ2MTUzMTI1LDAgQzIuNTM2NjE3MTksMCAwLDIuODY4IDAsNy4zMDggTDAsMTAuMTUzODUxNiBMMi43NjkyMzQzNywxMC4xNTM4NTE2IEwyLjc2OTIzNDM3LDcuMzA4IEMyLjc2OTIzNDM3LDUuOTQyNzY1NjIgMy4xMjkyMzQzOCwyLjc2OTIzNDM3IDYuNDYxNTMxMjUsMi43NjkyMzQzNyBDOS42NzM4NTE1NiwyLjc2OTIzNDM3IDEwLjE1Mzg1MTYsNS42MTMyMzQzOCAxMC4xNTM4NTE2LDcuMzA4IEwxMC4xNTM4MjgxLDcuMzA4IFoiIGlkPSLot6/lvoQiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0yMS4yMzA3NjU2LDkuMjMwNzY1NjMgTDguMzA3NzAzMTIsOS4yMzA3NjU2MyBDNi43NzkwODU5NCw5LjIzMDc2NTYzIDUuNTM4NDY4NzUsMTAuNDcxMzgyOCA1LjUzODQ2ODc1LDEyIEw1LjUzODQ2ODc1LDIxLjIzMDc2NTYgQzUuNTM4NDY4NzUsMjIuNzU5MzgyOCA2Ljc3OTA4NTk0LDI0IDguMzA3NzAzMTIsMjQgTDIxLjIzMDc2NTYsMjQgQzIyLjc1OTM4MjgsMjQgMjQsMjIuNzU5MzgyOCAyNCwyMS4yMzA3NjU2IEwyNCwxMiBDMjQsMTAuNDcxNDA2MyAyMi43NTkzODI4LDkuMjMwNzY1NjMgMjEuMjMwNzY1Niw5LjIzMDc2NTYzIFogTTE1LjY5MjI5NjksMTcuMjgyNzY1NiBMMTUuNjkyMjk2OSwxOS4zODQ2MTcyIEMxNS42OTIyOTY5LDE5Ljg5MzIxMDkgMTUuMjc3ODUxNiwyMC4zMDc3MDMxIDE0Ljc2OTIzNDQsMjAuMzA3NzAzMSBDMTQuMjYwNjE3MiwyMC4zMDc3MDMxIDEzLjg0NjE0ODQsMTkuODkzMjM0NCAxMy44NDYxNDg0LDE5LjM4NDYxNzIgTDEzLjg0NjE0ODQsMTcuMjgyNzY1NiBDMTMuMjk2LDE2Ljk2MjQ2ODcgMTIuOTIzMDg1OSwxNi4zNzQ0Njg4IDEyLjkyMzA4NTksMTUuNjkyMjk2OSBDMTIuOTIzMDg1OSwxNC42NzMyMzQ0IDEzLjc1MDE0ODQsMTMuODQ2MTQ4NCAxNC43NjkyMzQ0LDEzLjg0NjE0ODQgQzE1Ljc4ODMyMDMsMTMuODQ2MTQ4NCAxNi42MTU0MDYyLDE0LjY3MzIzNDQgMTYuNjE1NDA2MiwxNS42OTIzMjAzIEMxNi42MTU0MDYyLDE2LjM3MzUzMTMgMTYuMjQyNDY4OCwxNi45NjI0Njg3IDE1LjY5MjI5NjksMTcuMjgyNzg5MSBMMTUuNjkyMjk2OSwxNy4yODI3NjU2IFoiIGlkPSLlvaLnirYiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},3381:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.ConfirmStep=void 0;var l=i(r(65)),s=i(r(82)),o=i(r(62)),u=i(r(1446)),d=i(r(33)),c=i(r(219));r(1117);var f=i(r(1118));r(1115);var p=i(r(1116)),h=i(r(37)),m=i(r(0)),g=r(382),v=i(r(1121)),y=r(1120);r(167);class b extends v.default{constructor(){super(...arguments),(0,h.default)(this,"allowed",(()=>l.default.resolve()))}init(){}get title(){return"ConfirmStep"}get name(){return"ConfirmStep"}get enableCinder(){return this.props.rootStore.checkEndpoint("cinder")}getDisk(e){var t,a,{size:r,typeOption:n,deleteTypeLabel:i}=e;return(0,s.default)(t=(0,s.default)(a="".concat(n.label," ")).call(a,r,"GiB ")).call(t,i)}getBootableVolumeDisk(){var e,{bootableVolume:t}=this.props.context,{size:a,volume_type:r}=t.selectedRows[0];return(0,s.default)(e="".concat(r," ")).call(e,a,"GiB")}getSystemDisk(){if(!this.enableCinder)return null;var{context:e}=this.props,{systemDisk:t,source:{value:a}={},instanceSnapshotDisk:r}=e;return"bootableVolume"===a?this.getBootableVolumeDisk():"instanceSnapshot"===a&&null!==r?this.getDisk(r):this.getDisk(t)}getDataDisk(){if(!this.enableCinder)return null;var{context:e}=this.props,{dataDisk:t=[]}=e;return(0,o.default)(t).call(t,(e=>this.getDisk(e.value)))}getFlavor(){var e,t,a,{context:r}=this.props,{flavor:n}=r,{disk:i,ram:l,vcpus:o}=n.selectedRows[0];return i?(0,s.default)(e=(0,s.default)(t="".concat(o,"VCPU/")).call(t,i,"GiB/")).call(e,(0,u.default)(l/1024,10),"GiB"):(0,s.default)(a="".concat(o,"VCPU/")).call(a,(0,u.default)(l/1024,10),"GiB")}getSourceValue(){var{context:e}=this.props,{source:t}=e,{selectedRows:a=[],selectedRowKeys:r=[]}=e[t.value];return a.length?a[0].name:r[0]}getVirtualLANs(){var{context:e}=this.props,{networks:t=[]}=e,a=(0,o.default)(t).call(t,(e=>{var t,a,r,{networkOption:n,subnetOption:i,ipTypeOption:l,ip:o}=e.value,u=1===l.value?i.name||i.label:"";return(0,s.default)(t=(0,s.default)(a=(0,s.default)(r="".concat(n.name||n.label," ")).call(r,l.label," ")).call(a,u," ")).call(t,1===l.value?o:"")}));return m.default.createElement(f.default,null,(0,o.default)(a).call(a,(e=>m.default.createElement(p.default,{span:24,key:e},e))))}getPorts(){var{context:e}=this.props,{ports:{selectedRows:t=[]}={}}=e,a=(0,o.default)(t).call(t,(e=>e.name||e.id));return m.default.createElement(f.default,null,(0,o.default)(a).call(a,(e=>m.default.createElement(p.default,{span:24,key:e},e))))}getSecurityGroups(){var{context:e}=this.props,{securityGroup:{selectedRows:t=[]}={}}=e,a=(0,o.default)(t).call(t,(e=>e.name));return m.default.createElement(f.default,null,(0,o.default)(a).call(a,(e=>m.default.createElement(p.default,{span:24,key:e},e))))}getLoginType(){var e,{context:t}=this.props,{loginType:a,keypair:r}=t,{value:n,label:i}=a;return(0,s.default)(e="".concat(i," ")).call(e,"keypair"===n?r.selectedRows[0].name:"")}getPhysicalNode(){var{context:e}=this.props,{physicalNodeType:t,physicalNode:a}=e;return t?"smart"===t.value?t.label:a.selectedRows[0].hypervisor_hostname:y.physicalNodeTypes[0].label}getServerGroup(){var{context:e}=this.props,{serverGroup:t}=e;return t&&t.selectedRows.length?t.selectedRows[0].name:"-"}getIso(){var{context:e}=this.props,{iso:t}=e;return t&&0!==t.length?(0,o.default)(t).call(t,(e=>e.value)).join(" "):"-"}goStep(e){var{goStep:t}=this.props;t&&t(e)}get defaultValue(){return{}}get formItems(){var e,a,{context:r}=this.props,n=[{label:t("Start Source"),value:r.source.label},{label:t("System Disk"),value:this.getSystemDisk()},{label:t("Available Zone"),value:r.availableZone.label},{label:t("Start Source Name"),value:this.getSourceValue()},{label:t("Data Disk"),value:this.getDataDisk()},{label:t("Project"),value:r.project},{label:t("Flavor"),value:this.getFlavor()}];return this.enableCinder||(n=(0,d.default)(n).call(n,(e=>{var a;return!(0,c.default)(a=[t("System Disk"),t("Data Disk")]).call(a,e.label)}))),[{name:"confirm-count",label:t("Count"),type:"label",content:r.count||1},{name:"confirm-config",label:t("Config Overview"),type:"descriptions",title:t("Base Config"),onClick:()=>{this.goStep(0)},items:n},{type:"short-divider"},{name:"confirm-config-network",label:" ",type:"descriptions",title:t("Network Config"),onClick:()=>{this.goStep(1)},items:[{label:(0,s.default)(e="".concat(t("Virtual LAN"),"(")).call(e,t("New"),")"),value:this.getVirtualLANs(),span:1},{label:(0,s.default)(a="".concat(t("Virtual LAN"),"(")).call(a,t("Created"),")"),value:this.getPorts(),span:1},{label:t("Security Group"),value:this.getSecurityGroups(),span:1}]},{type:"short-divider"},{name:"confirm-config-system",label:" ",type:"descriptions",title:t("System Config"),onClick:()=>{this.goStep(2)},items:[{label:t("Name"),value:r.name},{label:t("Login Type"),value:this.getLoginType()},{label:t("Physical Node"),value:this.getPhysicalNode()},{label:t("Server Group"),value:this.getServerGroup()}]}]}}a.ConfirmStep=b;var _=(0,g.inject)("rootStore")((0,g.observer)(b));a.default=_},3385:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.SystemStep=void 0;var p=f(r(65)),h=f(r(101)),m=f(r(62)),g=f(r(33)),v=f(r(52)),y=f(r(37)),b=f(r(0)),_=r(382),S=f(r(396)),x=f(r(383)),w=f(r(544)),I=f(r(543)),C=f(r(1218)),k=f(r(1121)),D=r(514),T=r(1255),A=r(1120),P=r(135),M=f(r(1447)),E=f(r(1166)),N=f(r(1448));function R(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=R(Object(r),!0)).call(a,(function(t){(0,y.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=R(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}class F extends k.default{constructor(){var e;super(...arguments),e=this,(0,y.default)(this,"allowed",(()=>p.default.resolve())),(0,y.default)(this,"onFinishCreateKeyPair",(0,v.default)((function*(){var{createdItem:t}=e.keyPairStore,a=yield e.getKeypairs(),r=(0,h.default)(a).call(a,(e=>e.name===(t||{}).name));if(r){var n={selectedRowKeys:[r.id],selectedRows:[r]};e.setState({initKeyPair:n},(()=>{e.updateDefaultValue()}))}})))}init(){this.keyPairStore=S.default,this.serverStore=x.default,this.hypervisorStore=w.default,this.serverGroupStore=I.default,this.getKeypairs(),this.hasAdminRole&&this.getHypervisors(),this.getServerGroups()}get hypervisorColumns(){var e=[...T.hypervisorColumns];return e[0]={title:t("Hostname"),dataIndex:"hypervisor_hostname"},e}get hypervisorFilters(){var e=[...T.hypervisorFilters];return e[0]={label:t("Hostname"),name:"hypervisor_hostname"},e}get title(){return"SystemStep"}get name(){return"SystemStep"}get keypairs(){var e;return(0,m.default)(e=this.keyPairStore.list.data||[]).call(e,(e=>j(j({},e),{},{key:e.name,id:e.name})))}get hypervisors(){var e;return(0,m.default)(e=this.hypervisorStore.list.data||[]).call(e,(e=>j(j({},e),{},{key:e.id,name:e.hypervisor_hostname})))}get serverGroups(){var e,t;return(0,m.default)(e=(0,g.default)(t=this.serverGroupStore.list.data||[]).call(t,(e=>{var{servergroup:t}=this.locationParams;return!t||e.id===t}))).call(e,(e=>j(j({},e),{},{key:e.id})))}get serverGroupRequired(){var{more:e}=this.state,{servergroup:t}=this.locationParams;return!!t&&e}get inputHelp(){var{input:e=""}=this.state;return t("Entered: {length, plural, =1 {one character} other {# characters} }(maximum {maxCount} characters)",{length:e.length,maxCount:1e3})}get sourceInfo(){var{context:e={}}=this.props,{source:t={},image:a={},bootableVolume:r={},instanceSnapshot:n={}}=e;if("image"===t.value){var{selectedRows:i=[]}=a;return i.length&&i[0]}if("bootableVolume"===t.value){var{selectedRows:l=[]}=r,s=l.length&&l[0].origin_data||{},o=l.length&&l[0].volume_image_metadata;return s.volume_image_metadata||o}if("instanceSnapshot"===t.value){var{selectedRows:u=[]}=n;return u.length&&u[0]}return!1}get isWindowsImage(){return this.sourceInfo&&"windows"===this.sourceInfo.os_distro}get defaultValue(){var e,{servergroup:t}=this.locationParams,{context:a={}}=this.props,r={loginType:a.loginType||(this.isWindowsImage?this.loginTypes[1]:this.loginTypes[0]),more:!1,physicalNodeType:A.physicalNodeTypes[0],userData:""};t&&(r.serverGroup={selectedRowKeys:[t],selectedRows:(0,g.default)(e=this.serverGroups).call(e,(e=>e.id===t))});var{initKeyPair:n,name:i}=this.state;return n&&(r.keypair=n),i&&(r.name=i),r}get loginTypes(){return[{label:t("Keypair"),value:"keypair",disabled:this.isWindowsImage},{label:t("Password"),value:"password"}]}getKeypairs(){var e=this;return(0,v.default)((function*(){return e.keyPairStore.fetchList()}))()}getHypervisors(){this.hypervisorStore.fetchList()}getServerGroups(){var e=this;return(0,v.default)((function*(){yield e.serverGroupStore.fetchList(),e.updateDefaultValue()}))()}get nameForStateUpdate(){return["name","loginType","password","confirmPassword","more","physicalNodeType"]}get loginUserName(){return this.sourceInfo&&this.sourceInfo.os_admin_user}getKeyPairHeader(){var{isLoading:e}=this.keyPairStore.list||{};return e?null:b.default.createElement("div",{style:{marginBottom:10}},b.default.createElement("span",null,t("The key pair allows you to SSH into your newly created instance. You can select an existing key pair, import a key pair, or generate a new key pair.")),b.default.createElement("span",{className:N.default["action-wrapper"]},b.default.createElement(E.default,{actions:{moreActions:[{action:M.default}]},onFinishAction:this.onFinishCreateKeyPair})))}get formItems(){var{loginType:e,more:a=!1,physicalNodeType:r}=this.state,n=e===this.loginTypes[1].value,i=r===A.physicalNodeTypes[1].value,{initKeyPair:l}=this.state;return[{name:"name",label:t("Name"),type:"input-name",required:!0,isInstance:!0},{name:"loginType",label:t("Login Type"),type:"radio",options:this.loginTypes,isWrappedValue:!0},{name:"username",label:t("Login Name"),content:this.loginUserName||"-",extra:this.loginUserName?"":t("The feasible configuration of cloud-init or cloudbase-init service in the image is not synced to image's properties, so the Login Name is unknown."),tip:t("Whether the Login Name can be used is up to the feasible configuration of cloud-init or cloudbase-init service in the image.")},{name:"keypair",label:t("Keypair"),type:"select-table",data:this.keypairs,isLoading:this.keyPairStore.list.isLoading,required:!n,hidden:n,header:this.getKeyPairHeader(),initValue:l,tip:t("The SSH key is a way to remotely log in to the instance. The cloud platform only helps to keep the public key. Please keep your private key properly."),filterParams:[{label:t("Name"),name:"name"}],columns:[{title:t("Name"),dataIndex:"name"},{title:t("Fingerprint"),dataIndex:"fingerprint"}],selectedLabel:t("Keypair")},{name:"password",label:t("Login Password"),type:"input-password",required:n,hidden:!n,otherRule:(0,D.getPasswordOtherRule)("password","instance")},{name:"confirmPassword",label:t("Confirm Password"),type:"input-password",required:n,hidden:!n,otherRule:(0,D.getPasswordOtherRule)("confirmPassword","instance")},{type:"divider"},{name:"more",label:t("Advanced Options"),type:"more"},{name:"physicalNodeType",label:t("Physical Node"),type:"radio",hidden:!a||!this.hasAdminRole,options:A.physicalNodeTypes,isWrappedValue:!0},{name:"physicalNode",label:" ",type:"select-table",hidden:!this.hasAdminRole||!a||!i,required:i,data:this.hypervisors,isLoading:this.hypervisorStore.list.isLoading,extra:t("You can manually specify a physical node to create an instance."),columns:this.hypervisorColumns,filterParams:this.hypervisorFilters},{name:"serverGroup",label:t("Server Group"),type:"select-table",hidden:!a,data:this.serverGroups,isLoading:this.serverGroupStore.list.isLoading,required:this.serverGroupRequired,extra:t("Using server groups, you can create cloud hosts on the same/different physical nodes as much as possible to meet the affinity/non-affinity requirements of business applications."),columns:[{title:t("Name"),dataIndex:"name"},{title:t("Member Count"),dataIndex:"members",render:e=>e.length},{title:t("Policy"),dataIndex:"policy",render:e=>C.default[e]||"-"}],filterParams:[{label:t("Name"),name:"name"},{label:t("Policy"),name:"policy",options:(0,P.getOptions)(C.default)}]},{name:"userData",label:t("User Data"),type:"textarea-from-file",validator:D.asciiValidator,hidden:!a,extra:t("The user needs to ensure that the input is a shell script that can run completely and normally.")}]}}a.SystemStep=F;var L=(0,_.inject)("rootStore")((0,_.observer)(F));a.default=L},3386:function(e,t,a){(t=e.exports=a(75)(!1)).push([e.i,"/* init */\n/* specific color */\n/*  border */\n/*  background */\n/*  shadow */\n/*  font */\n/*  */\n/*  animation */\n/*  size */\n/*  sider */\n.index__input--2eKC2 {\n  margin-right: 32px;\n  margin-left: 16px;\n}\n.index__number-input--3TVxi {\n  min-width: 165px;\n}\n.index__action-wrapper--2DjKP {\n  margin-left: 8px;\n}\n.index__action-wrapper--2DjKP .ant-btn-link {\n  padding: 5.6px 15px !important;\n  border-color: #0068FF;\n}\n",""]),t.locals={input:"index__input--2eKC2","number-input":"index__number-input--3TVxi","action-wrapper":"index__action-wrapper--2DjKP"}},3387:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.NetworkStep=void 0;var l=i(r(65)),s=i(r(101)),o=i(r(62)),u=i(r(28)),d=i(r(91)),c=i(r(1150)),f=i(r(52)),p=i(r(37)),h=i(r(0)),m=r(382),g=r(47),v=r(321),y=r(390),b=r(392),_=r(521),S=r(514),x=i(r(1121)),w=i(r(1299)),I=r(522),C=r(1193),k=r(1129),D=r(517),{isIPv4:T,isIpv6:A}=S.ipValidate;class P extends x.default{constructor(){var e;super(...arguments),e=this,(0,p.default)(this,"allowed",(()=>l.default.resolve())),(0,p.default)(this,"getSubnetPromise",function(){var t=(0,f.default)((function*(t){if(!e.subnetMap[t]){var a=yield e.subnetStore.fetchList({network_id:t});e.subnetMap[t]=a}return e.subnetMap[t]}));return function(e){return t.apply(this,arguments)}}()),(0,p.default)(this,"checkNetworks",(e=>!(!(0,g.isArray)(e)||(0,g.isEmpty)(e)||(0,g.isEmpty)(e[0].value))&&(!(0,s.default)(e).call(e,(e=>!e.value||!e.value.network))&&!(0,s.default)(e).call(e,(e=>1===e.value.ipType&&!T(e.value.ip)&&!A(e.value.ip)))))),(0,p.default)(this,"disabledNetwork",(e=>!e.subnets||0===e.subnets.length)),(0,p.default)(this,"onNetworkChange",(e=>{var{selectedRows:t}=e;this.setState({networkSelectRows:t},(()=>{this.getSubnets()})),this.updateContext({networkSelectRows:t})})),(0,p.default)(this,"checkNetworkAndPort",(e=>{var{getFieldValue:a}=e;return{validator(){var e=a("networkSelect"),r=a("ports"),{selectedRowKeys:n=[]}=e||{},{selectedRowKeys:i=[]}=r||{};return 0===n.length&&0===i?l.default.reject(t("Please select")):l.default.resolve()}}})),(0,p.default)(this,"onPortChange",(e=>{var{selectedRows:t=[]}=e||{};this.updateContext({portSelectRows:t})}))}init(){this.networkStore=new v.NetworkStore,this.subnetStore=new y.SubnetStore,this.securityGroupStore=new b.SecurityGroupStore,this.portStore=new _.VirtualAdapterStore,this.subnetMap={}}get title(){return"NetworkStep"}get name(){return"NetworkStep"}get defaultValue(){return{networks:[]}}getSubnets(){var e=this;return(0,f.default)((function*(){var{networkSelectRows:t,networks:a=[]}=e.state,r=yield l.default.all((0,o.default)(t).call(t,(t=>e.getSubnetPromise(t.id)))),n=[];(0,u.default)(r).call(r,(e=>{n.push(...e)}));var i=[],c=(0,o.default)(t).call(t,((e,t)=>{var r=(0,s.default)(n).call(n,(t=>t.network_id===e.id)),l=(0,s.default)(a).call(a,((t,a)=>t.value.network===e.id&&(i.push(a),!0)));return l||{value:{network:e.id,subnet:r.id,networkOption:e,subnetOption:r,ipTypeOption:I.ipTypeOptions[0],ipType:0},index:t}})),f=(0,o.default)(t).call(t,(e=>e.id));(0,u.default)(a).call(a,((e,t)=>{(0,d.default)(i).call(i,t)<0&&(0,d.default)(f).call(f,e.value.network)>=0&&c.push(e)})),e.updateFormValue("networks",c),e.setState({subnets:n,initValue:c})}))()}get nameForStateUpdate(){return["networkSelect","networks","ports"]}get formItems(){var{networkSelectRows:e=[],subnets:a,initValue:r=[],ports:n=[]}=this.state,i=e.length>0,s=e.length&&(0,c.default)(e).call(e,(e=>e.port_security_enabled)),o=0===n.length,u=0===e.length;return[{name:"networkSelect",label:t("Networks"),type:"network-select-table",disabledFunc:this.disabledNetwork,onChange:this.onNetworkChange,showExternal:!0,isMulti:!0,required:o,otherRule:this.checkNetworkAndPort,dependencies:["ports"],header:h.default.createElement("div",null,t("Please reasonably plan the network and subnet to which the virtual network card belongs."),t(" You can go to the console to "),(0,D.getLinkRender)({key:"network",value:"".concat(t("create a new network/subnet")," > ")}))},{name:"networks",label:t("Virtual LAN"),type:"add-select",networks:e,hidden:!i,subnets:a,itemComponent:w.default,required:i,addTextTips:t("Virtual LANs"),addText:t("Add Virtual LAN"),minCount:e.length||0,optionsByIndex:!0,initValue:r,validator:(e,t)=>this.checkNetworks(t)?l.default.resolve():l.default.reject("")},{name:"divider1",type:"divider"},{name:"ports",type:"select-table",label:t("Ports"),extraParams:{project_id:this.currentProjectId,status:"DOWN"},backendPageStore:this.portStore,isMulti:!0,header:t("Ports provide extra communication channels to your instances. You can select ports instead of networks or a mix of both (The port executes its own security group rules by default)."),filterParams:k.portFilters,columns:k.portColumns,dependencies:["networkSelect"],otherRule:this.checkNetworkAndPort,required:u,onChange:this.onPortChange},{name:"divider2",type:"divider"},{name:"securityGroup",label:t("Security Group"),type:"select-table",tip:t("Each instance belongs to at least one security group, which needs to be specified when it is created. Instances in the same security group can communicate with each other on the network, and instances in different security groups are disconnected from the internal network by default."),backendPageStore:this.securityGroupStore,extraParams:{project_id:this.currentProjectId},hidden:!s,required:s,isMulti:!0,header:h.default.createElement("div",{style:{marginBottom:8}},t("The security group is similar to the firewall function and is used to set up network access control. "),t(" You can go to the console to "),(0,D.getLinkRender)({key:"securityGroup",value:"".concat(t("create a new security group"),"> ")}),t("Note: The security group you use will act on all virtual adapters of the instance.")),filterParams:C.securityGroupFilter,columns:C.securityGroupColumns,onRow:()=>{}}]}}a.NetworkStep=P;var M=(0,m.inject)("rootStore")((0,m.observer)(P));a.default=M},3388:function(e,a,r){"use strict";var n=r(156),i=r(19),l=r(25),s=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var o=s(r(385)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var r={},n=i&&l;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=n?l(e,s):null;o&&(o.get||o.set)?i(r,s,o):r[s]=e[s]}r.default=e,a&&a.set(e,r);return r}(r(0)),d=s(r(3389)),c=r(332),f=r(517);function p(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(p=function(e){return e?a:t})(e)}class h extends u.Component{getDetailUrl(e){var t=this.isAdminPage?"securityGroupDetailAdmin":"securityGroupDetail";return(0,f.getPath)({key:t,params:{id:e}})}render(){var{item:{security_group_rules:e=[]}={}}=this.props,a={buttonType:"link",title:t("Security Group Rules"),buttonText:t("View Rules"),modalSize:"middle",columns:(0,c.getSelfColumns)(this),data:e};return u.default.createElement(d.default,(0,o.default)({},a,{style:{paddingLeft:0}}))}}a.default=h},3389:function(e,a,r){"use strict";var n=r(156),i=r(19),l=r(25),s=r(21);i(a,"__esModule",{value:!0}),a.default=void 0,r(530);var o=s(r(531)),u=s(r(37)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var r={},n=i&&l;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=n?l(e,s):null;o&&(o.get||o.set)?i(r,s,o):r[s]=e[s]}r.default=e,a&&a.set(e,r);return r}(r(0)),c=s(r(1350)),f=s(r(16));r(167);function p(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(p=function(e){return e?a:t})(e)}class h extends d.Component{constructor(){super(...arguments),(0,u.default)(this,"renderTable",(()=>{var{data:e,columns:t}=this.props;return d.default.createElement(o.default,{columns:t,dataSource:e})}))}static propTypes(){return{title:f.default.string.isRequired,buttonType:f.default.string,isDanger:f.default.bool,data:f.default.array,columns:f.default.array,modalSize:f.default.string,className:f.default.func,buttonText:f.default.string,style:f.default.string}}render(){var{buttonType:e,isDanger:t,title:a,buttonText:r,modalSize:n,style:i}=this.props,l={buttonType:e,isDanger:t,title:a,buttonText:r,modalSize:n,style:i,render:this.renderTable};return d.default.createElement(c.default,l)}}a.default=h,(0,u.default)(h,"defaultProps",{buttonType:"link",isDanger:!1,data:[],columns:[],modalSize:"middle",className:"",buttonText:t("View Detail"),title:t("Detail")})},3394:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.BaseStep=void 0;var p=f(r(65)),h=f(r(101)),m=f(r(62)),g=f(r(33));r(1117);var v=f(r(1118));r(1115);var y=f(r(1116)),b=f(r(52)),_=f(r(37)),S=f(r(0)),x=r(382),w=r(32),I=(r(167),r(515)),C=f(r(383)),k=f(r(523)),D=f(r(1256)),T=f(r(524)),A=f(r(1180)),P=r(386),M=r(520),E=f(r(1121)),N=f(r(1380)),R=r(1131),j=f(r(1195));function F(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=F(Object(r),!0)).call(a,(function(t){(0,_.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=F(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}class O extends E.default{constructor(){var e;super(...arguments),e=this,(0,_.default)(this,"allowed",(()=>p.default.resolve())),(0,_.default)(this,"onImageTabChange",(e=>{this.setState({imageTab:e})})),(0,_.default)(this,"checkSystemDisk",((e,t)=>t.type?p.default.resolve():p.default.reject(""))),(0,_.default)(this,"onFlavorChange",(e=>{this.updateContext({flavor:e})})),(0,_.default)(this,"onInstanceSnapshotChange",function(){var a=(0,b.default)((function*(a){var r,n,{min_disk:i,size:l,id:s}=a.selectedRows[0]||{};if(!s)return e.updateContext({instanceSnapshotDisk:null}),void e.setState({instanceSnapshotDisk:null,instanceSnapshotMinSize:0});var o=yield e.instanceSnapshotStore.fetchDetail({id:s}),{snapshotDetail:{size:u=0,volume_type_id:d}={},block_device_mapping:c="",volumeDetail:f}=o;f||(e.updateContext({instanceSnapshotDisk:null}),e.setState({instanceSnapshotDisk:null,instanceSnapshotMinSize:0}));var p=Math.max(i,l,u),m={};try{m=JSON.parse(c)}catch(e){}var{volume_type:g}=f,{delete_on_termination:v}=m[0]||{},y=v?1:0,b=v?t("Deleted with the instance"):t("Not deleted with the instance"),_=d||((0,h.default)(r=e.volumeTypes).call(r,(e=>e.label===g))||{}).value,S=(0,h.default)(n=e.volumeTypes).call(n,(e=>e.value===_)),x=f?{type:_,typeOption:S,size:u,deleteType:y,deleteTypeLabel:b}:null;e.updateFormValue("instanceSnapshotDisk",x),e.updateContext({instanceSnapshotDisk:x}),e.setState({instanceSnapshotDisk:x,instanceSnapshotMinSize:p})}));return function(e){return a.apply(this,arguments)}}()),(0,_.default)(this,"onBootableVolumeChange",(e=>{this.updateContext({bootableVolume:e})})),(0,_.default)(this,"onSystemDiskChange",(e=>{this.updateContext({systemDisk:e})})),(0,_.default)(this,"onDataDiskChange",(e=>{this.updateContext({dataDisk:e})})),(0,_.default)(this,"getInstanceSnapshotDisk",(()=>{var{instanceSnapshotDisk:e}=this.state,{instanceSnapshotDisk:t}=this.props.context;return e||t})),(0,_.default)(this,"renderSnapshotDisk",(()=>{var e=this.getInstanceSnapshotDisk();if(null===e)return null;var{deleteTypeLabel:a,typeOption:r={},size:n}=e||{};if(!n)return null;var i={marginRight:10,maxWidth:"20%"};return S.default.createElement(v.default,{gutter:24},S.default.createElement(y.default,{span:8},S.default.createElement("span",{style:i},t("Type")),r.label),S.default.createElement(y.default,{span:8},S.default.createElement("span",{style:i},t("Size")),n,S.default.createElement("span",{style:i},"GiB")),S.default.createElement(y.default,{span:8},a))}))}init(){this.serverStore=C.default,this.imageStore=k.default,this.volumeStore=new P.VolumeStore,this.volumeTypeStore=T.default,this.instanceSnapshotStore=D.default,this.getAvailZones(),this.getImages(),this.getVolumeTypes(),this.getVolumes(),this.getInstanceSnapshots(),this.initSourceChange()}get title(){return"BaseStep"}get name(){return"BaseStep"}get isStep(){return!0}get defaultValue(){var{volume:e,snapshot:t}=this.locationParams,a=this.imageSourceType;return e?a=this.volumeSourceType:t&&(a=this.snapshotSourceType),{systemDisk:this.defaultVolumeType,source:a,project:this.currentProjectName,dataDisk:[]}}get availableZones(){var e,t;return(0,m.default)(e=(0,g.default)(t=A.default.list.data||[]).call(t,(e=>e.zoneState.available))).call(e,(e=>({value:e.zoneName,label:e.zoneName})))}get images(){var{imageTab:e}=this.state,{image:t}=this.locationParams,a=t?[(0,w.toJS)(this.imageStore.detail)]:this.imageStore.list.data||[],r=(0,g.default)(a).call(a,(t=>!!(0,M.canImageCreateInstance)(t)&&(e?(0,M.getImageOS)(t)===e:t)));return(0,m.default)(r).call(r,(e=>L(L({},e),{},{key:e.id})))}get snapshots(){var{snapshot:e}=this.locationParams;if(!e){var{list:{data:t}}=this.instanceSnapshotStore;return t||[]}return[(0,w.toJS)(this.instanceSnapshotStore.detail)]}get enableCinder(){return this.props.rootStore.checkEndpoint("cinder")}get volumeTypes(){var e;return(0,m.default)(e=this.volumeTypeStore.list.data||[]).call(e,(e=>({label:e.name,value:e.id,originData:(0,w.toJS)(e)})))}get volumes(){var e,t,a,{volume:r}=this.locationParams;return r?(0,g.default)(a=[(0,w.toJS)(this.volumeStore.detail)]).call(a,(e=>(0,I.canCreateInstance)(e))):(0,m.default)(e=(0,g.default)(t=this.volumeStore.list.data||[]).call(t,(e=>(0,I.canCreateInstance)(e)))).call(e,(e=>L(L({},e),{},{key:e.id})))}get defaultVolumeType(){return{size:10,deleteType:1}}get sourceTypes(){var{image:e,snapshot:a,volume:r}=this.locationParams,n=[{label:t("Image"),value:"image",disabled:r||a},{label:t("Instance Snapshot"),value:"instanceSnapshot",disabled:e||r}];return this.enableCinder&&n.push({label:t("Bootable Volume"),value:"bootableVolume",disabled:e||a}),n}get imageSourceType(){var e;return(0,h.default)(e=this.sourceTypes).call(e,(e=>"image"===e.value))}get snapshotSourceType(){var e;return(0,h.default)(e=this.sourceTypes).call(e,(e=>"instanceSnapshot"===e.value))}get volumeSourceType(){var e;return this.enableCinder?(0,h.default)(e=this.sourceTypes).call(e,(e=>"bootableVolume"===e.value)):{}}getAvailZones(){var e=this;return(0,b.default)((function*(){yield A.default.fetchListWithoutDetail(),e.availableZones.length&&e.updateFormValue("availableZone",e.availableZones[0])}))()}getImages(){var e=this;return(0,b.default)((function*(){var t,{volume:a,image:r,snapshot:n}=e.locationParams;a||n||(r?yield e.imageStore.fetchDetail({id:r}):yield e.imageStore.fetchList({all_projects:e.hasAdminRole}),r&&e.updateFormValue("image",{selectedRowKeys:[r],selectedRows:(0,g.default)(t=e.images).call(t,(e=>e.id===r))}))}))()}getVolumeTypes(){var e=this;return(0,b.default)((function*(){e.enableCinder&&(yield e.volumeTypeStore.fetchList())}))()}getVolumes(){var e=this;return(0,b.default)((function*(){var t,{image:a,snapshot:r,volume:n}=e.locationParams;a||r||e.enableCinder&&(n?(yield e.volumeStore.fetchDetail({id:n}),e.updateContext({source:e.volumeSourceType})):yield e.volumeStore.fetchList({sortKey:"bootable",sortOrder:"ascend"}),n&&e.updateFormValue("volume",{selectedRowKeys:[n],selectedRows:(0,g.default)(t=e.volumes).call(t,(e=>e.id===n))}))}))()}getInstanceSnapshots(){var e=this;return(0,b.default)((function*(){var t,{snapshot:a}=e.locationParams;a?(yield e.instanceSnapshotStore.fetchDetail({id:a}),a&&e.updateFormValue("instanceSnapshot",{selectedRowKeys:[a],selectedRows:(0,g.default)(t=e.snapshots).call(t,(e=>e.id===a))})):e.instanceSnapshotStore.fetchList()}))()}get systemTabs(){return(0,M.getImageSystemTabs)()}get nameForStateUpdate(){return["source","image","instanceSnapshot","bootableVolume","flavor"]}getSystemDiskMinSize(){var e=(this.state.flavor||{}).disk||0,t=0;if(this.sourceTypeIsImage){var{min_disk:a=0,size:r=0}=this.state.image||{},n=Math.ceil(r/1024/1024/1024);return t=Math.max(a,n,1),Math.max(e,t,1)}if(this.sourceTypeIsSnapshot){var{instanceSnapshotMinSize:i=0}=this.state;return Math.max(e,i,1)}return Math.max(e,1)}get sourceTypeIsImage(){var{source:e}=this.state;return e===this.imageSourceType.value}get sourceTypeIsSnapshot(){var{source:e}=this.state;return e===this.snapshotSourceType.value}get sourceTypeIsVolume(){var{source:e}=this.state;return e===this.volumeSourceType.value}getImageExtraWords(){var{flavor:{category:e}={}}=this.state;return(0,R.isGpuCategory)(e)?t("For GPU type, you need to install GPU drivers in the instance operating system."):""}initSourceChange(){var{snapshot:e,volume:t}=this.locationParams;e?this.onSourceChange(this.snapshotSourceType):t?this.onSourceChange(this.volumeSourceType):this.onSourceChange(this.imageSourceType)}onSourceChange(e){this.updateContext({source:e})}get imageColumns(){return(0,M.getImageColumns)(this)}get instanceSnapshotColumns(){return[{title:t("Name"),dataIndex:"name"},{title:t("Disk Format"),dataIndex:"disk_format",render:e=>M.imageFormats[e]||"-"},{title:t("Min System Disk"),dataIndex:"min_disk",render:e=>"".concat(e,"GiB")},{title:t("Min Memory"),dataIndex:"min_ram",render:e=>"".concat(e/1024,"GiB")},{title:t("Status"),dataIndex:"status",render:e=>M.imageStatus[e]||"-"},{title:t("Created At"),dataIndex:"created_at",isHideable:!0,valueRender:"sinceTime"}]}get volumeColumns(){return[{title:t("Name"),dataIndex:"name"},{title:t("Size"),dataIndex:"size",render:e=>"".concat(e,"GiB"),width:80},{title:t("Status"),dataIndex:"status",render:e=>I.volumeStatus[e]||"-",width:80},{title:t("Type"),dataIndex:"volume_type"},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime"}]}get showSystemDisk(){var e=this.getInstanceSnapshotDisk();return this.enableCinder&&(this.sourceTypeIsImage||this.sourceTypeIsSnapshot&&null===e)}getFlavorComponent(){return S.default.createElement(j.default,{onChange:this.onFlavorChange})}get formItems(){var{image:e}=this.locationParams,a=e?this.imageStore.isLoading:this.imageStore.list.isLoading;return[{name:"project",label:t("Project"),type:"label"},{name:"availableZone",label:t("Available Zone"),type:"select",placeholder:t("Please select"),isWrappedValue:!0,required:!0,options:this.availableZones,tip:t("Availability zone refers to a physical area where power and network are independent of each other in the same area. In the same region, the availability zone and the availability zone can communicate with each other in the intranet, and the available zones can achieve fault isolation.")},{type:"divider"},{name:"flavor",label:t("Specification"),type:"select-table",component:this.getFlavorComponent(),required:!0,wrapperCol:{xs:{span:24},sm:{span:18}}},{name:"source",label:t("Start Source"),type:"radio",options:this.sourceTypes,required:!0,isWrappedValue:!0,tip:t("The start source is a template used to create an instance. You can choose an image or a bootable volume."),onChange:e=>{this.onSourceChange(e)}},{name:"image",label:t("Operating System"),type:"select-table",data:this.images,isLoading:a,required:this.sourceTypeIsImage,isMulti:!1,display:this.sourceTypeIsImage,extra:this.getImageExtraWords(),filterParams:[{label:t("Name"),name:"name"}],columns:this.imageColumns,tabs:this.systemTabs,defaultTabValue:this.locationParams.os_distro||this.systemTabs[0].value,selectedLabel:t("Image"),onTabChange:this.onImageTabChange},{name:"instanceSnapshot",label:t("Instance Snapshot"),type:"select-table",data:this.snapshots,required:this.sourceTypeIsSnapshot,isMulti:!1,hidden:!this.sourceTypeIsSnapshot,display:this.sourceTypeIsSnapshot,onChange:this.onInstanceSnapshotChange,filterParams:[{label:t("Name"),name:"name"}],columns:this.instanceSnapshotColumns},{name:"bootableVolume",label:t("Bootable Volume"),type:"select-table",data:this.volumes,isLoading:this.volumeStore.list.isLoading,required:this.sourceTypeIsVolume,isMulti:!1,display:this.sourceTypeIsVolume&&this.enableCinder,onChange:this.onBootableVolumeChange,filterParams:[{label:t("Name"),name:"name"}],columns:this.volumeColumns},{type:"divider"},{name:"systemDisk",label:t("System Disk"),type:"instance-volume",options:this.volumeTypes,required:this.showSystemDisk,hidden:!this.showSystemDisk,validator:this.checkSystemDisk,minSize:this.getSystemDiskMinSize(),extra:t("Disk size is limited by the min disk of flavor, image, etc."),onChange:this.onSystemDiskChange},{name:"instanceSnapshotDisk",label:t("System Disk"),hidden:this.showSystemDisk,component:this.renderSnapshotDisk()},{name:"dataDisk",label:t("Data Disk"),type:"add-select",options:this.volumeTypes,defaultItemValue:this.defaultVolumeType,itemComponent:N.default,minCount:0,addTextTips:t("Data Disks"),addText:t("Add Data Disks"),extra:t("Too many disks mounted on the instance will affect the read and write performance. It is recommended not to exceed 16 disks."),onChange:this.onDataDiskChange,display:this.enableCinder}]}}a.BaseStep=O;var z=(0,x.inject)("rootStore")((0,x.observer)(O));a.default=z},3395:function(e,t,a){var r=a(3396);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(76)(r,n);r.locals&&(e.exports=r.locals)},3396:function(e,t,a){(t=e.exports=a(75)(!1)).push([e.i,".index__flavor-label--GI_En {\n  display: inline-block;\n  min-width: 50px;\n  margin-right: 16px;\n}\n.index__flavor-tab--2Mc6u {\n  margin-bottom: 16px;\n}\n",""]),t.locals={"flavor-label":"index__flavor-label--GI_En","flavor-tab":"index__flavor-tab--2Mc6u"}},3433:function(e,t,a){"use strict";var r=a(19),n=a(21);r(t,"__esModule",{value:!0}),t.default=void 0,a(1187);var i=n(a(1188));a(1169);var l=n(a(1159)),s=n(a(62)),o=n(a(0)),u=(a(167),n(a(16))),d=a(135),c=n(a(3434)),f=e=>{var{title:t,descriptions:a,loading:r}=e,n=(0,s.default)(a).call(a,(e=>("number"==typeof e.content&&(e.content=e.content.toString()),o.default.createElement(l.default.Item,{label:e.label,className:c.default.item,key:"label-".concat((0,d.generateId)())},e.content))));return o.default.createElement(i.default,{loading:r},o.default.createElement(l.default,{colon:!1,title:t},n))},p=u.default.shape({label:u.default.oneOfType([u.default.string,u.default.node]),content:u.default.any});f.propTypes={title:u.default.oneOfType([u.default.string,u.default.node]),descriptions:u.default.arrayOf(p),loading:u.default.bool};var h=f;t.default=h},3434:function(e,t,a){var r=a(3435);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(76)(r,n);r.locals&&(e.exports=r.locals)},3435:function(e,t,a){(t=e.exports=a(75)(!1)).push([e.i,".index__item--3lFuh {\n  margin-bottom: 10px;\n  background-color: #fff;\n}\n.index__item--3lFuh .ant-descriptions-item-label {\n  width: 100px;\n  color: #8a8a8a;\n}\n.index__item--3lFuh .ant-descriptions-item-content {\n  word-break: break-all;\n}\n",""]),t.locals={item:"index__item--3lFuh"}},3436:function(e,t,a){var r=a(3437);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(76)(r,n);r.locals&&(e.exports=r.locals)},3437:function(e,t,a){(t=e.exports=a(75)(!1)).push([e.i,"/* init */\n/* specific color */\n/*  border */\n/*  background */\n/*  shadow */\n/*  font */\n/*  */\n/*  animation */\n/*  size */\n/*  sider */\n.index__main--1q8mG {\n  position: relative;\n  height: 100%;\n  overflow: auto;\n}\n.index__sider--3LZqm {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 354px;\n  min-width: 354px;\n}\n@media screen and (max-width: 1280px) {\n  .index__sider--3LZqm {\n    width: 300px;\n    min-width: 300px;\n  }\n}\n.index__content--1OSKS {\n  padding-left: 374px;\n}\n@media screen and (max-width: 1280px) {\n  .index__content--1OSKS {\n    padding-left: 320px;\n  }\n}\n.index__nav--2zbId {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  height: 48px;\n  margin: 0 0 12px;\n  padding: 0 14px;\n  background-color: #124191;\n  border-radius: 4px;\n}\n.index__navItem--uT8lm {\n  min-width: 96px;\n  height: 32px;\n  margin: 0 6px;\n  padding: 0 14px;\n  color: #fff;\n  font-weight: 500;\n  line-height: 32px;\n  text-align: center;\n  border: 1px solid transparent;\n  -webkit-transition: all 0.3s;\n  transition: all 0.3s;\n}\n.index__navItem--uT8lm:first-child {\n  margin: 0 6px 0 0;\n}\n.index__navItem--uT8lm.index__active--oKb1h {\n  background-color: #1890ff;\n  border-color: #1890ff;\n  border-radius: 4px;\n  -webkit-box-shadow: none;\n          box-shadow: none;\n}\n.index__navItem--uT8lm.index__active--oKb1h:hover {\n  color: #fff;\n}\n.index__loading--3cfaa {\n  padding: 30px 0;\n  text-align: center;\n}\n.index__header--2mGuj {\n  padding-right: 16px;\n  padding-bottom: 30px;\n  padding-left: 16px;\n  background-color: #fff;\n}\n.index__header--2mGuj .ant-descriptions-title {\n  margin-bottom: 0;\n}\n.index__header-title--3X2Ku {\n  font-style: italic;\n}\n.index__title-label--3TrNR {\n  margin-right: 8px;\n  font-style: italic;\n}\n.index__header-button--2VTui {\n  float: right;\n}\n.index__header-divider--3b6-4 {\n  width: 2px;\n  margin: 0 14px 0 24px;\n  background-color: rgba(0, 0, 0, 0.45);\n}\n.index__tabs--VwWK2 {\n  margin-top: -42px;\n}\n.index__tabs--VwWK2 .ant-tabs-bar {\n  padding-right: 16px;\n  padding-left: 16px;\n}\n.index__tabs--VwWK2 .ant-tabs-nav-wrap {\n  padding-left: 30px;\n}\n.index__tab-wrapper--2DZuY {\n  width: 100%;\n}\n.index__tab-wrapper--2DZuY .list-container {\n  margin-top: 0;\n}\n.index__action-wrapper--pIcIO {\n  position: absolute;\n  right: 80px;\n}\n.index__action-wrapper--pIcIO .ant-btn-link {\n  padding: 5.6px 15px !important;\n  border-color: #0068FF;\n}\n.index__action-wrapper--pIcIO .ant-divider-vertical {\n  border-left: none;\n}\n.index__action-wrapper--pIcIO .ant-btn-dangerous {\n  color: #c4233e;\n  background: transparent;\n  border-color: #c4233e;\n}\n.index__action-wrapper--pIcIO .ant-btn-link[disabled],\n.index__action-wrapper--pIcIO .ant-btn-link[disabled]:hover,\n.index__action-wrapper--pIcIO .ant-btn-link[disabled]:focus,\n.index__action-wrapper--pIcIO .ant-btn-link[disabled]:active {\n  border-color: rgba(0, 0, 0, 0.25);\n}\n.index__action-wrapper--pIcIO .ant-btn-dangerous.ant-btn-link:active {\n  color: #c4233e;\n  background: transparent;\n  border-color: #c4233e;\n}\n.index__action-wrapper--pIcIO .ant-btn-dangerous:hover,\n.index__action-wrapper--pIcIO .ant-btn-dangerous:focus {\n  color: #f76070;\n  background: #fff;\n  border-color: #f76070;\n}\n",""]),t.locals={main:"index__main--1q8mG",sider:"index__sider--3LZqm",content:"index__content--1OSKS",nav:"index__nav--2zbId",navItem:"index__navItem--uT8lm",active:"index__active--oKb1h",loading:"index__loading--3cfaa",header:"index__header--2mGuj","header-title":"index__header-title--3X2Ku","title-label":"index__title-label--3TrNR","header-button":"index__header-button--2VTui","header-divider":"index__header-divider--3b6-4",tabs:"index__tabs--VwWK2","tab-wrapper":"index__tab-wrapper--2DZuY","action-wrapper":"index__action-wrapper--pIcIO"}},3441:function(e,t,a){var r=a(3442);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(76)(r,n);r.locals&&(e.exports=r.locals)},3442:function(e,t,a){(t=e.exports=a(75)(!1)).push([e.i,".index__input--1LaXS {\n  margin-right: 32px;\n  margin-left: 16px;\n}\n",""]),t.locals={input:"index__input--1LaXS"}},3443:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.EditAction=void 0;var l=i(r(65)),s=i(r(37)),o=r(382),u=r(1113),d=i(r(386)),c=r(515);class f extends u.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"onSubmit",(e=>{var{id:t}=this.item;return this.store.update(t,e)}))}get defaultValue(){var{name:e,description:t}=this.item;return{name:e,description:t}}get formItems(){return[{name:"name",label:t("Name"),type:"input-name",placeholder:t("Please input name"),required:!0},{name:"description",label:t("Description"),type:"textarea"}]}init(){this.store=d.default}}a.EditAction=f,(0,s.default)(f,"id","edit"),(0,s.default)(f,"title",t("Edit")),(0,s.default)(f,"policy","volume:update"),(0,s.default)(f,"allowed",(e=>l.default.resolve((0,c.isAvailableOrInUse)(e))));var p=(0,o.inject)("rootStore")((0,o.observer)(f));a.default=p},3444:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=void 0;var l=i(r(91)),s=i(r(37)),o=r(1113),u=i(r(386));class d extends o.ConfirmAction{constructor(){super(...arguments),(0,s.default)(this,"policy","volume:delete"),(0,s.default)(this,"canDelete",(e=>{var t;return(0,l.default)(t=["available","error","error_extending"]).call(t,e.status)>=0})),(0,s.default)(this,"allowedCheckFunc",(e=>this.canDelete(e))),(0,s.default)(this,"onSubmit",(e=>{var{id:t}=e;return u.default.delete({id:t})}))}get id(){return"delete"}get title(){return t("Delete Volume")}get name(){return t("Delete Volume")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete volume")}}a.default=d},3445:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.RestoreAction=void 0;var l=i(r(82)),s=i(r(65)),o=i(r(37)),u=r(382),d=r(1113),c=r(386),f=i(r(539)),p=r(515),h=r(527);class m extends d.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"onSubmit",(e=>{var{snapshot:{selectedRowKeys:t=[]}={}}=e,{id:a}=this.item;return this.store.revert(a,{snapshot_id:t[0]})}))}init(){this.store=new c.VolumeStore,this.snapshotStore=f.default}static get modalSize(){return"large"}getModalSize(){return"large"}get defaultValue(){var e,t,{name:a,id:r="-",volume_type:n="-",size:i}=this.item;return{volume:(0,l.default)(e=(0,l.default)(t="".concat(a||r,"(")).call(t,n," | ")).call(e,i,"GiB)")}}get formItems(){var{id:e}=this.item;return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},{name:"snapshot",label:t("Select Snapshot"),type:"select-table",backendPageStore:this.snapshotStore,extraParams:{volume_id:e},required:!0,isMulti:!1,isSortByBack:!0,defaultSortKey:"created_at",defaultSortOrder:"descend",filterParams:[{label:t("Name"),name:"name"}],columns:[{title:t("Name"),dataIndex:"name"},{title:t("Size"),dataIndex:"size",render:e=>"".concat(e,"GiB"),sorter:!1},{title:t("Status"),dataIndex:"status",render:e=>p.volumeStatus[e]||"-"},{title:t("Created At"),dataIndex:"created_at",render:e=>(0,h.getSinceTime)(e)}]}]}get name(){return t("Restore from snapshot")}}a.RestoreAction=m,(0,o.default)(m,"id","Restore from snapshot"),(0,o.default)(m,"title",t("Restore from snapshot")),(0,o.default)(m,"policy","volume:create"),(0,o.default)(m,"allowed",(e=>s.default.resolve("available"===e.status)));var g=(0,u.inject)("rootStore")((0,u.observer)(m));a.default=g},3446:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Attach=void 0;var p=f(r(101)),h=f(r(65)),m=f(r(62)),g=f(r(82)),v=f(r(37)),y=r(382),b=r(1113),_=r(383),S=f(r(386)),x=r(1120),w=r(515);function I(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=I(Object(r),!0)).call(a,(function(t){(0,v.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=I(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}class k extends b.ModalAction{constructor(){super(...arguments),(0,v.default)(this,"disabledInstance",(e=>!(0,x.allowAttachVolumeInstance)(e))),(0,v.default)(this,"alreadyAttached",(e=>{var{attachments:t=[]}=this.item;return!!(0,p.default)(t).call(t,(t=>t.server_id===e.id))})),(0,v.default)(this,"onSubmit",(e=>{var{instance:t}=e,{id:a}=this.item,{selectedRowKeys:r}=t;return h.default.all((0,m.default)(r).call(r,(e=>this.vmStore.attachVolume({id:e,body:{volumeAttachment:{volumeId:a}}}))))}))}init(){this.store=S.default,this.vmStore=new _.ServerStore}get name(){return t("Attach")}get isAsyncAction(){return!0}static get modalSize(){return"large"}getModalSize(){return"large"}get defaultValue(){var e,t,{name:a,id:r,size:n,volume_type:i}=this.item;return{volume:(0,g.default)(e=(0,g.default)(t="".concat(a||r,"(")).call(t,i," | ")).call(e,n,"GiB)")}}get formItems(){return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},C({name:"instance",label:t("Instance"),type:"select-table",required:!0,backendPageStore:this.vmStore,disabledFunc:this.disabledInstance,extraParams:{noReminder:!0},isMulti:!1},x.instanceSelectTablePropsBackend)]}}a.Attach=k,(0,v.default)(k,"id","attach"),(0,v.default)(k,"title",t("Attach")),(0,v.default)(k,"policy","os_compute_api:os-volumes-attachments:create"),(0,v.default)(k,"allowed",(e=>h.default.resolve((0,w.isAvailable)(e)||(0,w.isMultiAttach)(e))));var D=(0,y.inject)("rootStore")((0,y.observer)(k));a.default=D},3447:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.Detach=void 0;var l=i(r(65)),s=i(r(62)),o=i(r(82)),u=i(r(1315)),d=i(r(37)),c=r(382),f=r(1113),p=i(r(383)),h=r(1311),m=r(515),g=r(1120);class v extends f.ModalAction{constructor(){super(...arguments),(0,d.default)(this,"disabledInstance",(e=>!(0,g.allowAttachVolumeInstance)(e))),(0,d.default)(this,"onSubmit",(e=>{var{instance:t}=e,{id:a}=this.item,{selectedRowKeys:r}=t;return l.default.all((0,s.default)(r).call(r,(e=>this.store.detachVolume({id:e,volumes:[a]}))))}))}get name(){return t("Detach")}init(){this.store=p.default,this.instanceStore=new h.ServerGroupInstanceStore,this.getInstances()}static get modalSize(){return"large"}getModalSize(){return"large"}get instances(){return this.instanceStore.list.data||[]}getInstances(){var e,t=(0,s.default)(e=this.item.attachments||[]).call(e,(e=>e.server_id));this.instanceStore.fetchList({members:t})}get defaultValue(){var e,t,{name:a,size:r,volume_type:n}=this.item;return{volume:(0,o.default)(e=(0,o.default)(t="".concat(a,"(")).call(t,n," | ")).call(e,r,"GiB)")}}get formItems(){return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},{name:"instance",label:t("Instance"),type:"select-table",required:!0,data:this.instances,isMulti:!0,filterParams:[{label:t("Name"),name:"name"}],columns:g.instanceColumnsBackend,isLoading:this.instanceStore.list.isLoading,disabledFunc:this.disabledInstance}]}}a.Detach=v,(0,d.default)(v,"id","detach"),(0,d.default)(v,"title",t("Detach")),(0,d.default)(v,"isDanger",!0),(0,d.default)(v,"policy","os_compute_api:os-volumes-attachments:delete"),(0,d.default)(v,"allowed",(e=>l.default.resolve((0,m.isInUse)(e)&&!(0,m.isOsDisk)(e)&&(0,u.default)(e.attachments)&&e.attachments.length)));var y=(0,c.inject)("rootStore")((0,c.observer)(v));a.default=y},3448:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.CreateSnapshot=void 0;var p=f(r(82)),h=f(r(65)),m=f(r(52)),g=f(r(37)),v=r(382),y=r(1113),b=f(r(539)),_=r(515),S=f(r(384));function x(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=x(Object(r),!0)).call(a,(function(t){(0,g.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=x(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}var I=e=>{var{snapshots:t={}}=e,{currentVolumeType:a}=b.default;return{snapshotQuota:t,typeQuota:e["snapshots_".concat(a)]||{}}},C=e=>{var{snapshotQuota:t,typeQuota:a}=I(e),{left:r=0}=t||{},{left:n=0}=a||{};return 0!==r&&0!==n?1:0};class k extends y.ModalAction{constructor(){super(...arguments),(0,g.default)(this,"onSubmit",(e=>{var{id:t,status:a}=this.item,{name:r}=e,n={name:r,volume_id:t,force:"in-use"===a};return this.store.create(n)}))}init(){b.default.setCurrentVolumeType(this.item),this.state.quota={},this.state.quotaLoading=!0,this.store=b.default,this.projectStore=S.default,this.getQuota()}get name(){return t("create snapshot")}get defaultValue(){var e,t,{name:a,id:r,volume_type:n,size:i}=this.item;return{volume:(0,p.default)(e=(0,p.default)(t="".concat(a||r,"(")).call(t,n," | ")).call(e,i,"GiB)")}}static get disableSubmit(){var{cinderQuota:e={}}=S.default;return 0===C(e)}static get showQuota(){return!0}get showQuota(){return!0}getQuota(){var e=this;return(0,m.default)((function*(){e.setState({quotaLoading:!0});var t=yield e.projectStore.fetchProjectCinderQuota();e.setState({quota:t,quotaLoading:!1})}))()}get quotaInfo(){var{quota:e={},quotaLoading:a}=this.state;if(a)return[];var{snapshotQuota:r={},typeQuota:n={}}=I(e),i=C(e),l=w(w({},r),{},{add:i,name:"snapshot",title:t("Snapshots")}),{volume_type:s}=this.item;return[l,w(w({},n),{},{add:i,name:"type",title:t("{name} type snapshots",{name:s}),type:"line"})]}get formItems(){return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},{name:"name",label:t("Snapshot Name"),type:"input-name",placeholder:t("Please input snapshot name"),required:!0}]}}a.CreateSnapshot=k,(0,g.default)(k,"id","create-snapshot"),(0,g.default)(k,"title",t("Create Snapshot")),(0,g.default)(k,"policy","volume:create_snapshot"),(0,g.default)(k,"allowed",(e=>h.default.resolve((0,_.isAvailableOrInUse)(e))));var D=(0,v.inject)("rootStore")((0,v.observer)(k));a.default=D},3449:function(e,a,r){"use strict";var n=r(156),i=r(19),l=r(25),s=r(21);i(a,"__esModule",{value:!0}),a.default=a.ExtendVolume=void 0;var o=s(r(65)),u=s(r(62)),d=s(r(33)),c=s(r(82)),f=s(r(71)),p=s(r(52)),h=s(r(37)),m=r(382),g=r(1113),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=x(t);if(a&&a.has(e))return a.get(e);var r={},n=i&&l;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=n?l(e,s):null;o&&(o.get||o.set)?i(r,s,o):r[s]=e[s]}r.default=e,a&&a.set(e,r);return r}(r(386)),y=s(r(384)),b=s(r(383)),_=r(515),S=r(47);function x(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(x=function(e){return e?a:t})(e)}class w extends g.ModalAction{constructor(){var e;super(...arguments),e=this,(0,h.default)(this,"onSizeChange",(e=>{var t=e-this.itemSize;(0,_.setCreateVolumeSize)(t)})),(0,h.default)(this,"checkInstance",(()=>{var{lockedError:e}=this.state;return e?o.default.reject(e):o.default.resolve()})),(0,h.default)(this,"onSubmit",function(){var t=(0,p.default)((function*(t){var{new_size:a}=t,{id:r}=e.item;return e.store.extendSize(r,{new_size:a})}));return function(e){return t.apply(this,arguments)}}())}get name(){return t("Extend volume")}init(){this.store=v.default,this.state.showNotice=!0,this.volumeStore=new v.VolumeStore,this.projectStore=y.default,(0,_.fetchQuota)(this,1,this.item.volume_type),this.checkAttachedServer()}get tips(){return t("After the volume is expanded, the volume cannot be reduced.")}static get disableSubmit(){return(0,_.checkQuotaDisable)(!1)}static get showQuota(){return!0}get showQuota(){return!0}get quotaInfo(){var{quota:e={},quotaLoading:t}=this.state;if(t||(0,S.isEmpty)(e))return[];var[a,r,n,i]=(0,_.getQuotaInfo)(this,!1),{type:l}=r;return[(0,f.default)(r,["type"]),i]}checkAttachedServer(){var e=this;return(0,p.default)((function*(){var a,r,n,i,l=(0,u.default)(a=e.item.attachments||[]).call(a,(e=>e.server_id));if(l.length){var s=(0,u.default)(l).call(l,(e=>b.default.pureFetchDetail({id:e}))),c=yield o.default.allSettled(s),f=(0,u.default)(r=(0,d.default)(n=(0,u.default)(i=(0,d.default)(c).call(c,(e=>{var{status:t}=e;return"fulfilled"===t}))).call(i,(e=>e.value))).call(n,(e=>e.locked))).call(r,(e=>{var{name:t}=e;return t}));if(f.length){var p=f.join(", "),h=t("The server {name} is locked. Please unlock first.",{name:p});e.setState({lockedError:h})}}}))()}get isQuotaLimited(){var{gigabytes:{limit:e}={}}=this.projectStore.cinderQuota||{};return-1!==e}get leftSize(){var{gigabytes:{left:e=0}={}}=this.projectStore.cinderQuota||{};return e}get itemSize(){var{size:e}=this.item;return e}get minSize(){return this.itemSize+1}get maxSize(){var{size:e}=this.item;return e+this.leftSize}get defaultValue(){var e,t,{name:a,id:r,volume_type:n,size:i}=this.item;return{volume:(0,c.default)(e=(0,c.default)(t="".concat(a||r,"(")).call(t,n," | ")).call(e,i,"GiB)"),new_size:this.minSize}}get formItems(){var e;return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},{name:"new_size",label:t("Capacity (GiB)"),type:"slider-input",max:this.maxSize,min:this.minSize,description:(0,c.default)(e="".concat(this.minSize,"GiB-")).call(e,this.maxSize,"GiB"),required:!0,display:this.isQuotaLimited,onChange:this.onSizeChange,validator:this.checkInstance},{name:"new_size",label:t("Capacity (GiB)"),type:"input-int",min:this.minSize,required:!0,display:!this.isQuotaLimited,onChange:this.onSizeChange,validator:this.checkInstance}]}}a.ExtendVolume=w,(0,h.default)(w,"id","extend-snapshot"),(0,h.default)(w,"title",t("Extend Volume")),(0,h.default)(w,"policy","volume:extend"),(0,h.default)(w,"allowed",(e=>o.default.resolve((0,_.isAvailableOrInUse)(e))));var I=(0,m.inject)("rootStore")((0,m.observer)(w));a.default=I},3450:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.ChangeType=void 0;var l=i(r(62)),s=i(r(33)),o=i(r(82)),u=i(r(65)),d=i(r(37)),c=r(382),f=r(1113),p=i(r(386)),h=i(r(524)),m=r(515);class g extends f.ModalAction{constructor(){super(...arguments),(0,d.default)(this,"onSubmit",(e=>{var{id:t}=this.item,{new_type:a}=e,r={new_type:a,migration_policy:"on-demand"};return this.store.retype(t,r)}))}get name(){return t("Change type")}get tips(){return t("If the capacity of the disk is large,the type modify operation may takes several hours. Please be cautious.")}init(){this.store=p.default,this.volumeTypeStore=h.default,this.getVolumeTypes()}getVolumeTypes(){this.volumeTypeStore.fetchList()}get isAsyncAction(){return!0}get volumeTypes(){var e,{volume_type:t}=this.item,{data:a=[]}=this.volumeTypeStore.list;return(0,l.default)(e=(0,s.default)(a).call(a,(e=>e.name!==t))).call(e,(e=>({label:e.name,value:e.id})))}get defaultValue(){var e,t,{name:a,id:r,volume_type:n,size:i}=this.item;return{volume:(0,o.default)(e=(0,o.default)(t="".concat(a||r,"(")).call(t,n," | ")).call(e,i,"GiB)"),volume_type:(this.volumeTypes[0]||{}).value}}get formItems(){return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},{name:"new_type",label:t("Volume Type"),type:"select",required:!0,options:this.volumeTypes}]}}a.ChangeType=g,(0,d.default)(g,"id","change-type"),(0,d.default)(g,"title",t("Change Type")),(0,d.default)(g,"policy","volume:retype"),(0,d.default)(g,"allowed",(e=>u.default.resolve((0,m.isAvailableOrInUse)(e)&&!(0,m.isOsDisk)(e))));var v=(0,c.inject)("rootStore")((0,c.observer)(g));a.default=v},3451:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.CloneVolume=void 0;var p=f(r(101)),h=f(r(82)),m=f(r(65)),g=f(r(52)),v=f(r(71)),y=f(r(37)),b=r(382),_=r(1113),S=f(r(386)),x=r(515);function w(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=w(Object(r),!0)).call(a,(function(t){(0,y.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=w(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}class C extends _.ModalAction{constructor(){super(...arguments),(0,y.default)(this,"onSubmit",(e=>{var{volume:t,more:a}=e,r=I(I({},(0,v.default)(e,["volume","more"])),{},{source_volid:this.item.id});return this.store.create(r)}))}get name(){return t("Clone volume")}get tips(){return t("It is recommended that you perform this cloning operation on a disk without any reading/writing")}init(){this.store=S.default,this.getVolumeTypes(),(0,x.fetchQuota)(this,this.item.size)}getVolumeTypes(){var e=this;return(0,g.default)((function*(){var t;yield e.store.fetchVolumeTypes();var a=(0,p.default)(t=e.volumeTypes).call(t,(t=>t.label===e.item.volume_type));e.defaultType=a,a&&(0,x.setCreateVolumeType)(e.item.volume_type),e.updateDefaultValue()}))()}get volumeTypes(){return this.store.volumeTypes}static get disableSubmit(){return(0,x.checkQuotaDisable)()}static get showQuota(){return!0}get showQuota(){return!0}get quotaInfo(){return(0,x.getQuotaInfo)(this)}get defaultValue(){var e,t,{name:a,id:r,volume_type:n,size:i}=this.item;return{volume:(0,h.default)(e=(0,h.default)(t="".concat(a||r,"(")).call(t,n," | ")).call(e,i,"GiB)"),volume_type:(this.defaultType||{}).value,size:i}}get maxSize(){var{quota:{gigabytes:{left:e=0}={}}={}}=this.state;return-1===e?1/0:e}get formItems(){var{size:e}=this.item,{more:a}=this.state;return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},{name:"name",label:t("Volume Name"),type:"input-name",required:!0},{name:"size",label:t("Capacity (GiB)"),type:"input-int",min:e,max:this.maxSize,required:!0,onChange:x.onVolumeSizeChange},{name:"more",type:"more",label:t("Advanced Options")},{name:"volume_type",label:t("Volume Type"),type:"select",options:this.volumeTypes,onChange:x.onVolumeTypeChange,allowClear:!1,hidden:!a}]}}a.CloneVolume=C,(0,y.default)(C,"id","clone-volume"),(0,y.default)(C,"title",t("Clone Volume")),(0,y.default)(C,"policy","volume:create"),(0,y.default)(C,"allowed",(e=>m.default.resolve((0,x.isAvailableOrInUse)(e))));var k=(0,b.inject)("rootStore")((0,b.observer)(C));a.default=k},3452:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.UpdateStatus=void 0;var l=i(r(82)),s=i(r(65)),o=i(r(37)),u=r(382),d=r(1113),c=i(r(386));class f extends d.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"handleStatusChange",(e=>{this.setState({status:e})})),(0,o.default)(this,"onSubmit",(e=>{var{id:t}=this.item;return delete e.volume,this.store.resetStatus(t,e)}))}get name(){return t("update status")}get defaultValue(){var e,t,{name:a,id:r,volume_type:n,size:i}=this.item;return{volume:(0,l.default)(e=(0,l.default)(t="".concat(a||r,"(")).call(t,n," | ")).call(e,i,"GiB)"),status:"available"}}get tips(){return t('Do not reset the normally mounted volume to the "available""maintenance" or "error" status. The reset state does not remove the volume from the instance. If you need to remove the volume from the instance, please go to the console of the corresponding project and use the "detach" operation.')}get formItems(){var{status:e}=this.state,a=[{value:"available",label:t("Available")},{value:"maintenance",label:t("Maintained")},{value:"error",label:t("Error")},{value:"in-use",label:t("In Use")}];return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},{name:"status",label:t("Status"),type:"select",options:a,onChange:this.handleStatusChange,extra:"in-use"===e?t("The volume status can be reset to in-use only when the previous status is in-use."):""}]}init(){this.store=c.default}}a.UpdateStatus=f,(0,o.default)(f,"id","update-status"),(0,o.default)(f,"title",t("Update Status")),(0,o.default)(f,"policy","volume_extension:volume_admin_actions:reset_status"),(0,o.default)(f,"allowed",(()=>s.default.resolve(!0)));var p=(0,u.inject)("rootStore")((0,u.observer)(f));a.default=p},3453:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.Migrate=void 0;var l=i(r(82)),s=i(r(65)),o=i(r(37)),u=r(382),d=r(1113),c=i(r(386)),f=r(515),p=i(r(1456)),h=r(1457);class m extends d.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"disableFunc",(e=>{var{host:t}=this.item;return e.name===t})),(0,o.default)(this,"onSubmit",(e=>{var{pool:t}=e,{item:{id:a}}=this,{selectedRowKeys:r=[]}=t||{};return c.default.migrate(a,{host:r[0]})}))}static get modalSize(){return"large"}getModalSize(){return"large"}get name(){return t("Migrate volume")}init(){this.poolStore=p.default,this.getPools()}get defaultValue(){var e,t,{name:a,id:r,volume_type:n,size:i,host:s}=this.item;return{volume:(0,l.default)(e=(0,l.default)(t="".concat(a||r,"(")).call(t,n," | ")).call(e,i,"GiB)"),host:s}}getPools(){this.poolStore.fetchList()}get pools(){return this.poolStore.list.data||[]}get formItems(){return[{name:"volume",label:t("Volume"),type:"label",iconType:"volume"},{name:"host",label:t("Current Storage Backend"),type:"label",iconType:"instance"},{name:"pool",label:t("Target Storage Backend"),type:"select-table",required:!0,data:this.pools,isLoading:this.poolStore.list.isLoading,disabledFunc:this.disableFunc,rowKey:"name",columns:h.poolColumns}]}}a.Migrate=m,(0,o.default)(m,"id","migrate-volume"),(0,o.default)(m,"title",t("Migrate Volume")),(0,o.default)(m,"policy","volume_extension:volume_admin_actions:migrate_volume"),(0,o.default)(m,"allowed",(e=>s.default.resolve((0,f.isAvailableOrInUse)(e))));var g=(0,u.inject)("rootStore")((0,u.observer)(m));a.default=g},3454:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.CreateImage=void 0;var l=i(r(62)),s=i(r(35)),o=i(r(65)),u=i(r(37)),d=r(382),c=r(1113),f=r(520),p=i(r(386)),h=r(515);class m extends c.ModalAction{constructor(){super(...arguments),(0,u.default)(this,"onSubmit",(e=>{var{id:t}=this.item;return this.store.uploadImage(t,e)}))}get name(){return t("Create Image")}get defaultValue(){return{disk_format:"raw"}}get osList(){var e;return(0,l.default)(e=(0,s.default)(f.imageOS)).call(e,(e=>({value:e,label:f.imageOS[e]})))}get formatList(){var e;return(0,l.default)(e=(0,s.default)(f.volumeCreateImageTypes)).call(e,(e=>({label:f.volumeCreateImageTypes[e],value:e})))}get formItems(){return[{name:"image_name",label:t("Image Name"),type:"input-name",placeholder:t("Please input name"),isImage:!0,required:!0},{name:"disk_format",label:t("Format"),type:"select",options:this.formatList,required:!0}]}init(){this.store=p.default}}a.CreateImage=m,(0,u.default)(m,"id","create-image"),(0,u.default)(m,"title",t("Create Image")),(0,u.default)(m,"policy","volume_extension:volume_actions:upload_image"),(0,u.default)(m,"allowed",(e=>o.default.resolve((0,h.isAvailable)(e))));var g=(0,d.inject)("rootStore")((0,d.observer)(m));a.default=g},3455:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.AcceptVolumeTransfer=void 0;var l=i(r(65)),s=i(r(37)),o=r(382),u=r(1113),d=i(r(386));class c extends u.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"onSubmit",(e=>{var{transfer_id:t,auth_key:a}=e;return d.default.acceptVolumeTransfer(t,{auth_key:a})}))}get name(){return t("Accept Volume Transfer")}get defaultValue(){return{}}get messageHasItemName(){return!1}get formItems(){return[{name:"transfer_id",label:t("Transfer ID"),type:"input",placeholder:t("Please input transfer id"),required:!0},{name:"auth_key",label:t("Auth Key"),type:"input",placeholder:t("Please input auth key"),required:!0}]}}a.AcceptVolumeTransfer=c,(0,s.default)(c,"id","accept-volume-transfer"),(0,s.default)(c,"title",t("Accept Volume Transfer")),(0,s.default)(c,"policy",(()=>"volume:accept_transfer")),(0,s.default)(c,"allowed",(()=>l.default.resolve(!0)));var f=(0,o.inject)("rootStore")((0,o.observer)(c));a.default=f},3456:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.CreateTransfer=void 0;var l=i(r(82)),s=i(r(65)),o=i(r(37)),u=r(382),d=r(1113),c=i(r(386)),f=r(515);class p extends d.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"downloadTxt",((e,t)=>{var a=document.createElement("a");a.href="data:text/plain;charset=utf-8,".concat(t),a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a)})),(0,o.default)(this,"onSubmit",(e=>{var{name:t}=e,{id:a}=this.item;return this.store.createTransfer({name:t,volume_id:a}).then((e=>{if(e&&e.transfer){var t,a,{id:r,name:n,auth_key:i}=e.transfer;this.downloadTxt("Volume Transfer ".concat(r,".txt"),(0,l.default)(t=(0,l.default)(a="Transfer Name: ".concat(n,"\nTransfer ID: ")).call(a,r,"\nAuth Key: ")).call(t,i))}}))}))}get name(){return t("Create Transfer")}get defaultValue(){return{name:""}}get tips(){return t("Ownership of a volume can be transferred from one project to another. The transfer process of the volume needs to perform the transfer operation in the original owner's project, and complete the \"accept\" operation in the receiver's project.")}get formItems(){return[{name:"name",label:t("Transfer Name"),type:"input-name",required:!0,placeholder:t("Please input name")}]}init(){this.store=c.default}}a.CreateTransfer=p,(0,o.default)(p,"id","create-transfer"),(0,o.default)(p,"title",t("Create Transfer")),(0,o.default)(p,"policy","volume:create_transfer"),(0,o.default)(p,"allowed",(e=>s.default.resolve((0,f.isAvailable)(e)&&!e.encrypted)));var h=(0,u.inject)("rootStore")((0,u.observer)(p));a.default=h},3457:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=void 0;var l=i(r(65)),s=i(r(37)),o=r(1113),u=i(r(386));class d extends o.ConfirmAction{constructor(){super(...arguments),(0,s.default)(this,"policy","volume:delete_transfer"),(0,s.default)(this,"allowedCheckFunc",(e=>l.default.resolve("awaiting-transfer"===e.status))),(0,s.default)(this,"confirmContext",(e=>{var{name:a}=e;return t("Are you sure to cancel transfer volume { name }? ",{name:a})})),(0,s.default)(this,"onSubmit",(e=>{var{id:t}=e;return u.default.cancelTransfer({id:t})}))}get id(){return"cancel-transfer"}get title(){return t("Cancel Transfer")}get name(){return t("Cancel Transfer")}get buttonText(){return t("Cancel Transfer")}get actionName(){return t("Cancel Transfer")}}a.default=d},3458:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.StepCreate=void 0;var l=i(r(65)),s=i(r(37)),o=r(382),u=i(r(1170)),d=r(515);class c extends u.default{static path(e){return"/compute/instance/create?volume=".concat(e.id)}static allowed(e){return l.default.resolve((0,d.canCreateInstance)(e))}}a.StepCreate=c,(0,s.default)(c,"id","instance-create"),(0,s.default)(c,"title",t("Create Instance")),(0,s.default)(c,"policy","os_compute_api:servers:create:attach_volume");var f=(0,o.inject)("rootStore")((0,o.observer)(c));a.default=f},3459:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.Bootable=void 0;var l=i(r(65)),s=i(r(516)),o=i(r(37)),u=r(382),d=r(1113),c=i(r(386));class f extends d.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"onSubmit",(e=>{var{bootable:t}=e,{id:a}=this.item;return c.default.changeBootable(a,{bootable:t})}))}static allowed(){return l.default.resolve(!0)}get name(){var{bootable:e}=(0,s.default)(this);return e?t("Bootable"):t("Unbootable")}get defaultValue(){var{item:e}=this.props;return{bootable:"true"===e.bootable}}get formItems(){return[{name:"bootable",label:t("Bootable"),checkedText:t("Bootable"),uncheckedText:t("Unbootable"),type:"switch",required:!0}]}}a.Bootable=f,(0,o.default)(f,"id","volume-bootable"),(0,o.default)(f,"title",t("Bootable")),(0,o.default)(f,"buttonText",t("Bootable")),(0,o.default)(f,"policy","volume:update");var p=(0,u.inject)("rootStore")((0,u.observer)(f));a.default=p},3460:function(e,t,a){var r=a(3461);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(76)(r,n);r.locals&&(e.exports=r.locals)},3461:function(e,t,a){(t=e.exports=a(75)(!1)).push([e.i,".styles__popover-row--1Esbj {\n  max-width: 320px;\n  margin: 0 !important;\n  text-align: center;\n}\n",""]),t.locals={"popover-row":"styles__popover-row--1Esbj"}},3462:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Allocate=void 0;var p=f(r(62)),h=f(r(65)),m=f(r(71)),g=f(r(52)),v=f(r(37)),y=f(r(0)),b=r(382),_=r(1113),S=r(323),x=r(321),w=f(r(384)),I=f(r(390)),C=r(391),k=r(1221),D=r(83);function T(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=T(Object(r),!0)).call(a,(function(t){(0,v.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=T(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}class P extends _.ModalAction{constructor(){var e;super(...arguments),e=this,(0,v.default)(this,"handleNetworkChange",function(){var t=(0,g.default)((function*(t){var a=yield I.default.fetchList({network_id:t});e.setState({subnets:(0,p.default)(a).call(a,(e=>({allocation_pools:e.allocation_pools,ip_version:e.ip_version,value:e.id,label:e.name}))),selectedNetwork:t}),e.formRef.current.setFieldsValue({subnet_id:null})}));return function(e){return t.apply(this,arguments)}}()),(0,v.default)(this,"handleSubnetChange",(e=>{this.setState({selectedSubnet:e})})),(0,v.default)(this,"onSubmit",(e=>{var{subnet_id:t,batch_allocate:a,count:r,qos_policy_id:n}=e,i=(0,m.default)(e,["subnet_id","batch_allocate","count","qos_policy_id"]);if(t&&(i.subnet_id=t.value),n&&n.selectedRowKeys.length>0&&(i.qos_policy_id=n.selectedRowKeys[0]),a){i.floating_ip_address=null;for(var l=[],s=0;s<r;s++)l.push(this.store.create(i));return h.default.all(l)}return this.store.create(i)})),(0,v.default)(this,"onCountChange",(e=>{this.setState({count:e})})),(0,v.default)(this,"onProjectChange",(e=>{this.setState({projectId:e},(()=>{this.getQuota()}))}))}get name(){return t("Allocate IP")}static get modalSize(){return(0,D.qosEndpoint)()?"large":"small"}getModalSize(){return(0,D.qosEndpoint)()?"large":"small"}get qosEndpoint(){return(0,D.qosEndpoint)()}init(){this.store=new S.FloatingIpStore,this.networkStore=new x.NetworkStore,this.qosPolicyStore=new C.QoSPolicyStore,this.projectStore=w.default,this.state=A(A({},this.state||{}),{},{selectedNetwork:null,selectedSubnet:null,networks:[],subnets:[],qosPolicy:null,count:2,quota:{},quotaLoading:!0,projectId:this.currentProjectId,maxCount:2}),this.getExternalNetworks(),this.isAdminPage&&w.default.fetchList(),this.getQuota()}getExternalNetworks(){var e=this;return(0,g.default)((function*(){var t=yield e.networkStore.pureFetchList({"router:external":!0});e.setState({networks:t})}))()}get messageHasItemName(){return!1}static get disableSubmit(){var{neutronQuota:{floatingip:{left:e=0}={}}}=w.default;return 0===e}static get showQuota(){return!0}get showQuota(){return!0}getQuota(){var e=this;return(0,g.default)((function*(){var{projectId:t,count:a}=e.state;e.setState({quotaLoading:!0});var r=yield e.projectStore.fetchProjectNeutronQuota(t),{floatingip:n={}}=r||{},{left:i=0}=n;e.setState({quota:n,quotaLoading:!1,maxCount:i});var l=a;i<a?l=i:i>0&&0===a&&(l=1),l!==a&&(e.updateFormValue("count",l),e.setState({count:l}))}))()}get quotaInfo(){var{quota:e={},quotaLoading:a,batchAllocate:r=!1,count:n}=this.state;if(a)return[];var{left:i=0}=e,l=0;return 0!==i&&(l=r?n:1),[A(A({},e),{},{add:l,name:"floatingip",title:t("Floating IP")})]}get defaultValue(){return{project_id:this.currentProjectId,count:2}}get formItems(){var e,a,{networks:r,selectedNetwork:n,subnets:i,selectedSubnet:l,batchAllocate:s=!1,maxCount:o}=this.state,u=(0,p.default)(r).call(r,(e=>({label:e.name,value:e.id}))),d=(0,p.default)(e=w.default.list.data).call(e,(e=>({label:e.name,value:e.id})));return[{name:"floating_network_id",label:t("Network"),type:"select",options:u,onChange:this.handleNetworkChange,required:!0},{name:"project_id",label:t("Project"),type:"select",showSearch:!0,hidden:!this.isAdminPage,required:this.isAdminPage,options:d,onChange:this.onProjectChange},{name:"subnet_id",label:t("Owned Subnet"),type:"select",options:i,isWrappedValue:!0,onChange:e=>this.handleSubnetChange(e),extra:l&&y.default.createElement(y.default.Fragment,null,y.default.createElement("span",null,t("Allocation Pools")),(0,p.default)(a=l.allocation_pools).call(a,((e,t)=>y.default.createElement("div",{key:"pool.start.".concat(t)},e.start,"--",e.end)))),hidden:!n,required:!1},{name:"batch_allocate",label:t("Batch Allocate"),type:"check",onChange:e=>{this.setState({batchAllocate:e})}},{name:"count",label:t("Count"),type:"input-int",min:1,max:o,hidden:!s,required:!0,onChange:this.onCountChange},{name:"floating_ip_address",label:t("Floating IP Address"),hidden:!l||s,type:"ip-input",version:l&&(l.ip_version||4)},{name:"description",label:t("Description"),type:"textarea"},{name:"qos_policy_id",label:t("QoS Policy"),type:"tab-select-table",tabs:k.getQoSPolicyTabs.call(this),isMulti:!1,tip:t("Choosing a QoS policy can limit bandwidth and DSCP"),onChange:this.onQosChange,display:!!this.qosEndpoint}]}}a.Allocate=P,(0,v.default)(P,"id","allocate"),(0,v.default)(P,"title",t("Allocate IP")),(0,v.default)(P,"policy","create_floatingip"),(0,v.default)(P,"allowed",(()=>h.default.resolve(!0)));var M=(0,b.inject)("rootStore")((0,b.observer)(P));a.default=M},3463:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(156),p=r(21);c(a,"__esModule",{value:!0}),a.default=a.Associate=void 0;var h=p(r(65)),m=p(r(516)),g=p(r(62)),v=p(r(1177)),y=p(r(52)),b=p(r(37)),_=p(r(0)),S=r(382),x=(r(513),r(1113)),w=R(r(383)),I=R(r(526)),C=p(r(542)),k=r(47),D=r(1137),T=p(r(323)),A=r(529),P=r(1120),M=r(1129),E=r(1151);function N(e){if("function"!=typeof f)return null;var t=new f,a=new f;return(N=function(e){return e?a:t})(e)}function R(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=N(t);if(a&&a.has(e))return a.get(e);var r={},n=c&&s;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=n?s(e,i):null;l&&(l.get||l.set)?c(r,i,l):r[i]=e[i]}return r.default=e,a&&a.set(e,r),r}function j(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=j(Object(r),!0)).call(a,(function(t){(0,b.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=j(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}class L extends x.ModalAction{constructor(){var e;super(...arguments),e=this,(0,b.default)(this,"routersDisableFunc",(e=>{var{floating_network_id:t}=this.item;return!(e.hasExternalGateway&&e.external_gateway_info&&e.external_gateway_info.network_id===t&&0===e.external_gateway_info.external_fixed_ips.length)})),(0,b.default)(this,"portsDisableFunc",(e=>0===e.fixed_ips.length)),(0,b.default)(this,"onValuesChange",(e=>{if((0,k.has)(e,"resourceType")){var{resourceType:t}=e;this.setState({resourceType:t})}})),(0,b.default)(this,"handleInstanceSelect",function(){var t=(0,y.default)((function*(t){if(e.setState({instanceLoading:!0}),0===t.selectedRows.length)return e.setState({instanceFixedIPs:l,instanceLoading:!1}),h.default.resolve().then((()=>{e.formRef.current.setFieldsValue({port:null})}));var{id:a}=t.selectedRows[0],r=yield w.default.fetchInterfaceList({id:a}),n=yield(0,E.getInterfaceWithReason)(r),{canReachSubnetIdsWithRouterId:i}=e.state,l=(0,M.getPortsAndReasons)(n,i,!0);return e.setState({instanceFixedIPs:l,instanceLoading:!1}),h.default.resolve().then((()=>{e.formRef.current.setFieldsValue({port:null})}))}));return function(e){return t.apply(this,arguments)}}()),(0,b.default)(this,"handlePortSelect",function(){var t=(0,y.default)((function*(t){e.setState({fixedIpLoading:!0});var{canReachSubnetIdsWithRouterId:a}=e.state,r=yield(0,E.getInterfaceWithReason)(t.selectedRows),n=(0,M.getPortsAndReasons)(r,a,!0);return e.setState({portFixedIPs:n,fixedIpLoading:!1}),h.default.resolve().then((()=>{e.formRef.current.setFieldsValue({fixed_ip_address:null})}))}));return function(e){return t.apply(this,arguments)}}()),(0,b.default)(this,"onSubmit",(e=>{var{resourceType:t}=e,{id:a}=this.item,r={};if(r.id=a,"instance"===t){var{port:{selectedRows:n=[]}={}}=e;r.port_id=n[0].port_id,r.fixed_ip_address=n[0].fixed_ip_address}else if("port"===t){var{virtual_adapter:{selectedRows:i=[]}={},fixed_ip_address:{selectedRows:l=[]}={}}=e;r.port_id=i[0].id,r.fixed_ip_address=l[0].fixed_ip_address}else if("router"===t){var{router:s}=e,o=s.selectedRows[0];return I.default.associateFip({id:o.id,fip:this.item,router:o})}return T.default.associateFip(r)}))}get name(){return t("Associate Floating IP")}init(){this.store=new w.ServerStore,this.routersStore=new I.RouterStore,this.portStore=new A.PortStore,D.getCanReachSubnetIdsWithRouterIdInComponent.call(this,(e=>{var{item:t}=this;return e.external_gateway_info&&e.external_gateway_info.network_id===t.floating_network_id})),this.state={instanceFixedIPs:[],portFixedIPs:[],canReachSubnetIdsWithRouterId:[],routerIdWithExternalNetworkInfo:[]}}get instanceName(){return this.item.floating_ip_address||(0,m.default)(this).name}static get modalSize(){return"large"}getModalSize(){return"large"}get instances(){return this.store.list.data||[]}get resourceTypeMap(){return[{value:"instance",label:t("Instance")},{value:"port",label:t("Virtual Adapter")}]}get defaultValue(){var{floating_ip_address:e}=this.item;return{floatingIp:e,resourceType:"instance"}}get formItems(){var{resourceType:e="instance",instanceFixedIPs:a,instanceLoading:r}=this.state,n=[{name:"floatingIp",label:t("Floating Ip"),type:"label",icon:_.default.createElement(v.default,null)},{name:"resourceType",label:t("Resource Type"),type:"radio",required:!0,options:this.resourceTypeMap}];switch(e){case"instance":n.push(F({name:"instance",label:t("Instance"),type:"select-table",required:!0,backendPageStore:this.store,extraParams:{noReminder:!0},disabledFunc:e=>0===e.fixed_addresses.length,onChange:this.handleInstanceSelect,isMulti:!1},P.instanceSelectTablePropsBackend),{name:"port",label:t("Instance IP"),type:"select-table",required:!0,data:a,isLoading:r,isMulti:!1,filterParams:[{label:t("Ip Address"),name:"name"}],columns:[{title:t("Ip Address"),dataIndex:"name"},{title:t("Mac Address"),dataIndex:"mac_address"},{title:t("Network"),dataIndex:"network_name"},{title:t("Reason"),dataIndex:"reason"}],disabledFunc:e=>!e.available});break;case"lb":n.push({name:"loadbalance",label:t("Load Balancer"),type:"select-table",required:!0,data:[],isMulti:!1,filterParams:[{label:t("Name"),name:"name"},{label:t("IP"),name:"private_ip"}],columns:[{title:t("Name"),dataIndex:"name"},{title:t("Image"),dataIndex:"image",render:e=>_.default.createElement(C.default,{type:e,title:e})},{title:t("Fixed IP"),dataIndex:"fixed_addresses",render:e=>(0,g.default)(e).call(e,(e=>_.default.createElement("span",{key:e},e,_.default.createElement("br",null))))},{title:t("Floating IP"),dataIndex:"floating_addresses",render:e=>e?(0,g.default)(e).call(e,(e=>_.default.createElement("span",{key:e},e,_.default.createElement("br",null)))):"-"},{title:t("Flavor"),dataIndex:"flavor"},{title:t("Created At"),dataIndex:"created",valueRender:"sinceTime"}]});break;case"router":n.push(F({name:"router",label:t("Router"),type:"select-table",required:!0,backendPageStore:this.routersStore,disabledFunc:this.routersDisableFunc,isMulti:!1},(0,D.getRouterSelectTablePropsBackend)(this)));break;case"port":n.push(...M.getPortFormItem.call(this,[""]))}return n}}a.Associate=L,(0,b.default)(L,"id","associate"),(0,b.default)(L,"title",t("Associate")),(0,b.default)(L,"policy","update_floatingip"),(0,b.default)(L,"allowed",(e=>h.default.resolve(!(0,E.disableFIPAssociate)(e)&&(0,k.isNull)(e.fixed_ip_address)&&"DOWN"===e.status&&(0,k.isNull)(e.port_details))));var O=(0,S.inject)("rootStore")((0,S.observer)(L));a.default=O},3464:function(e,a,r){"use strict";var n=r(156),i=r(19),l=r(25),s=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var o=s(r(65)),u=s(r(28)),d=s(r(33)),c=s(r(71));r(534);var f=s(r(394)),p=s(r(37)),h=s(r(0)),m=r(1113),g=s(r(323)),v=(r(167),function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=y(t);if(a&&a.has(e))return a.get(e);var r={},n=i&&l;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=n?l(e,s):null;o&&(o.get||o.set)?i(r,s,o):r[s]=e[s]}r.default=e,a&&a.set(e,r);return r}(r(47)));function y(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(y=function(e){return e?a:t})(e)}class b extends m.ConfirmAction{constructor(){super(...arguments),(0,p.default)(this,"policy","delete_floatingip"),(0,p.default)(this,"getItemName",(e=>e.floating_ip_address)),(0,p.default)(this,"confirmContext",(e=>{var a=null;if(this.needForceRelease(e)&&(a=h.default.createElement("div",null,h.default.createElement(f.default,{style:{marginTop:"14px"},onChange:t=>{this.onChangeType(t.target.checked,e)}},t("Force release")))),!this.messageHasItemName)return h.default.createElement("div",null,h.default.createElement("p",null," ",t("Are you sure to {action}?",{action:this.actionNameDisplay||this.title})),a);var r=this.getName(e);return h.default.createElement("div",null,h.default.createElement("p",null," ",this.unescape(t("Are you sure to {action} (instance: {name})?",{action:this.actionNameDisplay||this.title,name:r}))),a)})),(0,p.default)(this,"onSubmit",(e=>{var{forceRelease:a}=e,r=(0,c.default)(e,["forceRelease"]);if(this.hasCheckBox&&!a){var n=t("Floating ip has already been associate, Please check Force release");return o.default.reject(n)}return g.default.delete(r)}))}get id(){return"delete"}get title(){return t("Release")}get isDanger(){return!0}get buttonText(){return t("Release")}get actionName(){return t("Release")}onChangeType(e,t){(0,v.isArray)(t)?(0,u.default)(t).call(t,(t=>{t.forceRelease=e})):t.forceRelease=e}needForceRelease(e){var t=!1;(0,v.isArray)(e)?((0,u.default)(e).call(e,(e=>{e.forceRelease=!1})),(0,d.default)(e).call(e,(e=>!(v.default.isNull(e.fixed_ip_address)&&"DOWN"===e.status&&v.default.isNull(e.port_details))))[0]&&(t=!0)):(e.forceRelease=!1,t=!(v.default.isNull(e.fixed_ip_address)&&"DOWN"===e.status&&v.default.isNull(e.port_details)));return this.hasCheckBox=t,t}}a.default=b},3465:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=void 0;var l=i(r(37)),s=r(1113),o=i(r(47)),u=i(r(323));class d extends s.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","update_floatingip"),(0,l.default)(this,"allowedCheckFunc",(e=>!o.default.isNull(e.fixed_ip_address)&&"DOWN"!==e.status)),(0,l.default)(this,"getItemName",(e=>e.floating_ip_address)),(0,l.default)(this,"onSubmit",(e=>u.default.disassociateFip(e)))}get id(){return"disassociate"}get title(){return t("Disassociate")}get buttonText(){return t("Disassociate")}get actionName(){return t("Disassociate")}}a.default=d},3466:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var p=f(r(65)),h=f(r(37)),m=r(382),g=r(1113),v=f(r(323)),y=r(1221),b=r(391),_=r(83);function S(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}class x extends g.ModalAction{constructor(){super(...arguments),(0,h.default)(this,"onSubmit",(e=>{var{description:t,qos_policy_id:a}=e;return v.default.edit({id:this.item.id},{description:t,qos_policy_id:a.selectedRowKeys.length?a.selectedRowKeys[0]:null})}))}static get modalSize(){return(0,_.qosEndpoint)()?"large":"small"}getModalSize(){return(0,_.qosEndpoint)()?"large":"small"}get qosEndpoint(){return(0,_.qosEndpoint)()}init(){this.qosPolicyStore=new b.QoSPolicyStore}get defaultValue(){var{item:e}=this.props;return function(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=S(Object(r),!0)).call(a,(function(t){(0,h.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=S(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}({description:this.item.description},this.qosEndpoint?{qos_policy_id:{selectedRowKeys:e.qos_policy_id?[e.qos_policy_id]:[],selectedRows:e.qos_policy_id?[{id:e.qos_policy_id,name:e.qos_policy_id}]:[]}}:{})}get instanceName(){return this.item.floating_ip_address}get formItems(){return[{name:"description",label:t("Description"),type:"textarea"},{name:"qos_policy_id",label:t("QoS Policy"),type:"tab-select-table",tabs:y.getQoSPolicyTabs.call(this),isMulti:!1,tip:t("Choosing a QoS policy can limit bandwidth and DSCP"),display:!!this.qosEndpoint}]}}a.Edit=x,(0,h.default)(x,"id","edit-floating-ip"),(0,h.default)(x,"policy","update_floatingip"),(0,h.default)(x,"allowed",(()=>p.default.resolve(!0)));var w=(0,m.inject)("rootStore")((0,m.observer)(x));a.default=w},3467:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.CreateAction=void 0;var p=f(r(62)),h=f(r(65));r(318);var m=f(r(317)),g=f(r(1242)),v=f(r(71)),y=f(r(52)),b=f(r(37)),_=f(r(0)),S=r(382),x=r(1113),w=(r(513),r(167),r(321)),I=r(392),C=r(391),k=f(r(521)),D=f(r(384)),T=r(390),A=r(1221),P=r(83);function M(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=M(Object(r),!0)).call(a,(function(t){(0,b.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=M(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}class N extends x.ModalAction{constructor(){var e;super(...arguments),e=this,(0,b.default)(this,"fetchSubnetDetails",function(){var t=(0,y.default)((function*(t){var a=yield e.subnetStore.fetchList({network_id:t});e.setState({subnetDetails:a||[]})}));return function(e){return t.apply(this,arguments)}}()),(0,b.default)(this,"handleOwnedNetworkChange",(e=>{var t=e.selectedRowKeys[0];this.setState({network_id:t}),this.formRef.current.setFieldsValue({fixed_ips:void 0}),this.getSubnets(t)})),(0,b.default)(this,"onSubmit",(e=>{var{mac_address:{type:t,mac:a},security_groups:r,enableQosPolicy:n,qos_policy_id:i,more:l,network_id:s,fixed_ips:o,bindingProfile:u}=e,d=(0,v.default)(e,["mac_address","security_groups","enableQosPolicy","qos_policy_id","more","network_id","fixed_ips","bindingProfile"]),c=E(E({},o&&o.length>0?{fixed_ips:(0,p.default)(o).call(o,(e=>{var t={subnet_id:e.subnet};return e.ip_address&&"manual"===e.ip_address.type&&(t.ip_address=e.ip_address.ip),t}))}:{}),{},{network_id:s.selectedRowKeys[0]},d);return t&&"auto"!==t&&(c.mac_address=a),n&&i&&(c.qos_policy_id=0===i.selectedRowKeys.length?null:i.selectedRowKeys[0]),r&&(c.security_groups=r.selectedRowKeys||void 0),c.project_id=this.currentProjectId,u&&(c["binding:profile"]=JSON.parse(u)),k.default.create(c)}))}get qosEndpoint(){return(0,P.qosEndpoint)()}init(){this.state.quota={},this.state.quotaLoading=!0,this.projectStore=D.default,this.networkStore=new w.NetworkStore,this.securityGroupStore=new I.SecurityGroupStore,this.qosPolicyStore=new C.QoSPolicyStore,this.subnetStore=new T.SubnetStore,this.getQuota()}getSubnets(e){var t=this;return(0,y.default)((function*(){yield t.networkStore.fetchDetail({id:e}),yield t.fetchSubnetDetails(e)}))()}get name(){return t("Create Virtual Adapter")}static get modalSize(){return"large"}getModalSize(){return"large"}get tips(){return t("Virtual adapter mainly used for binding instance and other operations, occupying the quota of the port.")}static get disableSubmit(){var{neutronQuota:{port:{left:e=0}={}}}=D.default;return 0===e}static get showQuota(){return!0}get showQuota(){return!0}getQuota(){var e=this;return(0,y.default)((function*(){e.setState({quotaLoading:!0});var t=yield e.projectStore.fetchProjectNeutronQuota(),{port:a={}}=t||{};e.setState({quota:a,quotaLoading:!1})}))()}get quotaInfo(){var{quota:e={},quotaLoading:a}=this.state;if(a)return[];var{left:r=0}=e,n=0===r?0:1;return[E(E({},e),{},{add:n,name:"port",title:t("Port")})]}get defaultValue(){return{more:!1,mac_address:{type:"auto"},qos_policy:"disable",port_security_enabled:!0,enableQosPolicy:!1}}get securityGroups(){var e;return(0,p.default)(e=this.securityGroupStore.list.data||[]).call(e,(e=>E(E({},e),{},{key:e.id})))}get formItems(){var e,{more:a,network_id:r,subnetDetails:n=[],port_security_enabled:i=!0,enableQosPolicy:l=!1}=this.state,s=(0,p.default)(e="normal,macvtap,direct,baremetal,direct-physical,virtio-forwarder,smart-nic".split(",")).call(e,(e=>({label:e,value:e})));return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea",required:!1},{name:"network_id",label:t("Owned Network"),type:"network-select-table",onChange:this.handleOwnedNetworkChange,required:!0},{name:"fixed_ips",label:t("Owned Subnet"),type:"ip-distributor",subnets:n,hidden:!r},{name:"ipv6",label:"IPv6",type:"label",style:{marginBottom:24},content:_.default.createElement("span",null,t("The selected VPC/ subnet does not have IPv6 enabled.")," ",_.default.createElement(m.default,{type:"link"},t("To open")," ",_.default.createElement(g.default,null))," "),hidden:!0},{name:"mac_address",label:t("Mac Address"),wrapperCol:{span:16},required:!0,type:"mac-address"},{name:"port_security_enabled",label:t("Port Security"),type:"switch",tip:t("Disabling port security will turn off the security group policy protection and anti-spoofing protection on the port. General applicable scenarios: NFV or operation and maintenance Debug."),onChange:e=>{this.setState({port_security_enabled:e})}},{name:"security_groups",label:t("Security Group"),type:"select-table",tips:t("The security group is similar to the firewall function for setting up network access control, or you can go to the console and create a new security group. (Note: The security group you selected will work on all virtual LANS on the instances.)"),data:this.securityGroups,isLoading:this.securityGroupStore.list.isLoading,extraParams:{project_id:this.currentProjectId},backendPageStore:this.securityGroupStore,isMulti:!0,hidden:!i,required:i,filterParams:[{label:t("Name"),name:"name"}],columns:[{title:t("Name"),dataIndex:"name"},{title:t("Description"),dataIndex:"description"},{title:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime"}]},{name:"binding:vnic_type",label:t("Port Type"),type:"select",options:s,hidden:!a},{name:"enableQosPolicy",label:t("Enable QoS Policy"),type:"switch",onChange:e=>{this.setState({enableQosPolicy:e})},hidden:!a,display:!!this.qosEndpoint},{name:"qos_policy_id",label:t("QoS Policy"),type:"tab-select-table",tabs:A.getQoSPolicyTabs.call(this),isMulti:!1,required:l,tip:t("Choosing a QoS policy can limit bandwidth and DSCP"),hidden:!(a&&l),display:!!this.qosEndpoint},{name:"bindingProfile",label:t("Binding Profile"),type:"aceEditor",hidden:!a,mode:"json",wrapEnabled:!0,tabSize:2,width:"100%",height:"200px",setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0},validator:(e,a)=>{if(void 0!==a&&""!==a)try{return JSON.parse(a),h.default.resolve(!0)}catch(e){return h.default.reject(new Error(t("Illegal JSON scheme")))}return h.default.resolve(!0)}},{name:"more",label:t("Advanced Options"),type:"more"}]}}a.CreateAction=N,(0,b.default)(N,"id","create-virtual-adapter"),(0,b.default)(N,"title",t("Create Virtual Adapter")),(0,b.default)(N,"policy","create_port"),(0,b.default)(N,"allowed",(()=>h.default.resolve(!0)));var R=(0,S.inject)("rootStore")((0,S.observer)(N));a.default=R},3468:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=void 0;var l=i(r(37)),s=r(1113),o=i(r(521));class u extends s.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","delete_port"),(0,l.default)(this,"allowedCheckFunc",(e=>!e||this.isOwnerOrAdmin(e))),(0,l.default)(this,"onSubmit",(e=>o.default.delete(e)))}get id(){return"delete"}get title(){return t("Delete Virtual Adapter")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete virtual adapter")}isOwnerOrAdmin(){return!0}}a.default=u},3469:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var p,h=f(r(71)),m=f(r(37)),g=f(r(62)),v=f(r(65)),y=r(382),b=r(1113),_=f(r(521));function S(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=S(Object(r),!0)).call(a,(function(t){(0,m.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=S(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}var w=(0,g.default)(p="normal,macvtap,direct,baremetal,direct-physical,virtio-forwarder,smart-nic".split(",")).call(p,(e=>({label:e,value:e})));class I extends b.ModalAction{constructor(){super(...arguments),(0,m.default)(this,"onSubmit",(e=>{var{item:{id:t}={}}=this.props,{mac_address:{type:a,mac:r},more:n}=e,i=x({},(0,h.default)(e,["mac_address","more"]));return a&&"auto"!==a&&(i.mac_address=r),_.default.update({id:t},i)}))}get defaultValue(){var{item:e}=this.props;return x(x({},e),{},{mac_address:{type:"manual",mac:e.mac_address},"binding:vnic_type":e.binding_vnic_type})}get formItems(){var{more:e}=this.state;return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"mac_address",label:t("Mac Address"),wrapperCol:{span:16},type:"mac-address",required:!0},{name:"binding:vnic_type",label:t("Port Type"),type:"select",required:!0,options:w,hidden:!e},{name:"description",label:t("Description"),type:"textarea"},{name:"more",label:t("Advanced Options"),type:"more"}]}}a.Edit=I,(0,m.default)(I,"id","edit-virtual-adapter"),(0,m.default)(I,"title",t("Edit")),(0,m.default)(I,"buttonText",t("Edit")),(0,m.default)(I,"policy","update_port"),(0,m.default)(I,"allowed",(()=>v.default.resolve(!0)));var C=(0,y.inject)("rootStore")((0,y.observer)(I));a.default=C},3470:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),o=r(28),u=r(45),d=r(46),c=r(19),f=r(156),p=r(21);c(a,"__esModule",{value:!0}),a.default=a.Attach=void 0;var h=p(r(219)),m=p(r(65)),g=p(r(37)),v=r(382),y=r(1113),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=S(t);if(a&&a.has(e))return a.get(e);var r={},n=c&&s;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=n?s(e,i):null;l&&(l.get||l.set)?c(r,i,l):r[i]=e[i]}r.default=e,a&&a.set(e,r);return r}(r(383)),_=r(1120);function S(e){if("function"!=typeof f)return null;var t=new f,a=new f;return(S=function(e){return e?a:t})(e)}function x(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=x(Object(r),!0)).call(a,(function(t){(0,g.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;o(n=x(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}class I extends y.ModalAction{constructor(){super(...arguments),(0,g.default)(this,"onSubmit",(e=>{var{id:t}=this.props.item,{instance:{selectedRowKeys:a=[]}={}}=e;return b.default.addInterface({id:a[0],body:{interfaceAttachment:{port_id:t}}})}))}init(){this.store=new b.ServerStore}get name(){return t("Attach Instance")}static get modalSize(){return"large"}getModalSize(){return"large"}get defaultValue(){var{name:e,id:t}=this.item;return{virtual_adapter:e,virtual_adapter_id:t}}get formItems(){return[{name:"virtual_adapter",label:t("Virtual Adapter"),type:"label"},{name:"virtual_adapter_id",label:t("Virtual Adapter ID"),type:"label",hidden:!0},w({name:"instance",label:t("Instance"),type:"select-table",backendPageStore:this.store,extraParams:{noReminder:!0},disabledFunc:e=>e.locked||!(0,h.default)(_.allowAttachInterfaceStatus).call(_.allowAttachInterfaceStatus,e.vm_state),required:!0,isMulti:!1},_.instanceSelectTablePropsBackend)]}}a.Attach=I,(0,g.default)(I,"id","attach_instance"),(0,g.default)(I,"title",t("Attach Instance")),(0,g.default)(I,"policy","os_compute_api:os-attach-interfaces:create"),(0,g.default)(I,"allowed",(e=>m.default.resolve(""===e.device_id)));var C=(0,v.inject)("rootStore")((0,v.observer)(I));a.default=C},3471:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=void 0;var l=i(r(52)),s=i(r(37)),o=r(1113),u=i(r(383));class d extends o.ConfirmAction{constructor(){var e;super(...arguments),e=this,(0,s.default)(this,"policy","os_compute_api:os-attach-interfaces:delete"),(0,s.default)(this,"allowedCheckFunc",(e=>!!e.device_id)),(0,s.default)(this,"onSubmit",(0,l.default)((function*(){var{id:t,device_id:a}=e.item;return u.default.detachInterface({id:a,ports:[t]})})))}get id(){return"detach_instance"}get title(){return t("Detach Instance")}get buttonText(){return t("Detach")}get actionName(){return t("detach instance")}get isAsyncAction(){return!0}}a.default=d},3472:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.ModifyQoS=void 0;var l=i(r(65)),s=i(r(52)),o=i(r(37)),u=i(r(0)),d=r(382),c=r(1113),f=r(391),p=i(r(521)),h=r(1221),m=r(83);class g extends c.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"onSubmit",(e=>{var{id:t}=this.item,{enableQosPolicy:a,qos_policy_id:r}=e,n={qos_policy_id:null};return a&&r&&(n.qos_policy_id=0===r.selectedRowKeys.length?null:r.selectedRowKeys[0]),p.default.update({id:t},n)}))}get name(){return t("Modify QoS")}get labelCol(){return{xs:{span:6},sm:{span:4}}}static get modalSize(){return"large"}getModalSize(){return"large"}init(){this.qosPolicyStore=new f.QoSPolicyStore,this.state={qosPolicy:{name:"",id:""}},this.item.qos_policy_id&&this.getQosPolicyItem()}getQosPolicyItem(){var e=this;return(0,s.default)((function*(){var t=yield e.qosPolicyStore.fetchDetail({id:e.item.qos_policy_id});e.setState({qosPolicy:t})}))()}get instanceName(){return this.item.name||this.item.id}get defaultValue(){var e=null!==this.item.qos_policy_id;return{enableQosPolicy:e,qos_policy_id:{selectedRowKeys:e?[this.item.qos_policy_id]:[],selectedRows:e?[{id:this.item.qos_policy_id,name:this.item.qos_policy_id}]:[]}}}get formItems(){var{enableQosPolicy:e=null!==this.item.qos_policy_id,qosPolicy:a}=this.state;return[{name:"enableQosPolicy",label:t("Enable QoS Policy"),type:"switch",onChange:e=>{this.setState({enableQosPolicy:e})}},{name:"name",label:t("Current QoS policy name"),type:"label",content:u.default.createElement("div",null,a.name||t("Not yet bound")),hidden:!e},{name:"qos_policy_id",label:t("QoS Policy"),type:"tab-select-table",tabs:h.getQoSPolicyTabs.call(this,{disabledFunc:e=>e.id===this.item.qos_policy_id}),isMulti:!1,required:!0,tip:t("Choosing a QoS policy can limit bandwidth and DSCP"),hidden:!e}]}}a.ModifyQoS=g,(0,o.default)(g,"id","modify_qos"),(0,o.default)(g,"title",t("Modify QoS")),(0,o.default)(g,"policy","update_port"),(0,o.default)(g,"allowed",(()=>l.default.resolve(!!(0,m.qosEndpoint)())));var v=(0,d.inject)("rootStore")((0,d.observer)(g));a.default=v},3473:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.AssociateFip=void 0;var l=i(r(65)),s=i(r(52)),o=i(r(37)),u=r(382),d=i(r(323)),c=r(1113),f=r(1120),p=r(1129),h=r(1137),m=r(1151);class g extends c.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"handleFixedIPChange",(e=>m.handleFixedIPChange.call(this,e))),(0,o.default)(this,"onSubmit",(e=>{var{fixed_ip:t,fip:a}=e,r=t.selectedRows[0],n=a.selectedRowKeys[0];return d.default.associateFip({id:n,port_id:this.item.id,fixed_ip_address:r.fixed_ip_address})}))}init(){this.getInterfaces(),h.getCanReachSubnetIdsWithRouterIdInComponent.call(this),this.state={interfaces:[],fixed_ip:null,canAssociateFloatingIPs:[],canReachSubnetIdsWithRouterId:[],portLoading:!0}}getInterfaces(){var e=this;return(0,s.default)((function*(){var t=[e.item],a=yield(0,m.getInterfaceWithReason)(t);e.setState({interfaces:a,portLoading:!1})}))()}static get modalSize(){return"large"}getModalSize(){return"large"}get name(){return t("Associate Floating IP")}get ports(){var{interfaces:e,canReachSubnetIdsWithRouterId:t}=this.state;return p.getPortsAndReasons.call(this,e,t)}get defaultValue(){var{name:e}=this.item;return{virtualAdapter:e}}getFIPFormItemExtra(){return(0,m.getFIPFormItemExtra)()}disableFIPAssociate(e){return(0,m.disableFIPAssociate)(e)}get formItems(){var e=(0,m.getFixedIPFormItemForAssociate)(t("Fixed IP"),this),a=(0,m.getFIPFormItemForAssociate)(this);return[{name:"virtualAdapter",label:t("Virtual Adapter"),type:"label",iconType:"instance"},e,a]}}a.AssociateFip=g,(0,o.default)(g,"id","AssociateFip"),(0,o.default)(g,"title",t("Associate Floating IP")),(0,o.default)(g,"policy","update_floatingip"),(0,o.default)(g,"allowed",((e,t)=>{var{isAdminPage:a=!1}=t;return l.default.resolve(!a&&(0,f.isNotError)(e)&&e.associatedDetail&&e.associatedDetail.length<e.ipv4.length)}));var v=(0,u.inject)("rootStore")((0,u.observer)(g));a.default=v},3474:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.DisAssociateFip=void 0;var l=i(r(65)),s=i(r(37)),o=r(382),u=i(r(323)),d=r(1113),c=r(1120);class f extends d.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"onSubmit",(e=>{var{floating_ip:t}=e,{id:a}=t.selectedRows[0];return u.default.disassociateFip({id:a})}))}static get modalSize(){return"large"}getModalSize(){return"large"}get name(){return t("Disassociate Floating IP")}get defaultValue(){var{name:e}=this.item;return{virtualAdapter:e}}get formItems(){var{associatedDetail:e}=this.item;return[{name:"virtualAdapter",label:t("Virtual Adapter"),type:"label",iconType:"instance"},{name:"floating_ip",label:t("Floating IP"),type:"select-table",required:!0,data:e,isMulti:!1,tagKey:"floating_ip_address",filterParams:[{label:t("Fixed IP Address"),name:"fixed_ip_address"}],columns:[{title:t("Fixed IP Address"),dataIndex:"fixed_ip_address"},{title:t("Floating IP Address"),dataIndex:"floating_ip_address"}]}]}}a.DisAssociateFip=f,(0,s.default)(f,"id","DisAssociateFip"),(0,s.default)(f,"title",t("Disassociate Floating IP")),(0,s.default)(f,"policy","update_floatingip"),(0,s.default)(f,"allowed",((e,t)=>{var{isAdminPage:a=!1}=t;return l.default.resolve(!a&&(0,c.isNotError)(e)&&e.associatedDetail&&e.associatedDetail.length)}));var p=(0,o.inject)("rootStore")((0,o.observer)(f));a.default=p},3479:function(e,t,a){"use strict";var r=a(19),n=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(91)),l=n(a(62));a(532);var s=n(a(533)),o=n(a(550));a(1187);var u=n(a(1188));a(1117);var d=n(a(1118));a(1115);var c=n(a(1116));a(387);var f=n(a(220));a(1189);var p=n(a(1190)),h=n(a(0)),m=(a(167),a(513),a(47)),g=n(a(16)),v=n(a(4)),y=a(135),b=n(a(583)),_=n(a(3480)),{Paragraph:S}=p.default,x=(e,t)=>{var{content:a,dataIndex:r,render:n,valueRender:l,copyable:s}=t;if((0,m.has)(t,"content"))return s?h.default.createElement(S,{copyable:s},a):a;var o=(0,m.get)(e,r);if(n)o=n(o,e);else if(l){var u=y.renderFilterMap[l];o=u&&u(o)}return(0,m.isNumber)(o)||(o=o||"-"),((e,t,a,r)=>{var n,l,s=(0,m.get)(a,t);return(0,i.default)(n=t.toLowerCase()).call(n,"status")>=0||(0,i.default)(l=t.toLowerCase()).call(l,"state")>=0?h.default.createElement(b.default,{status:s,text:e}):"-"!==e&&(/_?id/g.test(t.toLowerCase())&&!1!==r||r)?h.default.createElement(S,{copyable:r},e):e||"-"})(o,r,e,s)},w=(e,t,a,r,n)=>(0,l.default)(e).call(e,((e,i)=>h.default.createElement(u.default,{loading:a,key:"detail-row-".concat(i)},h.default.createElement(d.default,{className:(0,v.default)(_.default["card-item"],"sl-card-item")},h.default.createElement(c.default,{span:r},(e=>{var{label:t,tooltip:a=""}=e;return a?h.default.createElement(f.default,{title:a},h.default.createElement("span",null,t)):t})(e)),h.default.createElement(c.default,{span:n},x(t,e)))))),I=e=>{var t,{title:a,titleHelp:r,loading:n,options:i,data:l,labelCol:c,contentCol:f,className:p,button:m}=e;return r&&(t=h.default.createElement(s.default,{arrowPointAtCenter:"true",placement:"rightTop",content:r,getPopupContainer:e=>e.parentNode},h.default.createElement(o.default,{className:_.default["title-help"]}))),h.default.createElement("div",{className:(0,v.default)(_.default.card,p)},h.default.createElement("div",{className:_.default["card-content"]},h.default.createElement(u.default,{loading:n},h.default.createElement(d.default,{className:(0,v.default)(_.default["card-item"],"sl-card-item")},h.default.createElement("h3",null," ",a," "),t,m)),w(i,l,n,c,f)))},C=g.default.shape({label:g.default.oneOfType([g.default.string,g.default.node]),content:g.default.any,tooltip:g.default.oneOfType([g.default.string,g.default.node]),dataIndex:g.default.string,valueRender:g.default.string});I.defaultProps={labelCol:8,contentCol:16,options:[],title:"",titleHelp:"",loading:!1,data:{}},I.propTypes={title:g.default.oneOfType([g.default.string,g.default.node]),titleHelp:g.default.any,options:g.default.arrayOf(C),loading:g.default.bool,data:g.default.object,labelCol:g.default.number,contentCol:g.default.number};var k=I;t.default=k},3480:function(e,t,a){var r=a(3481);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(76)(r,n);r.locals&&(e.exports=r.locals)},3481:function(e,t,a){(t=e.exports=a(75)(!1)).push([e.i,"/* init */\n/* specific color */\n/*  border */\n/*  background */\n/*  shadow */\n/*  font */\n/*  */\n/*  animation */\n/*  size */\n/*  sider */\n.index__card--Na2sx {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  margin-bottom: 16px;\n  background-color: #fff;\n  border-radius: 4px;\n  -webkit-box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.05);\n          box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.05);\n}\n.index__card--Na2sx .index__card-content--26JCN {\n  padding: 16px;\n}\n.index__card--Na2sx .index__card-content--26JCN .index__card-item--1w9VY {\n  margin-bottom: 8px;\n}\n.index__card--Na2sx .index__card-content--26JCN .index__card-item--1w9VY h3 {\n  margin-bottom: 0;\n}\n.index__card--Na2sx .index__card-content--26JCN .index__card-item--1w9VY .index__title-help--8XKV- {\n  margin-left: 8px;\n  line-height: 26px;\n}\n.index__card--Na2sx .index__card-content--26JCN .index__card-item--1w9VY div {\n  word-break: break-all;\n}\n.index__card--Na2sx .index__card-content--26JCN :last-child {\n  margin-bottom: 0;\n}\n.index__card--Na2sx .index__card-content--26JCN .ant-typography {\n  word-break: break-all;\n}\n",""]),t.locals={card:"index__card--Na2sx","card-content":"index__card-content--26JCN","card-item":"index__card-item--1w9VY","title-help":"index__title-help--8XKV-"}},3482:function(e,t,a){var r=a(3483);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(76)(r,n);r.locals&&(e.exports=r.locals)},3483:function(e,t,a){(t=e.exports=a(75)(!1)).push([e.i,"/* init */\n/* specific color */\n/*  border */\n/*  background */\n/*  shadow */\n/*  font */\n/*  */\n/*  animation */\n/*  size */\n/*  sider */\n.index__main--TubAm {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  padding: 0 16px;\n}\n.index__main--TubAm .index__left-side--pbUVD {\n  width: 380px;\n  padding-right: 16px;\n}\n.index__main--TubAm .index__right-side--3v5zG {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n}\n",""]),t.locals={main:"index__main--TubAm","left-side":"index__left-side--pbUVD","right-side":"index__right-side--3v5zG"}},3506:function(e,t,a){var r=a(3507);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:undefined,insertInto:void 0};a(76)(r,n);r.locals&&(e.exports=r.locals)},3507:function(e,t,a){(t=e.exports=a(75)(!1)).push([e.i,"/* init */\n/* specific color */\n/*  border */\n/*  background */\n/*  shadow */\n/*  font */\n/*  */\n/*  animation */\n/*  size */\n/*  sider */\n.index__wrapper--26YmP {\n  min-height: calc(100vh - 108px);\n}\n.index__wrapper--26YmP .ant-tabs > .ant-tabs-nav {\n  background-color: #fff;\n}\n.index__wrapper--26YmP .ant-tabs-nav-wrap {\n  padding: 0 16px;\n}\n.index__wrapper--26YmP .list-container {\n  margin-top: 0;\n}\n",""]),t.locals={wrapper:"index__wrapper--26YmP"}},3850:function(e,t,a){"use strict";var r=a(19),n=a(21);r(t,"__esModule",{value:!0}),t.detailConfigs=t.actionConfigs=void 0;var i=n(a(3851)),l=n(a(3852)),s={rowActions:{firstAction:l.default},batchActions:[l.default],primaryActions:[i.default]};t.actionConfigs=s;var o={rowActions:{firstAction:l.default},batchActions:[l.default],primaryActions:[]};t.detailConfigs=o},3851:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.Create=void 0;var l=i(r(62)),s=i(r(33)),o=i(r(35)),u=i(r(322)),d=i(r(65)),c=i(r(71)),f=i(r(37)),p=r(382),h=r(1113),m=i(r(1324)),g=i(r(115)),v=i(r(136)),y=r(32),b=i(r(1217));class _ extends h.ModalAction{constructor(){super(...arguments),(0,f.default)(this,"onSubmit",(e=>{var t,a;(e.expires_at&&(e.expires_at=e.expires_at.clone().endOf("day")),e.roles)&&(e.roles=(0,l.default)(t=(0,s.default)(a=(0,o.default)(e.roles)).call(a,(t=>e.roles[t]))).call(t,(e=>({id:e}))));return m.default.create(e).then((e=>{var t=e.application_credential,{links:a,roles:r,system:n,unrestricted:i,user_id:l,name:s}=t,o=(0,c.default)(t,["links","roles","system","unrestricted","user_id","name"]),d="".concat(s,".json"),f=new Blob([(0,u.default)(o,null,2)],{type:"text/plain;charset=utf-8"});b.default.saveAs(f,d)}))}))}static get modalSize(){return"middle"}getModalSize(){return"middle"}get name(){return t("Create Application Credentials")}static allowed(){return d.default.resolve(!0)}get roleOptions(){var e=(0,y.toJS)(v.default.roles);return(0,l.default)(e).call(e,(e=>({label:e.name,value:e.id})))}get formItems(){return[{name:"name",label:t("Name"),type:"input-name",required:!0},{name:"expires_at",label:t("Expires At"),type:"date-picker",showToday:!1,disabledDate:e=>e&&e<(0,g.default)().subtract(1,"days").endOf("d"),required:!1},{name:"roles",label:t("Roles"),type:"check-group",options:this.roleOptions,extra:t("If not provided, the roles assigned to the application credential will be the same as the roles in the current token."),span:12},{name:"description",label:t("Description"),type:"textarea",required:!1}]}}a.Create=_,(0,f.default)(_,"id","create-application_credentials"),(0,f.default)(_,"title",t("Create Application Credentials")),(0,f.default)(_,"policy","identity:create_application_credential");var S=(0,p.inject)("rootStore")((0,p.observer)(_));a.default=S},3852:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=void 0;var l=i(r(37)),s=r(1113),o=i(r(1324));class u extends s.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","identity:delete_application_credential"),(0,l.default)(this,"onSubmit",(e=>{var{user_id:t,id:a}=e;return o.default.client.delete(t,a)}))}get id(){return"delete"}get title(){return t("Delete Application Credential")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete application credential")}}a.default=u}}]);