(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1324:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.default=t.HostStore=void 0;var i,l,o=n(a(54)),s=n(a(63)),u=n(a(28)),d=n(a(25)),c=n(a(49)),f=n(a(74)),p=(n(a(35)),n(a(75)),n(a(55))),m=n(a(53)),v=n(a(50)),h=a(36),g=(i=class extends m.default{constructor(){super(...arguments),(0,f.default)(this,"delete",l,this)}get client(){return v.default.masakari.segments.hosts}get segmentClient(){return v.default.masakari.segments}get isSubResource(){return!0}detailFetchByClient(e){return this.client.show(e.id,e.uuid)}get paramsFunc(){return e=>{var{id:t}=e;return{segment_id:t}}}listFetchByClient(e){var t=this;return(0,c.default)((function*(){var a=[];return e.segment_id?yield t.client.list(e.segment_id).then((e=>{var t;(0,o.default)(t=e.hosts).call(t,(e=>a.push(e)))})):yield t.segmentClient.list().then(function(){var e=(0,c.default)((function*(e){var r,n=(0,o.default)(r=e.segments).call(r,(e=>t.client.list(e.uuid).then((e=>e.hosts))));yield s.default.all(n).then((e=>{(0,u.default)(e).call(e,(e=>{(0,u.default)(e).call(e,(e=>{a.push(e)}))}))}))}));return function(t){return e.apply(this,arguments)}}()),{hosts:a}}))()}create(e,t){var a=this;return(0,c.default)((function*(){return a.client.create(e,t)}))()}update(e,t,a){return this.submitting(this.client.update(e,t,a))}},(0,p.default)(i.prototype,"create",[h.action],(0,d.default)(i.prototype,"create"),i.prototype),l=(0,p.default)(i.prototype,"delete",[h.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{var{segment_id:t,host_id:a}=e;return this.submitting(this.client.delete(t,a))}}}),(0,p.default)(i.prototype,"update",[h.action],(0,d.default)(i.prototype,"update"),i.prototype),i);t.HostStore=g;var _=new g;t.default=_},1370:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.default=t.SegmentStore=void 0;var i,l=n(a(25)),o=n(a(49)),s=n(a(55)),u=n(a(53)),d=n(a(50)),c=a(36),f=(i=class extends u.default{get client(){return d.default.masakari.segments}create(e){var t=this;return(0,o.default)((function*(){return t.client.create(e)}))()}delete(e){var t=this;return(0,o.default)((function*(){var{id:a}=e;return t.client.delete(a)}))()}update(e,t){return this.submitting(this.client.update(e,t))}},(0,s.default)(i.prototype,"create",[c.action],(0,l.default)(i.prototype,"create"),i.prototype),(0,s.default)(i.prototype,"delete",[c.action],(0,l.default)(i.prototype,"delete"),i.prototype),(0,s.default)(i.prototype,"update",[c.action],(0,l.default)(i.prototype,"update"),i.prototype),i);t.SegmentStore=f;var p=new f;t.default=p},1704:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(1705)),l=n(a(4372)),o=n(a(4373)),s=n(a(4374)),u={rowActions:{firstAction:l.default,moreActions:[{action:s.default},{action:o.default}]},batchActions:[o.default],primaryActions:[i.default]};t.default=u},1705:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.StepCreate=void 0;var p=f(r(63)),m=f(r(28)),v=f(r(77));r(231);var h=f(r(341)),g=f(r(58)),_=f(r(1438));r(1344);var y=f(r(1345)),b=f(r(35)),S=r(412),x=r(1241),I=f(r(1370)),w=f(r(0)),C=(r(161),r(36)),H=(r(564),f(r(1506))),D=f(r(1324)),M=f(r(1270)),k=f(r(4366)),N=f(r(4371));function A(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=A(Object(r),!0)).call(a,(function(t){(0,b.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=A(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}class R extends x.StepAction{constructor(){super(...arguments),(0,b.default)(this,"onClickCancel",(()=>{0!==this.state.current?y.default.confirm({title:"Confirm",icon:w.default.createElement(_.default,{className:H.default.warn}),content:"Segment will be deleted. Are you sure want to cancel this created segment?",okText:"Confirm",cancelText:"Cancel",loading:!0,onOk:()=>I.default.delete({id:this.state.extra.createdSegmentId}).finally((()=>this.routing.push(this.listUrl)))}):this.routing.push(this.listUrl)})),(0,b.default)(this,"onSubmit",(e=>{var t,{name:a}=e;return p.default.resolve((0,m.default)(t=a.selectedRows).call(t,(e=>{var{binary:t,forced_down:a,host:r,id:n,state:i,status:l,updated_at:o,zone:s}=e,u=(0,g.default)(e,["binary","forced_down","host","id","state","status","updated_at","zone"]);this.store.create(this.state.extra.createdSegmentId,{host:j({name:r},u)})})))}))}init(){this.store=D.default,this.state=j({btnIsLoading:!1},this.state)}static allowed(){return p.default.resolve(!0)}get name(){return t("Create Segment")}get listUrl(){return this.getRoutePath("masakariSegments")}get hasConfirmStep(){return!1}next(){this.currentRef.current.wrappedInstance.checkFormInput((e=>{if(this.updateData(e),0===this.state.current){this.setState({btnIsLoading:!0});var{segment_name:t,recovery_method:a,service_type:r,description:n}=this.state.data;I.default.create({segment:{name:t,recovery_method:a,service_type:r,description:n}}).then((e=>{this.setState({extra:(0,C.toJS)({createdSegmentId:e.segment.uuid})},(()=>{this.setState((e=>({current:e.current+1})))}))}),(e=>{this.responseError=e;var{response:{data:t}={}}=e;M.default.errorWithDetail(t,this.errorText)})).finally((()=>{this.setState({btnIsLoading:!1})}))}}),(()=>this.setState({btnIsLoading:!1})))}getNextBtn(){var e,{current:a}=this.state;if(a>=this.steps.length-1)return null;var{title:r}=this.steps[a+1];return w.default.createElement(h.default,{type:"primary",onClick:()=>this.next(),loading:this.state.btnIsLoading},(0,v.default)(e="".concat(t("Next"),": ")).call(e,r))}getPrevBtn(){var e,{current:a}=this.state;if(0===a)return null;var r=this.steps[a-1].title;return w.default.createElement(h.default,{style:{margin:"0 8px"},onClick:()=>this.prev()},(0,v.default)(e="".concat(t("Previous"),": ")).call(e,r))}prev(){this.currentRef.current.wrappedInstance.checkFormInput(this.updateDataOnPrev,this.updateDataOnPrev),I.default.delete({id:this.state.extra.createdSegmentId})}get steps(){return[{title:t("Create Segment"),component:N.default},{title:t("Add Host"),component:k.default}]}}a.StepCreate=R,(0,b.default)(R,"id","instance-ha-create"),(0,b.default)(R,"title",t("Create Segment")),(0,b.default)(R,"path","/ha/segments-admin/create-step-admin"),(0,b.default)(R,"policy","get_images");var U=(0,S.inject)("rootStore")((0,S.observer)(R));a.default=U},1706:function(e,a,r){"use strict";var n=r(162),i=r(20),l=r(25),o=r(21);i(a,"__esModule",{value:!0}),a.default=a.Hosts=void 0;var s=o(r(35)),u=o(r(0)),d=r(412),c=o(r(1242)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var r={},n=i&&l;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=n?l(e,o):null;s&&(s.get||s.set)?i(r,o,s):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(r(1324)),p=r(204),m=r(66),v=o(r(1707));function h(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(h=function(e){return e?a:t})(e)}class g extends c.default{constructor(){super(...arguments),(0,s.default)(this,"getColumns",(()=>[{title:t("Name"),dataIndex:"name",render:(e,t)=>{var a=this.getRoutePath("masakariHostDetail",{id:t.failover_segment_id},{uuid:t.uuid});return u.default.createElement(p.Link,{to:a},e)}},{title:t("UUID"),dataIndex:"uuid",isHideable:!0},{title:t("Reserved"),dataIndex:"reserved",isHideable:!0,valueRender:"yesNo"},{title:t("Type"),dataIndex:"type",isHideable:!0},{title:t("Control Attribute"),dataIndex:"control_attributes",isHideable:!0},{title:t("On Maintenance"),dataIndex:"on_maintenance",isHideable:!0,valueRender:"yesNo"},{title:t("Failover Segment"),dataIndex:"failover_segment",isHideable:!0,render:(e,t)=>u.default.createElement(p.Link,{to:this.getRoutePath("masakariSegmentDetail",{id:t.failover_segment_id})},t.failover_segment.name)}]))}init(){this.store=f.default,this.downloadStore=new f.HostStore}get endpoint(){return(0,m.masakariEndpoint)()}get checkEndpoint(){return!0}get policy(){return this.isAdminPage?"os_compute_api:servers:index:get_all_tenants":"os_compute_api:servers:index"}get name(){return t("hosts")}get defaultSortKey(){return"updated_at"}get actionConfigs(){return v.default}get rowKey(){return"uuid"}get searchFilters(){return[{label:t("Segment ID"),name:"id"},{label:t("Type"),name:"type"},{label:t("On Maintenance"),name:"on_maintenance"},{label:t("Reserved"),name:"reserved"},...this.isAdminPage?[{label:t("Project Name"),name:"project_name"}]:[]]}}a.Hosts=g;var _=(0,d.inject)("rootStore")((0,d.observer)(g));a.default=_},1707:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(4375)),l=n(a(4376)),o={rowActions:{firstAction:i.default,moreActions:[{action:l.default}]},batchActions:[l.default]};t.default=o},1708:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.default=t.NotificationStore=void 0;var i,l=n(a(25)),o=n(a(49)),s=n(a(55)),u=n(a(53)),d=n(a(50)),c=a(36),f=(i=class extends u.default{get client(){return d.default.masakari.notifications}create(e){var t=this;return(0,o.default)((function*(){return t.client.create(e)}))()}delete(e,t){var a=this;return(0,o.default)((function*(){var{params:r}=e;return a.client.delete(r,t)}))()}},(0,s.default)(i.prototype,"create",[c.action],(0,l.default)(i.prototype,"create"),i.prototype),(0,s.default)(i.prototype,"delete",[c.action],(0,l.default)(i.prototype,"delete"),i.prototype),i);t.NotificationStore=f;var p=new f;t.default=p},4363:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(416)),l=n(a(4364)),o=e=>(0,i.default)(l.default,e);t.default=o},4364:function(e,t,a){"use strict";var r=a(20),n=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(1263)),l=n(a(579)),o=n(a(4365)),s=n(a(1706)),u=n(a(4377)),d=n(a(4378)),c=n(a(4380)),f=n(a(4382)),p=n(a(1705)),m="/ha",v=[{path:m,component:i.default,routes:[{path:"".concat(m,"/segments-admin"),component:o.default,exact:!0},{path:"".concat(m,"/segments-admin/create-step-admin"),component:p.default,exact:!0},{path:"".concat(m,"/segments-admin/detail/:id"),component:d.default,exact:!0},{path:"".concat(m,"/hosts-admin"),component:s.default,exact:!0},{path:"".concat(m,"/hosts-admin/detail/:id"),component:c.default,exact:!0},{path:"".concat(m,"/notifications-admin"),component:u.default,exact:!0},{path:"".concat(m,"/notifications-admin/detail/:id"),component:f.default,exact:!0},{path:"*",component:l.default}]}];t.default=v},4365:function(e,a,r){"use strict";var n=r(162),i=r(20),l=r(25),o=r(21);i(a,"__esModule",{value:!0}),a.default=a.Segments=void 0;var s=o(r(35)),u=r(412),d=o(r(1242)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=m(t);if(a&&a.has(e))return a.get(e);var r={},n=i&&l;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=n?l(e,o):null;s&&(s.get||s.set)?i(r,o,s):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(r(1370)),f=r(66),p=o(r(1704));function m(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(m=function(e){return e?a:t})(e)}class v extends d.default{constructor(){super(...arguments),(0,s.default)(this,"getColumns",(()=>[{title:t("Name"),dataIndex:"name",routeName:this.getRouteName("masakariSegmentDetail")},{title:t("UUID"),dataIndex:"uuid",isHideable:!0},{title:t("Recovery Method"),dataIndex:"recovery_method",isHideable:!0},{title:t("Service Type"),dataIndex:"service_type",isHideable:!0},{title:t("Description"),dataIndex:"description",isHideable:!0}]))}init(){this.store=c.default,this.downloadStore=new c.SegmentStore}get policy(){return this.isAdminPage?"os_compute_api:servers:index:get_all_tenants":"os_compute_api:servers:index"}get endpoint(){return(0,f.masakariEndpoint)()}get checkEndpoint(){return!0}get name(){return t("segments")}get defaultSortKey(){return"updated_at"}get actionConfigs(){return p.default}get searchFilters(){return[{label:t("Recovery Method"),name:"recovery_method"},{label:t("Service Type"),name:"service_type"},...this.isAdminPage?[{label:t("Project Name"),name:"project_name"}]:[]]}get rowKey(){return"uuid"}}a.Segments=v;var h=(0,u.inject)("rootStore")((0,u.observer)(v));a.default=h},4366:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.StepHost=void 0;var p=f(r(63)),m=f(r(28)),v=f(r(4367)),h=f(r(54));r(569);var g=f(r(1253));r(1445);var _=f(r(1446)),y=f(r(49)),b=f(r(35)),S=f(r(0)),x=r(412),I=f(r(1250)),w=f(r(1324)),C=f(r(587));r(161);function H(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}class D extends I.default{constructor(){super(...arguments),(0,b.default)(this,"allowed",(()=>p.default.resolve()))}init(){this.store=w.default,this.state=function(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=H(Object(r),!0)).call(a,(function(t){(0,b.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=H(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}({host:[],hostLoading:!0},this.state),this.getHostList()}get title(){return"StepHost"}get name(){return"StepHost"}get isStep(){return!0}getHostList(){var e=this;return(0,y.default)((function*(){var t,a=yield C.default.fetchList({binary:"nova-compute"}),r=yield w.default.fetchList(),n=!1;r.length<1?e.setState({host:a}):(0,m.default)(a).call(a,(t=>{for(var a=0;a<r.length;a++)r[a].name===t.host&&(n=!0);n||e.setState({host:[...e.state.host,t]}),n=!1}));var i=(0,v.default)((0,h.default)(t=e.state.host).call(t,(e=>[e.id,e])));e.setState({hostMap:i,hostLoading:!1})}))()}get getHostName(){var e;return(0,h.default)(e=this.state.host||[]).call(e,(e=>({value:e.host,label:e.host})))}get formItems(){var e=[{title:t("Name"),dataIndex:"host"},{title:t("Zone"),dataIndex:"zone"},{title:t("Updated"),dataIndex:"updated_at",valueRender:"toLocalTime"},{name:"reserved",title:t("Reserved"),dataIndex:"reserved",required:!0,render:(e,t)=>S.default.createElement(_.default,{checked:e,onChange:e=>{this.setState((a=>{var r=a.hostMap;return r[t.id].reserved=e,{hostMap:r}}))}})},{name:"type",title:t("Type"),dataIndex:"type",required:!0,render:(e,t)=>S.default.createElement(g.default,{required:!0,defaultValue:e,onChange:e=>{var{value:a}=e.target;this.setState((e=>{var r=e.hostMap;return r[t.id].type=a,{hostMap:r}}))}})},{name:"control_attributes",title:t("Control Attributes"),dataIndex:"control_attributes",render:(e,t)=>S.default.createElement(g.default,{defaultValue:e,required:!0,onChange:e=>{var{value:a}=e.target;this.setState((e=>{var r=e.hostMap;return r[t.id].control_attributes=a,{hostMap:r}}))}})},{name:"on_maintenance",title:t("On Maintenance"),dataIndex:"on_maintenance",render:(e,t)=>S.default.createElement(_.default,{checked:e,onChange:e=>{this.setState((a=>{var r=a.hostMap;return r[t.id].on_maintenance=e,{hostMap:r}}))}})}];return[{name:"name",label:t("Host Name"),type:"select-table",required:!0,data:this.state.host,isMulti:!0,onRow:()=>{},columns:e,isLoading:this.state.hostLoading,filterParams:[{label:t("Name"),name:"host"},{label:t("Zone"),name:"zone"}]}]}}a.StepHost=D;var M=(0,x.inject)("rootStore")((0,x.observer)(D));a.default=M},4371:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.StepSegment=void 0;var l=i(r(63)),o=i(r(35)),s=r(412),u=i(r(1250));class d extends u.default{constructor(){super(...arguments),(0,o.default)(this,"allowed",(()=>l.default.resolve()))}get title(){return"StepSegment"}get name(){return"StepSegment"}get isStep(){return!0}get defaultValue(){return{recovery_method:"auto",service_type:"compute"}}get formItems(){return[{name:"segment_name",label:t("Segment Name"),type:"input",required:!0},{name:"recovery_method",label:t("Recovery Method"),type:"select",options:[{label:t("auto"),value:"auto"},{label:t("auto_priority"),value:"auto_priority"},{label:t("reserved_host"),value:"reserved_host"},{label:t("rh_priority"),value:"rh_priority"}],required:!0},{name:"service_type",label:t("Service Type"),type:"input",required:!0,disabled:!0},{name:"description",label:t("Description"),type:"textarea",rows:4}]}}a.StepSegment=d;var c=(0,s.inject)("rootStore")((0,s.observer)(d));a.default=c},4372:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Update=void 0;var p=f(r(63)),m=f(r(35)),v=r(412),h=r(1241),g=f(r(1370));function _(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}class y extends h.ModalAction{constructor(){super(...arguments),(0,m.default)(this,"onSubmit",(e=>this.store.update(this.item.uuid,{segment:e})))}init(){this.store=g.default}get name(){return t("Update Segment")}get defaultValue(){return function(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=_(Object(r),!0)).call(a,(function(t){(0,m.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=_(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}({},this.item)}get formItems(){return[{name:"name",label:t("Segment Name"),type:"input",required:!0},{name:"recovery_method",label:t("Recovery Method"),type:"select",options:[{label:t("auto"),value:"auto"},{label:t("auto_priority"),value:"auto_priority"},{label:t("reserved_host"),value:"reserved_host"},{label:t("rh_priority"),value:"rh_priority"}],required:!0},{name:"description",label:t("Description"),type:"textarea",rows:4}]}}a.Update=y,(0,m.default)(y,"id","UpdateSegment"),(0,m.default)(y,"title",t("Update")),(0,m.default)(y,"policy","baremetal:port:Update"),(0,m.default)(y,"allowed",(()=>p.default.resolve(!0)));var b=(0,v.inject)("rootStore")((0,v.observer)(y));a.default=b},4373:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=void 0;var l=i(r(35)),o=r(1241),s=i(r(1370));class u extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","os_compute_api:os-deferred-delete:force"),(0,l.default)(this,"allowedCheckFunction",(()=>!0)),(0,l.default)(this,"confirmContext",(e=>{var a=this.getName(e);return t("Are you sure to {action} (Segment: {name})?",{action:this.actionNameDisplay||this.title,name:a})})),(0,l.default)(this,"onSubmit",(e=>{var{uuid:t}=e||this.item,a=t;return s.default.delete({id:a})}))}get id(){return"delete"}get title(){return t("Delete")}get actionName(){return t("delete segments")}get isDanger(){return!0}get isAsyncAction(){return!0}}a.default=u},4374:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.AddHost=void 0;var p=f(r(28)),m=f(r(54)),v=f(r(63)),h=f(r(49)),g=f(r(58)),_=f(r(35)),y=r(412),b=r(1241),S=f(r(1324)),x=f(r(587));function I(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=I(Object(r),!0)).call(a,(function(t){(0,_.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=I(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}class C extends b.ModalAction{constructor(){super(...arguments),(0,_.default)(this,"onSubmit",(e=>{var{segment_name:t}=e,a=(0,g.default)(e,["segment_name"]);return this.store.create(this.item.uuid,{host:w({},a)})}))}init(){this.store=S.default,this.state={host:[]},this.getHostList()}get name(){return t("Add Host")}getHostList(){var e=this;return(0,h.default)((function*(){var t=yield x.default.fetchList({binary:"nova-compute"}),a=yield S.default.fetchList(),r=!1;a.length<1?e.setState({host:t}):(0,p.default)(t).call(t,(t=>{for(var n=0;n<a.length;n++)a[n].name===t.host&&(r=!0);r||e.setState({host:[...e.state.host,t]}),r=!1}))}))()}get getHostName(){var e;return(0,m.default)(e=this.state.host||[]).call(e,(e=>({value:e.host,label:e.host})))}get defaultValue(){return{segment_name:this.item.name,reserved:!1,on_maintenance:!1}}get formItems(){return[{name:"segment_name",label:t("Segment Name"),type:"input",disabled:!0},{name:"name",label:t("Host Name"),type:"select",options:this.getHostName,required:!0},{name:"reserved",label:t("Reserved"),type:"switch",checkedText:"",uncheckedText:""},{name:"type",label:t("Type"),type:"input",required:!0},{name:"control_attributes",label:t("Control Attributes"),type:"input",required:!0},{name:"on_maintenance",label:t("On Maintenance"),type:"switch",checkedText:"",uncheckedText:""}]}}a.AddHost=C,(0,_.default)(C,"id","AddHost"),(0,_.default)(C,"title",t("Add Host")),(0,_.default)(C,"policy","baremetal:port:create"),(0,_.default)(C,"allowed",(()=>v.default.resolve(!0)));var H=(0,y.inject)("rootStore")((0,y.observer)(C));a.default=H},4375:function(e,a,r){"use strict";var n=r(32),i=r(42),l=r(29),o=r(25),s=r(28),u=r(44),d=r(45),c=r(20),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Update=void 0;var p=f(r(63)),m=f(r(35)),v=r(412),h=r(1241),g=f(r(1324));function _(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}class y extends h.ModalAction{constructor(){super(...arguments),(0,m.default)(this,"onSubmit",(e=>this.store.update(this.item.failover_segment_id,this.item.uuid,{host:e})))}init(){this.store=g.default}get name(){return t("Update")}get defaultValue(){return function(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=_(Object(r),!0)).call(a,(function(t){(0,m.default)(e,t,r[t])}));else if(u)d(e,u(r));else{var n;s(n=_(Object(r))).call(n,(function(t){c(e,t,o(r,t))}))}}return e}({},this.item)}get formItems(){return[{name:"name",label:t("Host Name"),type:"input",disabled:!0,required:!0},{name:"reserved",label:t("Reserved"),type:"switch",checkedText:"",uncheckedText:""},{name:"type",label:t("Type"),type:"input",required:!0},{name:"control_attributes",label:t("Control Attribute"),type:"input",required:!0},{name:"on_maintenance",label:t("On Maintenance"),type:"switch",checkedText:"",uncheckedText:""}]}}a.Update=y,(0,m.default)(y,"id","UpdateHost"),(0,m.default)(y,"title",t("Update")),(0,m.default)(y,"policy","baremetal:port:Update"),(0,m.default)(y,"allowed",(()=>p.default.resolve(!0)));var b=(0,v.inject)("rootStore")((0,v.observer)(y));a.default=b},4376:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=void 0;var l=i(r(35)),o=r(1241),s=i(r(1324));class u extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","instance:delete"),(0,l.default)(this,"allowedCheckFunction",(()=>!0)),(0,l.default)(this,"confirmContext",(e=>{var a=this.getName(e);return t("Are you sure to {action} (Host: {name})?",{action:this.actionNameDisplay||this.title,name:a})})),(0,l.default)(this,"onSubmit",(e=>{var{uuid:t,failover_segment_id:a}=e||this.item;return s.default.delete({segment_id:a,host_id:t})}))}get id(){return"delete"}get title(){return t("Delete")}get actionName(){return t("delete host")}get isDanger(){return!0}get isAsyncAction(){return!0}}a.default=u},4377:function(e,a,r){"use strict";var n=r(162),i=r(20),l=r(25),o=r(21);i(a,"__esModule",{value:!0}),a.default=a.Notifications=void 0;var s=o(r(54)),u=o(r(32)),d=o(r(35)),c=o(r(0)),f=r(412),p=o(r(1242)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=g(t);if(a&&a.has(e))return a.get(e);var r={},n=i&&l;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=n?l(e,o):null;s&&(s.get||s.set)?i(r,o,s):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(r(1708)),v=r(204),h=r(66);function g(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(g=function(e){return e?a:t})(e)}class _ extends p.default{constructor(){super(...arguments),(0,d.default)(this,"getColumns",(()=>[{title:t("UUID"),dataIndex:"notification_uuid",render:e=>{var t=this.getRoutePath("masakariNotificationDetail",{id:e});return c.default.createElement(v.Link,{to:t},e)},isHideable:!0},{title:t("Host"),dataIndex:"source_host_uuid",isHideable:!0},{title:t("Type"),dataIndex:"type",isHideable:!0},{title:t("Status"),dataIndex:"status",isHideable:!0},{title:t("Payload"),dataIndex:"payload",isHideable:!0,render:e=>{var t;return(0,s.default)(t=(0,u.default)(e)).call(t,(t=>c.default.createElement("div",{key:t},t,": ",e[t])))}}]))}init(){this.store=m.default,this.downloadStore=new m.NotificationStore}get policy(){return this.isAdminPage?"os_compute_api:servers:index:get_all_tenants":"os_compute_api:servers:index"}get name(){return t("segments")}get defaultSortKey(){return"updated_at"}get endpoint(){return(0,h.masakariEndpoint)()}get checkEndpoint(){return!0}get searchFilters(){return[{label:t("Host"),name:"source_host_uuid"},{label:t("UUID"),name:"notification_uuid"}]}}a.Notifications=_;var y=(0,f.inject)("rootStore")((0,f.observer)(_));a.default=y},4378:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.SegmentsDetail=void 0;var l=r(412),o=i(r(1243)),s=r(1370),u=i(r(4379)),d=i(r(1704)),c=i(r(1706));class f extends o.default{init(){this.store=new s.SegmentStore}get name(){return t("Segment Detail")}get listUrl(){return this.getRoutePath("masakariSegments")}get policy(){return"capsule:get_one_all_projects"}get actionConfigs(){return d.default}get detailInfos(){return[{title:t("Name"),dataIndex:"name"},{title:t("Description"),dataIndex:"description"}]}get tabs(){return[{title:t("Detail"),key:"general_info",component:u.default},{title:t("Hosts"),key:"host",component:c.default}]}}a.SegmentsDetail=f;var p=(0,l.inject)("rootStore")((0,l.observer)(f));a.default=p},4379:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var l=i(r(1249)),o=r(412);class s extends l.default{get leftCards(){return[this.baseInfoCard]}get baseInfoCard(){var e=[{label:t("Recovery Method"),dataIndex:"recovery_method"},{label:t("Service Type"),dataIndex:"service_type"},{label:t("Enabled"),dataIndex:"enabled",valueRender:"yesNo"},{label:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime"},{label:t("Updated At"),dataIndex:"updated_at",valueRender:"toLocalTime"}];return{title:t("Capsule Type"),options:e}}}a.BaseDetail=s;var u=(0,o.inject)("rootStore")((0,o.observer)(s));a.default=u},4380:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.HostsDetail=void 0;var l=i(r(203)),o=i(r(35)),s=r(349),u=r(412),d=i(r(1243)),c=i(r(1324)),f=i(r(4381)),p=i(r(1707));class m extends d.default{constructor(){super(...arguments),(0,o.default)(this,"updateFetchParams",(e=>{var t,a=(0,s.parse)((0,l.default)(t=this.routing.location.search).call(t,1));return{id:e.id,uuid:a.uuid}}))}init(){this.store=c.default}get name(){return t("Host Detail")}get listUrl(){return this.getRoutePath("masakariHosts")}get policy(){return"capsule:get_one_all_projects"}get actionConfigs(){return p.default}get titleValue(){var e;return(0,s.parse)((0,l.default)(e=this.routing.location.search).call(e,1)).uuid}get detailInfos(){return[{title:t("Name"),dataIndex:"name"}]}get tabs(){return[{title:t("Detail"),key:"general_info",component:f.default}]}}a.HostsDetail=m;var v=(0,u.inject)("rootStore")((0,u.observer)(m));a.default=v},4381:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var l=i(r(0)),o=i(r(1249)),s=r(412),u=r(204);class d extends o.default{get leftCards(){return[this.baseInfoCard]}get baseInfoCard(){var e=[{label:t("UUID"),dataIndex:"uuid"},{label:t("Failover Segment"),dataIndex:"failover_segment_id",render:(e,t)=>l.default.createElement(u.Link,{to:this.getRoutePath("masakariSegmentDetail",{id:t.failover_segment_id})},t.failover_segment.name)},{label:t("Reserved"),dataIndex:"reserved",valueRender:"yesNo"},{label:t("On Maintenance"),dataIndex:"on_maintenance",valueRender:"yesNo"},{label:t("Type"),dataIndex:"type"},{label:t("Control Attribute"),dataIndex:"control_attributes"}];return{title:t("Host Detail"),options:e}}}a.BaseDetail=d;var c=(0,s.inject)("rootStore")((0,s.observer)(d));a.default=c},4382:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.NotificationsDetail=void 0;var l=r(412),o=i(r(1243)),s=i(r(1708)),u=i(r(4383));class d extends o.default{init(){this.store=s.default}get name(){return t("Host Detail")}get listUrl(){return this.getRoutePath("masakariNotifications")}get policy(){return"capsule:get_one_all_projects"}get detailInfos(){return[{title:t("Type"),dataIndex:"type"},{title:t("Status"),dataIndex:"status"}]}get tabs(){return[{title:t("Detail"),key:"baseDetail",component:u.default}]}}a.NotificationsDetail=d;var c=(0,l.inject)("rootStore")((0,l.observer)(d));a.default=c},4383:function(e,a,r){"use strict";var n=r(20),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var l=i(r(1249)),o=r(412);class s extends l.default{get leftCards(){return[this.baseInfoCard,this.payloadCard]}get baseInfoCard(){var e=[{label:t("ID"),dataIndex:"id"},{label:t("Host"),dataIndex:"source_host_uuid",copyable:!0},{label:t("Generated Time"),dataIndex:"generated_time",valueRender:"toLocalTime"},{label:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime"},{label:t("Updated At"),dataIndex:"updated_at",valueRender:"toLocalTime"}];return{title:t("Notification Detail"),options:e}}get payloadCard(){var e=[{label:t("Event"),dataIndex:"event"},{label:t("Instance UUID"),dataIndex:"instance_uuid"},{label:t("VIR Domain Event"),dataIndex:"vir_domain_event"}];return{title:t("Payload"),sourceData:this.detailData.payload,options:e}}}a.BaseDetail=s;var u=(0,o.inject)("rootStore")((0,o.observer)(s));a.default=u}}]);