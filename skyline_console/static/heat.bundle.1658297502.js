(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1328:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.StepCreate=void 0;var l=i(r(65)),s=i(r(91)),u=i(r(52)),o=i(r(71)),d=i(r(37)),c=r(382),m=r(1113),p=i(r(545)),f=r(1163),v=r(32),h=i(r(3907)),k=i(r(3908));class g extends m.StepAction{constructor(){super(...arguments),(0,d.default)(this,"onSubmit",(e=>{var{params:t,content:a,rollback:r,name:n,timeout_mins:i}=e,l=(0,o.default)(e,["params","content","rollback","name","timeout_mins"]),s={stack_name:n,disable_rollback:!r,timeout_mins:i,template:(0,f.getYaml)(a),parameters:l};if(this.isEdit){var{stack_name:u}=s,d=(0,o.default)(s,["stack_name"]);return this.store.edit(this.params,d)}return this.store.create(s)}))}static allowed(){return l.default.resolve(!0)}get listUrl(){return this.getRoutePath("stack")}get name(){return this.isEdit?t("update template"):t("create stack")}get hasConfirmStep(){return!1}get hasExtraProps(){return this.isEdit}get isEdit(){var{pathname:e}=this.props.location;return(0,s.default)(e).call(e,"edit")>=0}get params(){var{id:e,name:t}=this.props.match.params;return{id:e,name:t}}get steps(){return[{title:t("Prepare Template"),component:k.default},{title:t("Orchestration information"),component:h.default}]}init(){this.store=p.default,this.getDetail()}getDetail(){var e=this;return(0,u.default)((function*(){if(e.isEdit){var t=yield p.default.fetchDetail(e.params);e.setState({extra:(0,v.toJS)(t)})}}))()}}a.StepCreate=g,(0,d.default)(g,"id","stack-create"),(0,d.default)(g,"title",t("Create Stack")),(0,d.default)(g,"path",((e,t)=>{var{isAdminPage:a}=t;return a?"/heat/stack-admin/create":"/heat/stack/create"})),(0,d.default)(g,"policy","stacks:create");var y=(0,c.inject)("rootStore")((0,c.observer)(g));a.default=y},1511:function(e,t,a){"use strict";var r=a(19),n=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(3906)),l=n(a(1328)),s=n(a(3909)),u=n(a(3910)),o={rowActions:{firstAction:i.default,moreActions:[{action:s.default},{action:u.default}]},batchActions:[i.default],primaryActions:[l.default]};t.default=o},3903:function(e,t,a){"use strict";var r=a(19),n=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(389)),l=n(a(3904)),s=e=>(0,i.default)(l.default,e);t.default=s},3904:function(e,t,a){"use strict";var r=a(19),n=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(1130)),l=n(a(525)),s=n(a(3905)),u=n(a(3911)),o=n(a(1328)),d="/heat",c=[{path:d,component:i.default,routes:[{path:"".concat(d,"/stack"),component:s.default,exact:!0},{path:"".concat(d,"/stack-admin"),component:s.default,exact:!0},{path:"".concat(d,"/stack/create"),component:o.default,exact:!0},{path:"".concat(d,"/stack-admin/create"),component:o.default,exact:!0},{path:"".concat(d,"/stack/edit/:id/:name"),component:o.default,exact:!0},{path:"".concat(d,"/stack-admin/edit/:id/:name"),component:o.default,exact:!0},{path:"".concat(d,"/stack/detail/:id/:name"),component:u.default,exact:!0},{path:"".concat(d,"/stack-admin/detail/:id/:name"),component:u.default,exact:!0},{path:"*",component:l.default}]}];t.default=c},3905:function(e,a,r){"use strict";var n=r(156),i=r(19),l=r(25),s=r(21);i(a,"__esModule",{value:!0}),a.default=a.Stack=void 0;var u=s(r(62)),o=s(r(37)),d=r(382),c=s(r(1114)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=v(t);if(a&&a.has(e))return a.get(e);var r={},n=i&&l;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=n?l(e,s):null;u&&(u.get||u.set)?i(r,s,u):r[s]=e[s]}r.default=e,a&&a.set(e,r);return r}(r(545)),p=r(1163),f=s(r(1511));function v(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(v=function(e){return e?a:t})(e)}class h extends c.default{constructor(){super(...arguments),(0,o.default)(this,"getColumns",(()=>[{title:t("ID/Name"),dataIndex:"stack_name",routeName:this.getRouteName("stackDetail"),routeParamsFunc:e=>({id:e.id,name:e.stack_name}),isLink:!0},{title:t("Project ID/Name"),dataIndex:"project_name",isHideable:!0,hidden:!this.isAdminPage,sorter:!1},{title:t("Stack Status"),dataIndex:"stack_status",isHideable:!0,render:e=>p.stackStatus[e]||e},{title:t("Created At"),dataIndex:"creation_time",isHideable:!0,valueRender:"sinceTime"},{title:t("Updated At"),dataIndex:"updated_time",isHideable:!0,valueRender:"sinceTime"}]))}init(){this.store=m.default,this.downloadStore=new m.StackStore}get policy(){return this.isAdminPage?"stacks:global_index":"stacks:index"}get name(){return t("stacks")}get isFilterByBackend(){return!0}get isSortByBackend(){return!0}get defaultSortKey(){return"creation_time"}get adminPageHasProjectFilter(){return!0}get projectFilterKey(){return"tenant"}get actionConfigs(){return f.default}get searchFilters(){var e=["CREATE_COMPLETE","CREATE_FAILED","ROLLBACK_COMPLETE","ROLLBACK_FAILED","UPDATE_COMPLETE","UPDATE_FAILED","DELETE_COMPLETE","DELETE_FAILED"],a=(0,u.default)(e).call(e,(e=>({key:e,label:p.stackStatus[e]})));return[{label:t("ID"),name:"id"},{label:t("Name"),name:"name"},{label:t("Stack Status"),name:"status",options:a}]}}a.Stack=h;var k=(0,d.inject)("rootStore")((0,d.observer)(h));a.default=k},3906:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=void 0;var l=i(r(37)),s=i(r(0)),u=r(1113),o=i(r(545));class d extends u.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","stacks:delete"),(0,l.default)(this,"allowedCheckFunc",(e=>!0)),(0,l.default)(this,"confirmContext",(e=>{var a=this.getName(e);return s.default.createElement("div",null,s.default.createElement("p",null,this.unescape(t("Are you sure to {action} (instance: {name})?",{action:this.actionNameDisplay||this.title,name:a}))),s.default.createElement("p",null,t("Deleting this stack will delete all resources deployed by the stack.")))})),(0,l.default)(this,"onSubmit",(e=>{var{id:t,name:a}=e||this.item;return o.default.delete({id:t,name:a})}))}get id(){return"delete"}get title(){return t("Delete")}get actionName(){return t("delete stack")}get isDanger(){return!0}get isAsyncAction(){return!0}}a.default=d},3907:function(e,a,r){"use strict";var n=r(35),i=r(44),l=r(33),s=r(25),u=r(28),o=r(45),d=r(46),c=r(19),m=r(21);c(a,"__esModule",{value:!0}),a.default=a.Parameter=void 0;var p=m(r(37)),f=r(382),v=m(r(1121)),h=r(1163);function k(e,t){var a=n(e);if(i){var r=i(e);t&&(r=l(r).call(r,(function(t){return s(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)u(a=k(Object(r),!0)).call(a,(function(t){(0,p.default)(e,t,r[t])}));else if(o)d(e,o(r));else{var n;u(n=k(Object(r))).call(n,(function(t){c(e,t,s(r,t))}))}}return e}class y extends v.default{get isStep(){return!0}get title(){return t("Parameter")}get name(){return t("Parameter")}get defaultValue(){var e=g({rollback:!0,timeout_mins:60},this.defaultParams);return this.isEdit&&(e.stack_name=this.props.extra.stack_name,e.rollback=!this.props.extra.disable_rollback),e}get isEdit(){return!!this.props.extra}get template(){return(0,h.getTemplate)(this.props.context||{})}get defaultParams(){var{params:e=""}=this.props.context||{},t=(0,h.getFormDefaultValues)(this.template),a=(0,h.getYaml)(e)||{},r=a.parameters||a;return g(g({},t),r)}get templateFormItems(){return(0,h.getFormItems)(this.template)}get rollbackOptions(){return[{value:!0,label:t("Enable")},{value:!1,label:t("Disable")}]}get formItems(){var e=this.templateFormItems,a={name:"name",label:t("Stack Name"),type:"label"},r={name:"name",label:t("Stack Name"),type:"input-name",required:!0,isStack:!0},n=[{name:"timeout_mins",label:t("Creation Timeout (Minutes)"),type:"input-int",required:!0},{name:"rollback",label:t("Fail Rollback"),type:"radio",required:!0,tip:h.rollbackTip,options:this.rollbackOptions},{label:t("Fill In The Parameters"),type:"title"},...e];return this.isEdit?n.unshift(a):n.unshift(r),n}}a.Parameter=y;var S=(0,f.inject)("rootStore")((0,f.observer)(y));a.default=S},3908:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.Template=void 0;var l=r(382),s=i(r(1121)),u=r(1163);class o extends s.default{get isStep(){return!0}get title(){return t("Prepare Template")}get name(){return t("Prepare Template")}get isEdit(){return!!this.props.extra}get defaultValue(){var{versionContent:e=""}=this.state;return{versionContent:e,name:this.isEdit?this.props.extra.stack_name:""}}get fontStyle(){return{fontFamily:'"Menlo", "Liberation Mono", "Consolas", "DejaVu Sans Mono", "Ubuntu Mono", "Courier New", "andale mono", "lucida console", monospace'}}get formItems(){return[{name:"name",label:t("Template Name"),type:"label",hidden:!this.isEdit},{name:"content",label:t("Template Content"),type:"textarea-from-file",required:!0,tip:u.yamlTip,validator:u.validateYaml,rows:10},{name:"params",label:t("Environment Variable"),type:"textarea-from-file",tip:u.paramTip,validator:u.validateYaml,rows:6}]}}a.Template=o;var d=(0,l.inject)("rootStore")((0,l.observer)(o));a.default=d},3909:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var l=i(r(65)),s=i(r(37)),u=r(382),o=r(517),d=i(r(1328));class c extends d.default{get listUrl(){return this.getRoutePath("stack")}get name(){return t("Update Template")}static allowed(){return l.default.resolve(!0)}}a.Edit=c,(0,s.default)(c,"id","edit-template"),(0,s.default)(c,"title",t("Update Template")),(0,s.default)(c,"path",((e,t)=>{var{isAdminPage:a}=t,r=a?"stackEditAdmin":"stackEdit",{id:n,stack_name:i}=e;return(0,o.getPath)({key:r,params:{id:n,name:i}})})),(0,s.default)(c,"policy","stacks:update");var m=(0,u.inject)("rootStore")((0,u.observer)(c));a.default=m},3910:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=void 0;var l=i(r(37)),s=i(r(0)),u=r(1113),o=i(r(545));class d extends u.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","stacks:abandon"),(0,l.default)(this,"allowedCheckFunc",(e=>!0)),(0,l.default)(this,"confirmContext",(e=>{var a=this.getName(e);return s.default.createElement("div",null,s.default.createElement("p",null,this.unescape(t("Are you sure to {action} (instance: {name})?",{action:this.actionNameDisplay||this.title,name:a}))),s.default.createElement("p",null,t("Abandoning this stack will preserve the resources deployed by the stack.")))})),(0,l.default)(this,"onSubmit",(e=>{var{id:t,name:a}=e||this.item;return o.default.abandon({id:t,name:a})}))}get id(){return"abandon"}get title(){return t("Abandon Stack")}get actionName(){return t("abandon stack")}get isDanger(){return!0}get isAsyncAction(){return!0}}a.default=d},3911:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.StackDetail=void 0;var l=r(382),s=i(r(1119)),u=r(545),o=r(1163),d=i(r(3912)),c=i(r(3913)),m=i(r(3915)),p=i(r(3917)),f=i(r(1511));class v extends s.default{get name(){return t("stack")}get policy(){return"stacks:show"}get listUrl(){return this.getRoutePath("stack")}init(){this.store=new u.StackStore}get actionConfigs(){return f.default}get detailInfos(){return[{title:t("Name"),dataIndex:"stack_name"},{title:t("Stack Status"),dataIndex:"stack_status",render:e=>o.stackStatus[e]||e},{title:t("Description"),dataIndex:"description"},{title:t("Created At"),dataIndex:"creation_time",valueRender:"toLocalTime"},{title:t("Updated At"),dataIndex:"updated_time",valueRender:"toLocalTime"}]}get tabs(){return[{title:t("Detail"),key:"detail",component:d.default},{title:t("Stack Resources"),key:"resource",component:c.default},{title:t("Stack Events"),key:"event",component:m.default},{title:t("YAML File"),key:"template",component:p.default}]}}a.StackDetail=v;var h=(0,l.inject)("rootStore")((0,l.observer)(v));a.default=h},3912:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var l=i(r(62)),s=i(r(35)),u=i(r(0)),o=r(382),d=i(r(1122)),c=r(1163);class m extends d.default{get leftCards(){return[this.startCard,this.outputCard]}get rightCards(){return[this.paramCard]}get outputCard(){var{outputs:e={}}=this.detailData,a=(0,l.default)(e).call(e,(e=>{var{output_key:t,output_value:a,description:r}=e;return{label:t,dataIndex:t,copyable:!1,render:()=>u.default.createElement("div",null,u.default.createElement("div",null,a),u.default.createElement("div",null,r))}}));return{title:t("Outputs"),options:a}}get paramCard(){var e,{parameters:a={}}=this.detailData,r=(0,l.default)(e=(0,s.default)(a)).call(e,(e=>({label:e,dataIndex:e,render:()=>a[e]})));return{title:t("Deployment Parameters"),options:r}}get startCard(){var e=[{label:t("Timeout(Minute)"),dataIndex:"timeout_mins"},{label:t("Fail Rollback"),dataIndex:"disable_rollback",tooltip:c.rollbackTip,render:e=>e?t("Disable"):t("Enable")}];return{title:t("Startup Parameters"),options:e}}}a.BaseDetail=m;var p=(0,o.inject)("rootStore")((0,o.observer)(m));a.default=p},3913:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.Resource=void 0;var l=i(r(101)),s=i(r(37)),u=r(382),o=i(r(1114)),d=r(3914),c=r(1163);class m extends o.default{constructor(){super(...arguments),(0,s.default)(this,"getResourceUrl",((e,t)=>{var a;if(!e)return"-";var{resource_type:r}=t,n=(0,l.default)(a=this.resourceMap).call(a,(e=>e.key===r));if(!n)return e;var{isAdmin:i,routeName:s}=n,u=this.getLinkRender(s,e,{id:e});return i?this.isAdminPage?u:e:s?u:e})),(0,s.default)(this,"getColumns",(()=>[{title:t("Stack Resource"),dataIndex:"logical_resource_id"},{title:t("Resource"),dataIndex:"physical_resource_id",render:(e,t)=>this.getResourceUrl(e,t)},{title:t("Stack Resource Type"),dataIndex:"resource_type"},{title:t("Created At"),dataIndex:"creation_time",isHideable:!0,valueRender:"sinceTime"},{title:t("Resource Status"),dataIndex:"resource_status",isHideable:!0,render:e=>c.stackStatus[e]||e},{title:t("Resource Status Reason"),dataIndex:"resource_status_reason",isStatus:!1,isHideable:!0,width:300}]))}init(){this.store=new d.StackResourceStore}get policy(){return"resource:index"}get name(){return t("stack resources")}get hideSearch(){return!0}get resourceMap(){return[{key:"OS::Cinder::EncryptedVolumeType",isAdmin:!0,routeName:"volumeTypeDetail"},{key:"OS::Cinder::QoSAssociation",isAdmin:!0,routeName:"volumeTypeQosDetail"},{key:"OS::Cinder::QoSSpecs",isAdmin:!0,routeName:"volumeTypeQosDetail"},{key:"OS::Cinder::Volume",routeName:"volumeDetail"},{key:"OS::Cinder::VolumeType",isAdmin:!0,routeName:"volumeTypeDetail"},{key:"OS::Glance::WebImage",routeName:"imageDetail"},{key:"OS::Heat::Stack",routeName:"stackDetail"},{key:"OS::Ironic::Port",routeName:"virtualAdapterDetail"},{key:"OS::Keystone::Domain",routeName:"domainDetail",isAdmin:!0},{key:"OS::Keystone::Group",routeName:"userGroupDetail",isAdmin:!0},{key:"OS::Keystone::Project",routeName:"projectDetail",isAdmin:!0},{key:"OS::Keystone::Role",routeName:"roleDetail",isAdmin:!0},{key:"OS::Keystone::User",routeName:"userDetail",isAdmin:!0},{key:"OS::Neutron::FloatingIP",routeName:"fipDetail"},{key:"OS::Neutron::LBaaS::LoadBalancer",routeName:"lbDetail"},{key:"OS::Neutron::Net",routeName:"networkDetail"},{key:"OS::Neutron::Port",routeName:"virtualAdapterDetail"},{key:"OS::Neutron::QoSPolicy",routeName:"networkQosDetail"},{key:"OS::Neutron::Router",routeName:"routerDetail"},{key:"OS::Neutron::SecurityGroup",routeName:"securityGroupDetail"},{key:"OS::Nova::Flavor",isAdmin:!0,routeName:"flavorDetail"},{key:"OS::Nova::KeyPair",routeName:"keypairDetail"},{key:"OS::Nova::Server",routeName:"instanceDetail"},{key:"OS::Nova::ServerGroup",routeName:"serverGroupDetail"},{key:"OS::Octavia::LoadBalancer",routeName:"lbDetail"}]}}a.Resource=m;var p=(0,u.inject)("rootStore")((0,u.observer)(m));a.default=p},3914:function(e,t,a){"use strict";var r=a(19),n=a(21);r(t,"__esModule",{value:!0}),t.default=t.StackResourceStore=void 0;var i=n(a(49)),l=n(a(54));class s extends l.default{get client(){return i.default.heat.stacks}get responseKey(){return"resource"}listFetchByClient(e,t){var{id:a,name:r}=t;return this.client.resources({id:a,name:r},e)}get paramsFunc(){return()=>{}}}t.StackResourceStore=s;var u=new s;t.default=u},3915:function(e,a,r){"use strict";var n=r(19),i=r(21);n(a,"__esModule",{value:!0}),a.default=a.Event=void 0;var l=i(r(37)),s=i(r(0)),u=r(382),o=i(r(1114)),d=r(3916),c=r(1163);class m extends o.default{constructor(){super(...arguments),(0,l.default)(this,"getColumns",(()=>[{title:t("Event Time"),dataIndex:"event_time",valueRender:"toLocalTime"},{title:t("Stack Resource"),dataIndex:"logical_resource_id",render:e=>s.default.createElement("div",{style:{wordWrap:"break-word",wordBreak:"break-word"}},e)},{title:t("Resource"),dataIndex:"physical_resource_id",render:e=>s.default.createElement("div",{style:{wordWrap:"break-word",wordBreak:"break-word"}},e)},{title:t("Resource Status"),dataIndex:"resource_status",isHideable:!0,render:e=>c.stackStatus[e]||e},{title:t("Resource Status Reason"),dataIndex:"resource_status_reason",isHideable:!0,isStatus:!1,width:300}]))}init(){this.store=new d.StackEventStore}get policy(){return"events:index"}get aliasPolicy(){return"heat:events:index"}get name(){return t("stack events")}get hideSearch(){return!0}}a.Event=m;var p=(0,u.inject)("rootStore")((0,u.observer)(m));a.default=p},3916:function(e,t,a){"use strict";var r=a(19),n=a(21);r(t,"__esModule",{value:!0}),t.default=t.StackEventStore=void 0;var i=n(a(49)),l=n(a(54));class s extends l.default{get client(){return i.default.heat.stacks}get responseKey(){return"event"}listFetchByClient(e,t){var{id:a,name:r}=t;return this.client.events({id:a,name:r},e)}get paramsFunc(){return()=>{}}}t.StackEventStore=s;var u=new s;t.default=u},3917:function(e,t,a){"use strict";var r=a(156),n=a(19),i=a(25),l=a(21);n(t,"__esModule",{value:!0}),t.default=t.Template=void 0,a(1146);var s=l(a(1147)),u=l(a(37)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=f(t);if(a&&a.has(e))return a.get(e);var r={},l=n&&i;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=l?i(e,s):null;u&&(u.get||u.set)?n(r,s,u):r[s]=e[s]}r.default=e,a&&a.set(e,r);return r}(a(0)),d=a(382),c=a(545),m=l(a(1285)),p=(a(167),l(a(1234)));function f(e){if("function"!=typeof r)return null;var t=new r,a=new r;return(f=function(e){return e?a:t})(e)}class v extends o.Component{constructor(e){super(e),(0,u.default)(this,"fetchData",(()=>{this.store.getTemplate(this.params)})),(0,u.default)(this,"renderContent",(()=>{var{template:e}=this.store,t={value:m.default.dump(e),mode:"yaml",options:{readOnly:!0}};return o.default.createElement(p.default,t)})),this.store=new c.StackStore}componentDidMount(){this.fetchData()}get params(){var{params:e}=this.props.match;return e}render(){return o.default.createElement(s.default,{style:{marginLeft:16,marginRight:16}},this.renderContent())}}t.Template=v;var h=(0,d.inject)("rootStore")((0,d.observer)(v));t.default=h}}]);