(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1127:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.healthProtocols=a.poolProtocols=a.listenerProtocols=a.sslParseMethod=a.getCertificateColumns=a.certificateStatus=a.certificateMode=a.provisioningStatusCodes=a.operatingStatusCodes=void 0;var l=n(r(62)),o=n(r(0)),s={ONLINE:t("Online"),DRAINING:t("Draining"),OFFLINE:t("Offline"),DEGRADED:t("Degraded"),ERROR:t("Error"),NO_MONITOR:t("No Monitor")};a.operatingStatusCodes=s;var d={ACTIVE:t("Active"),DELETED:t("Deleted"),ERROR:t("Error"),PENDING_CREATE:t("Pending Create"),PENDING_UPDATE:t("Pending Update"),PENDING_DELETE:t("Pending Delete")};a.provisioningStatusCodes=d;var u={SERVER:t("Server Certificate"),CA:t("CA Certificate")};a.certificateMode=u;var c={ACTIVE:t("Active"),ERROR:t("Error")};a.certificateStatus=c;a.getCertificateColumns=e=>[{title:t("Name"),dataIndex:"name"},{title:t("Certificate Type"),dataIndex:"mode",render:e=>u[e]||e},{title:t("Expires At"),dataIndex:"expiration",valueRender:"toLocalTime"},{title:t("Domain Name"),dataIndex:"domain",render:e=>e||"-"},{title:t("Listener"),dataIndex:"listener",render:t=>t?(0,l.default)(t).call(t,(t=>o.default.createElement("div",{key:t.id},e.getLinkRender("lbListenerDetail",t.name,{loadBalancerId:t.lb,id:t.id},null)))):"-"},{title:t("Status"),dataIndex:"status",render:e=>c[e]||e},{title:t("Created At"),dataIndex:"created",valueRender:"toLocalTime"}];var f=[{label:t("One-way authentication"),value:"one-way"},{label:t("Two-way authentication"),value:"two-way"}];a.sslParseMethod=f;a.listenerProtocols=[{label:"HTTP",value:"HTTP"},{label:"TCP",value:"TCP"},{label:"HTTPS",value:"TERMINATED_HTTPS"},{label:"UDP",value:"UDP"}];a.poolProtocols=[{label:"HTTP",value:"HTTP"},{label:"TCP",value:"TCP"},{label:"UDP",value:"UDP"}];a.healthProtocols=[{label:"HTTP",value:"HTTP"},{label:"TCP",value:"TCP"},{label:"UDP",value:"UDP-CONNECT"}]},1143:function(e,t,a){"use strict";var r=a(35),i=a(44),n=a(33),l=a(25),o=a(28),s=a(45),d=a(46),u=a(19),c=a(21);u(t,"__esModule",{value:!0}),t.default=t.VpnIPsecConnectionStore=void 0;var f,p=c(a(25)),h=c(a(37)),m=c(a(52)),v=c(a(55)),g=a(32),_=a(47),b=c(a(1207)),y=c(a(1208)),A=c(a(49)),I=c(a(54));function S(e,t){var a=r(e);if(i){var o=i(e);t&&(o=n(o).call(o,(function(t){return l(e,t).enumerable}))),a.push.apply(a,o)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=S(Object(r),!0)).call(a,(function(t){(0,h.default)(e,t,r[t])}));else if(s)d(e,s(r));else{var i;o(i=S(Object(r))).call(i,(function(t){u(e,t,l(r,t))}))}}return e}var x=(f=class extends I.default{get client(){return A.default.neutron.ipsecSiteConnections}get listFilterByProject(){return!0}fetchDetailWithPolicyDetail(e){var t=this;return(0,m.default)((function*(){var{id:a,ikePolicyID:r,ipsecPolicyID:i,all_projects:n}=e;t.isLoading=!0;var l=yield t.client.show(a,t.getDetailParams({all_projects:n})),o=yield b.default.fetchDetail({id:r}),s=yield y.default.fetchDetail({id:i}),d=(0,_.get)(l,t.responseKey)||l,u=t.mapperBeforeFetchProject(d);u=C(C({},u),{},{ikeDetail:o,ipsecDetail:s});try{var c=yield t.detailDidFetch(u,n),f=t.mapper(c);t.detail=f}catch(e){t.detail=u}return t.isLoading=!1,t.detail}))()}},(0,v.default)(f.prototype,"fetchDetailWithPolicyDetail",[g.action],(0,p.default)(f.prototype,"fetchDetailWithPolicyDetail"),f.prototype),f);t.VpnIPsecConnectionStore=x;var w=new x;t.default=w},1172:function(e,t,a){"use strict";var r=a(35),i=a(44),n=a(33),l=a(25),o=a(28),s=a(45),d=a(46),u=a(19),c=a(21);u(t,"__esModule",{value:!0}),t.default=t.ListenerStore=void 0;var f=c(a(62)),p=c(a(407)),h=c(a(52)),m=c(a(37)),v=c(a(49)),g=c(a(54));function _(e,t){var a=r(e);if(i){var o=i(e);t&&(o=n(o).call(o,(function(t){return l(e,t).enumerable}))),a.push.apply(a,o)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=_(Object(r),!0)).call(a,(function(t){(0,m.default)(e,t,r[t])}));else if(s)d(e,s(r));else{var i;o(i=_(Object(r))).call(i,(function(t){u(e,t,l(r,t))}))}}return e}class y extends g.default{get client(){return v.default.octavia.listeners}get poolClient(){return v.default.octavia.pools}get listFilterByProject(){return!0}get mapperBeforeFetchProject(){return e=>{var t;return b(b({},e),{},{lbIds:(0,f.default)(t=e.loadbalancers).call(t,(e=>e.id))})}}detailDidFetch(e){var t=this;return(0,h.default)((function*(){var a,{default_pool_id:r,default_tls_container_ref:i,client_ca_tls_container_ref:n,sni_container_refs:l}=e,[,o]=(i||"").split("/containers/"),[,s]=(n||"").split("/secrets/"),d=(0,f.default)(a=l||[]).call(a,(e=>{var[,t]=e.split("/containers/");return t}));if((0,p.default)(e,{serverCertificateId:o,caCertificateId:s,sniCertificateId:d}),!r)return e;try{var u=yield t.poolClient.show(r);return e.default_pool=u.pool,e}catch(t){return e}}))()}}t.ListenerStore=y;var A=new y;t.default=A},1204:function(e,t,a){"use strict";var r=a(35),i=a(44),n=a(33),l=a(25),o=a(28),s=a(45),d=a(46),u=a(19),c=a(21);u(t,"__esModule",{value:!0}),t.default=t.ContainersStore=void 0;var f,p,h=c(a(33)),m=c(a(219)),v=c(a(62)),g=c(a(65)),_=c(a(28)),b=c(a(101)),y=c(a(407)),A=c(a(322)),I=c(a(25)),S=c(a(52)),C=c(a(72)),x=c(a(37)),w=(c(a(73)),c(a(55))),P=c(a(54)),E=c(a(49)),k=a(32),D=a(1205),B=c(a(1172));function N(e,t){var a=r(e);if(i){var o=i(e);t&&(o=n(o).call(o,(function(t){return l(e,t).enumerable}))),a.push.apply(a,o)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=N(Object(r),!0)).call(a,(function(t){(0,x.default)(e,t,r[t])}));else if(s)d(e,s(r));else{var i;o(i=N(Object(r))).call(i,(function(t){u(e,t,l(r,t))}))}}return e}var R=(f=class extends P.default{constructor(){super(...arguments),(0,x.default)(this,"updateMarkerParams",((e,t)=>({limit:e,offset:t}))),(0,C.default)(this,"delete",p,this)}get client(){return E.default.barbican.containers}get payloadClient(){return E.default.barbican.secrets.payload}get fetchListByLimit(){return!0}get secretStore(){return new D.SecretsStore}get mapper(){return e=>{var{container_ref:t,algorithm:a}=e,[,r]=t.split("/containers/"),{domain:i,expiration:n}=a?JSON.parse(a):{};return M(M({},e),{},{id:r,domain:i,expiration:n})}}requestListAllByLimit(e,t){var a=this;return(0,S.default)((function*(){for(var r=!0,i=[];r;){var n=i.length||"",l=yield a.requestListByMarker(e,t,n),o=a.getListDataFromResult(l);i=[...i,...o],(t>=l.total||n>=l.total)&&(r=!1)}return i}))()}updateItem(e,t){var{container_ref:a}=e,r=(0,h.default)(t).call(t,(e=>{var t=[e.default_tls_container_ref,e.client_ca_tls_container_ref,...e.sni_container_refs];return(0,m.default)(t).call(t,a)}));return r.length&&(e.listener=(0,v.default)(r).call(r,(e=>({id:e.id,name:e.name,lb:e.lbIds[0]})))),e}listDidFetch(e){var t=this;return(0,S.default)((function*(){if(0===e.length)return e;var[a,r]=yield g.default.all([t.secretStore.fetchList({mode:"SERVER"}),B.default.fetchList()]),i=(0,v.default)(e).call(e,(e=>{var{secret_refs:i=[]}=e;return 0===i.length?e.hidden=!0:((0,_.default)(i).call(i,(t=>{var{secret_ref:r=""}=t,[,i]=r.split("/secrets/"),n=(0,b.default)(a).call(a,(e=>e.id===i));n?((0,y.default)(t,{secret_info:n}),(0,y.default)(e,{algorithm:n.algorithm,mode:n.mode})):e.hidden=!0})),t.updateItem(e,r)),M({},e)}));return(0,h.default)(i).call(i,(e=>!0!==e.hidden))}))()}detailDidFetch(e){var t=this;return(0,S.default)((function*(){var a,{secret_refs:r=[]}=e,[i,n]=yield g.default.all([t.secretStore.fetchList({mode:"SERVER"}),B.default.fetchList()]),l=[];(0,_.default)(r).call(r,function(){var t=(0,S.default)((function*(t){var{secret_ref:a=""}=t,[,r]=a.split("/secrets/"),n=(0,b.default)(i).call(i,(e=>e.id===r));n&&(l.push(n.id),(0,y.default)(t,{secret_info:n}),(0,y.default)(e,{algorithm:n.algorithm,mode:n.mode}))}));return function(e){return t.apply(this,arguments)}}()),t.updateItem(e,n);var o=yield g.default.all((0,v.default)(l).call(l,(e=>t.payloadClient.list(e,{},{headers:{Accept:"text/plain"}}))));return(0,_.default)(a=o||[]).call(a,((e,t)=>{r[t].secret_info.payload=e})),e}))()}create(e){var t=this;return(0,S.default)((function*(){var a={name:e.name,mode:e.mode,payload_content_type:"text/plain",secret_type:"certificate",algorithm:(0,A.default)({domain:e.domain,expiration:e.expiration})},r=M(M({},a),{},{payload:e.certificate}),i=[t.secretStore.create(r)];if("SERVER"===e.mode){var n=M(M({},a),{},{payload:e.private_key});i.push(t.secretStore.create(n))}var[l,o]=yield g.default.all(i),s=[{name:"certificate",secret_ref:l.secret_ref}];o&&s.push({name:"private_key",secret_ref:o.secret_ref});var d={type:"certificate",name:e.name,secret_refs:s};return t.client.create(d)}))()}},(0,w.default)(f.prototype,"create",[k.action],(0,I.default)(f.prototype,"create"),f.prototype),p=(0,w.default)(f.prototype,"delete",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,S.default)((function*(t){var{id:a,secret_refs:r=[]}=t;return yield g.default.all((0,v.default)(r).call(r,(t=>{var{secret_ref:a=""}=t,[,r]=a.split("/secrets/");return e.secretStore.delete({id:r})}))),e.submitting(e.client.delete(a))}));return function(e){return t.apply(this,arguments)}}()}}),f);t.ContainersStore=R;var j=new R;t.default=j},1205:function(e,t,a){"use strict";var r=a(35),i=a(44),n=a(33),l=a(25),o=a(28),s=a(45),d=a(46),u=a(19),c=a(21);u(t,"__esModule",{value:!0}),t.default=t.SecretsStore=void 0;var f,p=c(a(33)),h=c(a(219)),m=c(a(62)),v=c(a(65)),g=c(a(322)),_=c(a(25)),b=c(a(71)),y=c(a(52)),A=c(a(37)),I=c(a(55)),S=c(a(54)),C=c(a(49)),x=a(32),w=c(a(1172));function P(e,t){var a=r(e);if(i){var o=i(e);t&&(o=n(o).call(o,(function(t){return l(e,t).enumerable}))),a.push.apply(a,o)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=P(Object(r),!0)).call(a,(function(t){(0,A.default)(e,t,r[t])}));else if(s)d(e,s(r));else{var i;o(i=P(Object(r))).call(i,(function(t){u(e,t,l(r,t))}))}}return e}var k=(f=class extends S.default{constructor(){super(...arguments),(0,A.default)(this,"updateMarkerParams",((e,t)=>({limit:e,offset:t})))}get client(){return C.default.barbican.secrets}get payloadClient(){return C.default.barbican.secrets.payload}get fetchListByLimit(){return!0}get paramsFunc(){return e=>E({},e)}get mapper(){return e=>{var{secret_ref:t,algorithm:a}=e,[,r]=t.split("/secrets/"),{domain:i,expiration:n}=a?JSON.parse(a):{};return E(E({},e),{},{id:r,domain:i,expiration:n})}}requestListAllByLimit(e,t){var a=this;return(0,y.default)((function*(){for(var r=!0,i=[];r;){var n=i.length||"",l=yield a.requestListByMarker(e,t,n),o=a.getListDataFromResult(l);i=[...i,...o],(t>=l.total||n>=l.total)&&(r=!1)}return i}))()}updateItem(e,t){var{secret_ref:a}=e,r=(0,p.default)(t).call(t,(e=>{var t=[e.default_tls_container_ref,e.client_ca_tls_container_ref,...e.sni_container_refs];return(0,h.default)(t).call(t,a)}));return r.length&&(e.listener=(0,m.default)(r).call(r,(e=>({id:e.id,name:e.name,lb:e.lbIds[0]})))),e}fetchDetail(e){var t=this;return(0,y.default)((function*(){var{id:a,silent:r}=e;r||(t.isLoading=!0);var[i,n,l]=yield v.default.all([t.client.show(a,{},{headers:{Accept:"application/json"}}),t.payloadClient.list(a,{},{headers:{Accept:"text/plain"}}),w.default.fetchList()]);i.payload=n,t.updateItem(i,l);var o=t.mapper(i||{});return t.detail=o,t.isLoading=!1,o}))()}listDidFetch(e){var t=this;return(0,y.default)((function*(){if(0===e.length)return e;var a=yield w.default.fetchList();return(0,m.default)(e).call(e,(e=>(t.updateItem(e,a),E({},e))))}))()}create(e){var t=this;return(0,y.default)((function*(){var{expiration:a,domain:r,algorithm:i}=e,n=E(E({},(0,b.default)(e,["expiration","domain","algorithm"])),{},{algorithm:i||(0,g.default)({domain:r,expiration:a})});return t.client.create(n)}))()}},(0,I.default)(f.prototype,"fetchDetail",[x.action],(0,_.default)(f.prototype,"fetchDetail"),f.prototype),(0,I.default)(f.prototype,"create",[x.action],(0,_.default)(f.prototype,"create"),f.prototype),f);t.SecretsStore=k;var D=new k;t.default=D},1206:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.ipsecPolicyTransformProtocolOptions=a.ipsecPolicyEncapsulationModeOptions=a.ikePolicyIKEVersionOptions=a.pfsOptions=a.encryptionAlgorithmOptions=a.authAlgorithmOptions=a.vpnStatusOptions=a.vpnStatus=void 0;var l,o,s,d,u,c,f,p=n(r(62)),h=n(r(35)),m={ACTIVE:t("Active"),DOWN:t("Down"),BUILD:t("Build"),ERROR:t("Error"),PENDING_CREATE:t("Pending Create"),PENDING_UPDATE:t("Pending Update"),PENDING_DELETE:t("Pending Delete")};a.vpnStatus=m;var v=(0,p.default)(l=(0,h.default)(m)).call(l,(e=>({label:m[e],value:e,key:e})));a.vpnStatusOptions=v;var g=(0,p.default)(o=["sha1","sha256","sha384","sha512"]).call(o,(e=>({label:e,value:e,key:e})));a.authAlgorithmOptions=g;var _=(0,p.default)(s=["3des","aes-128","aes-192","aes-256"]).call(s,(e=>({label:e,value:e,key:e})));a.encryptionAlgorithmOptions=_;var b=(0,p.default)(d=["group2","group5","group14"]).call(d,(e=>({label:e,value:e,key:e})));a.pfsOptions=b;var y=(0,p.default)(u=["v1","v2"]).call(u,(e=>({label:e,value:e,key:e})));a.ikePolicyIKEVersionOptions=y;var A=(0,p.default)(c=["tunnel","transport"]).call(c,(e=>({label:e,value:e,key:e})));a.ipsecPolicyEncapsulationModeOptions=A;var I=(0,p.default)(f=["esp","ah","ah-esp"]).call(f,(e=>({label:e,value:e,key:e})));a.ipsecPolicyTransformProtocolOptions=I},1207:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.default=t.VpnIKEPolicyStore=void 0;var n=i(a(49)),l=i(a(54));class o extends l.default{get client(){return n.default.neutron.ikePolicies}get listResponseKey(){return"ikepolicies"}get listFilterByProject(){return!0}}t.VpnIKEPolicyStore=o;var s=new o;t.default=s},1208:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.default=t.VpnIPsecPolicyStore=void 0;var n=i(a(49)),l=i(a(54));class o extends l.default{get client(){return n.default.neutron.ipsecPolicies}get listResponseKey(){return"ipsecpolicies"}get listFilterByProject(){return!0}}t.VpnIPsecPolicyStore=o;var s=new o;t.default=s},1222:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.default=t.VpnServicesStore=void 0;var n=i(a(49)),l=i(a(54));class o extends l.default{get client(){return n.default.neutron.vpnservices}get listFilterByProject(){return!0}}t.VpnServicesStore=o;var s=new o;t.default=s},1223:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.default=t.VpnEndPointGroupStore=void 0;var n=i(a(49)),l=i(a(54));class o extends l.default{get client(){return n.default.neutron.endpointGroups}get listFilterByProject(){return!0}}t.VpnEndPointGroupStore=o;var s=new o;t.default=s},1262:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.default=t.PoolStore=void 0;var n=i(a(49)),l=i(a(54));class o extends l.default{get client(){return n.default.octavia.pools}get listFilterByProject(){return!0}}t.PoolStore=o;var s=new o;t.default=s},1263:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.default=t.PoolMemberStore=void 0;var n,l,o=i(a(25)),s=i(a(72)),d=(i(a(37)),i(a(73)),i(a(55))),u=a(32),c=i(a(49)),f=i(a(54)),p=(n=class extends f.default{constructor(){super(...arguments),(0,s.default)(this,"delete",l,this)}get client(){return this.poolClient.members}get poolClient(){return c.default.octavia.pools}get responseKey(){return"member"}get listFilterByProject(){return!0}listFetchByClient(e,t){var{pool_id:a}=t;return this.client.list(a)}create(e){var{default_pool_id:t,data:a}=e,r={};return r[this.listResponseKey]=a,this.submitting(this.client.create(t,r))}batchUpdate(e){var{default_pool_id:t,data:a}=e,r={};return r[this.listResponseKey]=a,this.submitting(this.poolClient.batchUpdateMembers(t,r))}update(e){var{default_pool_id:t,member_id:a,data:r}=e,i={};return i[this.responseKey]=r,this.submitting(this.client.update(t,a,i))}},(0,d.default)(n.prototype,"create",[u.action],(0,o.default)(n.prototype,"create"),n.prototype),(0,d.default)(n.prototype,"batchUpdate",[u.action],(0,o.default)(n.prototype,"batchUpdate"),n.prototype),(0,d.default)(n.prototype,"update",[u.action],(0,o.default)(n.prototype,"update"),n.prototype),l=(0,d.default)(n.prototype,"delete",[u.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{var{id:t,default_pool_id:a}=e;return this.submitting(this.client.delete(a,t))}}}),n);t.PoolMemberStore=p;var h=new p;t.default=h},1321:function(e,t,a){var r=a(3681);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};a(76)(r,i);r.locals&&(e.exports=r.locals)},1322:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.Algorithm=a.algorithmTip=a.BackendProtocol=void 0;var l,o=n(r(62)),s=n(r(35)),d=[{label:t("TCP"),value:"TCP"},{label:t("PING"),value:"PING"}];a.BackendProtocol=d;var u={LEAST_CONNECTIONS:t("LEAST_CONNECTIONS"),ROUND_ROBIN:t("ROUND_ROBIN"),SOURCE_IP:t("SOURCE_IP")},c={LEAST_CONNECTIONS:t("A dynamic scheduling algorithm that estimates the server load based on the number of currently active connections. The system allocates new connection requests to the server with the least number of current connections. Commonly used for long connection services, such as database connections and other services."),ROUND_ROBIN:t("Each new connection request is assigned to the next server in order, and all requests are finally divided equally among all servers. Commonly used for short connection services, such as HTTP services."),SOURCE_IP:t("Perform a consistent hash operation on the source IP address of the request to obtain a specific value. At the same time, the back-end server is numbered, and the request is distributed to the server with the corresponding number according to the calculation result. This can enable load distribution of visits from different source IPs, and at the same time enable requests from the same client IP to always be dispatched to a specific server. This method is suitable for load balancing TCP protocol without cookie function.")};a.algorithmTip=c;var f=(0,o.default)(l=(0,s.default)(u)).call(l,(e=>({label:u[e],value:e})));a.Algorithm=f},1323:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(3786)),l=i(a(3788)),o=i(a(3789)),s={actionConfigsContainer:{rowActions:{firstAction:l.default,moreActions:[]},batchActions:[l.default],primaryActions:[n.default]},actionConfigsSecret:{rowActions:{firstAction:o.default,moreActions:[]},batchActions:[o.default],primaryActions:[n.default]}};t.default=s},1478:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Networks=void 0;var p=f(r(518)),h=f(r(33)),m=f(r(37)),v=r(382),g=f(r(1114)),_=r(522),b=r(321),y=r(319),A=f(r(1479));function I(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=I(Object(r),!0)).call(a,(function(t){(0,m.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=I(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}class C extends g.default{constructor(){super(...arguments),(0,m.default)(this,"updateFetchParamsByPage",(e=>this.isAdminPage||this.isAllTab?S(S({},e),{},{all_projects:!0}):this.isProjectTab?S(S({},e),{},{project_id:this.currentProjectId}):this.isSharedTab?S(S({},e),{},{shared:!0}):this.isExternalTab?S(S({},e),{},{"router:external":!0}):S({},e)))}init(){this.store=new b.NetworkStore,this.downloadStore=new b.NetworkStore}get isFilterByBackend(){return!0}get isSortByBackend(){return!0}get defaultSortKey(){return"status"}get policy(){return"get_network"}get name(){return t("networks")}get actionConfigs(){return A.default}get hasTab(){return!this.isAdminPage}get adminPageHasProjectFilter(){return!0}get tab(){if(this.isAdminPage)return null;var{tab:e="projectNetwork"}=this.props;return e}get isProjectTab(){return"projectNetwork"===this.tab}get isSharedTab(){return"sharedNetwork"===this.tab}get isExternalTab(){return"externalNetwork"===this.tab}get isAllTab(){return"allNetwork"===this.tab}getColumns(){var e=(0,_.networkColumns)(this);return this.isAdminPage||this.isAllTab?((0,p.default)(e).call(e,1,0,{title:t("Project ID/Name"),dataIndex:"project_name",isHideable:!0,sortKey:"project_id"}),e):this.isProjectTab?(0,h.default)(e).call(e,(e=>"project_id"!==e.dataIndex)):this.isSharedTab?(0,h.default)(e).call(e,(e=>"shared"!==e.dataIndex)):this.isExternalTab?(0,h.default)(e).call(e,(e=>"router:external"!==e.dataIndex)):e}get searchFilters(){var e={label:t("Name"),name:"name"},a={label:t("Shared"),name:"shared",options:y.yesNoOptions},r={label:t("External"),name:"router:external",options:y.yesNoOptions},i={label:t("Project Range"),name:"project_id",options:[{label:t("Current Project"),key:this.currentProjectId},{label:t("All"),key:"all"}]};return this.isSharedTab?[e,r,i]:this.isExternalTab?[e,a,i]:[e,a,r]}}a.Networks=C;var x=(0,v.inject)("rootStore")((0,v.observer)(C));a.default=x},1479:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(1480)),l=i(a(1482)),o=i(a(3656)),s={rowActions:{firstAction:i(a(3657)).default,moreActions:[{action:l.default},{action:o.default}]},batchActions:[o.default],primaryActions:[n.default]};t.default=s},1480:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.CreateNetwork=void 0;var p=f(r(62)),h=f(r(33)),m=f(r(91)),v=f(r(65)),g=f(r(52)),_=f(r(71)),b=f(r(37)),y=r(382),A=r(1113),I=r(514),S=f(r(321)),C=f(r(384)),x=r(47),w=f(r(1145)),P=r(1123),E=f(r(1481)),k=r(522),D=f(r(559));function B(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=B(Object(r),!0)).call(a,(function(t){(0,b.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=B(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}var{physicalNetworkArray:M,segmentationNetworkArray:R,segmentationNetworkRequireArray:j,validateAllocationPoolsWithGatewayIp:T,checkDNS:F,checkIpv6DNS:Q,checkHostRoutes:L,checkIpv6HostRoutes:O,getAllocationPools:q,getHostRouters:V}=D.default,{isIpCidr:H,isIPv6Cidr:U,isIpv6:G}=I.ipValidate,{nameValidateWithoutChinese:K}=I.nameTypeValidate,J=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{left:r=0}=e||{},{left:i=0}=t||{};return a?0!==r&&0!==i?1:0:0!==r?1:0};class W extends A.ModalAction{constructor(){super(...arguments),(0,b.default)(this,"onSubmit",(e=>{var{name:t,project_id:a,provider_network_type:r,provider_physical_network:i,provider_segmentation_id:n,shared:l,external_network:o,availableZone:s,allocation_pools:d,host_routes:u,description:c,mtu:f,port_security_enabled:p}=e,h=(0,_.default)(e,["name","project_id","provider_network_type","provider_physical_network","provider_segmentation_id","shared","external_network","availableZone","allocation_pools","host_routes","description","mtu","port_security_enabled"]),m=q(d),v=V(u),g={name:t,description:c,availability_zone_hints:[s],port_security_enabled:p};f&&(g.mtu=f);var b={"router:external":o,project_id:a,"provider:network_type":r,"provider:physical_network":i,"provider:segmentation_id":n},y={shared:l},A=N({},g);return this.isAdminPage&&(A=N(N({},A),b)),this.isSystemAdmin&&(A=N(N({},A),y)),S.default.createAndMore(A,N(N({},h),{},{allocation_pools:m,host_routes:v}))})),(0,b.default)(this,"onOk",((e,a,r)=>(this.values=e,this.onSubmit(e,a).then((()=>{!this.isModal&&this.routing.push(this.listUrl),w.default.success(this.successText),r&&(0,x.isFunction)(r)&&r(!0,!1)}),(a=>{var{type:i,error:n}=JSON.parse(a);"create_network"===i?w.default.errorWithDetail(n,this.errorText):"create_subnet"===i&&w.default.errorWithDetail(n,t("Unable to {action}, instance: {name}.",{action:t("Create Subnet"),name:e.subnet_name})),r&&(0,x.isFunction)(r)&&r(!1,!0)}))))),(0,b.default)(this,"checkCidr",(e=>{var{ip_version:t="ipv4"}=this.state;return!("ipv4"===t&&!H(e))&&!("ipv6"===t&&!U(e))})),(0,b.default)(this,"checkGateway",(e=>!!(0,x.isEmpty)(e)||!!G(e))),(0,b.default)(this,"validateAllocationPools",((e,t)=>T.call(this,e,t))),(0,b.default)(this,"onProjectChange",(e=>{this.setState({projectId:e},(()=>{this.getQuota()}))})),(0,b.default)(this,"onCreateSubnetChange",(e=>{this.setState({create_subnet:e}),S.default.updateCreateWithSubnet(e)}))}get name(){return t("create network")}init(){S.default.updateCreateWithSubnet(!1),this.state.networkQuota={},this.state.subnetQuota={},this.state.quotaLoading=!0,this.state.create_subnet=!1,this.state.projectId=this.currentProjectId,this.projectStore=C.default,E.default.fetchAvailableZones(),this.isAdminPage&&C.default.fetchList(),this.getQuota()}get isSystemAdmin(){return(0,P.checkSystemAdmin)()}static get disableSubmit(){var{neutronQuota:{network:e={},subnet:t={}}}=C.default,{createWithSubnet:a=!1}=S.default;return 0===J(e,t,a)}static get showQuota(){return!0}get showQuota(){return!0}getQuota(){var e=this;return(0,g.default)((function*(){var{projectId:t}=e.state;e.setState({quotaLoading:!0});var a=yield e.projectStore.fetchProjectNeutronQuota(t),{network:r={},subnet:i={}}=a||{};e.setState({networkQuota:r,subnetQuota:i,quotaLoading:!1})}))()}get quotaInfo(){var{networkQuota:e={},subnetQuota:a={},quotaLoading:r,create_subnet:i}=this.state;if(r)return[];var n=J(e,a,i);return[N(N({},e),{},{add:n,name:"network",title:t("Network")}),N(N({},a),{},{add:i?n:0,name:"subnet",title:t("Subnet"),type:"line"})]}get defaultValue(){return{project_id:this.currentProjectId,enable_dhcp:!0,provider_network_type:"vxlan",ip_version:"ipv4",disable_gateway:!1,more:!1,port_security_enabled:!0,ipv6_ra_mode:"slaac",ipv6_address_mode:"slaac"}}get availableZones(){var e,t;return(0,p.default)(e=(0,h.default)(t=E.default.availableZones||[]).call(t,(e=>"available"===e.state&&"network"===e.resource))).call(e,(e=>({value:e.name,label:e.name})))}get SegIDTips(){var{provider_network_type:e="vxlan"}=this.state;switch(e){case"vxlan":return t("For VXLAN networks, valid segmentation IDs are 1 to 16777215");case"vlan":return t("For VLAN networks, valid segmentation IDs are 1 to 4094");case"gre":return t("For GRE networks, valid segmentation IDs are 1 to 4294967295");default:return t("For VXLAN networks, valid segmentation IDs are 1 to 16777215")}}get SegMax(){var{provider_network_type:e="vxlan"}=this.state;switch(e){case"vxlan":return 16777215;case"vlan":return 4094;case"gre":return 4294967295;default:return 16777215}}get formItems(){var e,{more:a,create_subnet:r=!1,provider_network_type:i="vxlan",ip_version:n="ipv4",disable_gateway:l=!1}=this.state,o=(0,p.default)(e=C.default.list.data).call(e,(e=>({label:e.name,value:e.id}))),s=this.isAdminPage&&(0,m.default)(M).call(M,i)>-1,d=this.isAdminPage&&(0,m.default)(M).call(M,i)>-1,u=this.isAdminPage&&(0,m.default)(R).call(R,i)>-1,c=this.isAdminPage&&(0,m.default)(j).call(j,i)>-1,f="ipv4"===n;return[{name:"name",label:t("Network Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea",required:!1},{name:"availableZone",label:t("Available Zone"),type:"select",placeholder:t("Please select"),required:!0,options:this.availableZones},{name:"mtu",label:t("MTU"),type:"input-number",min:68,max:9e3,extra:t("Minimum value is 68 for IPv4, and 1280 for IPv6.")},{name:"create_subnet",label:t("Create Subnet"),type:"check",onChange:this.onCreateSubnetChange},{name:"shared",label:t("Shared"),type:"check",hidden:!this.isSystemAdmin},{name:"port_security_enabled",label:t("Port Security Enabled"),type:"switch",required:!0},{name:"external_network",label:t("External Network"),type:"check",hidden:!this.isAdminPage},{name:"project_id",label:t("Project"),type:"select",showSearch:!0,hidden:!this.isAdminPage,required:this.isAdminPage,options:o,onChange:this.onProjectChange,allowClear:!1},{name:"provider_network_type",label:t("Provider Network Type"),type:"select",hidden:!this.isAdminPage,required:this.isAdminPage,options:[{label:"vxlan",value:"vxlan"},{label:"flat",value:"flat"},{label:"vlan",value:"vlan"},{label:"gre",value:"gre"}],onChange:e=>{this.setState({provider_network_type:e})}},{name:"provider_physical_network",label:t("Provider Physical Network"),type:"input",hidden:!s,required:d},{name:"provider_segmentation_id",label:t("Segmentation ID"),type:"input-int",hidden:!u,required:c,min:1,max:this.SegMax,extra:this.SegIDTips},{name:"subnet_name",label:t("Subnet Name"),hidden:!r,type:"input",required:r,validator:K},{name:"ip_version",label:t("IP Version"),type:"select",options:[{label:"ipv4",value:"ipv4"},{label:"ipv6",value:"ipv6"}],onChange:e=>{this.setState({ip_version:e})},required:!0,hidden:!r},{name:"ipv6_ra_mode",label:t("Router Advertisements Mode"),type:"select",options:[{label:"dhcpv6-stateful",value:"dhcpv6-stateful"},{label:"dhcpv6-stateless",value:"dhcpv6-stateless"},{label:"slaac",value:"slaac"}],tip:k.subnetIpv6Tip,hidden:"ipv6"!==n,dependencies:["ipv6_address_mode"],validator:(e,a)=>{var r=this.formRef.current&&this.formRef.current.getFieldValue("ipv6_address_mode")||void 0;return!a&&r?v.default.resolve():r&&r!==a?v.default.reject(new Error(t("Invalid combination"))):v.default.resolve()}},{name:"ipv6_address_mode",label:t("IP Distribution Mode"),type:"select",options:[{label:"dhcpv6-stateful",value:"dhcpv6-stateful"},{label:"dhcpv6-stateless",value:"dhcpv6-stateless"},{label:"slaac",value:"slaac"}],tip:k.subnetIpv6Tip,hidden:"ipv6"!==n},{name:"cidr",label:t("CIDR"),type:"input",placeholder:f?"192.168.0.0/24":"1001:1001::/64",required:r,validator:(e,a)=>r||a?(0,x.isEmpty)(a)||this.checkCidr(a)?v.default.resolve():v.default.reject(new Error(t("Invalid: ")+t("CIDR"))):v.default.resolve(),hidden:!r,tip:f?t("It is recommended that you use the private network address 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16"):t("e.g. 2001:Db8::/48")},{name:"disable_gateway",label:t("Disable Gateway"),type:"check",onChange:e=>{this.setState({disable_gateway:e})},hidden:!(r&&a)},{name:"gateway_ip",label:t("Gateway IP"),type:"ipv6"===n?"input":"ip-input",onChange:e=>{this.setState({gateway_ip:e.target.value})},tip:t("If no gateway is specified, the first IP address will be defaulted."),hidden:!(r&&a&&!l),validator:"ipv6"===n?(e,a)=>this.checkGateway(a)?v.default.resolve():v.default.reject(new Error(t("Invalid: Please input a valid ipv6."))):null},{name:"enable_dhcp",label:t("DHCP"),type:"radio",optionType:"default",options:[{label:t("Enabled"),value:!0},{label:t("Disabled"),value:!1}],hidden:!(r&&a)},{name:"allocation_pools",label:t("Allocation Pools"),type:"textarea",extra:t("IP address allocation polls, one enter per line(e.g. {ip})",{ip:f?"192.168.1.2,192.168.1.200":"1001:1001::,1001:1002::"}),hidden:!(r&&a),validator:this.validateAllocationPools,dependencies:["gateway_ip"]},{name:"dns",label:t("DNS"),type:"textarea",extra:t("One entry per line(e.g. {ip})",{ip:f?"114.114.114.114":"1001:1001::/64"}),hidden:!(r&&a),validator:f?F:Q},{name:"host_routes",label:t("Host Routes"),type:"textarea",extra:t("Additional routes announced to the instance, one entry per line(e.g. {ip})",{ip:f?"192.168.200.0/24,10.56.1.254":"1001:1001::/64,1001:1001"}),hidden:!(r&&a),validator:f?L:O},{name:"more",label:t("Advanced Options"),type:"more",hidden:!r}]}}a.CreateNetwork=W,(0,b.default)(W,"id","create-network"),(0,b.default)(W,"title",t("Create Network")),(0,b.default)(W,"policy",["create_network","create_subnet"]),(0,b.default)(W,"allowed",(()=>v.default.resolve(!0)));var X=(0,y.inject)("rootStore")((0,y.observer)(W));a.default=X},1481:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.default=t.NeutronStore=void 0;var n,l,o,s=i(a(25)),d=i(a(52)),u=i(a(72)),c=(i(a(37)),i(a(55))),f=(i(a(73)),a(32)),p=i(a(49)),h=i(a(54)),m=(n=class extends h.default{constructor(){super(...arguments),(0,u.default)(this,"availableZones",l,this),(0,u.default)(this,"zoneLoading",o,this)}get zoneClient(){return p.default.neutron.azones}fetchAvailableZones(){var e=this;return(0,d.default)((function*(){e.zoneLoading=!0;var t=yield e.zoneClient.list(),{availability_zones:a=[]}=t;e.availableZones=a,e.zoneLoading=!1}))()}},l=(0,c.default)(n.prototype,"availableZones",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=(0,c.default)(n.prototype,"zoneLoading",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,c.default)(n.prototype,"fetchAvailableZones",[f.action],(0,s.default)(n.prototype,"fetchAvailableZones"),n.prototype),n);t.NeutronStore=m;var v=new m;t.default=v},1482:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.CreateSubnet=void 0;var p=f(r(516)),h=f(r(62)),m=f(r(65)),v=f(r(52)),g=f(r(71)),_=f(r(37)),b=r(382),y=r(1113),A=r(514),I=f(r(321)),S=r(47),C=f(r(384)),x=f(r(136)),w=r(522),P=f(r(559));function E(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=E(Object(r),!0)).call(a,(function(t){(0,_.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=E(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}var{validateAllocationPoolsWithGatewayIp:D,checkDNS:B,checkIpv6DNS:N,checkHostRoutes:M,checkIpv6HostRoutes:R,getAllocationPools:j,getHostRouters:T}=P.default,{isIpCidr:F,isIPv6Cidr:Q,isIpv6:L}=A.ipValidate;class O extends y.ModalAction{constructor(){super(...arguments),(0,_.default)(this,"checkCidr",(e=>{var{ip_version:t="ipv4"}=this.state;return!("ipv4"===t&&!F(e))&&!("ipv6"===t&&!Q(e))})),(0,_.default)(this,"checkGateway",(e=>!!(0,S.isEmpty)(e)||!!L(e))),(0,_.default)(this,"onSubmit",(e=>{var{allocation_pools:t,host_routes:a}=e,r=(0,g.default)(e,["allocation_pools","host_routes"]),i=j(t),n=T(a);return I.default.createSubnet(k(k({},r),{},{network_id:this.network.id,allocation_pools:i,host_routes:n}))})),(0,_.default)(this,"validateAllocationPools",((e,t)=>D.call(this,e,t))),(0,_.default)(this,"onProjectChange",(e=>{this.setState({projectId:e},(()=>{this.getQuota()}))}))}get name(){return t("Create Subnet")}get network(){return this.props.containerProps.detail||this.item||{}}get instanceName(){return this.item.name||(0,p.default)(this).subnet_name}get defaultValue(){return{enable_dhcp:!0,ip_version:"ipv4",project_id:this.currentProjectId,disable_gateway:!1,more:!1,ipv6_ra_mode:"slaac",ipv6_address_mode:"slaac"}}init(){this.state.projectId=this.currentProjectId,this.state.quota={},this.state.quotaLoading=!0,this.projectStore=C.default,this.isSystemAdmin&&this.getProjects(),this.getQuota()}getProjects(){this.projectStore.fetchList()}static get disableSubmit(){var{neutronQuota:{subnet:{left:e=0}={}}}=C.default;return 0===e}static get showQuota(){return!0}get showQuota(){return!0}getQuota(){var e=this;return(0,v.default)((function*(){var{projectId:t}=e.state;e.setState({quotaLoading:!0});var a=yield e.projectStore.fetchProjectNeutronQuota(t),{subnet:r={}}=a||{};e.setState({quota:r,quotaLoading:!1})}))()}get quotaInfo(){var{quota:e={},quotaLoading:a}=this.state;if(a)return[];var{left:r=0}=e,i=0===r?0:1;return[k(k({},e),{},{add:i,name:"subnet",title:t("Subnet")})]}get isSystemAdmin(){return this.props.rootStore.hasAdminRole}get networkProjectId(){var{project_id:e}=this.item;if(e)return e;var{detail:t={}}=this.containerProps;return t.project_id}get formItems(){var e,{more:a,ip_version:r="ipv4",disable_gateway:i=!1,projectId:n}=this.state,l="ipv4"===r,o=(0,h.default)(e=C.default.list.data).call(e,(e=>({label:e.name,value:e.id})));return[{name:"subnet_name",label:t("Subnet Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"project_id",label:t("Project"),type:"select",required:!0,hidden:!this.isSystemAdmin,showSearch:!0,extra:n!==this.networkProjectId&&t("The selected project is different from the project to which the network belongs. That is, the subnet to be created is not under the same project as the network. Please do not continue unless you are quit sure what you are doing."),options:o,onChange:this.onProjectChange},{name:"ip_version",label:t("IP Version"),type:"select",options:[{label:"ipv4",value:"ipv4"},{label:"ipv6",value:"ipv6"}],onChange:e=>{this.setState({ip_version:e})},required:!0},{name:"ipv6_ra_mode",label:t("Router Advertisements Mode"),type:"select",options:[{label:"dhcpv6-stateful",value:"dhcpv6-stateful"},{label:"dhcpv6-stateless",value:"dhcpv6-stateless"},{label:"slaac",value:"slaac"}],tip:w.subnetIpv6Tip,hidden:"ipv6"!==r,dependencies:["ipv6_address_mode"],validator:(e,a)=>{var r=this.formRef.current&&this.formRef.current.getFieldValue("ipv6_address_mode")||void 0;return!a&&r?m.default.resolve():r&&r!==a?m.default.reject(new Error(t("Invalid combination"))):m.default.resolve()}},{name:"ipv6_address_mode",label:t("IP Distribution Mode"),type:"select",options:[{label:"dhcpv6-stateful",value:"dhcpv6-stateful"},{label:"dhcpv6-stateless",value:"dhcpv6-stateless"},{label:"slaac",value:"slaac"}],tip:w.subnetIpv6Tip,hidden:"ipv6"!==r},{name:"cidr",label:t("CIDR"),type:"input",placeholder:l?"192.168.0.0/24":"1001:1001::/64",required:!0,validator:(e,a)=>(0,S.isEmpty)(a)||this.checkCidr(a)?m.default.resolve():m.default.reject(new Error(t("Invalid: ")+t("CIDR"))),tip:l?t("It is recommended that you use the private network address 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16"):t("e.g. 2001:Db8::/48")},{name:"disable_gateway",label:t("Disable Gateway"),type:"check",onChange:e=>{this.setState({disable_gateway:e})},hidden:!a},{name:"gateway_ip",label:t("Gateway IP"),type:"ipv6"===r?"input":"ip-input",onChange:e=>{this.setState({gateway_ip:e.target.value})},tip:t("If no gateway is specified, the first IP address will be defaulted."),hidden:!(a&&!i),validator:"ipv6"===r?(e,a)=>this.checkGateway(a)?m.default.resolve():m.default.reject(new Error(t("Invalid: Please input a valid ipv6."))):null},{name:"enable_dhcp",label:t("DHCP"),type:"radio",optionType:"default",options:[{label:t("Enabled"),value:!0},{label:t("Disabled"),value:!1}],hidden:!a},{name:"allocation_pools",label:t("Allocation Pools"),type:"textarea",extra:t("IP address allocation polls, one enter per line(e.g. {ip})",{ip:l?"192.168.1.2,192.168.1.200":"1001:1001::,1001:1002::"}),hidden:!a,validator:this.validateAllocationPools},{name:"dns",label:t("DNS"),type:"textarea",extra:t("One entry per line(e.g. {ip})",{ip:l?"114.114.114.114":"1001:1001::"}),hidden:!a,validator:l?B:N},{name:"host_routes",label:t("Host Routes"),type:"textarea",extra:t("Additional routes announced to the instance, one entry per line(e.g. {ip})",{ip:l?"192.168.200.0/24,10.56.1.254":"1001:1001::/64,1001:1001"}),hidden:!a,validator:l?M:R},{name:"more",label:t("Advanced Options"),type:"more"}]}}a.CreateSubnet=O,(0,_.default)(O,"id","create-subnet"),(0,_.default)(O,"title",t("Create Subnet")),(0,_.default)(O,"policy","create_subnet"),(0,_.default)(O,"allowed",((e,t)=>{var{project_id:a}=e||{},{detail:{project_id:r}={}}=t||{},i=a||r,n=x.default,{hasAdminRole:l=!1,user:{project:{id:o}={}}={}}=n;return l||i===o?m.default.resolve(!0):m.default.resolve(!1)}));var q=(0,b.inject)("rootStore")((0,b.observer)(O));a.default=q},1483:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(1484)),l=i(a(3665)),o=i(a(3666)),s=i(a(3667)),d=i(a(3668)),u=i(a(3669)),c=i(a(3670)),f={actionConfigs:{rowActions:{firstAction:o.default,moreActions:[{action:u.default},{action:c.default},{action:l.default},{action:s.default},{action:d.default}]},primaryActions:[n.default],batchActions:[l.default]},adminConfigs:{rowActions:{firstAction:l.default},batchActions:[l.default]}};t.default=f},1484:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Create=void 0;var p=f(r(62)),h=f(r(33)),m=f(r(65)),v=f(r(52)),g=f(r(71)),_=f(r(37)),b=r(382),y=r(526),A=r(321),I=f(r(1481)),S=f(r(384)),C=r(1113),x=r(47),w=r(522),P=r(1257);function E(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=E(Object(r),!0)).call(a,(function(t){(0,_.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=E(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}class D extends C.ModalAction{constructor(){super(...arguments),(0,_.default)(this,"onValuesChange",(e=>{(0,x.has)(e,"openExternalNetwork")&&this.setState({openExternalNetwork:e.openExternalNetwork})})),(0,_.default)(this,"onSubmit",(e=>{var{openExternalNetwork:t,externalNetwork:a,hints:r={}}=e,i=(0,g.default)(e,["openExternalNetwork","externalNetwork","hints"]),n=t?{external_gateway_info:{network_id:a.selectedRows[0].id}}:null,l=r.selectedRowKeys||[];return this.store.create(k(k(k({},i),n),{},{availability_zone_hints:l}))}))}init(){this.state.quota={},this.state.quotaLoading=!0,this.store=new y.RouterStore,this.networkStore=new A.NetworkStore,this.projectStore=S.default,this.fetchAzones(),this.getQuota()}get name(){return t("create router")}static get modalSize(){return"large"}getModalSize(){return"large"}fetchAzones(){I.default.fetchAvailableZones()}get aZones(){var e,t;return(0,p.default)(e=(0,h.default)(t=I.default.availableZones||[]).call(t,(e=>"available"===e.state&&"router"===e.resource))).call(e,(e=>k(k({},e),{},{id:e.name})))}static get disableSubmit(){var{neutronQuota:{router:{left:e=0}={}}={}}=S.default;return 0===e}static get showQuota(){return!0}get showQuota(){return!0}getQuota(){var e=this;return(0,v.default)((function*(){var t=yield e.projectStore.fetchProjectNeutronQuota(),{router:a={}}=t||{};e.setState({quota:a,quotaLoading:!1})}))()}get quotaInfo(){var{quota:e={},quotaLoading:a}=this.state;if(a)return[];var{left:r=0}=e,i=0===r?0:1;return[k(k({},e),{},{add:i,name:"router",title:t("Router")})]}get defaultValue(){return{openExternalNetwork:!1}}get formItems(){var{openExternalNetwork:e}=this.state;return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea",required:!1},{name:"hints",label:t("Availability Zone Hints"),type:"select-table",data:this.aZones,isLoading:I.default.zoneLoading,isMulti:!0,filterParams:[{label:t("Name"),name:"name"}],columns:[{title:t("Name"),dataIndex:"name"},{title:t("State"),dataIndex:"state",render:e=>P.availabilityZoneState[e]||"-"},{title:t("Resource Type"),dataIndex:"resource",render:e=>P.availabilityZoneResource[e]||e}]},{name:"openExternalNetwork",label:t("Options"),type:"check",content:t("Open External Gateway")},{name:"externalNetwork",label:t("External Gateway"),type:"select-table",backendPageStore:this.networkStore,extraParams:{"router:external":!0},required:e,hidden:!e,filterParams:[{label:t("Name"),name:"name"}],columns:[{title:t("Name"),dataIndex:"name"},{title:t("Status"),dataIndex:"status",render:e=>w.networkStatus[e]||"-"},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime"}]}]}}a.Create=D,(0,_.default)(D,"id","create"),(0,_.default)(D,"title",t("Create Router")),(0,_.default)(D,"policy","create_router"),(0,_.default)(D,"allowed",(()=>m.default.resolve(!0)));var B=(0,b.inject)("rootStore")((0,b.observer)(D));a.default=B},1485:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(33)),o=n(r(91)),s=n(r(62)),d=n(r(82));r(532);var u=n(r(533));r(1249);var c=n(r(1250));r(318);var f=n(r(317));r(1169);var p=n(r(1159)),h=n(r(37)),m=n(r(0)),v=r(135),g=r(527),_=r(1137),b=(r(167),r(196)),y=n(r(3684)),A=n(r(1321));class I extends m.default.Component{constructor(e){super(e),(0,h.default)(this,"detailButtons",(()=>[{name:t("Clear Gateway"),click:null},{name:t("Associate IP"),click:null},{name:t("Associate Network"),click:null},{name:t("delete"),type:"danger",click:null}])),this.state={}}get statusMap(){return{SHUTOFF:{status:"default",text:t("Shutoff")},ACTIVE:{color:"green",text:t("Active")}}}get detailInfos(){var{data:{subnets:e}}=this.props,a=(0,l.default)(e).call(e,(e=>{var t;return-1===(0,o.default)(t=e.name).call(t,"HA subnet tenant")}));return[{title:t("Name"),dataIndex:"name",render:(e,t)=>e?m.default.createElement(b.Link,{to:"/network/router/detail/".concat(t.id)},e):"-"},{title:t("UUID"),dataIndex:"id"},{title:t("Status"),dataIndex:"status",render:e=>_.routerStatus[e]||"-"},{title:t("External Fixed IP"),dataIndex:"external_gateway_info",isHideable:!0,render:e=>{var t;return(0,s.default)(t=(e||{}).external_fixed_ips||[]).call(t,(e=>m.default.createElement("span",{key:e.ip_address},e.ip_address,m.default.createElement("br",null))))||"-"}},{title:t("Subnet"),dataIndex:"subnets",render:e=>{if(!a[0])return"-";var t=(0,l.default)(a).call(a,(t=>-1!==(0,o.default)(e).call(e,t.id)));return(0,s.default)(t).call(t,(e=>m.default.createElement("span",{key:e.id},e.name," (",e.cidr,")",m.default.createElement("br",null))))}}]}renderCardInfos(e){var t,a=(0,s.default)(t=this.detailInfos).call(t,(t=>{var a,{title:r,dataIndex:i,render:n}=t;return!this.isLoading&&e&&e.id?(a=n?n(e[i],e):e[i],"create_time"!==i&&"update_time"!==i&&"created_at"!==i||n||(a=(0,g.getLocalTimeStr)(a)),void 0===a&&(a="-")):a="-",{label:r,content:a}}));return m.default.createElement(p.default,{column:1,className:A.default["descriptions-item"]},(0,s.default)(a).call(a,(e=>m.default.createElement(p.default.Item,{label:e.label,key:"label-".concat((0,v.generateId)())},e.content))))}renderButton(){var e=this.detailButtons();return m.default.createElement("div",{className:A.default["card-button"]},(0,s.default)(e).call(e,(e=>m.default.createElement(f.default,{type:e.type?e.type:"primary"},e.name))))}renderCard(e,t){return m.default.createElement("div",{style:{width:e}},this.renderCardInfos(t))}renderTitle(e,t){var a;return m.default.createElement("div",{className:A.default["node-card-title"]},(0,d.default)(a="".concat(e,": ")).call(a,t))}render(){var{x:e,y:a}=this.props,{data:{routers:r},infoIndex:i}=this.props,n=r[i];return m.default.createElement("div",{className:A.default["node-tooltips"],style:{top:"".concat(a,"px"),left:"".concat(e,"px")}},m.default.createElement(u.default,{placement:"rightTop",content:this.renderCard(430,n),title:this.renderTitle(t("Router"),n.name)},m.default.createElement("div",{style:{textAlign:"center",width:"50px",height:"50px",overflow:"hidden"}},m.default.createElement(c.default,{src:y.default,shape:"square",size:30}),m.default.createElement("div",{style:{transform:"scale(0.9,1)"}},n.name))))}}a.default=I},1486:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.QoSPolicy=void 0;var p=f(r(37)),h=r(382),m=f(r(1114)),v=r(391),g=r(1221),_=r(83),b=r(319),y=f(r(1487));function A(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=A(Object(r),!0)).call(a,(function(t){(0,p.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=A(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}class S extends m.default{constructor(){super(...arguments),(0,p.default)(this,"updateFetchParamsByPage",(e=>{switch(this.tabKey){case"projectQoSPolicy":return I(I({},e),{},{project_id:this.currentProjectId});case"sharedQoSPolicy":return I(I({},e),{},{shared:!0});default:return e}}))}init(){this.store=new v.QoSPolicyStore,this.downloadStore=new v.QoSPolicyStore}get isProjectTab(){var e=this.tabKey;return!this.isAdminPage&&(!e||"projectQoSPolicy"===e)}get checkEndpoint(){return!0}get endpoint(){return(0,_.qosEndpoint)()}get policy(){return"get_policy"}get aliasPolicy(){return"neutron:get_policy"}get name(){return t("QoS policies")}get actionConfigs(){return this.isAdminPage?y.default.actionConfigs:this.isProjectTab?y.default.consoleActions:b.emptyActionConfig}get hasTab(){return!this.isAdminPage}get isFilterByBackend(){return!0}get isSortByBackend(){return!0}get defaultSortKey(){return"name"}get tabKey(){var{tab:e}=this.props;return e}getColumnParamsFromTabKey(){switch(this.tabKey){case"projectQoSPolicy":return{self:this,all:!1,shared:!1};case"sharedQoSPolicy":return{self:this,all:!1,shared:!0};case"allQoSPolicy":default:return{self:this,all:!0,shared:!1}}}getColumns(){return(0,g.getQosPolicyColumns)(this.getColumnParamsFromTabKey())}get searchFilters(){return(0,g.getQosPolicyFilters)(this.getColumnParamsFromTabKey())}}a.QoSPolicy=S;var C=(0,h.inject)("rootStore")((0,h.observer)(S));a.default=C},1487:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(3710)),l=i(a(3711)),o=i(a(3712)),s=i(a(3713)),d=i(a(3714)),u=i(a(3715)),c=i(a(3716)),f=i(a(3717)),p=i(a(3718)),h=i(a(3719)),m=i(a(3720)),v={actionConfigs:{rowActions:{firstAction:l.default,moreActions:[{action:s.default},{action:p.default},{action:h.default},{action:c.default},{action:f.default},{action:d.default},{action:m.default},{action:u.default},{action:o.default}]},batchActions:[o.default],primaryActions:[n.default]},consoleActions:{rowActions:{firstAction:l.default,moreActions:[{action:s.default},{action:p.default},{action:h.default},{action:c.default},{action:f.default},{action:o.default}]},batchActions:[o.default],primaryActions:[n.default]}};t.default=v},1488:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var n,l=(0,i(a(62)).default)(n="0,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,46,48,56".split(",")).call(n,(e=>({label:e,value:e})));t.default=l},1489:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.adminActions=t.actionConfigs=void 0;var n=i(a(3724)),l=i(a(3725)),o=i(a(3726)),s=i(a(1490)),d=i(a(3732)),u={rowActions:{firstAction:n.default,moreActions:[{action:o.default},{action:d.default},{action:l.default}]},batchActions:[l.default],primaryActions:[s.default]};t.actionConfigs=u;var c={rowActions:{moreActions:[{action:l.default}]}};t.adminActions=c},1490:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.StepCreate=void 0;var l=n(r(62)),o=n(r(28)),s=n(r(35)),d=n(r(91)),u=n(r(33)),c=n(r(65)),f=n(r(71)),p=n(r(37)),h=r(382),m=r(1113),v=n(r(528)),g=n(r(3727)),_=n(r(3728)),b=n(r(3729)),y=n(r(3730)),A=n(r(3731));class I extends m.StepAction{constructor(){super(...arguments),(0,p.default)(this,"onSubmit",(e=>{var t,{name:a,description:r,vip_address:i,vip_network_id:n,enableHealthMonitor:c,listener_protocol:p,listener_ssl_parsing_method:h,listener_sni_enabled:m,listener_default_tls_container_ref:v,listener_client_ca_tls_container_ref:g,listener_sni_container_refs:_}=e,b=(0,f.default)(e,["name","description","vip_address","vip_network_id","enableHealthMonitor","listener_protocol","listener_ssl_parsing_method","listener_sni_enabled","listener_default_tls_container_ref","listener_client_ca_tls_container_ref","listener_sni_container_refs"]),y={name:a,description:r,vip_network_id:n.selectedRowKeys[0]},{ip_address:A,subnet:I}=i[0];y.vip_subnet_id=I,A&&A.ip&&(y.vip_address=A.ip);var S,C={protocol:p};"TERMINATED_HTTPS"===p&&(v&&(C.default_tls_container_ref=v.selectedRows[0].container_ref),"two-way"===h&&g&&(C.client_ca_tls_container_ref=g.selectedRows[0].secret_ref,C.client_authentication="MANDATORY"),m&&_&&(C.sni_container_refs=(0,l.default)(S=_.selectedRows).call(S,(e=>e.container_ref))));var x={},w={};(0,o.default)(t=(0,s.default)(b)).call(t,(t=>{0===(0,d.default)(t).call(t,"listener")?C[t.replace("listener_","")]=e[t]:0===(0,d.default)(t).call(t,"pool")?x[t.replace("pool_","")]=e[t]:0===(0,d.default)(t).call(t,"health")&&(w[t.replace("health_","")]=e[t])})),c&&(x.healthmonitor=w);var{extMembers:P=[],Member:{selectedRowKeys:E=[],selectedRows:k,memberUpdateValue:D=[]}={}}=b,B=[];return(0,o.default)(E).call(E,(e=>{var t=(0,u.default)(k).call(k,(t=>t.id===e))[0],a=(0,u.default)(D).call(D,(t=>t.id===e))[0],{weight:r=0,protocol_port:i=1}=a||{},{member_ip:n,fixed_ips:l=[]}=t;(0,o.default)(n).call(n,(e=>{var{subnet_id:t}=(0,u.default)(l).call(l,(t=>t.ip_address===e))[0],a={weight:r,protocol_port:i,address:e,subnet_id:t};B.push(a)}))})),(0,o.default)(P).call(P,(e=>{var{ip:t,protocol_port:a,weight:r,name:i=null,subnet_id:n}=e.ip_address,l={weight:r,protocol_port:a,address:t,name:i,subnet_id:n};B.push(l)})),x.members=B,C.default_pool=x,y.listeners=[C],this.store.create(y)}))}init(){this.store=v.default}static allowed(e,t){var{isAdminPage:a=!1}=t;return c.default.resolve(!a)}get name(){return t("Create Loadbalancer")}get listUrl(){return this.getRoutePath("lb")}get hasConfirmStep(){return!1}get steps(){return[{title:t("Base Config"),component:g.default},{title:t("Listener Detail"),component:_.default},{title:t("Pool Detail"),component:b.default},{title:t("Member Detail"),component:y.default},{title:t("Health Monitor Detail"),component:A.default}]}}a.StepCreate=I,(0,p.default)(I,"id","lb-create"),(0,p.default)(I,"title",t("Create Loadbalancer")),(0,p.default)(I,"path","/network/load-balancers/create"),(0,p.default)(I,"policy","os_load-balancer_api:loadbalancer:post");var S=(0,h.inject)("rootStore")((0,h.observer)(I));a.default=S},1491:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.adminActions=t.actionConfigs=void 0;var n=i(a(3735)),l=i(a(3736)),o=i(a(3737)),s=i(a(3738)),d=i(a(3739)),u=i(a(1492)),c=i(a(3740)),f={rowActions:{firstAction:o.default,moreActions:[{action:l.default},{action:n.default},{action:s.default},{action:c.default},{action:d.default}]},batchActions:[],primaryActions:[u.default]};t.actionConfigs=f;var p={rowActions:{moreActions:[{action:c.default},{action:l.default}]}};t.adminActions=p},1492:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Create=void 0;var p=f(r(62)),h=f(r(33)),m=f(r(65)),v=f(r(52)),g=f(r(71)),_=f(r(37)),b=r(382),y=r(1113),A=r(1172),I=r(1204),S=r(1205),C=r(1127);function x(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=x(Object(r),!0)).call(a,(function(t){(0,_.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=x(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}class P extends y.ModalAction{constructor(){super(...arguments),(0,_.default)(this,"policy",(()=>"os_load-balancer_api:listener:post")),(0,_.default)(this,"onSubmit",(e=>{var t,{sni_enabled:a,ssl_parsing_method:r,default_tls_container_ref:i,client_ca_tls_container_ref:n,sni_container_refs:l}=e,o=w(w({},(0,g.default)(e,["sni_enabled","ssl_parsing_method","default_tls_container_ref","client_ca_tls_container_ref","sni_container_refs"])),{},{loadbalancer_id:this.containerProps.detail.id});(i&&(o.default_tls_container_ref=i.selectedRows[0].container_ref),n&&(o.client_ca_tls_container_ref=n.selectedRows[0].secret_ref,o.client_authentication="MANDATORY"),l)&&(o.sni_container_refs=(0,p.default)(t=l.selectedRows).call(t,(e=>e.container_ref)));return this.store.create(o)}))}get name(){return t("Create Listener")}static get modalSize(){return"large"}getModalSize(){return"large"}init(){this.store=new A.ListenerStore,this.containersStore=new I.ContainersStore,this.secretsStore=new S.SecretsStore,this.fetchContainers(),this.fetchSecrets()}fetchContainers(){var e=this;return(0,v.default)((function*(){yield e.containersStore.fetchList(),e.updateDefaultValue()}))()}fetchSecrets(){var e=this;return(0,v.default)((function*(){yield e.secretsStore.fetchList({mode:"CA"}),e.updateDefaultValue()}))()}get ServerCertificate(){return this.containersStore.list.data||[]}get CaCertificate(){return this.secretsStore.list.data||[]}get SNICertificate(){var e;return(0,h.default)(e=this.containersStore.list.data||[]).call(e,(e=>!!e.domain))}get isEdit(){return!1}get nameForStateUpdate(){return["protocol","ssl_parsing_method","sni_enabled"]}get defaultValue(){return{ssl_parsing_method:"one-way",sni_enabled:!1,connection_limit:-1}}get formItems(){var e,{protocol:a,ssl_parsing_method:r,sni_enabled:i}=this.state;return[{name:"name",label:t("Name"),type:"input-name",required:!0},{name:"description",label:t("Description"),type:"textarea"},{name:"protocol",label:t("Protocol"),type:"select",options:C.listenerProtocols,required:!0,disabled:this.isEdit},{name:"ssl_parsing_method",label:t("SSL Parsing Method"),type:"select",options:C.sslParseMethod,required:!0,display:"TERMINATED_HTTPS"===a},{name:"default_tls_container_ref",label:t("Server Certificate"),type:"select-table",required:!0,data:this.ServerCertificate,isLoading:this.containersStore.list.isLoading,isMulti:!1,filterParams:[{label:t("Name"),name:"name"}],columns:(0,C.getCertificateColumns)(this),display:"TERMINATED_HTTPS"===a},{name:"client_ca_tls_container_ref",label:t("CA Certificate"),type:"select-table",required:!0,data:this.CaCertificate,isLoading:this.secretsStore.list.isLoading,isMulti:!1,filterParams:[{label:t("Name"),name:"name"}],columns:(0,h.default)(e=(0,C.getCertificateColumns)(this)).call(e,(e=>"domain"!==e.dataIndex)),display:"TERMINATED_HTTPS"===a&&"two-way"===r},{name:"sni_enabled",label:t("SNI Enabled"),type:"switch",display:"TERMINATED_HTTPS"===a},{name:"sni_container_refs",label:t("SNI Certificate"),type:"select-table",required:!0,data:this.SNICertificate,isLoading:this.containersStore.list.isLoading,isMulti:!0,filterParams:[{label:t("Name"),name:"name"}],columns:(0,C.getCertificateColumns)(this),display:"TERMINATED_HTTPS"===a&&i},{name:"protocol_port",label:t("Port"),type:"input-number",required:!0,disabled:this.isEdit},{name:"connection_limit",label:t("Connection Limit"),type:"input-number",min:-1,extra:t("-1 means no connection limit"),required:!0}]}}a.Create=P,(0,_.default)(P,"id","create_listener"),(0,_.default)(P,"title",t("Create Listener")),(0,_.default)(P,"policy","os_load-balancer_api:listener:post"),(0,_.default)(P,"allowed",(e=>m.default.resolve("ACTIVE"===e.provisioning_status)));var E=(0,b.inject)("rootStore")((0,b.observer)(P));a.default=E},1493:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.default=t.HealthMonitorStore=void 0;var n=i(a(49)),l=i(a(54));class o extends l.default{get client(){return n.default.octavia.healthMonitors}get listFilterByProject(){return!0}}t.HealthMonitorStore=o;var s=new o;t.default=s},1494:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.adminConfigs=t.actionConfigs=void 0;var n=i(a(3770)),l=i(a(3772)),o=i(a(3773)),s={rowActions:{firstAction:l.default,moreActions:[{action:o.default}]},batchActions:[o.default],primaryActions:[n.default]};t.actionConfigs=s;var d={rowActions:{moreActions:[{action:o.default}]},batchActions:[o.default]};t.adminConfigs=d},1495:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(3777)),l=i(a(3778)),o=i(a(3779)),s=i(a(1496)),d={actionConfigs:{rowActions:{firstAction:l.default,moreActions:[{action:s.default},{action:o.default}]},batchActions:[o.default],primaryActions:[n.default]},actionConfigsAdmin:{rowActions:{firstAction:o.default,moreActions:[]},batchActions:[o.default],primaryActions:[]}};t.default=d},1496:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Create=void 0;var p=f(r(219)),h=f(r(221)),m=f(r(62)),v=f(r(28)),g=f(r(35)),_=f(r(407)),b=f(r(82)),y=f(r(65)),A=f(r(52)),I=f(r(71)),S=f(r(37)),C=r(382),x=r(1113),w=f(r(562)),P=f(r(392)),E=f(r(384)),k=r(332),D=r(47),B=r(514);function N(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=N(Object(r),!0)).call(a,(function(t){(0,S.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=N(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}class R extends x.ModalAction{constructor(e){super(e),(0,S.default)(this,"onValuesChange",(e=>{(0,D.has)(e,"portOrRange")&&this.setState({sourcePort:""},(()=>{this.updateDefaultValue()})),(0,D.has)(e,"remoteType")&&this.setState({remote_ip_prefix:"",remote_group_id:""},(()=>{this.updateDefaultValue()})),this.setState(M({},e))})),(0,S.default)(this,"handleDirectionChange",(e=>{this.setState({direction:e})})),(0,S.default)(this,"onSubmit",((e,t)=>{var a,{match:{params:{id:r}={}}={}}=t,{sourcePort:i,protocol:n,ipProtocol:l,icmpType:o,icmpCode:s,portOrRange:d,remoteType:u}=e,c=(0,I.default)(e,["sourcePort","protocol","ipProtocol","icmpType","icmpCode","portOrRange","remoteType"]),f=(0,p.default)(a=["custom_udp","custom_tcp"]).call(a,n)&&"range"===d,m=i.split(":"),v="custom_protocol"!==n?this.defaultRules[n].ip_protocol:l,g=M({security_group_id:r||this.item.id,port_range_min:"custom_icmp"===n?o:f?(0,h.default)(m[0],10):null,port_range_max:"custom_icmp"===n?s:f?(0,h.default)(m[1]||m[0],10):null,protocol:v},c);return(0,p.default)(n).call(n,"all")&&(delete g.remote_ip_prefix,delete g.remote_group_id),this.store.create(g)})),this.state={protocol:this.protocolList[0].value,portOrRange:"range",remoteType:"cidr",direction:"ingress",ipProtocol:"ah"}}get name(){return t("Create rule")}init(){this.state.quota={},this.state.quotaLoading=!0,this.store=w.default,this.groupStore=P.default,this.projectStore=E.default,this.getAllGroups(),this.getQuota()}get messageHasItemName(){return!1}getAllGroups(){var e=this;return(0,A.default)((function*(){var t=yield P.default.fetchList();e.allGroups=(0,m.default)(t).call(t,(e=>({label:e.name,value:e.id})))}))()}static get disableSubmit(){var{neutronQuota:{security_group_rule:{left:e=0}={}}={}}=E.default;return 0===e}static get showQuota(){return!0}get showQuota(){return!0}getQuota(){var e=this;return(0,A.default)((function*(){var t=yield e.projectStore.fetchProjectNeutronQuota(),{security_group_rule:a={}}=t||{};e.setState({quota:a,quotaLoading:!1})}))()}get quotaInfo(){var{quota:e={},quotaLoading:a}=this.state;if(a)return[];var{left:r=0}=e||{},i=0===r?0:1;return[M(M({},e),{},{add:i,name:"security_group_rule",title:t("Security Group Rule")})]}get defaultRules(){return{custom_tcp:{name:t("Custom TCP Rule"),ip_protocol:"tcp"},custom_udp:{name:t("Custom UDP Rule"),ip_protocol:"udp"},custom_icmp:{name:t("Custom ICMP Rule"),ip_protocol:"icmp"},all_proto:{name:t("All Proto"),ip_protocol:null},all_tcp:{name:t("All TCP"),ip_protocol:"tcp",from_port:"1",to_port:"65535"},all_udp:{name:t("All UDP"),ip_protocol:"udp",from_port:"1",to_port:"65535"},all_icmp:{name:t("All ICMP"),ip_protocol:"icmp"},custom_protocol:{name:t("Other Protocol")}}}get protocolList(){var e,t=[];return(0,v.default)(e=(0,g.default)(this.defaultRules)).call(e,(e=>{t.push({value:e,label:this.defaultRules[e].name})})),t}get ruleList(){return(0,_.default)(this.defaultRules,this.settingRules)}get defaultValue(){var e,t=this.state,{protocol:a}=t,r=(0,I.default)(t,["protocol"]),{from_port:i,to_port:n}=this.ruleList[a],{sourcePort:l=""}=this.state;i&&(l=i!==n?(0,b.default)(e="".concat(i,":")).call(e,n):i);return M(M({},r),{},{protocol:a,sourcePort:l})}get formItems(){var e,a,{protocol:r,portOrRange:i,remoteType:n,direction:l}=this.state,o="custom_protocol"===r,s="custom_icmp"===r,d=(0,p.default)(e=["custom_udp","custom_tcp"]).call(e,r),u=(0,p.default)(a=["custom_udp","custom_tcp","custom_icmp"]).call(a,r),c=d&&"range"===i,f=u&&"cidr"===n,h=u&&"sg"===n;return[{name:"protocol",label:t("Protocol"),type:"select",required:!0,options:this.protocolList},{name:"direction",label:t("Direction"),type:"select",required:!0,options:[{value:"ingress",label:t("Ingress")},{value:"egress",label:t("Egress")}],onChange:this.handleDirectionChange},{name:"ethertype",label:t("Ether Type"),type:"select",required:!0,options:[{value:"IPv4",label:t("IPv4")},{value:"IPv6",label:t("IPv6")}]},{name:"portOrRange",label:t("Port Type"),type:"select",required:d,options:[{value:"all",label:t("All Port")},{value:"range",label:t("Custom")}],hidden:!d},{name:"sourcePort",label:"egress"===l?t("Destination Port/Port Range"):t("Source Port/Port Range"),type:"port-range",required:c,hidden:!c,extra:"egress"===l&&t("Input destination port or port range(example: 80 or 80:160)")},{name:"ipProtocol",label:t("IP Protocol"),type:"select-input",options:k.ipProtocols,required:o,hidden:!o,help:t("Please input protocol number if it absent in select list.")},{name:"icmpType",label:t("ICMP Type"),type:"input-int",min:0,max:255,required:!1,hidden:!s,help:t("Please input ICMP type(0-255)")},{name:"icmpCode",label:t("ICMP Code"),type:"input-int",min:0,max:255,required:!1,hidden:!s,help:t("Please input ICMP code(0-255)")},{name:"remoteType",label:t("Remote Type"),type:"select",required:u,options:[{value:"cidr",label:t("cidr")},{value:"sg",label:t("Security Group")}],hidden:!u},{name:"remote_ip_prefix",label:t("Remote IP Prefix"),type:"input",hidden:!f,required:f,validator:f?B.cidrAllValidate:null,placeholder:t("Please input IPv4 or IPv6 cidr"),extra:t("Please input IPv4 or IPv6 cidr, (e.g. 192.168.0.0/24, 2001:DB8::/48)")},{name:"remote_group_id",label:t("Remote Security Group"),type:"select",required:h,hidden:!h,options:this.allGroups}]}}a.Create=R,(0,S.default)(R,"id","create"),(0,S.default)(R,"title",t("Create Rule")),(0,S.default)(R,"policy","create_security_group_rule"),(0,S.default)(R,"allowed",(()=>y.default.resolve(!0)));var j=(0,C.inject)("rootStore")((0,C.observer)(R));a.default=j},3653:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(389)),l=i(a(3654)),o=e=>(0,n.default)(l.default,e);t.default=o},3654:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(1130)),l=i(a(525)),o=i(a(3655)),s=i(a(1478)),d=i(a(3658)),u=i(a(3664)),c=i(a(1316)),f=i(a(3671)),p=i(a(3677)),h=i(a(3685)),m=i(a(3692)),v=i(a(1317)),g=i(a(3694)),_=i(a(3709)),b=i(a(1486)),y=i(a(3721)),A=i(a(3723)),I=i(a(1490)),S=i(a(3733)),C=i(a(3741)),x=i(a(3748)),w=i(a(3774)),P=i(a(3776)),E=i(a(3780)),k=i(a(3784)),D=i(a(3790)),B=i(a(3792)),N="/network",M=[{path:N,component:n.default,routes:[{path:"".concat(N,"/networks"),component:o.default,exact:!0},{path:"".concat(N,"/networks-admin"),component:s.default,exact:!0},{path:"".concat(N,"/networks/detail/:id"),component:d.default,exact:!0},{path:"".concat(N,"/networks-admin/detail/:id"),component:d.default,exact:!0},{path:"".concat(N,"/router"),component:u.default,exact:!0},{path:"".concat(N,"/router-admin"),component:u.default,exact:!0},{path:"".concat(N,"/router/detail/:id"),component:h.default,exact:!0},{path:"".concat(N,"/router-admin/detail/:id"),component:h.default,exact:!0},{path:"".concat(N,"/router/:routerId/port/:id"),component:m.default,exact:!0},{path:"".concat(N,"/router-admin/:routerId/port/:id"),component:m.default,exact:!0},{path:"".concat(N,"/floatingip"),component:c.default,exact:!0},{path:"".concat(N,"/floatingip-admin"),component:c.default,exact:!0},{path:"".concat(N,"/floatingip/detail/:id"),component:f.default,exact:!0},{path:"".concat(N,"/floatingip-admin/detail/:id"),component:f.default,exact:!0},{path:"".concat(N,"/virtual_adapter"),component:v.default,exact:!0},{path:"".concat(N,"/virtual_adapter_admin"),component:v.default,exact:!0},{path:"".concat(N,"/virtual_adapter/detail/:id"),component:g.default,exact:!0},{path:"".concat(N,"/virtual_adapter_admin/detail/:id"),component:g.default,exact:!0},{path:"".concat(N,"/qos-policy"),component:_.default,exact:!0},{path:"".concat(N,"/qos-policy-admin"),component:b.default,exact:!0},{path:"".concat(N,"/qos-policy/detail/:id"),component:y.default,exact:!0},{path:"".concat(N,"/qos-policy-admin/detail/:id"),component:y.default,exact:!0},{path:"".concat(N,"/topo"),component:p.default,exact:!0},{path:"".concat(N,"/load-balancers"),component:A.default,exact:!0},{path:"".concat(N,"/load-balancers-admin"),component:A.default,exact:!0},{path:"".concat(N,"/load-balancers/create"),component:I.default,exact:!0},{path:"".concat(N,"/load-balancers/detail/:id"),component:S.default,exact:!0},{path:"".concat(N,"/load-balancers-admin/detail/:id"),component:S.default,exact:!0},{path:"".concat(N,"/load-balancers/:loadBalancerId/listener/:id"),component:C.default,exact:!0},{path:"".concat(N,"/load-balancers-admin/:loadBalancerId/listener/:id"),component:C.default,exact:!0},{path:"".concat(N,"/certificate"),component:k.default,exact:!0},{path:"".concat(N,"/certificate-container/detail/:id"),component:D.default,exact:!0},{path:"".concat(N,"/certificate-secret/detail/:id"),component:B.default,exact:!0},{path:"".concat(N,"/vpn"),component:x.default,exact:!0},{path:"".concat(N,"/ipsec-site-connection/detail/:id"),component:w.default,exact:!0},{path:"".concat(N,"/ipsec-site-connection-admin/detail/:id"),component:w.default,exact:!0},{path:"".concat(N,"/vpn-admin"),component:x.default,exact:!0},{path:"".concat(N,"/security-group"),component:P.default,exact:!0},{path:"".concat(N,"/security-group-admin"),component:P.default,exact:!0},{path:"".concat(N,"/security-group/detail/:id"),component:E.default,exact:!0},{path:"".concat(N,"/security-group-admin/detail/:id"),component:E.default,exact:!0},{path:"*",component:l.default}]}];t.default=M},3655:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.Network=void 0;var l=r(382),o=n(r(1152)),s=n(r(1478));class d extends o.default{get tabs(){var e=[{title:t("Current Project Network"),key:"projectNetwork",component:s.default},{title:t("Shared Network"),key:"sharedNetwork",component:s.default},{title:t("External Network"),key:"externalNetwork",component:s.default}];return this.hasAdminRole&&e.push({title:t("All Network"),key:"allNetwork",component:s.default}),e}}a.Network=d;var u=(0,l.inject)("rootStore")((0,l.observer)(d));a.default=u},3656:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(37)),o=r(1113),s=n(r(321)),d=r(1123),u=n(r(136));class c extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","delete_network"),(0,l.default)(this,"allowedCheckFunc",(e=>!e||this.isCurrentProject(e))),(0,l.default)(this,"onSubmit",(e=>s.default.delete(e)))}get id(){return"delete"}get title(){return t("Delete Network")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete network")}isCurrentProject(e){var t=u.default;return!(!(0,d.checkSystemAdmin)()&&e.project_id!==t.user.project.id)}}a.default=c},3657:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var p=f(r(65)),h=f(r(71)),m=f(r(37)),v=r(382),g=r(1113),_=f(r(321)),b=r(1123),y=f(r(136)),A=r(135);function I(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}class S extends g.ModalAction{constructor(){super(...arguments),(0,m.default)(this,"onSubmit",(e=>{var{item:{id:t}={}}=this.props,{name:a,description:r,port_security_enabled:i}=e,n=(0,h.default)(e,["name","description","port_security_enabled"]),l={name:a,description:r,port_security_enabled:i};return this.isSystemAdmin&&(l.shared=n.shared),this.isAdminPage&&(l["router:external"]=n["router:external"]),_.default.edit({id:t},l)}))}get defaultValue(){var{item:e}=this.props;return function(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=I(Object(r),!0)).call(a,(function(t){(0,m.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=I(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}({},e)}get isSystemAdmin(){return(0,b.checkSystemAdmin)()}get formItems(){return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea",required:!1},{name:"shared",label:t("Shared"),type:"radio",hidden:!this.isSystemAdmin,options:(0,A.getYesNoList)()},{name:"port_security_enabled",label:t("Port Security Enabled"),type:"switch",required:!0},{name:"router:external",label:t("External Network"),type:"check",hidden:!this.isAdminPage}]}}a.Edit=S,(0,m.default)(S,"id","edit-network"),(0,m.default)(S,"title",t("Edit")),(0,m.default)(S,"buttonText",t("Edit")),(0,m.default)(S,"policy","update_network"),(0,m.default)(S,"allowed",(e=>{var t=y.default;return S.isSystemAdmin||e.project_id===t.user.project.id?p.default.resolve(!0):p.default.resolve(!1)}));var C=(0,v.inject)("rootStore")((0,v.observer)(S));a.default=C},3658:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.NetworkDetail=void 0;var p=f(r(518)),h=f(r(37)),m=r(382),v=f(r(1119)),g=r(321),_=r(522),b=f(r(1317)),y=f(r(136)),A=f(r(3659)),I=f(r(3663)),S=f(r(1479));function C(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=C(Object(r),!0)).call(a,(function(t){(0,h.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=C(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}class w extends v.default{constructor(){super(...arguments),(0,h.default)(this,"fetchData",(e=>{if(this.store.fetchDetail){var t=x(x(x({},this.params),e||{}),{},{all_projects:this.isAdminPage});this.store.fetchDetailWithAvailabilityAndUsage(x(x({},t),{},{isAdminPage:this.isAdminPage,currentProjectId:y.default.user.project.id})).catch(this.catch)}}))}get name(){return t("network")}get policy(){return"get_network"}get listUrl(){return this.getRoutePath("network")}get actionConfigs(){return S.default}get canAddNetworkIPUsageInfo(){return this.isAdminPage||y.default.user.project.id===this.detailData.project_id}get detailInfos(){var e=[{title:t("Name"),dataIndex:"name"},{title:t("Project ID"),dataIndex:"project_id"},{title:t("Status"),dataIndex:"status",render:e=>_.networkStatus[e]||"-"},{title:t("Admin State"),dataIndex:"admin_state_up",valueRender:"yesNo"},{title:t("Shared"),dataIndex:"shared",valueRender:"yesNo"},{title:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime"},{title:t("Update At"),dataIndex:"updated_at",valueRender:"toLocalTime"},{title:t("Description"),dataIndex:"description"}];return this.isAdminPage&&((0,p.default)(e).call(e,2,0,{title:t("Project Name"),dataIndex:"projectName"}),(0,p.default)(e).call(e,7,0,{title:t("DHCP Agents"),dataIndex:"dhcp_agents"})),this.canAddNetworkIPUsageInfo&&(0,p.default)(e).call(e,4,0,{title:t("Total IPs"),dataIndex:"total_ips"},{title:t("Used IPs"),dataIndex:"used_ips"}),e}get tabs(){return[{title:t("BaseDetail"),key:"BaseDetail",component:I.default},{title:t("Subnets"),key:"subnets",component:A.default},{title:t("Ports"),key:"ports",component:b.default}]}init(){this.store=new g.NetworkStore}}a.NetworkDetail=w;var P=(0,m.inject)("rootStore")((0,m.observer)(w));a.default=P},3659:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Subnets=void 0;var p=f(r(33)),h=f(r(320)),m=f(r(62)),v=f(r(101)),g=f(r(518)),_=f(r(71)),b=f(r(37)),y=r(382),A=f(r(1114)),I=r(390),S=r(32),C=f(r(136)),x=f(r(3660));function w(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=w(Object(r),!0)).call(a,(function(t){(0,b.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=w(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}class E extends A.default{constructor(){super(...arguments),(0,b.default)(this,"getDataSource",(()=>{var e,{data:t,filters:a={},timeFilter:r={}}=this.list,{id:i,tab:n}=a,l=(0,_.default)(a,["id","tab"]),o=[];this.isFilterByBackend?o=(0,S.toJS)(t):(o=(0,p.default)(e=(0,S.toJS)(t)||[]).call(e,(e=>this.filterData(e,(0,S.toJS)(l),(0,S.toJS)(r)))),this.updateList({total:o.length}));return(0,h.default)(o).call(o,(e=>this.itemInTransitionFunction(e)))?this.setRefreshDataTimerTransition():this.setRefreshDataTimerAuto(),(0,m.default)(o).call(o,(e=>{var t;return P(P({},(0,v.default)(t=this.subnet_ip_availability).call(t,(t=>t.subnet_id===e.id))),e)}))})),(0,b.default)(this,"updateFetchParams",(()=>{var{id:e}=this.props.match.params;return{network_id:e}})),(0,b.default)(this,"getColumns",(()=>{var e=[{title:t("Name"),dataIndex:"name",stringify:(e,t)=>e||t.id},{title:t("CIDR"),dataIndex:"cidr",isHideable:!0},{title:t("Gateway IP"),dataIndex:"gateway_ip",isHideable:!0},{title:t("IP Version"),dataIndex:"ip_version",isHideable:!0},{title:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime",isHideable:!0}];return this.canAddNetworkIPUsageInfo&&(0,g.default)(e).call(e,4,0,{title:t("Total IPs"),dataIndex:"total_ips"},{title:t("Used IPs"),dataIndex:"used_ips"}),e}))}init(){this.store=new I.SubnetStore;var{detail:{subnet_ip_availability:e=[]}={}}=this.props;this.subnet_ip_availability=e}get policy(){return"get_subnet"}get name(){return t("subnets")}get id(){return this.params.id}get actionConfigs(){return x.default}get canAddNetworkIPUsageInfo(){return this.isAdminPage||C.default.user.project.id===this.props.detail.project_id}get searchFilters(){return[{label:t("Name"),name:"name"}]}}a.Subnets=E;var k=(0,y.inject)("rootStore")((0,y.observer)(E));a.default=k},3660:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(1482)),l=i(a(3661)),o={rowActions:{firstAction:i(a(3662)).default,moreActions:[{action:l.default}]},batchActions:[l.default],primaryActions:[n.default]};t.default=o},3661:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(37)),o=r(1113),s=n(r(390));class d extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","delete_subnet"),(0,l.default)(this,"allowedCheckFunc",(e=>!e||this.isOwnerOrAdmin(e))),(0,l.default)(this,"onSubmit",(e=>s.default.delete(e)))}get id(){return"delete"}get title(){return t("Delete Subnet")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete subnet")}isOwnerOrAdmin(){return!0}}a.default=d},3662:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.EditSubnet=void 0;var p=f(r(65)),h=f(r(71)),m=f(r(37)),v=r(382),g=r(1113),_=r(514),b=f(r(390)),y=f(r(559));function A(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=A(Object(r),!0)).call(a,(function(t){(0,m.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=A(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}var{checkAllocation_pools:S,checkIpv6Allocation_pools:C,checkDNS:x,checkIpv6DNS:w,checkHostRoutes:P,checkIpv6HostRoutes:E,getAllocationPools:k,getHostRouters:D,getAllocationPoolsIntoLines:B,getDNSIntoLines:N,getHostRoutesIntoLines:M,splitToArray:R}=y.default,{isIpWithMask:j,isIPv6Cidr:T}=_.ipValidate;class F extends g.ModalAction{constructor(){super(...arguments),(0,m.default)(this,"onSubmit",(e=>{var{gateway_ip:t,allocation_pools:a,host_routes:r,dns:i,disable_gateway:n}=e,l=(0,h.default)(e,["gateway_ip","allocation_pools","host_routes","dns","disable_gateway"]),o=k(a),s=D(r||this.defaultValue.host_routes),d=R(i||this.defaultValue.dns),u=I(I({},l),{},{network_id:this.subnet.network_id,allocation_pools:o,host_routes:s,dns_nameservers:d});return n?u.gateway_ip=null:t&&t!==this.item.gateway_ip&&(u.gateway_ip=t),b.default.update(this.subnet,u)}))}get name(){return t("Edit Subnet")}get subnet(){return this.props.item}get defaultValue(){return I(I({},this.subnet),{},{subnet_name:this.subnet.name,allocation_pools:B(this.subnet.allocation_pools),host_routes:M(this.subnet.host_routes),dns:N(this.subnet.dns_nameservers),disable_gateway:!this.subnet.gateway_ip,gateway_ip:this.subnet.gateway_ip,more:!1})}get formItems(){var{more:e,disable_gateway:a=!this.item.gateway_ip}=this.state;return[{name:"subnet_name",label:t("Subnet Name"),type:"input-name",required:!0},{name:"cidr",label:t("CIDR"),type:"input",placeholder:"192.168.0.0/24",disabled:!0,required:!0,validator:(e,a)=>(4===this.subnet.ip_version?j(a):T(a))?p.default.resolve(!0):p.default.reject(new Error(t("Invalid CIDR."))),tip:t("It is recommended that you use the private network address 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16")},{name:"disable_gateway",label:t("Disable Gateway"),type:"check",onChange:e=>{this.setState({disable_gateway:e},(()=>{this.formRef.current.validateFields(["gateway_ip"])}))},hidden:!e},{name:"gateway_ip",label:t("Gateway IP"),type:"ip-input",version:this.subnet.ip_version,required:!a,tip:t("If no gateway is specified, the first IP address will be defaulted."),hidden:!(e&&!a)},{name:"enable_dhcp",label:t("DHCP"),type:"radio",optionType:"default",options:[{label:t("Enabled"),value:!0},{label:t("Disabled"),value:!1}],hidden:!e},{name:"allocation_pools",label:t("Allocation Pools"),type:"textarea",extra:t("IP address allocation polls, one enter per line(e.g. 192.168.1.2,192.168.1.200)"),hidden:!e,validator:4===this.subnet.ip_version?S:C},{name:"dns",label:t("DNS"),type:"textarea",extra:t("One entry per line(e.g. 114.114.114.114)"),hidden:!e,validator:4===this.subnet.ip_version?x:w},{name:"host_routes",label:t("Host Routes"),type:"textarea",extra:t("Additional routes announced to the instance, one entry per line(e.g. 192.168.200.0/24,10.56.1.254)"),hidden:!e,validator:4===this.subnet.ip_version?P:E},{name:"more",label:t("Advanced Options"),type:"more"}]}}a.EditSubnet=F,(0,m.default)(F,"id","edit-subnet"),(0,m.default)(F,"title",t("Edit Subnet")),(0,m.default)(F,"buttonText",t("Edit")),(0,m.default)(F,"policy","update_subnet"),(0,m.default)(F,"allowed",(()=>p.default.resolve(!0)));var Q=(0,v.inject)("rootStore")((0,v.observer)(F));a.default=Q},3663:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var l=r(382),o=n(r(1122)),s=r(83);class d extends o.default{get leftCards(){return[this.baseInfoCard]}get qosEndpoint(){return(0,s.qosEndpoint)()}get baseInfoCard(){var e=[{label:t("Availability Zone"),dataIndex:"availability_zones"},{label:t("Availability Zone Hints"),dataIndex:"availability_zone_hints"},{label:t("MTU"),dataIndex:"mtu"},{label:t("Router External"),dataIndex:"router:external",valueRender:"yesNo"},{label:t("Provider Network Type"),dataIndex:"provider:network_type"},{label:t("Provider Physical Network"),dataIndex:"provider:physical_network",render:e=>e||"-"},{label:t("Segmentation ID"),dataIndex:"provider:segmentation_id"},{label:t("Port Security Enabled"),dataIndex:"port_security_enabled",valueRender:"yesNo"}];return this.qosEndpoint&&e.push({label:t("QoS Policy"),dataIndex:"qos_policy_id",render:e=>e||"-"}),{title:t("Base Info"),options:e}}}a.BaseDetail=d;var u=(0,l.inject)("rootStore")((0,l.observer)(d));a.default=u},3664:function(e,a,r){"use strict";var i=r(156),n=r(19),l=r(25),o=r(21);n(a,"__esModule",{value:!0}),a.default=a.Routes=void 0;var s=o(r(37)),d=r(382),u=o(r(1114)),c=r(1137),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var r={},i=n&&l;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?l(e,o):null;s&&(s.get||s.set)?n(r,o,s):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(r(526)),p=o(r(1483));function h(e){if("function"!=typeof i)return null;var t=new i,a=new i;return(h=function(e){return e?a:t})(e)}class m extends u.default{constructor(){super(...arguments),(0,s.default)(this,"getColumns",(()=>(0,c.getRouterColumns)(this)))}init(){this.store=this.inDetailPage?new f.RouterStore:f.default,this.downloadStore=new f.RouterStore}get policy(){return"get_router"}get name(){return t("routers")}get actionConfigs(){return this.isAdminPage?p.default.adminConfigs:p.default.actionConfigs}get isFilterByBackend(){return!0}get isSortByBackend(){return!0}get adminPageHasProjectFilter(){return!0}get defaultSortKey(){return"status"}get searchFilters(){return c.routerFilters}}a.Routes=m;var v=(0,d.inject)("rootStore")((0,d.observer)(m));a.default=v},3665:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(65)),o=n(r(320)),s=n(r(91)),d=n(r(52)),u=n(r(37)),c=r(1113),f=r(47),p=n(r(526));class h extends c.ConfirmAction{constructor(){var e;super(...arguments),e=this,(0,u.default)(this,"policy","delete_router"),(0,u.default)(this,"submitErrorMsg",(e=>{var a=this.getName(e);return this.connectSubnets?t("Unable to {action}, because : {reason}, instance: {name}.",{action:this.actionName||this.title,name:a,reason:t("the router has connected subnet")}):t("Unable to {action}, instance: {name}.",{action:this.actionName||this.title,name:a})})),(0,u.default)(this,"allowedCheckFunc",(e=>!e||this.notExternalGateway(e))),(0,u.default)(this,"performErrorMsg",(e=>{var a=(0,f.isArray)(e)?e[0]:e,{name:r}=a,i=t('You are not allowed to delete router "{ name }".',{name:r});return this.notExternalGateway(a)||(i=t('Unable to delete router "{ name }". External gateway is opened, please clear external gateway first.',{name:r})),i})),(0,u.default)(this,"onSubmit",function(){var a=(0,d.default)((function*(a,r,i){if(i)return p.default.delete(a);var n=yield p.default.fetchConnectedSubnets(e.item);return n.connectSubnets.length?(e.connectSubnets=n.connectSubnets,e.showConfirmErrorBeforeSubmit=!0,e.confirmErrorMessageBeforeSubmit=t("Unable to {action}, because : {reason}, instance: {name}.",{action:e.actionName||e.title,name:e.item.name,reason:t("the router has connected subnet")}),l.default.reject()):(e.showConfirmErrorBeforeSubmit=!1,p.default.delete(a))}));return function(e,t,r){return a.apply(this,arguments)}}())}get id(){return"delete"}get title(){return t("Delete Router")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete router")}notAssociatedNet(e){if(!e.ports||0===e.ports.length)return!0;var t,a=["network:router_interface_distributed","network:router_interface","network:ha_router_replicated_interface"];return!(e.ports.length>0)||!(0,o.default)(t=e.ports).call(t,(e=>(0,s.default)(a).call(a,e.device_owner)>-1))}notExternalGateway(e){return!e.hasExternalGateway}}a.default=h},3666:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var l=n(r(65)),o=n(r(37)),s=r(382),d=n(r(526)),u=r(1113);class c extends u.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"onSubmit",(e=>{var{id:t}=this.item;return d.default.edit({id:t},e)}))}init(){this.store=d.default}get defaultValue(){var{item:e}=this.props;return{name:e.name,description:e.description}}get formItems(){return[{name:"name",label:t("Name"),type:"input-name",required:!0,placeholder:t("Please input name"),withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea",required:!1}]}}a.Edit=c,(0,o.default)(c,"id","edit-router"),(0,o.default)(c,"title",t("Edit Router")),(0,o.default)(c,"buttonText",t("Edit")),(0,o.default)(c,"policy","update_router"),(0,o.default)(c,"allowed",(e=>l.default.resolve("Default Router"!==e.name)));var f=(0,s.inject)("rootStore")((0,s.observer)(c));a.default=f},3667:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(37)),o=r(1113),s=n(r(526));class d extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","update_router"),(0,l.default)(this,"allowedCheckFunc",(e=>!e||this.hasGateway(e))),(0,l.default)(this,"onSubmit",(e=>{var{id:t}=e;return s.default.edit({id:t},{external_gateway_info:null})}))}get id(){return"clear-gateway"}get title(){return t("Close External Gateway")}get buttonText(){return t("Close External Gateway")}get actionName(){return t("Close external gateway")}hasGateway(e){return e.hasExternalGateway}}a.default=d},3668:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.SetGateway=void 0;var p=f(r(65)),h=f(r(37)),m=r(382),v=f(r(526)),g=r(321),_=r(1113),b=r(522);function y(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=y(Object(r),!0)).call(a,(function(t){(0,h.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=y(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}class I extends _.ModalAction{constructor(){super(...arguments),(0,h.default)(this,"onSubmit",(e=>{var{externalNetwork:t}=e,{id:a}=this.item,r={external_gateway_info:{network_id:t.selectedRowKeys[0]}};return this.store.edit({id:a},r)}))}init(){this.store=v.default,this.networkStore=new g.NetworkStore}static get modalSize(){return"large"}getModalSize(){return"large"}get name(){return t("open external gateway")}get formItems(){return[{name:"name",label:t("Name"),type:"label",iconType:"router"},A({name:"externalNetwork",label:t("External Gateway"),type:"select-table",backendPageStore:this.networkStore,extraParams:{"router:external":!0},required:!0,filterParams:[{label:t("Name"),name:"name"}],columns:[{title:t("Name"),dataIndex:"name"},{title:t("Status"),dataIndex:"status",render:e=>b.networkStatus[e]||"-"},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime",sorter:!1}]},b.networkSortProps)]}}a.SetGateway=I,(0,h.default)(I,"id","set-gateway"),(0,h.default)(I,"title",t("Open External Gateway")),(0,h.default)(I,"policy","update_router"),(0,h.default)(I,"allowed",(e=>p.default.resolve(!e.external_gateway_info)));var S=(0,m.inject)("rootStore")((0,m.observer)(I));a.default=S},3669:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.ConnectSubnet=void 0;var l=n(r(91)),o=n(r(28)),s=n(r(82)),d=n(r(65)),u=n(r(37)),c=r(382),f=r(32),p=r(526),h=n(r(390)),m=r(529),v=r(1113);class g extends v.ModalAction{constructor(){super(...arguments),(0,u.default)(this,"getSubnets",(()=>{var{networkId:e}=this.state;e&&this.subnetStore.fetchList({network_id:e})})),(0,u.default)(this,"onNetworkChange",(e=>{var{selectedRowKeys:t=[]}=e;this.setState({networkId:t[0]},(()=>{this.getSubnets()}))})),(0,u.default)(this,"disabledFuncSubnet",(e=>{var t,{allocation_pools:a=[]}=e;return 0===a.length||(0,l.default)(t=this.excludeSubnetIds).call(t,e.id)>=0})),(0,u.default)(this,"onSubmit",(e=>{var{id:t}=this.item,{subnet:a}=e,r=a.selectedRowKeys[0],{networkId:i}=this.state;return this.store.connectSubnet({id:t,subnetId:r,networkId:i})}))}init(){this.store=new p.RouterStore,this.subnetStore=h.default,this.portStore=new m.PortStore,this.getPortList()}static get modalSize(){return"large"}getModalSize(){return"large"}get name(){return t("connect subnet")}get subnets(){var{networkId:e}=this.state;return e?(0,f.toJS)(this.subnetStore.list.data||[]):[]}getPortList(){var{id:e}=this.item;this.portStore.fetchList({device_id:e})}get excludeSubnetIds(){var e,t=[];return(0,o.default)(e=(0,f.toJS)(this.portStore.list.data||[])).call(e,(e=>{var a;(0,o.default)(a=e.fixed_ips).call(a,(e=>{t.push(e.subnet_id)}))})),t}get formItems(){var{networkId:e}=this.state;return[{name:"name",label:t("Name"),type:"label",iconType:"router"},{name:"network",label:t("Network"),type:"network-select-table",required:!0,onChange:this.onNetworkChange},{name:"subnet",label:t("Subnet"),type:"select-table",data:this.subnets,isLoading:e&&this.subnetStore.list.isLoading,disabledFunc:this.disabledFuncSubnet,required:!0,filterParams:[{label:t("Name"),name:"name"}],columns:[{title:t("Name"),dataIndex:"name"},{title:t("Cidr"),dataIndex:"cidr"},{title:t("Allocation Pools"),dataIndex:"allocation_pools",render:e=>{var t;return e&&0!==e.length?(0,s.default)(t="".concat(e[0].start," -- ")).call(t,e[0].end):"-"}},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime"}]}]}}a.ConnectSubnet=g,(0,u.default)(g,"id","connect-subnet"),(0,u.default)(g,"title",t("Connect Subnet")),(0,u.default)(g,"policy","add_router_interface"),(0,u.default)(g,"allowed",(()=>d.default.resolve(!0)));var _=(0,c.inject)("rootStore")((0,c.observer)(g));a.default=_},3670:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.DisconnectSubnet=void 0;var l=n(r(28)),o=n(r(91)),s=n(r(65)),d=n(r(62)),u=n(r(328)),c=n(r(537)),f=n(r(101)),p=n(r(82)),h=n(r(52)),m=n(r(37)),v=r(382),g=r(32),_=r(526),b=n(r(321)),y=n(r(390)),A=r(529),I=r(1113);class S extends I.ModalAction{constructor(){super(...arguments),(0,m.default)(this,"onSubmit",(e=>{var{id:t}=this.item,{subnet:a}=e,r=a.selectedRowKeys[0];return this.store.disconnectSubnet({id:t,subnetId:r})}))}init(){this.store=new _.RouterStore,this.networkStore=b.default,this.subnetStore=y.default,this.portStore=new A.PortStore,this.getSubnetList(),this.state.subnetLoading=!0}static get modalSize(){return"large"}getModalSize(){return"large"}get name(){return t("disconnect subnet")}getSubnetList(){var e=this;return(0,h.default)((function*(){var t,a,r,{id:i}=e.item;yield e.portStore.fetchList({device_id:i});var n=[],p=[],h=["network:router_interface_distributed","network:router_interface","network:ha_router_replicated_interface"];(0,l.default)(t=(0,g.toJS)(e.portStore.list.data||[])).call(t,(e=>{var t;(0,o.default)(h).call(h,e.device_owner)>-1&&(p.push(e.network_id),(0,l.default)(t=e.fixed_ips).call(t,(e=>{n.push(e.subnet_id)})))}));var m=yield s.default.all((0,d.default)(a=(0,u.default)(new c.default(n))).call(a,(t=>e.subnetStore.fetchDetail({id:t})))),v=yield s.default.all((0,d.default)(r=(0,u.default)(new c.default(p))).call(r,(t=>e.networkStore.fetchDetail({id:t}))));(0,l.default)(m).call(m,(e=>{var t=(0,f.default)(v).call(v,(t=>t.id===e.network_id));e.network=t})),e.setState({subnets:(0,d.default)(m).call(m,(e=>(0,g.toJS)(e))),subnetLoading:!1})}))()}get formItems(){var{subnets:e=[],subnetLoading:a}=this.state;return[{name:"name",label:t("Name"),type:"label",iconType:"router"},{name:"subnet",label:t("Subnet"),type:"select-table",data:e,isLoading:a,required:!0,filterParams:[{label:t("Name"),name:"name"}],columns:[{title:t("Name"),dataIndex:"name"},{title:t("Network"),dataIndex:"network",render:e=>e&&e.name||"-"},{title:t("Cidr"),dataIndex:"cidr"},{title:t("Allocation Pools"),dataIndex:"allocation_pools",render:e=>{var t;return e&&0!==e.length?(0,p.default)(t="".concat(e[0].start," -- ")).call(t,e[0].end):"-"}},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime"}]}]}}a.DisconnectSubnet=S,(0,m.default)(S,"id","disconnect-subnet"),(0,m.default)(S,"title",t("Disconnect Subnet")),(0,m.default)(S,"policy","remove_router_interface"),(0,m.default)(S,"allowed",(()=>s.default.resolve(!0)));var C=(0,v.inject)("rootStore")((0,v.observer)(S));a.default=C},3671:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.FloatingIpDetail=void 0;var l=r(382),o=n(r(1119)),s=r(1151),d=r(323),u=r(47),c=r(1257),f=n(r(1458)),p=n(r(3672)),h=n(r(3673));class m extends o.default{get name(){return t("floating ip")}get policy(){return"get_floatingip"}get listUrl(){return this.getRoutePath("fip")}get actionConfigs(){return this.isAdminPage?f.default.adminConfigs:f.default.actionConfigs}get detailInfos(){return[{title:t("Floating IP"),dataIndex:"floating_ip_address"},{title:t("Status"),dataIndex:"status",render:e=>s.floatingIpStatus[e]||"-"},{title:t("Project ID"),dataIndex:"tenant_id",hidden:!this.isAdminPage},{title:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime"},{title:t("Description"),dataIndex:"description"}]}get tabs(){var e=[{title:t("BaseDetail"),key:"BaseDetail",component:p.default}];return(0,c.enablePFW)()&&(0,u.isNull)(this.detailData.fixed_ip_address)&&e.push({title:t("Port Forwarding Rules"),key:"port_forwarding_rules",component:h.default}),e}init(){this.store=new d.FloatingIpStore}}a.FloatingIpDetail=m;var v=(0,l.inject)("rootStore")((0,l.observer)(m));a.default=v},3672:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var p=f(r(82)),h=f(r(37)),m=r(382),v=r(323),g=f(r(1122));function _(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=_(Object(r),!0)).call(a,(function(t){(0,h.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=_(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}class y extends g.default{constructor(){super(...arguments),(0,h.default)(this,"fetchData",(()=>{var{router_id:e}=this.props.detail;e&&this.store.getAddInfo({router_id:e}).catch(this.catch)}))}init(){this.store=new v.FloatingIpStore}get isLoading(){var{router_id:e}=this.props.detail;return!!e&&this.store.isLoading}get detailData(){return b(b({},this.props.detail),{},{router_name:this.store.addInfo.name,network_name:this.store.addInfo.externalNetworkName})}get leftCards(){return[this.baseInfoCard]}get baseInfoCard(){var e=[{label:t("Fixed IP"),dataIndex:"fixed_ip_address"},{label:t("Network Line"),dataIndex:"network_name"},{label:t("Router"),dataIndex:"router_id",render:(e,t)=>{if(e){var a,{router_name:r,network_name:i}=t;if("-"===r&&"-"===i)return e;var n=r?(0,p.default)(a="".concat(e," (")).call(a,r,")"):e;return this.getLinkRender("routerDetail",n,{id:e})}return"-"}}];return{title:t("Base Info"),options:e}}}a.BaseDetail=y;var A=(0,m.inject)("rootStore")((0,m.observer)(y));a.default=A},3673:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.PortForwarding=void 0;var p=f(r(71)),h=f(r(37)),m=r(382),v=f(r(1114)),g=r(553),_=f(r(3674));function b(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}class y extends v.default{constructor(){super(...arguments),(0,h.default)(this,"updateFetchParamsByPage",(e=>{var{id:t,all_projects:a}=e,r=(0,p.default)(e,["id","all_projects"]);return function(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=b(Object(r),!0)).call(a,(function(t){(0,h.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=b(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}({fipId:t,fipInfo:this.props.detail},r)})),(0,h.default)(this,"getColumns",(()=>[{title:t("External Port"),dataIndex:"external_port"},{title:t("Internal Ip Address"),dataIndex:"internal_ip_address",isHideable:!0},{title:t("Internal Port"),dataIndex:"internal_port",isHideable:!0},{title:t("Protocol"),dataIndex:"protocol",isHideable:!0}]))}init(){this.store=new g.PortForwardingStore,this.downloadStore=new g.PortForwardingStore}get policy(){return"get_floatingip_port_forwarding"}get name(){return t("port forwardings")}get isFilterByBackend(){return!0}get actionConfigs(){return this.isAdminPage?_.default.actionConfigsAdmin:_.default.actionConfigs}get searchFilters(){return[{label:t("Protocol"),name:"protocol",options:[{label:"TCP",key:"tcp"},{label:"UDP",key:"udp"}]},{label:t("External Port"),name:"external_port"}]}}a.PortForwarding=y;var A=(0,m.inject)("rootStore")((0,m.observer)(y));a.default=A},3674:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(1459)),l=i(a(3675)),o=i(a(3676)),s={actionConfigs:{rowActions:{firstAction:l.default,moreActions:[{action:o.default}]},batchActions:[],primaryActions:[n.default]},actionConfigsAdmin:{rowActions:{firstAction:o.default},batchActions:[],primaryActions:[]}};t.default=s},3675:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(156),p=r(21);c(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var h=p(r(33)),m=p(r(62)),v=p(r(82)),g=p(r(65)),_=p(r(320)),b=p(r(1194)),y=p(r(518)),A=p(r(1177)),I=p(r(71)),S=p(r(52)),C=p(r(37)),x=p(r(0)),w=r(382),P=p(r(553)),E=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=M(t);if(a&&a.has(e))return a.get(e);var r={},i=c&&o;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var l=i?o(e,n):null;l&&(l.get||l.set)?c(r,n,l):r[n]=e[n]}r.default=e,a&&a.set(e,r);return r}(r(529)),k=r(1137),D=r(1151),B=r(1129),N=(r(513),r(1113));function M(e){if("function"!=typeof f)return null;var t=new f,a=new f;return(M=function(e){return e?a:t})(e)}function R(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=R(Object(r),!0)).call(a,(function(t){(0,C.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=R(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}class T extends N.ModalAction{constructor(){var e;super(...arguments),e=this,(0,C.default)(this,"portsDisableFunc",(e=>0===e.fixed_ips.length)),(0,C.default)(this,"handlePortSelect",function(){var t=(0,S.default)((function*(t){e.setState({fixedIpLoading:!0});var{canReachSubnetIdsWithRouterId:a}=e.state,r=yield(0,D.getInterfaceWithReason)(t.selectedRows),i=(0,B.getPortsAndReasons)(r,a,!0);return e.setState({portFixedIPs:i,fixed_ip_address:void 0,fixedIpLoading:!1}),e.formRef.current&&e.formRef.current.resetFields(["fixed_ip_address"]),i}));return function(e){return t.apply(this,arguments)}}()),(0,C.default)(this,"onSubmit",(e=>{var{floatingIp:t,virtual_adapter:{selectedRows:a=[]}={},fixed_ip_address:{selectedRows:r=[]}={}}=e,i=j({},(0,I.default)(e,["floatingIp","virtual_adapter","fixed_ip_address"]));return i.internal_ip_address=r[0].fixed_ip_address,i.internal_port_id=a[0].id,P.default.edit({fipId:this.item.fip.id,id:this.item.id},i)}))}get name(){return t("Edit DNAT Rule")}init(){this.portStore=new E.PortStore,k.getCanReachSubnetIdsWithRouterIdInComponent.call(this,(e=>{var{item:{fip:t}}=this;return e.external_gateway_info&&e.external_gateway_info.network_id===t.floating_network_id})).then((()=>{this.getInitialPortFixedIPs()})),this.getFipAlreadyUsedPorts(),this.state={alreadyUsedPorts:[],instanceFixedIPs:[],portFixedIPs:[],canReachSubnetIdsWithRouterId:[],routerIdWithExternalNetworkInfo:[]}}getFipAlreadyUsedPorts(){var e=this;return(0,S.default)((function*(){var t=yield P.default.fetchList({fipId:e.item.fip.id});e.setState({alreadyUsedPorts:t||[]})}))()}getInitialPortFixedIPs(){var e=this;return(0,S.default)((function*(){e.setState({fixedIpLoading:!0});var{internal_port_id:t,internal_ip_address:a}=e.item,r=yield E.default.fetchDetail({id:t});return e.handlePortSelect({selectedRows:[r]}).then((t=>{var i=(0,h.default)(t).call(t,(e=>e.fixed_ip_address===a)),n={selectedRowKeys:(0,m.default)(i).call(i,(e=>e.id)),selectedRows:i};return e.formRef.current&&e.formRef.current.setFields([{name:"virtual_adapter",value:{selectedRowKeys:[r.id],selectedRows:[r]}}]),n})).then((t=>{e.setState({fixed_ip_address:t})}))}))()}get instanceName(){var e,t,a,{floating_ip_address:r,external_port:i,internal_ip_address:n,internal_port:l}=this.item;return(0,v.default)(e=(0,v.default)(t=(0,v.default)(a="".concat(r,":")).call(a,i," => ")).call(t,n,":")).call(e,l)}static get modalSize(){return"large"}getModalSize(){return"large"}get defaultValue(){var e=this.item,{floating_ip_address:t,fip:a,internal_port_id:r,internal_ip_address:i}=e;return j({floatingIp:t,virtual_adapter:{selectedRowKeys:[r]},fixed_ip_address:{selectedRowKeys:[i],selectedRows:[{fixed_ip_address:i}]}},(0,I.default)(e,["floating_ip_address","fip","internal_port_id","internal_ip_address"]))}get formItems(){var{fixed_ip_address:e={selectedRows:[]}}=this.state,a=[{name:"floatingIp",label:t("Floating Ip"),type:"label",icon:x.default.createElement(A.default,null)},{name:"protocol",label:t("Protocol"),type:"select",options:[{label:"TCP",value:"tcp"},{label:"UDP",value:"udp"}],required:!0},{name:"external_port",label:t("External Port"),type:"input-number",min:1,max:65535,required:!0,validator:(e,a)=>{var r;if(!a)return g.default.reject(new Error((0,v.default)(r="".concat(t("Please input")," ")).call(r,t("External Port"))));var{alreadyUsedPorts:i}=this.state,{external_port:n}=this.item;return(0,_.default)(i).call(i,(e=>e.external_port!==n&&e.external_port===a))?g.default.reject(new Error(t("The port of this fip is in use, Please change another port."))):g.default.resolve(!0)}},{name:"internal_port",label:t("Internal Port"),type:"input-number",hidden:0===e.selectedRows.length,min:1,max:65535,required:!0,validator:(e,a)=>{var r;if(!a)return g.default.reject(new Error((0,v.default)(r="".concat(t("Please input")," ")).call(r,t("Internal Port"))));var i=this.formRef.current.getFieldsValue(["virtual_adapter","fixed_ip_address"]),n=(i.fixed_ip_address&&i.fixed_ip_address.selectedRows||[""])[0].fixed_ip_address,l=i.virtual_adapter.selectedRows[0].id,{internal_port:o}=this.item,{alreadyUsedPorts:s}=this.state;return(0,_.default)(s).call(s,(e=>e.internal_port!==o&&e.internal_port===a&&e.internal_port_id===l&&e.internal_ip_address===n))?g.default.reject(new Error(t("A DNAT rule has been created for this port of this IP, please choose another port."))):g.default.resolve(!0)}}],r=B.getPortFormItem.call(this,["compute:nova",""]);r[(0,b.default)(r).call(r,(e=>"virtual_adapter"===e.name))].label=t("Target Port");var i=(0,b.default)(r).call(r,(e=>"fixed_ip_address"===e.name));return r[i].label=t("Target IP Address"),r[i].onChange=e=>{this.setState({fixed_ip_address:e},(()=>{this.formRef.current.resetFields(["internal_port"])}))},(0,y.default)(a).call(a,3,0,...r),a}}a.Edit=T,(0,C.default)(T,"id","editDnat"),(0,C.default)(T,"title",t("Edit")),(0,C.default)(T,"policy","update_floatingip_port_forwarding"),(0,C.default)(T,"allowed",(()=>!0));var F=(0,w.inject)("rootStore")((0,w.observer)(T));a.default=F},3676:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(82)),o=n(r(37)),s=r(1113),d=n(r(553));class u extends s.ConfirmAction{constructor(){super(...arguments),(0,o.default)(this,"policy","delete_floatingip_port_forwarding"),(0,o.default)(this,"getItemName",(e=>{var t,a,r,{floating_ip_address:i,external_port:n,internal_ip_address:o,internal_port:s}=e;return(0,l.default)(t=(0,l.default)(a=(0,l.default)(r="".concat(i,":")).call(r,n,"--\x3e")).call(a,o,":")).call(t,s)})),(0,o.default)(this,"onSubmit",(e=>{var{fip:t,id:a}=e,r=t.id;return d.default.delete({floatingipId:r,id:a})}))}get id(){return"delete"}get title(){return t("Delete DNAT Rule")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete DNAT rule")}}a.default=u},3677:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Topology=void 0;var p=f(r(219)),h=f(r(28)),m=f(r(395)),v=f(r(91)),g=f(r(62)),_=f(r(82)),b=f(r(33)),y=f(r(322));r(324);var A=f(r(325));r(1146);var I=f(r(1147));r(534);var S=f(r(394));r(318);var C=f(r(317)),x=f(r(1438)),w=f(r(52)),P=f(r(37)),E=f(r(0)),k=(r(167),f(r(3678))),D=f(r(3679)),B=(r(513),r(382)),N=f(r(321)),M=r(3680),R=f(r(1253)),j=r(514),T=r(32),F=r(522),Q=f(r(1321)),L=f(r(1484)),O=f(r(1480)),q=f(r(1170)),V=f(r(3682)),H=f(r(1485));function U(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function G(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=U(Object(r),!0)).call(a,(function(t){(0,P.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=U(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}var K=null,{isIpInRangeAll:J}=j.ipValidate;class W extends E.default.Component{constructor(e){var t;super(e),t=this,(0,P.default)(this,"bindEvents",(()=>{K.on("node:mouseenter",(e=>{var t,{item:a}=e,{nodeType:r}=a._cfg.model;if((0,p.default)(t=["router","ins","lb"]).call(t,r)){var i,n=K.findAllByState("node","hover");(0,h.default)(n).call(n,(e=>{K.setItemState(e,"hover",!1)})),K.setItemState(a,"hover",!0);var l=K.findAllByState("edge","hover");(0,h.default)(l).call(l,(e=>{K.setItemState(e,"hover",!1),K.updateItem(e,{style:{stroke:e._cfg.target._cfg.model.style.stroke}})}));var o=a._cfg.model.style.stroke;(0,h.default)(i=a._cfg.edges).call(i,(e=>{K.setItemState(e,"hover",!0),K.updateItem(e,{style:{stroke:o}})}))}}))})),(0,P.default)(this,"updateGraph",(()=>{K&&(K.clear(),K.destroy(),K=null),this.setState({firstSubnetY:290,nodeCard:[],lbCard:[],insCard:[],extendWidth:0,loading:!0,withoutServerData:null,allData:null,showAll:!0}),this.initTopo()})),(0,P.default)(this,"renderRouterNode",((e,t)=>{var{routers:a}=this.topoInfo,r=[];if((0,h.default)(a).call(a,((a,i)=>{var{id:n,external_gateway_info:l,subnets:o,name:s}=a,d=(0,m.default)((t/10*i+t/20*3).toFixed(0));if(r.push({nodeCardX:d,nodeCardY:190}),e.nodes.push({id:n,x:d,y:190,type:"rect",nodeType:"router",infoIndex:i,size:[66,56],style:{radius:4,fill:"#FFFFFFFF",stroke:"ACTIVE"===a.status?"#57E39B":"#DB3A3A",shadowColor:"ACTIVE"===a.status?"rgba(87,227,155,0.61)":"rgba(237,33,48,1)",shadowBlur:"ACTIVE"===a.status?5:4},anchorPoints:[[.5,0]]}),null!==l&&e.edges.push({id:"edge-".concat(s,"-ext"),target:"extNet",targetAnchor:1,source:n,sourceAnchor:0,type:"arrowLine",style:{stroke:M.subnetsColors[0][0]}}),0!==o.length){var u=0;(0,h.default)(o).call(o,(t=>{var a,r,i=(0,v.default)(a=(0,g.default)(r=e.subnetNodes).call(r,(e=>e.id))).call(a,t);if(-1!==i){var l,{style:{stroke:o}}=e.subnetNodes[i];u+=1,e.edges.push({id:(0,_.default)(l="edge-".concat(s,"-")).call(l,t),target:t,targetAnchor:0,source:n,sourceAnchor:u,type:"arrowLine",style:{stroke:o}})}})),e.nodes[e.nodes.length-1].anchorPoints=this.getAnchorPoints(1,u)}})),r[0]){var i=r[r.length-1].nodeCardX,{extendWidth:n}=this.state;if(i>=t-5){var l=Math.ceil((i-(t-5))/(t/10));this.setState({extendWidth:n+l*(t/10)})}this.setState({nodeCard:r})}})),(0,P.default)(this,"renderNetworkNode",((e,t)=>{var{subnets:a,networks:r}=this.topoInfo,{extendWidth:i}=this.state;e.subnetNodes=[],(0,h.default)(r).call(r,(r=>{if(!(0,F.isExternalNetwork)(r)){var n,l=[],{firstSubnetY:o}=this.state;(0,h.default)(n=r.subnets).call(n,(e=>{(0,h.default)(a).call(a,(t=>{t.id===e&&l.push(t)}))}));var s=o+32*l.length+60;(0,h.default)(l).call(l,((a,n)=>{var l=M.subnetsColors[0],d=l[n%l.length];e.subnetNodes.push({id:a.id,label:a.name,labelCfg:{position:"right",offset:-t/2,style:{fill:"#000000"}},type:"rect",x:t/2,y:o+32*n,cardY:s,anchorPoints:[[.5,0],[.5,1]],comboId:r.id,style:{radius:4,fill:d,stroke:d,width:t+i-50,height:20},pools:a.allocation_pools,networkId:a.network_id})})),0!==l.length&&(this.setState({firstSubnetY:e.subnetNodes[e.subnetNodes.length-1].y+200}),e.combos.push({id:r.id,label:r.name,type:"rect",size:[t-40,30],style:{fill:M.combosBackground[0],stroke:M.combosColors[0],radius:4},labelCfg:{refY:1,position:"top",style:{fontSize:12}}}))}}))})),(0,P.default)(this,"renderInstanceNode",((e,a)=>{var{servers:r,subnets:i,extNetwork:n}=this.topoInfo,l=[];(0,h.default)(r).call(r,((r,o)=>{var s,{fixed_addresses:d,fixed_networks:u}=r,c=(0,m.default)((a/10*2).toFixed(0)),f=null,p=0,g=[];(0,h.default)(n).call(n,(e=>g.push(...(0,T.toJS)(e.subnets))));var y=(0,b.default)(i).call(i,(e=>-1!==(0,v.default)(g).call(g,e.id)));if(!d[0]){var{insCard:A}=this.state;f=e.subnetNodes[0].cardY,(0,h.default)(A).call(A,(e=>{e[0]===c&&e[1]===f&&(c+=(0,m.default)((a/10).toFixed(0))),Math.round(c)>=a+this.state.extendWidth&&this.setState((e=>({extendWidth:e.extendWidth+(0,m.default)((a/10).toFixed(0))})))})),l.push([c,f]),e.nodes.push({id:r.id,x:c,y:f,type:"rect",nodeType:"ins",infoIndex:o,size:[66,56],style:{radius:4,fill:"#FFFFFFFF",stroke:"active"===r.vm_state?"#57E39B":"#DB3A3A",shadowColor:"active"===r.vm_state?"rgba(87,227,155,0.61)":"rgba(237,33,48,1)",shadowBlur:"active"===r.vm_state?5:4}})}var I=0;(0,h.default)(d).call(d,(i=>{var n,s=null,d=0;if((0,h.default)(y).call(y,(e=>{var t;(0,h.default)(t=e.allocation_pools).call(t,(e=>{J(i,e.start,e.end)&&(s="extNet",d=0)}))})),(0,h.default)(n=e.subnetNodes).call(n,((e,t)=>{var a;-1!==(0,v.default)(u).call(u,e.networkId)&&(0,h.default)(a=e.pools).call(a,(a=>{J(i,a.start,a.end)&&(s=e.id,d=t)}))})),e.nodes[e.nodes.length-1].id!==r.id&&s){var{insCard:g}=this.state;f=e.subnetNodes[d].cardY,(0,h.default)(g).call(g,(e=>{e[0]===c&&e[1]===f&&(c+=(0,m.default)((a/10).toFixed(0))),c>=a+this.state.extendWidth&&this.setState((e=>({extendWidth:e.extendWidth+a/10})))})),l.push([c,f]),e.nodes.push({id:r.id,x:c,y:f,type:"rect",nodeType:"ins",infoIndex:o,size:[66,56],style:{radius:4,fill:"#FFFFFFFF",stroke:"active"===r.vm_state?"#57E39B":"#DB3A3A",shadowColor:"active"===r.vm_state?"rgba(87,227,155,0.61)":"rgba(237,33,48,1)",shadowBlur:"active"===r.vm_state?5:4}})}s&&function(){var n,{style:{stroke:o}}=e.subnetNodes[d],u=e.subnetNodes[d].y;u<f&&(p+=1);for(var h=0;h<l.length;h++){var v,g,y=(0,b.default)(v=e.edges).call(v,(e=>e.source!==r.id&&e.linePath&&e.linePath.source_x===c&&e.topAnchorNum===p&&(e.linePath.source_y>=f&&e.linePath.target_y<=u||e.linePath.source_y<=f&&e.linePath.target_y>=u))),A=(0,b.default)(g=e.nodes).call(g,(e=>e.x===c&&e.y===f&&e.id!==r.id));if(0===y.length&&0===A.length)break;c+=(0,m.default)((a/10).toFixed(0)),e.nodes[e.nodes.length-1].x=c,l[l.length-1]=[c,f],Math.round(c)>=a+t.state.extendWidth&&t.setState((e=>({extendWidth:e.extendWidth+a/10})))}e.edges.push({id:(0,_.default)(n="edge-".concat(r.id,"-")).call(n,i),target:s,targetAnchor:u>f?0:1,source:r.id,sourceAnchor:I,type:"arrowLine",topAnchorNum:p,style:{stroke:o},linePath:{source_x:c,source_y:f,target_y:u}}),I+=1}()}));var S=this.getAnchorPoints(p,I-p),C=(0,b.default)(s=e.edges).call(s,(e=>e.source===r.id));(0,h.default)(C).call(C,((e,t)=>{"extNet"===e.target&&1===S[t][1]&&([S[t],S[p-1]]=[S[p-1],S[t]])})),e.nodes[e.nodes.length-1].anchorPoints=S,this.setState({insCard:l})}))})),(0,P.default)(this,"getAnchorPoints",((e,t)=>{var a=[];return e>0&&a.push(...(0,F.getAnchorData)(e,0)),t>0&&a.push(...(0,F.getAnchorData)(t,1)),a})),(0,P.default)(this,"renderG6",(()=>{k.default.registerEdge("arrowLine",{draw(e,t){var{endPoint:a,startPoint:r}=e,i=e.style.stroke;return t.addShape("path",{attrs:{path:[["M",r.x,r.y],["L",r.x,a.y]],endArrow:{path:k.default.Arrow.vee(4,8,-4),d:1},startArrow:{path:k.default.Arrow.vee(4,8,-4),d:1},stroke:i||"#C8DEFF",lineWidth:2},name:"path-shape"}),t}});var e=document.getElementById("container").scrollWidth,t={nodes:[{id:"networkImage",x:e/2,y:50,img:D.default,type:"image",size:56,clipCfg:{show:!1,type:"circle",r:15}},{id:"extNet",type:"rect",label:"extNetwork",labelCfg:{position:"right",offset:-e/2,style:{fill:"#000000"}},x:e/2,y:100,anchorPoints:[[.5,0],[0,1]],style:{radius:4,fill:"#FFFFFFFF",stroke:M.subnetsColors[0][0],width:e-10,height:20}}],edges:[{id:"edge3",target:"networkImage",source:"extNet",style:{startArrow:{path:k.default.Arrow.vee(4,6,-1),d:2},lineWidth:1,stroke:M.subnetsColors[0][0]}}],combos:[]},{servers:a}=this.topoInfo;if(a){t=K.cfg.data,this.renderRouterNode(t,e),this.extendNetworkWidth(t,e);var r=JSON.parse((0,y.default)(t));this.setState({withoutServerData:r}),this.renderInstanceNode(t,e),this.extendNetworkWidth(t,e);var i=JSON.parse((0,y.default)(t));this.setState({allData:i})}else this.renderNetworkNode(t,e),this.extendNetworkWidth(t,e);K&&(K.clear(),K.destroy());var{firstSubnetY:n,extendWidth:l}=this.state;(K=new k.default.Graph({container:"container",width:e+l,height:n,nodeStateStyles:{hover:{lineWidth:3}}})).data(t),K.render(),this.bindEvents(),this.setState({loading:!1})})),(0,P.default)(this,"extendNetworkWidth",((e,t)=>{var{subnetNodes:a,nodes:r}=e,{extendWidth:i}=this.state;i>0&&((0,h.default)(a).call(a,(e=>{e.style.width=t-50+i,e.x=(t+i)/2,e.labelCfg.offset=-(t+i)/2})),r[1].style.width=t+i-10,r[0].x=(t+i)/2,r[1].labelCfg.offset=-(t+i)/2,r[1].x=(t+i)/2),a&&a[0]&&(e.nodes=(0,_.default)(r).call(r,a))})),(0,P.default)(this,"onCheckChange",(()=>{var{firstSubnetY:e,extendWidth:t,showAll:a,withoutServerData:r,allData:i}=this.state,n=document.getElementById("container").scrollWidth,l=!a;this.setState({showAll:l});var o=n+t;l||(o=n-t),K.clear(),K.destroy(),K=null,(K=new k.default.Graph({container:"container",width:o,height:e,nodeStateStyles:{hover:{lineWidth:3}}})).data(l?i:r),K.render(),this.bindEvents()})),this.init(),this.state={firstSubnetY:290,nodeCard:[],lbCard:[],insCard:[],extendWidth:0,loading:!0,showAll:!0,withoutServerData:null,allData:null}}componentDidMount(){}get topoInfo(){return this.store.topology}initNetwork(){var e=this;return(0,w.default)((function*(){yield e.store.fetchTopoNetwork(G(G({},e.props.match.params),{},{metrics:!0})),e.renderG6()}))()}initAll(){var e=this;return(0,w.default)((function*(){yield e.store.fetchTopo(G(G({},e.props.match.params),{},{metrics:!0})),e.topoInfo.networks&&e.renderG6()}))()}initTopo(){this.initNetwork(),this.initAll()}init(){this.store=N.default,K=null,this.initTopo()}render(){var{nodeCard:e,insCard:a,loading:r,showAll:i}=this.state,{topology:n}=this.store;return E.default.createElement("div",{className:Q.default.main},E.default.createElement("div",{style:{marginBottom:16,marginTop:16,marginLeft:16}},E.default.createElement(R.default,{primaryActions:[L.default]},t("create router")),E.default.createElement(R.default,{primaryActions:[O.default]},t("Create Network")),E.default.createElement(R.default,{primaryActions:[q.default]},t("Create Instance")),E.default.createElement(C.default,{type:"primary",shape:"circle",style:{marginLeft:16},onClick:()=>this.updateGraph(),icon:E.default.createElement(x.default,null)}),E.default.createElement(S.default,{onChange:()=>this.onCheckChange(),checked:i},t("Show Instance"))),E.default.createElement(A.default,{spinning:r},E.default.createElement(I.default,{style:{margin:16},id:"card",className:Q.default.container},E.default.createElement("div",{id:"container"},n&&(0,g.default)(e).call(e,((e,t)=>E.default.createElement(H.default,{key:t,x:e.nodeCardX,y:e.nodeCardY,data:this.topoInfo,infoIndex:t}))),i?n&&(0,g.default)(a).call(a,((e,t)=>E.default.createElement(V.default,{key:t,x:e[0],y:e[1],data:this.topoInfo,infoIndex:t}))):null))))}}a.Topology=W;var X=(0,B.inject)("rootStore")((0,B.observer)(W));a.default=X},3679:function(e,t,a){"use strict";a.r(t),t.default=a.p+"asset/image/cloud.1658297502.png"},3680:function(e,t,a){"use strict";a(19)(t,"__esModule",{value:!0}),t.subnetsColors=t.combosColors=t.combosBackground=void 0;t.combosBackground=["rgba(0,104,255,0.05)","rgba(94,246,255,0.08)","rgba(236,220,255,0.08)","rgba(255,255,240,0.3)"];t.combosColors=["#9AC3FF","#A5FFF0","#ECDCFF","#FFFF00"];t.subnetsColors=[["#9AC3FF","#4C95FF","#0068FF","#0080FF","#0066CC","#0000FF"],["#CCF2EC","#92DACF","#46B1A5","#CCF2EC","#92DACF","#46B1A5"],["#ECDCFF","#D6B3FF","#BA80FF","#ECDCFF","#D6B3FF","#BA80FF"],["#FFFACD","#FFFF00","#FFD700","#FFFACD","#FFFF00","#FFD700"]]},3681:function(e,t,a){(t=e.exports=a(75)(!1)).push([e.i,".index__node-tooltips--1M7su {\n  position: absolute;\n}\n.index__node-tooltips--1M7su .ant-card-body {\n  padding: 15px;\n}\n.index__image-icon--2ABo6 {\n  width: 15px;\n  height: 15px;\n  margin-right: 2px;\n}\n.index__descriptions-item--iUKkb .ant-descriptions-item-label {\n  width: 80px;\n}\n.index__descriptions-item--iUKkb .ant-descriptions-row > th,\n.index__descriptions-item--iUKkb .ant-descriptions-row > td {\n  padding-bottom: 8px;\n}\n.index__node-card-title--3zjAj {\n  font-size: 16px;\n}\n.index__card-button--1hPxO .ant-btn-primary {\n  margin-right: 6px;\n}\n.index__main--2dSfi {\n  height: 100%;\n}\n.index__main--2dSfi .ant-btn-primary {\n  margin-right: 16px;\n}\n.index__container--3ea1Q {\n  height: calc(100vh - 170px);\n  overflow-y: auto;\n}\n",""]),t.locals={"node-tooltips":"index__node-tooltips--1M7su","image-icon":"index__image-icon--2ABo6","descriptions-item":"index__descriptions-item--iUKkb","node-card-title":"index__node-card-title--3zjAj","card-button":"index__card-button--1hPxO",main:"index__main--2dSfi",container:"index__container--3ea1Q"}},3682:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(62));r(532);var o=n(r(533));r(1249);var s=n(r(1250)),d=n(r(37)),u=n(r(0)),c=(r(167),r(1120)),f=n(r(3683)),p=n(r(542)),h=r(196),m=n(r(1321)),v=n(r(1485));class g extends v.default{constructor(e){super(e),(0,d.default)(this,"detailButtons",(()=>{var{data:{servers:e},infoIndex:a}=this.props,{status:r}=e[a];return[..."SHUTOFF"===r?[{name:t("Power On"),click:null}]:[{name:t("Power Off"),click:null}],{name:t("Associate IP"),click:null},{name:t("Add network"),click:null},{name:t("VNC"),click:null},{name:t("Delete"),type:"danger",click:null}]})),this.state={}}get detailInfos(){return[{title:t("Name"),dataIndex:"name",width:100,render:(e,t)=>e?u.default.createElement(h.Link,{to:"/compute/instance/detail/".concat(t.id)},e):"-"},{title:t("UUID"),dataIndex:"id"},{title:t("Status"),dataIndex:"status",isHideable:!0,render:e=>c.instanceStatus[e&&e.toLowerCase()]||"-"},{title:t("Image"),dataIndex:"image_os_distro",isHideable:!0,render:(e,t)=>u.default.createElement(p.default,{type:e,title:t.image_name}),stringify:(e,t)=>t.image_name},{title:t("Fixed IP"),dataIndex:"fixed_addresses",isHideable:!0,width:120,render:e=>e.length?(0,l.default)(e).call(e,(e=>u.default.createElement("span",{key:e},e,u.default.createElement("br",null)))):"-",stringify:e=>e.join(",")||"-"},{title:t("Floating IP"),dataIndex:"floating_addresses",isHideable:!0,width:120,render:e=>e.length?(0,l.default)(e).call(e,(e=>u.default.createElement("span",{key:e},e,u.default.createElement("br",null)))):"-"}]}render(){var{x:e,y:a}=this.props,{data:{servers:r},infoIndex:i}=this.props,n=r[i];return u.default.createElement("div",{className:m.default["node-tooltips"],style:{top:"".concat(a,"px"),left:"".concat(e-8,"px")}},u.default.createElement(o.default,{placement:"rightTop",content:this.renderCard(435,n),title:this.renderTitle(t("Instance"),n.name)},u.default.createElement("div",{style:{textAlign:"center",width:"66px",height:"50px",overflow:"hidden"}},u.default.createElement(s.default,{src:f.default,shape:"square",size:28}),u.default.createElement("div",null,n.name))))}}a.default=g},3683:function(e,t,a){"use strict";a.r(t),t.default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAGQCAYAAACAvzbMAAAdbElEQVR4Xu3d56+1WVkH4HtCE6SFJk1kEKRKkyYCOlIDigiKRr9Yv/gXaGIyTmKif4FfrF80goKIQqjOyCAORZpUQQaRJi00QVowDyzgMHnhPavt5157XychfJhnrXWva937+Z3nvOfsfUn4IkCAAAECDQKXNIwxhAABAgQIhADRBAQIECDQJCBAmtgMIkCAAAEBogcIECBAoElAgDSxGUSAAAECAkQPECBAgECTgABpYjOIAAECBASIHiBAgACBJgEB0sRmEAECBAgIED1AgAABAk0CAqSJzSACBAgQECB6gAABAgSaBARIE5tBBAgQICBA9AABAgQINAkIkCY2gwgQIEBgdoDcNCLuGhG3QU2AAAECBxX4WES8NyI+O2vVGQFyn4j4g4i4X0TcbVbh5iVAgACBcwm8JyLeEhG/ExFvO9eIc140OkB+PSL+5Jxru4wAAQIEDivwGxHxp6OWHBkgPxERV44qzDwECBAgMEXgsoi4asTMowLkThHx/hEFmYMAAQIEpgvcOSI+0LvKqAB5TkQ8vbcY4wkQIEDgIALPjYhn9K40KkCuLb9t1VuP8QQIECAwX2D77axLe5cZESA3i4hP9xZiPAECBAgcVODmEfGZnhVHBMgDIuKNPUUYS4AAAQIHF3hgRLypZ9URAeK3r3pOwFgCBAjsI9D921gCZJ+DsyoBAgT2FhAge5+A9QkQILCogABZ9OCUTYAAgb0FBMjeJ2B9AgQILCogQBY9OGUTIEBgbwEBsvcJWJ8AAQKLCgiQRQ9O2QQIENhb4GgCZNuILwIECBA4v0Dvu58fVYAMeXvh89u7kgABAssKjPgDbgGy7PErnAABAu0CAuSMXXcStp+DkQQIEFhOQIAIkOWaVsEECOQQECACJEcnqoIAgeUEBIgAWa5pFUyAQA4BASJAcnSiKggQWE5AgAiQ5ZpWwQQI5BAQIAIkRyeqggCB5QQEiABZrmkVTIBADgEBIkBydKIqCBBYTkCACJDlmlbBBAjkEBAgAiRHJ6qCAIHlBASIAFmuaRVMgEAOAQEiQHJ0oioIEFhOQIAIkOWaVsEECOQQECACJEcnqoIAgeUEBIgAWa5pFUyAQA4BASJAcnSiKggQWE5AgAiQ5ZpWwQQI5BAQIAIkRyeqggCB5QQEiABZrmkVTIBADgEBIkBydKIqCBBYTkCACJDlmlbBBAjkEBAgAiRHJ6qCAIHlBASIAFmuaRVMgEAOAQEiQHJ0oioIEFhOQIAIkOWaVsEECOQQECACJEcnqoIAgeUEBIgAWa5pFUyAQA4BASJAcnSiKggQWE5AgAiQ5ZpWwQQI5BAQIAcOkA289+uqzglG1LCV0FtH5zYMJ0BgZwEBcuAAuTIiem/gl3Q2TYpD79yD4QQI7C+Q4l7Se0PcGFNs5BznKUDOgeQSAgSWEEhx3xUgdb3S65Xi0Ou27GoCBBIKpLiX9N4QPYHUdVaKQ68r2dUECCQUSHEvESB1ndHrleLQ67bsagIEEgqkuJf03hA9gdR1VopDryvZ1QQIJBRIcS8RIHWd0euV4tDrtuxqAgQSCqS4l/TeED2B1HVWikOvK9nVBAgkFEhxLxEgdZ3R65Xi0Ou27GoCXxMY0bvHQnlZgj/mHXEe3fvovSGOaqzujZyjM/0dyDmQXELgOwiMuGEdC+4h7lcXsxpxHt37ECAXO6Zv/++9XikOvW7LribgCeQ6PdB94x3QUynuJb03RE8gdZ2Q4tDrSnY1AQEiQC78KhAgdXeHXi8BUuft6jwCI3o3z276KvEEUvx6b4ieQOoaccSLMEPz1u3a1ccgMKJ3j8Fh20OG1+CI8+jehwCpa+lerxSHXrdlVxPwIyw/wvIjLL+F5U5IoF1gxDc/7avnGtn9nfuA7Yw4j+599H5H7UdYdZ2Q4tDrSnY1AU8gnkA8gXgCcSck0C4w4puf9tVzjez+zn3AdkacR/c+PIHUnWSvV4pDr9uyqwl4AvEE4gnEE4g7IYF2gRHf/LSvnmtk93fuA7Yz4jy699H7HbV/A6nrhBSHXleyqwl4AvEE4gnEE4g7IYF2gRHf/LSvnmtk93fuA7Yz4jy69+EJpO4ke71SHHrdll1NwBOIJxBPIJ5A3AkJtAuM+OanffVcI7u/cx+wnRHn0b2P3u+o/RtIXSekOPS6kl1N4JtPIJez+JrAFT4P5OudIEDqXhG9XgKkztvVBAhcWCDFvaT3hugJpK69Uxx6XcmuJkAgoUCKe4kAqeuMXq8Uh163ZVcTIJBQIMW9pPeG6AmkrrNSHHpdya4mQCChQIp7iQCp64xerxSHXrdlVxMgkFAgxb2k94boCaSus1Icel3JriZAIKFAinuJAKnrjF6vFIdet2VXEyCQUCDFvaT3hugJpK6zUhx6XcmuJkAgoUCKe8kpBUjCHlASAQIEmgQEyBm27j+pbzoCgwgQILCmgAARIGt2rqoJENhdQIAIkN2bUAEECKwpIEAEyJqdq2oCBHYXECACZPcmVAABAmsKCBABsmbnqpoAgd0FBIgA2b0JFUCAwJoCAkSArNm5qiZAYHcBASJAdm9CBRAgsKaAABEga3auqgkQ2F1AgAiQ3ZtQAQQIrCkgQATImp2ragIEdhcQIAJk9yZUAAECawoIEAGyZueqmgCB3QUEiADZvQkVQIDAmgICRICs2bmqJkBgdwEBIkB2b0IFECCwpoAAESBrdq6qCRDYXUCACJDdm1ABBAisKSBABMianatqAgR2FxAgAmT3JlQAAQJrCggQAbJm56qaAIHdBQSIANm9CRVAgMCaAgJEgKzZuaomQGB3AQEiQHZvQgUQILCmgAARIGt2rqoJENhdQIAIkN2bUAEECKwpIEAEyJqdq2oCBHYXECACZPcmVAABAmsKCBABsmbnqpoAgd0FBIgA2b0JFUCAwJoCAkSArNm5qiZAYHcBAXLmCK7a/TgUQIAAgbUEthDp+bosIrruvZf0rF7GjkjCAWWYggABAgQqBARIBZZLCRAgQOBbAgJENxAgQIBAk4AAaWIziAABAgQEiB4gQIAAgSYBAdLEZhABAgQICBA9QIAAAQJNAgKkic0gAgQIEBAgeoAAAQIEmgQESBObQQQIECAgQPQAAQIECDQJCJAmNoMIECBAQIDoAQIECBBoEhAgTWwGESBAgIAA0QMECBAg0CQgQJrYDCJAgACBowmQ7o3oBQIECJyQwIjPYeq+72b5QKnujZxQ49gqAQIEBMiZHhAgXhAECBA4v4AAESDn7xZXEiBA4IyAABEgXhAECBBoEhAgAqSpcQwiQICAABEgXgUECBBoEhAgAqSpcQwiQICAABEgXgUECBBoEhAgAqSpcQwiQICAABEgXgUECBBoEhAgAqSpcQwiQICAABEgXgUECBBoEhAgAqSpcQwiQICAABEgXgUECBBoEhAgAqSpcQwiQICAABEgXgUECBBoEhAgAqSpcQwiQICAABEgXgUECBBoEhAgAqSpcQwiQICAABEgXgUECBBoEhAgAqSpcQwiQICAABEgXgUECBBoEhAgAqSpcQwiQICAABEgXgUECBBoEhAgAqSpcQwiQICAABEgXgUECBBoEhAgAqSpcQwiQICAABEgXgUECBBoEhAgAqSpcQwiQICAABEgXgUECBBoEhAgAqSpcQwiQICAABEgXgUECBBoEhAgBw6QK5uO6dsHXdY5x3bol3fOcUVEXNU5h+EECKwtIEB2CJANvefrkp7BEZHi0Dv3YDgBAvsLpLiX9N4QN8YUGznHeW5PIALkHFAuIUAgvUCK+64AqeuTXq8Uh163ZVcTIJBQIMW9pPeG6AmkrrNSHHpdya4mQCChQIp7iQCp64xerxSHXrdlVxMgkFAgxb2k94boCaSus1Icel3JriZAIKFAinuJAKnrjF6vFIdet2VXEyCQUCDFvaT3hugJpK6zUhx6XcmuJvA1gd7fYDw2xr3/FivFvUSA1LV1r1eKQ6/bsqsJfDNARvwx7jFwbn9QLEAioveG6Amk7uUgQOq8XJ1HYETv5tlNXyUCpPgJkLpG6vUa8SLM0Lx1aq4+BoERvXsMDtseMrwGR5xH9z56b4ieQOpeEikOva5kVxPwI6zr9ED3jXdAT6W4lwiQupPs9Upx6HVbdjUBASJALvwq6L0hegKpu7sIkDovV+cRGNG7eXbTV4knEP8G0tRBvYE74kWYoXmb8AxaWmBE7y4NcKb4DK/BEefRvY/eG6InkLqXRIpDryvZ1QT8CMuPsPwIy9u5uxMSaBcY8c1P++q5RnZ/5z5gOyPOo3sfnkDqTrLXK8Wh123Z1QQ8gXgC8QTiCcSdkEC7wIhvftpXzzWy+zv3AdsZcR7d++j9jtq/gdR1QopDryvZ1QQ8gXgC8QTiCcSdkEC7wIhvftpXzzWy+zv3AdsZcR7d+/AEUneSvV4pDr1uy64m4AnEE4gnEE8g7oQE2gVGfPPTvnqukd3fuQ/Yzojz6N5H73fU/g2krhNSHHpdya4m4AnEE4gnEE8g7oQE2gV8oNS32/k8EJ8HUv1q6n1i8wRSTW4AAQIXEEhxL+m9IfoRVl1vpzj0upJdTYBAQoEU9xIBUtcZvV4pDr1uy64mQCChQIp7Se8N0RNIXWelOPS6kl1NgEBCgRT3EgFS1xm9XikOvW7LriZAIKFAintJ7w3RE0hdZ6U49LqSXU2AQEKBFPcSAVLXGb1eKQ69bsuuJkAgoUCKe0nvDXG1J5DePtj+crPnazv0y3smiIgrImLv30Hv3ILhBAh0CgiQM4Ddf1LfeRiGEyBAYCUBASJAVupXtRIgkEhAgAiQRO2oFAIEVhIQIAJkpX5VKwECiQQEiABJ1I5KIUBgJQEBIkBW6le1EiCQSECACJBE7agUAgRWEhAgAmSlflUrAQKJBASIAEnUjkohQGAlAQEiQFbqV7USIJBIQIAIkETtqBQCBFYSECACZKV+VSsBAokEBIgASdSOSiFAYCUBASJAVupXtRIgkEhAgAiQRO2oFAIEVhIQIAJkpX5VKwECiQQEiABJ1I5KIUBgJQEBIkBW6le1EiCQSECACJBE7agUAgRWEhAgAmSlflUrAQKJBASIAEnUjkohQGAlAQEiQFbqV7USIJBIQIAIkETtqBQCBFYSECACZKV+VSsBAokEBIgASdSOSiFAYCUBASJAVupXtRIgkEhAgAiQRO2oFAIEVhIQIAJkpX5VKwECiQQEiABJ1I5KIUBgJQEBIkBW6le1EiCQSECACJBE7agUAgRWEhAgAmSlflUrAQKJBASIAEnUjkohQGAlAQGy0mmplQABAkcmcFlEXNWzp0t6BpexI5JwQBmmIECAAIEKAQFSgeVSAgQIEPiWgADRDQQIECDQJCBAmtgMIkCAAAEBogcIECBAoElAgDSxGUSAAAECAkQPECBAgECTQIoAeVhEvLqpfIMIECBAYC+Bh0fEa3oWH/F3ILeJiI/2FGEsAQIECBxc4LYR8bGeVUcEyLb+ByPiDj2FGEuAAAECBxP4UETcsXe1UQFydUQ8qrcY4wkQIEDgIAKvjIhH9640KkB+JSL+vLcY4wkQIEDgIAK/GhF/0bvSqADZ6nhpRDyutyDjCRAgQGCqwMsi4vEjVhgZIFs9b4mI+44ozBwECBAgMFzgrRFxv1Gzjg6Qra5fiojfj4hLRxVpHgIECBDoErg2In43Iv6qa5brDJ4RINsSN4uIHznzP7+hNfLUzDVSYPs4gp6vrs9T6FnYWAIXEdh+0+rfzvzvM6PFZgXI6DrNR2CGwIjPsun+a94ZGzMngUMICJBDKFsjq4AAyXoy6lpCQIAscUyKnCQgQCbBmvY0BATIaZyzXV5YQIDoDAIdAgKkA8/Q5QUEyPJHaAN7CgiQPfWtvbeAANn7BKy/tIAAWfr4FN8pIEA6AQ0/bQEBctrnf+q7FyCn3gH23yUgQLr4DF5cQIAsfoDK31dAgOzrb/V9BQTIvv5WX1xAgCx+gMrvEhAgXXwGn7qAADn1Djjt/QuQ0z5/u+8UECCdgIYvLSBAlj4+xe8tIED2PgHr7ykgQPbUt/byAgJk+SO0gQ4BAdKBZygBAaIHTllAgJzy6dt7t4AA6SY0wcICAmThw1P6/gICZP8zUMF+AgJkP3srH4GAADmCQ7SFZgEB0kxnIIEIAaILTllAgJzy6dt7t4AA6SY0wcICAmThw1P6/gICZP8zUMF+AgJkP3srH4GAADmCQ7SFZgEB0kxnIAH/BqIHTltAgJz2+dt9p4AnkE5Aw5cWECBLH5/i9xYQIHufgPX3FBAge+pbe3kBAbL8EdpAh4AA6cAzlIAA0QOnLCBATvn07b1bQIB0E5pgYQEBsvDhKX1/AQGy/xmoYD8BAbKfvZWPQECAHMEh2kKzgABppjOQgL8D0QOnLSBATvv87b5TwBNIJ6DhSwsIkKWPT/F7CwiQvU/A+nsKCJA99a29vIAAWf4IbaBDQIB04BlKQIDogVMWECCnfPr23i0gQLoJTbCwgABZ+PCUvr+AANn/DFSwn4AA2c/eykcgIECO4BBtoUlg6/1nR8TPNY3+1qC/jYhnRsRXO+cxnMByAgJkuSNT8ACB60XEsyLiGQPm2qZ4TkT8QkR8ZdB8piGwhIAAWeKYFDlQ4PrlyeNnB865TfV35Unky4PnNR2BtAICJO3RKGyCwA3Lk8fTJsy9Tfm88iTyxUnzm5ZAKgEBkuo4FDNR4EblyeOpE9fYpn5+eRL5wuR1TE9gdwEBsvsRKOAAAjcuTx4/fYC1tiX+oTyJfP5A61mGwC4CAmQXdoseUOAm5cnjKQdcc1vqBeVJ5HMHXtdyBA4mIEAORm2hHQRuWp48nrzD2tuSLyxPIp/daX3LEpgqIECm8pp8R4GblSePJ+1Yw7b0i8qTyGd2rsPyBIYLCJDhpCZMIHCL8uTxxAS1bCW8uDyJfCpJPcogMERAgAxhNEkigVuW8HhCopq2Ul5SQuSTyepSDoFmAQHSTGdgQoFblfB4XMLatpJeVkLkE0nrUxaBKgEBUsXl4sQCty7h8djENW6lvbyEyMeT16k8AhcVECAXJXLBAgK3LeFx2QK1biVeWULko4vUq0wCFxQQIBpjdYHblfDY3pp9pa+rSoh8ZKWi1UrgrIAA0Q8rC9y+hMdjJm3iijLv5ZPmf0UJkQ9Pmt+0BKYKCJCpvCafKHCHEh6PnrTGFh6/V+be/n9WiFxdQuRDk/ZhWgLTBATINFoTTxS4UwmPH5u0xtnw+MYSM0PkX0qIfGDSfkxLYIqAAJnCatKJAncu4fHISWtcKDwOESKvKiHy/kn7Mi2B4QICZDipCScK3KWExyMmrfHdwuMQIXJNCZH3TdqfaQkMFRAgQzlNNlHgB0p4PHzSGucJj0OEyKtLiPzXpH2alsAwAQEyjNJEEwUuLeHx0Elr1ITHIULktSVErp20X9MSGCIgQIYwmmSiwN1KeDxk0hot4XGIEHldCZH3TNq3aQl0CwiQbkITTBS4ewmPB09aoyc8DhEiry8h8u5J+zctgS4BAdLFZ/BEgXuU8HjQpDVGhMchQuQNJUTeNcnBtASaBQRIM52BEwXuWcLjAZPWGBkehwiRN5UQeeckD9MSaBIQIE1sBk0UuFcJj/tPWmP7g8BvvEXJ6CVm/rHhm0uIvGN00eYj0CogQFrljJshcJ8SHvebMXl5a5JZ4XGIJ5G3lBB52yQf0xKoEhgRINu7oM56n6Cqzbh4eYHtbdnvO2kXM588rlvyzCeRt0aEt4Gf1CQnNu32zdT2rtDNX6MCZPt8A18EsgocMjwO8SSS1Vldawlsn58jQNY6M9UeWGCP8BAiBz5kyzUJCJAmNoNORWDP8BAip9Jl6+5TgKx7diqfLJAhPITI5EM2fZeAAOniM/hYBTKFhxA51i5bf18CZP0ztIPBAhnDQ4gMPmTTDREQIEMYTXIsApnDQ4gcS5cdzz4EyPGcpZ10CqwQHkKk85ANHyogQIZymmxlgbdHxDMjYvtr7cxf21/ZPzsi7p25SLWdhIAAOYljtsnzCmxvNriFyPa+URm/tvf32sJje7NIXwT2FhAge5+A9dMJbG97voXIG5NV9sASHtvb1PsikEFAgGQ4BTWkE/jPEiLbBzJl+No+EGt78vjBDMWogUARECBagcB3ENg+T3x7Etk+GnbPr+2jeLfw2D7X3ReBTAICJNNpqCWdwHvL25+/ZqfKHlbenv6uO61vWQLfTUCA6A8CFxF4XwmRaw4s9YgSHnc58LqWI3BeAQFyXinXnbTA+0uIvOpACo8s4XHnA61nGQItAikCpKVwYwhcSODny413xOfUXHf+D5YQeeVk+keVPdxxwjpfLXv4mwlzm5JAtcCMF2p1EQYQOCPwjHIDvt4ElQ+XG/ArJsy9TfmYUvvtJ8z/lVL7cybMbUoCTQICpInNoMkCTy834utPWOcj5Ubc9UlsF6hr+2jnZ0XE7SbU/OVS83MnzG1KAs0CAqSZzsDJAk8rN+QbTljnY+WG/E+D5v7JUuttBs13dpovllqfN2FuUxLoEhAgXXwGTxb4mXJjvtGEdT5Rbswv65z7caXGW3XOc6HhXyg1/v2EuU1JoFtAgHQTmmCywFPLDfp7JqzzyXKDfknj3E8otd2ycfx3G/Z/pbbnT5jblASGCAiQIYwmmSzwU+VGfZMJ63y63KhfVDn3k0pNN68cd57LP1dq+sfzXOwaAnsJCJC95K1bK/CUcsP+3tqB57j+s+WG/cJzXLtd8uRSy03PeX3NZf9banlBzSDXEthDQIDsoW7NVoHZN+5fjIiLfde/PQ39dURkCLJWR+MIDBEQIEMYTXJAgZk/Ovp8RGwh8p3+3WH795gtPG48Yb+tP0qbUIopCZxPQICcz8lVuQSeWH6EdIsJZW2/+bSFyHV/bXb7teItPGb8Rtinyo+tXjxhP6YkME1AgEyjNfFkgceXt0mf8RtQXyoh8o0/3Nv+sHELjxtM2NP2m2Db286/dMLcpiQwVUCATOU1+WSBmX+Dsb11yPYksn1t4THjrVVG/S3KZGbTE7iwgADRGasLPLb8OOvWEzayvXnh9jXjdfLx8mOrl0+o25QEDiIw44VxkMItQuCMwPa21Nv7UN12EZWPlvC4cpF6lUngggICRGMci8DMNzMcaTTrzRxH1mguAucSECDnYnLRIgI/Xp5Evi9pvf9Tnjz+OWl9yiJQJSBAqrhcvIDAo0uI3CFZrR8q4XF1srqUQ6BZQIA00xmYWGDmpwK2bPtQn4bYUpsxBJoFBEgznYHJBbbPJX92RNxp5zo/UP7O41Cfx77zdi1/SgIC5JRO+/T2+qPlx1nfv9PW/7v82Opfd1rfsgSmCgiQqbwmTyDwiBIidzlwLe8r4XHNgde1HIGDCQiQg1FbaEeBh5UQueuBanhvCY/XHGg9yxDYRUCA7MJu0R0EHlpC5NLJa19bwuO1k9cxPYHdBQTI7keggAMKPKSEyN0mrfmeEh6vmzS/aQmkEhAgqY5DMQcQeHAJkbsPXuvdJTxeP3he0xFIKyBA0h6NwiYKPKiEyD0GrfGuEh5vGDSfaQgsISBAljgmRU4QeED5O5Ef6pz7P8rfebypcx7DCSwnIECWOzIFDxS4f3kSuVfjnO8oTx5vbhxvGIGlBQTI0sen+AECP1xC5N6Vc729hMe/V45zOYGjERAgR3OUNtIhcN+I+MuI2H6sdZ6v7cdVvxwRbz3Pxa4hcKwCAuRYT9a+agW2D6P6w4j4tYsM/LOI+O2I2D4UyheBkxYQICd9/DZ/AYHfiojfjIjtqeQG5b9/qTxt/HFE/BE1AgS+LiBAdAKBCwts4XHP8p/eGRFbiPgiQOCMgADRDgQIECDQJCBAmtgMIkCAAAEBogcIECBAoElAgDSxGUSAAAECAkQPECBAgECTgABpYjOIAAECBASIHiBAgACBJgEB0sRmEAECBAgIED1AgAABAk0CAqSJzSACBAgQECB6gAABAgSaBARIE5tBBAgQICBA9AABAgQINAkIkCY2gwgQIEBAgOgBAgQIEGgSECBNbAYRIECAwP8DtIYy6y4iExsAAAAASUVORK5CYII="},3684:function(e,t,a){"use strict";a.r(t),t.default=a.p+"asset/image/router.1658297502.png"},3685:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.RouterDetail=void 0;var l=r(382),o=r(526),s=n(r(1119)),d=r(1137),u=n(r(3686)),c=n(r(3687)),f=n(r(3688)),p=n(r(1483));class h extends s.default{get name(){return t("router")}get policy(){return"get_router"}get listUrl(){return this.getRoutePath("router")}get actionConfigs(){return this.isAdminPage?p.default.adminConfigs:p.default.actionConfigs}get detailInfos(){return[{title:t("Name"),dataIndex:"name"},{title:t("Status"),dataIndex:"status",render:e=>d.routerStatus[e]||"-"},{title:t("Admin State"),dataIndex:"admin_state_up",render:e=>(0,d.getRouterState)(e)||"-"},{title:t("Project ID"),dataIndex:"tenant_id",hidden:!this.isAdminPage},{title:t("Description"),dataIndex:"description"},{title:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime"},{title:t("Updated At"),dataIndex:"updated_at",valueRender:"toLocalTime"}]}get tabs(){return[{title:t("Detail"),key:"detail",component:u.default},{title:t("Ports"),key:"ports",component:c.default},{title:t("Static Routes"),key:"staticRoutes",component:f.default}]}init(){this.store=new o.RouterStore}}a.RouterDetail=h;var m=(0,l.inject)("rootStore")((0,l.observer)(h));a.default=m},3686:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var l=n(r(62)),o=n(r(0)),s=r(382),d=n(r(1122));class u extends d.default{get leftCards(){return[this.aZoneCard]}get rightCards(){return[this.externalNetInfo]}get externalNetInfo(){var e=[{label:t("Network Name"),dataIndex:"externalNetworkName"},{label:t("Network ID"),dataIndex:"externalNetworkId"},{label:t("SNAT Enabled"),dataIndex:"external_gateway_info.enable_snat",valueRender:"yesNo"},{label:t("External Fixed IPs"),dataIndex:"external_gateway_info.external_fixed_ips",render:e=>e&&0!==e.length?(0,l.default)(e).call(e,((e,a)=>o.default.createElement("div",{key:"ip-".concat(a)},o.default.createElement("div",{key:e.subnet_id},o.default.createElement("b",null,t("Subnet ID")),": ",e.subnet_id),o.default.createElement("div",{key:e.ip_address},o.default.createElement("b",null,t("IP Address")),": ",e.ip_address),o.default.createElement("div",{style:{marginBottom:"8px"}})))):"-"}];return{title:t("External Network Info"),options:e,labelCol:4}}get aZoneCard(){var e=[{label:t("Current AvailabilityZones"),dataIndex:"availability_zones",render:e=>(e||[]).join(",")||"-"},{label:t("Availability Zone Hints"),dataIndex:"availability_zone_hints",render:e=>(e||[]).join(",")||"-"}];return{title:t("Availability Zone Info"),options:e}}}a.BaseDetail=u;var c=(0,s.inject)("rootStore")((0,s.observer)(u));a.default=c},3687:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Ports=void 0;var p=f(r(62)),h=f(r(71)),m=f(r(52)),v=f(r(37)),g=f(r(0)),_=r(382),b=f(r(1114)),y=r(1129),A=r(529),I=r(135);function S(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}class C extends b.default{constructor(){super(...arguments),(0,v.default)(this,"getColumns",(()=>[{title:t("ID/Name"),dataIndex:"name",routeName:this.getRouteName("routerPortDetail"),routeParamsFunc:e=>({routerId:this.id,id:e.id})},{title:t("IP Address"),dataIndex:"fixed_ips",isHideable:!0,render:e=>e&&0!==e.length?(0,p.default)(e).call(e,(e=>g.default.createElement("div",{key:e.ip_address},e.ip_address))):"-",stringify:e=>e&&0!==e.length?(0,p.default)(e).call(e,(e=>e.ip_address)).join(","):"-"},{title:t("Mac Address"),dataIndex:"mac_address",isHideable:!0},{title:t("Associated Resources"),dataIndex:"device_owner",isHideable:!0},{title:t("Status"),dataIndex:"status",render:e=>y.portStatus[e]||"-"},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime"}]))}init(){this.store=new A.PortStore}get policy(){return"get_port"}get name(){return t("ports")}get id(){return this.params.id}getData(){var e=arguments,t=this;return(0,m.default)((function*(){var a=e.length>0&&void 0!==e[0]?e[0]:{},{silent:r}=a,i=(0,h.default)(a,["silent"]);r&&(t.list.silent=!0);var{id:n}=t.props.match.params,{tab:l}=i,f=(0,h.default)(i,["tab"]);t.fetchListWithTry((0,m.default)((function*(){yield t.store.fetchList(function(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=S(Object(r),!0)).call(a,(function(t){(0,v.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=S(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}({device_id:n},f)),t.list.silent=!1})))}))()}get searchFilters(){return[{label:t("Name"),name:"name"},{label:t("Status"),name:"status",options:(0,I.getOptions)(y.portStatus)}]}}a.Ports=C;var x=(0,_.inject)("rootStore")((0,_.observer)(C));a.default=x},3688:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.StaticRouters=void 0;var l=n(r(37)),o=r(382),s=n(r(1114)),d=n(r(563)),u=n(r(3689));class c extends s.default{constructor(){super(...arguments),(0,l.default)(this,"getColumns",(()=>[{title:t("Destination CIDR"),dataIndex:"destination"},{title:t("Next Hop"),dataIndex:"nexthop",isHideable:!0}]))}init(){this.store=d.default}get policy(){return"get_router"}get name(){return t("static routers")}get actionConfigs(){return this.isAdminPage?u.default.actionConfigsAdmin:u.default.actionConfigs}get searchFilters(){return[]}}a.StaticRouters=c;var f=(0,o.inject)("rootStore")((0,o.observer)(c));a.default=f},3689:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(3690)),l=i(a(3691)),o={actionConfigs:{rowActions:{firstAction:l.default},batchActions:[l.default],primaryActions:[n.default]},actionConfigsAdmin:{rowActions:{firstAction:l.default},batchActions:[l.default],primaryActions:[]}};t.default=o},3690:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.Create=void 0;var l=n(r(65)),o=n(r(37)),s=r(382),d=n(r(563)),u=r(1113);class c extends u.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"onSubmit",((e,t)=>{var{match:{params:{id:a}={}}={}}=t,r=[e];return this.store.addStaticRoute({id:a,routes:r})}))}init(){this.store=d.default}get name(){return t("Create static route")}get defaultValue(){return{}}get messageHasItemName(){return!1}get formItems(){return[{name:"destination",label:t("Destination CIDR"),type:"input",required:!0},{name:"nexthop",label:t("Next Hop"),type:"input",required:!0}]}}a.Create=c,(0,o.default)(c,"id","create"),(0,o.default)(c,"title",t("Create Static Route")),(0,o.default)(c,"policy","update_router"),(0,o.default)(c,"allowed",(()=>l.default.resolve(!0)));var f=(0,s.inject)("rootStore")((0,s.observer)(c));a.default=f},3691:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(82)),o=n(r(37)),s=r(1113),d=n(r(563));class u extends s.ConfirmAction{constructor(){super(...arguments),(0,o.default)(this,"policy","update_router"),(0,o.default)(this,"getItemName",(e=>{var t,{destination:a,nexthop:r}=e;return(0,l.default)(t="".concat(a,"(")).call(t,r,")")})),(0,o.default)(this,"onSubmit",(e=>{var{destination:t,nexthop:a,router_id:r}=e,i=[{destination:t,nexthop:a}];return d.default.removeStaticRoute({id:r,routes:i})}))}get id(){return"delete"}get title(){return t("Delete Static Route")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete static route")}}a.default=u},3692:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.PortDetail=void 0;var l=r(382),o=r(529),s=n(r(1119)),d=r(1129),u=n(r(3693));class c extends s.default{get name(){return t("port")}get policy(){return"get_port"}get listUrl(){var{routerId:e}=this.params;return this.getRoutePath("routerDetail",{id:e},{tab:"interfaces"})}get detailInfos(){return[{title:t("Name"),dataIndex:"name"},{title:t("Status"),dataIndex:"status",render:e=>d.portStatus[e]||"-"},{title:t("Project ID"),dataIndex:"tenant_id",hidden:!this.isAdminPage},{title:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime"},{title:t("Updated At"),dataIndex:"updated_at",valueRender:"toLocalTime"}]}get tabs(){return[{title:t("Detail"),key:"detail",component:u.default}]}init(){this.store=new o.PortStore}}a.PortDetail=c;var f=(0,l.inject)("rootStore")((0,l.observer)(c));a.default=f},3693:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var l=n(r(62)),o=n(r(35)),s=n(r(0)),d=r(382),u=n(r(1122)),c=r(1129),f=r(47);class p extends u.default{get leftCards(){var e=[this.portInfo],{dns_assignment:t=[],fixed_ips:a=[],deviceOwner:r={}}=this.detailData;return t.length>0&&e.push(this.dnsAssignment),a.length>0&&e.push(this.fixedIps),r&&this.isAdmin&&e.push(this.deviceOwner),e.push(this.binding),e}get portInfo(){var e=[{label:t("Network Name"),dataIndex:"network_name"},{label:t("Network ID"),dataIndex:"network_id"},{label:t("MAC Address"),dataIndex:"mac_address"},{label:t("Port Security Enabled"),dataIndex:"port_security_enabled",valueRender:"yesNo"},{label:t("DNS Name"),dataIndex:"dns_name",hidden:!this.isAdmin}];return this.detailData.mac_state&&e.push({label:t("MAC Learning State"),dataIndex:"mac_state"}),this.detailData.qos_policy_id&&e.push({label:t("QoS Policy ID"),dataIndex:"qos_policy_id"}),{title:t("Port Info"),options:e}}get dnsAssignment(){var e=this.detailData.dns_assignment[0]||{},{hostname:a,ip_address:r}=e,i=[{label:t("Hostname"),dataIndex:"dns_assignment",render:()=>a},{label:t("IP Address"),dataIndex:"ip_address",render:()=>r}];return{title:t("DNS Assignment"),options:i}}get fixedIps(){var e=this.detailData.fixed_ips[0]||{},{ip_address:a,subnet_id:r}=e,i=[{label:t("IP Address"),dataIndex:"ip_address",render:()=>a},{label:t("Subnet ID"),dataIndex:"subnet_id",render:()=>r}];return{title:t("Fixed IPs"),options:i}}get deviceOwner(){var e=[{label:t("Device Owner"),dataIndex:"device_owner"},{label:t("Device ID"),dataIndex:"device_id"}];return{title:t("Attached Device"),options:e}}get binding(){var e=[{label:t("VNIC Type"),dataIndex:"binding__vnic_type",render:e=>c.bindingTypes[e]||"-"}];if(this.detailData.binding__host_id){var a=[{label:t("Host"),dataIndex:"binding__host_id"},{label:t("Profile"),dataIndex:"binding__profile",render:e=>{var t;return!e||(0,f.isEmpty)(e)?"-":(0,l.default)(t=(0,o.default)(e)).call(t,(t=>s.default.createElement("div",{key:t},s.default.createElement("b",null,t),": ",s.default.createElement("b",null,e[t]))))}},{label:t("VIF Type"),dataIndex:"binding__vif_type"},{label:t("VIF Details"),dataIndex:"binding__vif_details",render:e=>{var t;return!e||(0,f.isEmpty)(e)?"-":(0,l.default)(t=(0,o.default)(e)).call(t,(t=>s.default.createElement("div",{key:t},s.default.createElement("b",null,t)," ",s.default.createElement("span",null,e[t].toString()))))}}];e=[...e,...a]}return{title:t("Binding"),options:e}}}a.BaseDetail=p;var h=(0,d.inject)("rootStore")((0,d.observer)(p));a.default=h},3694:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.VirtualAdapterDetail=void 0;var l=n(r(33)),o=r(382),s=r(521),d=n(r(1119)),u=r(522),c=n(r(3695)),f=n(r(3700)),p=n(r(3704)),h=n(r(3708)),m=n(r(1460));class v extends d.default{get name(){return t("virtual adapter")}get policy(){return"get_port"}get listUrl(){return this.getRoutePath("virtualAdapter")}get actionConfigs(){return this.isAdminPage?m.default.adminActions:m.default.actionConfigs}getActionData(){return this.detailData.itemInList||{}}get detailInfos(){return[{title:t("Name"),dataIndex:"name"},{title:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime"},{title:t("Status"),dataIndex:"status",render:e=>u.networkStatus[e]||"-"},{title:t("Owned Network"),dataIndex:"itemInList.network_name"},{title:t("Network ID"),dataIndex:"network_id"},{title:t("Port Security Enabled"),dataIndex:"port_security_enabled",valueRender:"yesNo"},{title:t("Mac Address"),dataIndex:"mac_address"},{title:t("Description"),dataIndex:"description"}]}get tabs(){var e=[{title:t("BaseDetail"),key:"BaseDetail",component:h.default},{title:t("Fixed IPs"),key:"fixed_ips",component:c.default},{title:t("Security Groups"),key:"security_groups",component:f.default},{title:t("Allowed Address Pair"),key:"allowed_address_pair",component:p.default}],{port_security_enabled:a}=this.detailData;return a?e:(0,l.default)(e).call(e,(e=>"security_groups"!==e.key))}init(){this.store=new s.VirtualAdapterStore}}a.VirtualAdapterDetail=v;var g=(0,o.inject)("rootStore")((0,o.observer)(v));a.default=g},3695:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.FixedIP=void 0;var l=n(r(37)),o=r(382),s=n(r(1114)),d=r(3696),u=n(r(3697));class c extends s.default{constructor(){super(...arguments),(0,l.default)(this,"getColumns",(()=>[{title:t("IP Address"),dataIndex:"ip_address"},{title:t("Floating IP"),dataIndex:"fip",render:e=>0===e.length?"-":e[0].floating_ip_address},{title:t("Owned Subnet"),dataIndex:"subnet",render:e=>e&&e.name||"-"}]))}init(){this.store=new d.FixedIpStore,this.downloadStore=new d.FixedIpStore}get rowKey(){return"ip_address"}get policy(){return"get_port"}get name(){return t("Fixed IP")}get actionConfigs(){return this.isAdminPage?u.default.adminConfigs:u.default.actionConfigs}get hideCustom(){return!0}get searchFilters(){return[{label:t("IP Address"),name:"ip_address"},{label:t("Owned Subnet"),name:"subnet",filterFunc:(e,t)=>e.name===t}]}}a.FixedIP=c;var f=(0,o.inject)("rootStore")((0,o.observer)(c));a.default=f},3696:function(e,t,a){"use strict";var r=a(35),i=a(44),n=a(33),l=a(25),o=a(28),s=a(45),d=a(46),u=a(19),c=a(21);u(t,"__esModule",{value:!0}),t.default=t.FixedIpStore=void 0;var f=c(a(328)),p=c(a(537)),h=c(a(62)),m=c(a(65)),v=c(a(28)),g=c(a(37)),_=c(a(52)),b=c(a(71)),y=c(a(321)),A=c(a(323)),I=c(a(49)),S=c(a(54));function C(e,t){var a=r(e);if(i){var o=i(e);t&&(o=n(o).call(o,(function(t){return l(e,t).enumerable}))),a.push.apply(a,o)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)o(a=C(Object(r),!0)).call(a,(function(t){(0,g.default)(e,t,r[t])}));else if(s)d(e,s(r));else{var i;o(i=C(Object(r))).call(i,(function(t){u(e,t,l(r,t))}))}}return e}class w extends S.default{get client(){return I.default.neutron.ports}get paramsFunc(){return e=>{var{all_projects:t}=e;return(0,b.default)(e,["all_projects"])}}getItemFloatingIPs(e,t){return(0,_.default)((function*(){return A.default.pureFetchList({fixed_ip_address:e,port_id:t})}))()}listDidFetch(e){var t=this;return(0,_.default)((function*(){if(0===e.length)return[];var a=e[0],{fixed_ips:r=[],id:i}=a,n=(0,f.default)(new p.default((0,h.default)(r).call(r,(e=>e.subnet_id)))),l=yield m.default.all((0,h.default)(n).call(n,(e=>y.default.fetchSubnetDetail({id:e})))),o={};(0,v.default)(l).call(l,(e=>{o[e.id]=e}));var s=yield m.default.all((0,h.default)(r).call(r,(e=>t.getItemFloatingIPs(e.ip_address,i))));return(0,h.default)(r).call(r,((e,t)=>x(x({},e),{},{subnet:o[e.subnet_id],fip:s[t],port:a})))}))()}}t.FixedIpStore=w;var P=new w;t.default=P},3697:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(3698)),l=i(a(3699)),o={actionConfigs:{rowActions:{firstAction:l.default},batchActions:[l.default],primaryActions:[n.default]},adminConfigs:{rowActions:{firstAction:l.default},batchActions:[],primaryActions:[]}};t.default=o},3698:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.AllocateIP=void 0;var l=n(r(62)),o=n(r(65)),s=n(r(52)),d=n(r(37)),u=r(382),c=r(1113),f=n(r(521)),p=r(321),h=r(390);class m extends c.ModalAction{constructor(){super(...arguments),(0,d.default)(this,"onSubmit",(e=>{var{fixed_ips:t}=e,a=(0,l.default)(t).call(t,(e=>{var t={subnet_id:e.subnet};return e.ip_address&&"manual"===e.ip_address.type&&(t.ip_address=e.ip_address.ip),t}));return f.default.update(this.item,{fixed_ips:[...a,...this.item.fixed_ips]})}))}get name(){return t("Allocate IP")}init(){this.networkStore=new p.NetworkStore,this.subnetStore=new h.SubnetStore,this.getNetworkDetail(this.item.network_id),this.getSubnets(this.item.network_id)}getSubnets(e){var t=this;return(0,s.default)((function*(){var a=yield t.subnetStore.fetchList({network_id:e});t.setState({subnetDetails:a||[]})}))()}getNetworkDetail(e){var t=this;return(0,s.default)((function*(){var a=yield t.networkStore.fetchDetail({id:e});t.updateFormValue("network_name",a.name)}))()}get defaultValue(){return{network_id:this.item.network_id}}get isAllowed(){return!0}static get modalSize(){return"large"}get messageHasItemName(){return!1}get formItems(){var{subnetDetails:e=[]}=this.state;return[{name:"network_id",label:t("Owned Network ID"),type:"label"},{name:"network_name",label:t("Owned Network"),type:"label"},{name:"fixed_ips",label:t("Owned Subnet"),type:"ip-distributor",subnets:e,required:!0}]}}a.AllocateIP=m,(0,d.default)(m,"id","allocate-ip"),(0,d.default)(m,"title",t("Allocate IP")),(0,d.default)(m,"policy","update_port:fixed_ips:ip_address"),(0,d.default)(m,"allowed",(()=>o.default.resolve(!0)));var v=(0,u.inject)("rootStore")((0,u.observer)(m));a.default=v},3699:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(28)),o=n(r(33)),s=n(r(65)),d=n(r(37)),u=r(1113),c=n(r(521));class f extends u.ConfirmAction{constructor(){super(...arguments),(0,d.default)(this,"getItemName",(e=>e.ip_address)),(0,d.default)(this,"policy","update_port"),(0,d.default)(this,"onSubmit",((e,t,a,r,i)=>{var{port:{id:n,fixed_ips:d=[]}={}}=e,u=d;if(a){if(0!==r)return s.default.resolve();(0,l.default)(i).call(i,(e=>{var{subnet_id:t,ip_address:a}=e;u=(0,o.default)(u).call(u,(e=>e.ip_address!==a||e.subnet_id!==t))}))}else{var{subnet_id:f,ip_address:p}=e;u=(0,o.default)(d).call(d,(e=>e.ip_address!==p||e.subnet_id!==f))}return c.default.update({id:n},{fixed_ips:u})}))}get id(){return"delete"}get title(){return t("Release Fixed IP")}get buttonText(){return t("Release")}get isDanger(){return!0}get actionName(){return t("release fixed ip")}get passiveAction(){return t("be released")}}a.default=f},3700:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.SecurityGroup=void 0;var l=n(r(62));r(324);var o=n(r(325));r(398);var s=n(r(401)),d=n(r(1309));r(530);var u=n(r(531)),c=n(r(385));r(1117);var f=n(r(1118));r(1115);var p=n(r(1116));r(318);var h=n(r(317));r(1167);var m=n(r(1168)),v=n(r(37));r(1318);var g=n(r(1319)),_=n(r(0)),b=r(382),y=r(521),A=(r(167),n(r(1461))),I=r(196),S=n(r(4)),C=r(32),x=(r(513),n(r(1253))),w=n(r(1166)),P=r(332),E=r(135),k=r(517),D=n(r(3701)),B=n(r(3702)),{Panel:N}=g.default;class M extends _.default.Component{constructor(e){super(e),(0,v.default)(this,"refreshSecurityGroup",(()=>{this.store.fetchSecurityGroupsDetail(this.portId)})),this.store=new y.VirtualAdapterStore}componentDidMount(){this.refreshSecurityGroup()}getDetailUrl(e){var t=this.isAdminPage?"securityGroupDetailAdmin":"securityGroupDetail";return(0,k.getPath)({key:t,params:{id:e}})}get portId(){var{detail:{id:e}}=this.props;return e}get isAdminPage(){var{pathname:e}=this.props.location;return(0,E.isAdminPage)(e)}renderPanelTitle(e){var{security_groups:{data:a}}=this.store,r=this.getDetailUrl(e.id);return _.default.createElement(f.default,null,_.default.createElement(p.default,{span:18},_.default.createElement("span",null,t("Security Group")),_.default.createElement(m.default,{type:"vertical",className:B.default["header-divider"]}),_.default.createElement(h.default,{type:"link"},e.name)),_.default.createElement(p.default,{span:6},!this.isAdminPage&&_.default.createElement(_.default.Fragment,null,_.default.createElement(I.Link,{style:{fontSize:12,marginRight:16},to:r},t("Edit Rule"))),!this.isAdminPage&&1!==a.length&&_.default.createElement(_.default.Fragment,null,_.default.createElement(w.default,{actions:{firstAction:D.default},onFinishAction:this.refreshSecurityGroup,item:e},t("Detach")))))}renderPanel(e,t){return _.default.createElement(N,{header:this.renderPanelTitle(e,t),key:t,className:B.default.panel},_.default.createElement(u.default,(0,c.default)({size:"middle",pagination:!1,bordered:!1,rowKey:"id"},this.state,{columns:(0,P.getSelfColumns)(this),dataSource:e.security_group_rules?(0,C.toJS)(e.security_group_rules):null})))}render(){var e,{security_groups:t}=this.store;return _.default.createElement("div",{className:(0,S.default)(B.default.wrapper,this.className)},this.isAdminPage?null:_.default.createElement("div",{style:{marginBottom:20}},_.default.createElement(x.default,{containerProps:this.props,primaryActions:[A.default],onFinishAction:this.refreshSecurityGroup})),_.default.createElement(o.default,{spinning:t.isLoading},t.data&&0!==t.data.length?_.default.createElement(g.default,{className:B.default.collapse,accordion:!0,bordered:!1,expandIcon:e=>{var{isActive:t}=e;return _.default.createElement(d.default,{rotate:t?90:0})}},(0,l.default)(e=t.data).call(e,((e,t)=>this.renderPanel(e,t)))):_.default.createElement(s.default,{image:s.default.PRESENTED_IMAGE_SIMPLE,style:{backgroundColor:"white",padding:"32px 0"}})))}}a.SecurityGroup=M;var R=(0,b.inject)("rootStore")((0,b.observer)(M));a.default=R},3701:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(33)),o=n(r(37)),s=r(1113),d=n(r(521));class u extends s.ConfirmAction{constructor(){super(...arguments),(0,o.default)(this,"policy","update_port"),(0,o.default)(this,"allowedCheckFunc",(()=>!0)),(0,o.default)(this,"onSubmit",(e=>{var{port:{id:t,security_groups:a=[]}={}}=e,r={security_groups:(0,l.default)(a).call(a,(t=>t!==e.id))};return d.default.update({id:t},r)}))}get id(){return"detach"}get title(){return t("Detach Security Group")}get isDanger(){return!0}get buttonText(){return t("Detach")}get actionName(){return t("detach security group")}}a.default=u},3702:function(e,t,a){var r=a(3703);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};a(76)(r,i);r.locals&&(e.exports=r.locals)},3703:function(e,t,a){(t=e.exports=a(75)(!1)).push([e.i,"/* init */\n/* specific color */\n/*  border */\n/*  background */\n/*  shadow */\n/*  font */\n/*  */\n/*  animation */\n/*  size */\n/*  sider */\n.index__wrapper--Kg0YP {\n  min-height: calc(100vh - 108px);\n  padding: 0 16px;\n}\n.index__collapse--21Gg1 {\n  margin-bottom: 24px;\n  overflow: hidden;\n}\n.index__panel--gELn1 {\n  margin-bottom: 24px;\n  padding-top: 12px;\n  padding-bottom: 12px;\n  font-size: larger;\n  background: #fff;\n}\n.index__header-divider--2XFDE {\n  width: 2px;\n  margin: 0 5px;\n  background-color: rgba(0, 0, 0, 0.45);\n}\n.index__image--1yVjW {\n  width: 100px;\n  padding: 10px;\n}\n.index__radio-button--3Jih6 .ant-radio-button-wrapper {\n  width: 250px;\n  height: 100px;\n  margin-right: 40px;\n  padding: 15px;\n}\n.index__security-group-text--1GrtM {\n  font-size: 14px;\n}\n",""]),t.locals={wrapper:"index__wrapper--Kg0YP",collapse:"index__collapse--21Gg1",panel:"index__panel--gELn1","header-divider":"index__header-divider--2XFDE",image:"index__image--1yVjW","radio-button":"index__radio-button--3Jih6","security-group-text":"index__security-group-text--1GrtM"}},3704:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.AllowedAddressPair=void 0;var p=f(r(62)),h=f(r(52)),m=f(r(37)),v=r(382),g=f(r(1114)),_=f(r(521)),b=f(r(403)),y=f(r(3705));function A(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=A(Object(r),!0)).call(a,(function(t){(0,m.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=A(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}class S extends g.default{constructor(){super(...arguments),(0,m.default)(this,"getDownloadData",(()=>this.props.detail.allowed_address_pairs)),(0,m.default)(this,"getColumns",(()=>[{title:t("IP Address"),dataIndex:"ip_address"},{title:t("Mac Address"),dataIndex:"mac_address"}]))}init(){this.store=_.default,this.store.setDetail(this.props.detail)}get list(){var e,t=new b.default;this.props.detail.allowed_address_pairs&&t.update({data:(0,p.default)(e=this.props.detail.allowed_address_pairs||[]).call(e,((e,t)=>I(I({},e),{},{id:"port_detail_allowed_address_pair_".concat(t)})))});return t}get isLoading(){return!1}getData(){return(0,h.default)((function*(){}))()}get policy(){return"get_port"}get name(){return t("Allowed Address Pair")}get actionConfigs(){return this.isAdminPage?y.default.adminConfigs:y.default.actionConfigs}get hideCustom(){return!0}get searchFilters(){return[{label:t("IP Address"),name:"ip_address"},{label:t("Mac Address"),name:"mac_address"}]}}a.AllowedAddressPair=S;var C=(0,v.inject)("rootStore")((0,v.observer)(S));a.default=C},3705:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(3706)),l=i(a(3707)),o={actionConfigs:{rowActions:{firstAction:l.default},batchActions:[],primaryActions:[n.default]},adminConfigs:{rowActions:{firstAction:l.default},batchActions:[],primaryActions:[]}};t.default=o},3706:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.CreateAllowedAddressPair=void 0;var l=n(r(516)),o=n(r(65)),s=n(r(37)),d=r(382),u=r(1113),c=n(r(521)),f=r(514),p=r(47),{isIpCidr:h,isIPv6Cidr:m}=f.ipValidate;class v extends u.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"onSubmit",(e=>{var{allowed_address_pairs:t=[]}=this.item,{ip_address:a,mac_address:r}=e,i={ip_address:a};return"manual"===r.type&&(i.mac_address=r.mac),c.default.update(this.item,{allowed_address_pairs:[i,...t]}).then((e=>{c.default.setDetail(e.port)}))})),(0,s.default)(this,"checkCidr",(e=>{if((0,p.isEmpty)(e))return!1;var{ip_version:t="ipv4"}=this.state;return!("ipv4"===t&&!h(e))&&!("ipv6"===t&&!m(e))}))}init(){this.store=c.default}get name(){return t("create allowed address pair")}get instanceName(){return(0,l.default)(this).ip_address}get isAllowed(){return!0}static get modalSize(){return"middle"}get defaultValue(){return{ip_version:"ipv4"}}get formItems(){return[{name:"ip_version",label:t("IP Version"),type:"select",options:[{label:"ipv4",value:"ipv4"},{label:"ipv6",value:"ipv6"}],onChange:e=>{this.setState({ip_version:e},(()=>{this.formRef.current.validateFields()}))},required:!0},{name:"ip_address",label:t("CIDR"),type:"input",required:!0,validator:(e,a)=>this.checkCidr(a)?o.default.resolve():o.default.reject(new Error(t("Invalid CIDR.")))},{name:"mac_address",label:t("Mac Address"),wrapperCol:{span:16},required:!0,type:"mac-address",options:[{label:t("VirtualAdapter Mac"),value:"auto"},{label:t("Manual input"),value:"manual"}]}]}}a.CreateAllowedAddressPair=v,(0,s.default)(v,"id","create-ip"),(0,s.default)(v,"title",t("Create Allowed Address Pair")),(0,s.default)(v,"policy","update_port"),(0,s.default)(v,"allowed",(()=>o.default.resolve(!0)));var g=(0,d.inject)("rootStore")((0,d.observer)(v));a.default=g},3707:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(33)),o=n(r(52)),s=n(r(37)),d=r(1113),u=n(r(521));class c extends d.ConfirmAction{constructor(){super(...arguments),(0,s.default)(this,"getItemName",(e=>e.ip_address)),(0,s.default)(this,"policy","update_port"),(0,s.default)(this,"allowedCheckFunc",(e=>!e||this.isOwnerOrAdmin(e))),(0,s.default)(this,"onSubmit",function(){var e=(0,o.default)((function*(e,t){var{allowed_address_pairs:a=[],id:r}=t.detail,i=(0,l.default)(a).call(a,(t=>t.ip_address!==e.ip_address));return u.default.update({id:r},{allowed_address_pairs:i}).then((e=>{u.default.setDetail(e.port)}))}));return function(t,a){return e.apply(this,arguments)}}())}get id(){return"delete"}get title(){return t("Delete Allowed Address Pair")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete allowed address pair")}isOwnerOrAdmin(){return!0}}a.default=c},3708:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var l=n(r(82)),o=n(r(0)),s=r(196),d=r(382),u=n(r(1122)),c=r(1129),f=r(83);class p extends u.default{get leftCards(){return[this.baseInfoCard]}get qosEndpoint(){return(0,f.qosEndpoint)()}get baseInfoCard(){var e=[{label:t("Bind Device Type"),dataIndex:"device_owner"},{label:t("Bind Device"),dataIndex:"device_id",render:(e,t)=>{var{itemInList:{device_id:a,device_owner:r,server_name:i}={}}=t;if(a&&"compute:nova"===r){var n,o=i?(0,l.default)(n="".concat(a," (")).call(n,i,")"):a;return this.getLinkRender("instanceDetail",o,{id:a},{tab:"interface"})}return e||"-"}},{label:t("VNIC Type"),dataIndex:"binding:vnic_type",render:e=>c.bindingTypes[e]||"-"}];return this.qosEndpoint&&e.push({label:t("QoS Policy"),dataIndex:"qos_policy_id",copyable:!1,render:e=>e?o.default.createElement(s.Link,{to:"/network/qos-policy/detail/".concat(e)},e):"-"}),{title:t("Base Info"),options:e}}}a.BaseDetail=p;var h=(0,d.inject)("rootStore")((0,d.observer)(p));a.default=h},3709:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.QoSPolicy=void 0;var l=r(382),o=n(r(1152)),s=r(83),d=n(r(1486));class u extends o.default{get checkEndpoint(){return!0}get endpoint(){return(0,s.qosEndpoint)()}get tabs(){var e=[{title:t("Current Project QoS Policy"),key:"projectQoSPolicy",component:d.default},{title:t("Shared QoS Policy"),key:"sharedQoSPolicy",component:d.default}];return this.hasAdminRole&&e.push({title:t("All QoS Policy"),key:"allQoSPolicy",component:d.default}),e}}a.QoSPolicy=u;var c=(0,l.inject)("rootStore")((0,l.observer)(u));a.default=c},3710:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.Create=void 0;var l=n(r(62)),o=n(r(65)),s=n(r(37)),d=r(382),u=r(1113),c=n(r(384)),f=r(391);class p extends u.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"onSubmit",(e=>{var{name:t,description:a,shared:r,is_default:i,project_id:n}=e;return this.store.create({name:t,description:a,shared:r,is_default:i,project_id:n})}))}get name(){return t("Create QoS Policy")}init(){this.store=new f.QoSPolicyStore,this.isAdminPage&&c.default.fetchList()}get defaultValue(){return{project_id:this.props.rootStore.user.project.id}}get formItems(){var e,a=(0,l.default)(e=c.default.list.data).call(e,(e=>({label:e.name,value:e.id})));return[{name:"name",label:t("Policy Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"project_id",label:t("Project"),type:"select",showSearch:!0,required:!0,options:a,hidden:!this.isAdminPage},{name:"description",label:t("Description"),type:"textarea"},{name:"shared",label:t("Shared"),type:"switch",hidden:!this.isAdminPage},{name:"is_default",label:t("Default Policy"),type:"switch",hidden:!this.isAdminPage}]}}a.Create=p,(0,s.default)(p,"id","create_qos_policy"),(0,s.default)(p,"title",t("Create QoS Policy")),(0,s.default)(p,"policy","create_policy"),(0,s.default)(p,"aliasPolicy","neutron:create_policy"),(0,s.default)(p,"allowed",(()=>o.default.resolve(!0)));var h=(0,d.inject)("rootStore")((0,d.observer)(p));a.default=h},3711:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var p=f(r(65)),h=f(r(37)),m=r(382),v=r(1113),g=r(391);function _(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}class b extends v.ModalAction{constructor(){super(...arguments),(0,h.default)(this,"policy",(()=>({rules:[["network","edit_qos_policy"]]}))),(0,h.default)(this,"onSubmit",(e=>this.store.update(this.props.item,e)))}get name(){return t("Edit QoS Policy")}init(){this.store=new g.QoSPolicyStore}get defaultValue(){var{item:e}=this.props;return function(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=_(Object(r),!0)).call(a,(function(t){(0,h.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=_(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}({},e)}get formItems(){return[{name:"name",label:t("Policy Name"),type:"input-name",withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea"},{name:"shared",label:t("Shared"),type:"switch",hidden:!this.isAdminPage},{name:"is_default",label:t("Default Policy"),type:"switch",hidden:!this.isAdminPage}]}}a.Edit=b,(0,h.default)(b,"id","edit_qos_policy"),(0,h.default)(b,"title",t("Edit QoS Policy")),(0,h.default)(b,"policy","update_policy"),(0,h.default)(b,"aliasPolicy","neutron:update_policy"),(0,h.default)(b,"allowed",(()=>p.default.resolve(!0)));var y=(0,m.inject)("rootStore")((0,m.observer)(b));a.default=y},3712:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(37)),o=r(1113),s=n(r(391));class d extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","delete_policy"),(0,l.default)(this,"aliasPolicy","neutron:delete_policy"),(0,l.default)(this,"allowedCheckFunc",(e=>!e||this.isOwnerOrAdmin(e))),(0,l.default)(this,"onSubmit",(e=>s.default.delete(e)))}get id(){return"delete"}get title(){return t("Delete QoS Policy")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete qos policy")}isOwnerOrAdmin(){return!0}}a.default=d},3713:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.CreateBandwidthLimitRule=void 0;var p=f(r(320)),h=f(r(65)),m=f(r(71)),v=f(r(37)),g=f(r(0)),_=r(382),b=r(1113),y=f(r(391));function A(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=A(Object(r),!0)).call(a,(function(t){(0,v.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=A(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}class S extends b.ModalAction{constructor(){super(...arguments),(0,v.default)(this,"onSubmit",(e=>{var{max_kbps:t,max_burst_kbps:a}=e,r=I(I({},(0,m.default)(e,["max_kbps","max_burst_kbps"])),{},{max_kbps:1024*t,max_burst_kbps:1024*a});return y.default.createBandwidthLimitRule(this.props.item,r)}))}get name(){return t("create bandwidth limit rule")}get defaultValue(){return{max_kbps:1,max_burst_kbps:1,direction:"egress"}}get formItems(){return[{label:t("Type"),type:"label",component:g.default.createElement("div",{style:{lineHeight:"32px",marginBottom:24}},t("QoS Bandwidth Limit"))},{name:"max_kbps",label:t("Bandwidth limit"),type:"slider-input",max:1e4,min:1,inputMin:1,inputMax:1e4,description:"1Mbps-10000Mbps"},{name:"max_burst_kbps",label:t("Burst limit"),type:"slider-input",max:1e4,min:1,inputMin:1,inputMax:1e4,description:"1Mbps-10000Mbps"},{name:"direction",label:t("Direction"),type:"select",options:[{label:t("egress"),value:"egress"},{label:t("ingress"),value:"ingress"}]}]}}a.CreateBandwidthLimitRule=S,(0,v.default)(S,"id","create_bandwidth_limit_rule"),(0,v.default)(S,"title",t("Create Bandwidth Limit Rule")),(0,v.default)(S,"policy","create_policy_bandwidth_limit_rule"),(0,v.default)(S,"allowed",(e=>{var{rules:t=[]}=e,a=(0,p.default)(t).call(t,(e=>"ingress"===e.direction)),r=(0,p.default)(t).call(t,(e=>"egress"===e.direction));return h.default.resolve(!(a&&r))}));var C=(0,_.inject)("rootStore")((0,_.observer)(S));a.default=C},3714:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.CreateDSCPMarkingRules=void 0;var l=n(r(320)),o=n(r(65)),s=n(r(37)),d=n(r(0)),u=r(382),c=r(1113),f=n(r(391)),p=n(r(1488));class h extends c.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"onSubmit",(e=>f.default.createDSCPMarkingRule(this.props.item,e)))}get name(){return t("create DSCP marking rule")}get defaultValue(){return{dscp_mark:0}}get formItems(){return[{label:t("Type"),type:"label",component:d.default.createElement("div",{style:{lineHeight:"32px",marginBottom:24}},t("DSCP Marking"))},{name:"dscp_mark",label:t("Value"),type:"select",options:p.default}]}}a.CreateDSCPMarkingRules=h,(0,s.default)(h,"id","create_DSCP_marking_rule"),(0,s.default)(h,"title",t("Create DSCP Marking Rule")),(0,s.default)(h,"policy","create_policy_dscp_marking_rule"),(0,s.default)(h,"allowed",(e=>{var{rules:t=[]}=e,a=(0,l.default)(t).call(t,(e=>"dscp_marking"===e.type));return o.default.resolve(!a)}));var m=(0,u.inject)("rootStore")((0,u.observer)(h));a.default=m},3715:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(320)),o=n(r(101)),s=n(r(37)),d=r(1113),u=n(r(391));class c extends d.ConfirmAction{constructor(){super(...arguments),(0,s.default)(this,"policy","delete_policy_dscp_marking_rule"),(0,s.default)(this,"allowedCheckFunc",(e=>!e||this.isOwnerOrAdmin(e)&&this.hasDSCPMarkingRule(e))),(0,s.default)(this,"hasDSCPMarkingRule",(e=>{var{rules:t=[]}=e;return(0,l.default)(t).call(t,(e=>"dscp_marking"===e.type))})),(0,s.default)(this,"onSubmit",(e=>{var t,{id:a}=(0,o.default)(t=e.rules).call(t,(e=>"dscp_marking"===e.type));return u.default.deleteDSCPMarkingRules(e,a)}))}get id(){return"delete"}get title(){return t("Delete DSCP Marking Rules")}get isDanger(){return!0}get buttonText(){return t("Delete DSCP Marking Rules")}get actionName(){return t("delete dscp marking rules")}isOwnerOrAdmin(){return!0}}a.default=c},3716:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(320)),o=n(r(101)),s=n(r(37)),d=r(1113),u=n(r(391));class c extends d.ConfirmAction{constructor(){super(...arguments),(0,s.default)(this,"policy","delete_policy_bandwidth_limit_rule"),(0,s.default)(this,"allowedCheckFunc",(e=>!e||this.isOwnerOrAdmin(e)&&this.hasEgressRule(e))),(0,s.default)(this,"hasEgressRule",(e=>{var{rules:t=[]}=e;return(0,l.default)(t).call(t,(e=>"egress"===e.direction))})),(0,s.default)(this,"onSubmit",(e=>{var t,{id:a}=(0,o.default)(t=e.rules).call(t,(e=>"bandwidth_limit"===e.type&&"egress"===e.direction));return u.default.deleteBandwidthLimitRules(e,a)}))}get id(){return"delete-egress"}get title(){return t("Delete Bandwidth Egress Rules")}get isDanger(){return!0}get buttonText(){return t("Delete Bandwidth Egress Rules")}get actionName(){return t("delete bandwidth egress rules")}isOwnerOrAdmin(){return!0}}a.default=c},3717:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(320)),o=n(r(101)),s=n(r(37)),d=r(1113),u=n(r(391));class c extends d.ConfirmAction{constructor(){super(...arguments),(0,s.default)(this,"policy","delete_policy_bandwidth_limit_rule"),(0,s.default)(this,"allowedCheckFunc",(e=>!e||this.isOwnerOrAdmin(e)&&this.hasIngressRule(e))),(0,s.default)(this,"hasIngressRule",(e=>{var{rules:t=[]}=e;return(0,l.default)(t).call(t,(e=>"ingress"===e.direction))})),(0,s.default)(this,"onSubmit",(e=>{var t,{id:a}=(0,o.default)(t=e.rules).call(t,(e=>"bandwidth_limit"===e.type&&"ingress"===e.direction));return u.default.deleteBandwidthLimitRules(e,a)}))}get id(){return"delete-ingress"}get title(){return t("Delete Bandwidth Ingress Rules")}get isDanger(){return!0}get buttonText(){return t("Delete Bandwidth Ingress Rules")}get actionName(){return t("delete bandwidth ingress rules")}isOwnerOrAdmin(){return!0}}a.default=c},3718:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.EditBandwidthEgressRule=void 0;var l=n(r(101)),o=n(r(320)),s=n(r(65)),d=n(r(37)),u=n(r(0)),c=r(382),f=r(1113),p=n(r(391));class h extends f.ModalAction{constructor(){super(...arguments),(0,d.default)(this,"onSubmit",(e=>{var{max_kbps:t,max_burst_kbps:a}=e,r={max_kbps:1024*t,max_burst_kbps:1024*a};return p.default.updateBandwidthLimitRule(this.props.item,this.egressRule.id,r)}))}get name(){return t("Edit Bandwidth Egress Limit Rule")}get defaultValue(){var{max_kbps:e,max_burst_kbps:t}=this.egressRule;return{max_kbps:e/1024,max_burst_kbps:t/1024}}init(){var{rules:e=[]}=this.item||{};this.egressRule=(0,l.default)(e).call(e,(e=>"bandwidth_limit"===e.type&&"egress"===e.direction))||{}}get formItems(){return[{label:t("Type"),type:"label",component:u.default.createElement("div",{style:{lineHeight:"32px",marginBottom:24}},t("QoS Bandwidth Egress Limit"))},{name:"max_kbps",label:t("Bandwidth limit"),type:"slider-input",max:1e4,min:1,inputMin:1,inputMax:1e4,description:"1Mbps-10000Mbps"},{name:"max_burst_kbps",label:t("Burst limit"),type:"slider-input",max:1e4,min:1,inputMin:1,inputMax:1e4,description:"1Mbps-10000Mbps"}]}}a.EditBandwidthEgressRule=h,(0,d.default)(h,"id","edit_bandwidth_egress_limit_rule"),(0,d.default)(h,"title",t("Edit Bandwidth Egress Limit Rule")),(0,d.default)(h,"policy","update_policy_bandwidth_limit_rule"),(0,d.default)(h,"allowed",(e=>{var{rules:t=[]}=e,a=(0,o.default)(t).call(t,(e=>"egress"===e.direction));return s.default.resolve(a)}));var m=(0,c.inject)("rootStore")((0,c.observer)(h));a.default=m},3719:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.EditBandwidthIngressRule=void 0;var l=n(r(101)),o=n(r(320)),s=n(r(65)),d=n(r(37)),u=n(r(0)),c=r(382),f=r(1113),p=n(r(391));class h extends f.ModalAction{constructor(){super(...arguments),(0,d.default)(this,"onSubmit",(e=>p.default.updateBandwidthLimitRule(this.props.item,this.ingressRule.id,{max_kbps:1024*e.max_kbps,max_burst_kbps:1024*e.max_burst_kbps})))}get name(){return t("Edit Bandwidth Ingress Limit Rule")}get defaultValue(){var{max_kbps:e,max_burst_kbps:t}=this.ingressRule;return{max_kbps:e/1024,max_burst_kbps:t/1024}}init(){var{rules:e=[]}=this.item||{};this.ingressRule=(0,l.default)(e).call(e,(e=>"bandwidth_limit"===e.type&&"ingress"===e.direction))||{}}get formItems(){return[{label:t("Type"),type:"label",component:u.default.createElement("div",{style:{lineHeight:"32px",marginBottom:24}},t("QoS Bandwidth Ingress Limit"))},{name:"max_kbps",label:t("Bandwidth limit"),type:"slider-input",max:1e4,min:1,inputMin:1,inputMax:1e4,description:"1Mbps-10000Mbps"},{name:"max_burst_kbps",label:t("Burst limit"),type:"slider-input",max:1e4,min:1,inputMin:1,inputMax:1e4,description:"1Mbps-10000Mbps"}]}}a.EditBandwidthIngressRule=h,(0,d.default)(h,"id","edit_bandwidth_ingress_limit_rule"),(0,d.default)(h,"title",t("Edit Bandwidth Ingress Limit Rule")),(0,d.default)(h,"policy","update_policy_bandwidth_limit_rule"),(0,d.default)(h,"allowed",(e=>{var{rules:t=[]}=e,a=(0,o.default)(t).call(t,(e=>"ingress"===e.direction));return s.default.resolve(a)}));var m=(0,c.inject)("rootStore")((0,c.observer)(h));a.default=m},3720:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.EditDSCPMarkingRule=void 0;var l=n(r(101)),o=n(r(320)),s=n(r(65)),d=n(r(37)),u=n(r(0)),c=r(382),f=r(1113),p=n(r(391)),h=n(r(1488));class m extends f.ModalAction{constructor(){super(...arguments),(0,d.default)(this,"onSubmit",(e=>p.default.updateDSCPMarkingRule(this.props.item,this.dscpMarkingRule.id,e)))}get name(){return t("Edit DSCP Marking Rule")}get defaultValue(){return{dscp_mark:this.dscpMarkingRule.dscp_mark||0}}init(){var{rules:e=[]}=this.item;this.dscpMarkingRule=(0,l.default)(e).call(e,(e=>"dscp_marking"===e.type))||{}}get formItems(){return[{label:t("Type"),type:"label",component:u.default.createElement("div",{style:{lineHeight:"32px",marginBottom:24}},t("DSCP Marking"))},{name:"dscp_mark",label:t("Value"),type:"select",options:h.default}]}}a.EditDSCPMarkingRule=m,(0,d.default)(m,"id","edit_DSCP_marking_rule"),(0,d.default)(m,"title",t("Edit DSCP Marking Rule")),(0,d.default)(m,"policy","update_policy_dscp_marking_rule"),(0,d.default)(m,"allowed",(e=>{var{rules:t=[]}=e,a=(0,o.default)(t).call(t,(e=>"dscp_marking"===e.type));return s.default.resolve(a)}));var v=(0,c.inject)("rootStore")((0,c.observer)(m));a.default=v},3721:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.QoSPolicyDetail=void 0;var l=n(r(518)),o=r(382),s=n(r(1119)),d=r(391),u=n(r(1316)),c=n(r(3722)),f=n(r(1487));class p extends s.default{get name(){return t("qoS policy")}get policy(){return"get_policy"}get aliasPolicy(){return"neutron:get_policy"}get listUrl(){return this.getRoutePath("networkQos")}get actionConfigs(){return this.isAdminPage?f.default.actionConfigs:f.default.consoleActions}get detailInfos(){var e=[{title:t("Policy Name"),dataIndex:"name"},{title:t("Rule Numbers"),dataIndex:"rules",render:e=>e.length},{title:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime"},{title:t("Shared"),dataIndex:"shared",valueRender:"yesNo"},{title:t("Default Policy"),dataIndex:"is_default",valueRender:"yesNo"},{title:t("Description"),dataIndex:"description"}];return this.isAdminPage&&(0,l.default)(e).call(e,3,0,{title:t("Owned Project"),dataIndex:"project_name"}),e}get tabs(){return[{title:t("BaseDetail"),key:"BaseDetail",component:c.default},{title:t("Floating IP"),key:"fip",component:u.default}]}init(){this.store=new d.QoSPolicyStore}}a.QoSPolicyDetail=p;var h=(0,o.inject)("rootStore")((0,o.observer)(p));a.default=h},3722:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var l=n(r(101)),o=r(382),s=n(r(1122));class d extends s.default{get leftCards(){return[...this.BandwidthCard,this.DSCPMarkingCard]}getOptions(e){var{max_kbps:a="-",max_burst_kbps:r="-"}=e||{};return[{label:t("Max BandWidth"),content:"".concat("-"===a?a:a/1024," Mbps")},{label:t("Max Burst"),content:"".concat("-"===r?r:r/1024," Mbps")}]}get BandwidthCard(){var{rules:e=[]}=this.detailData,a=(0,l.default)(e).call(e,(e=>"bandwidth_limit"===e.type&&"egress"===e.direction)),r=(0,l.default)(e).call(e,(e=>"bandwidth_limit"===e.type&&"ingress"===e.direction));return[{title:t("BandWidth Limit Egress"),options:this.getOptions(a)},{title:t("BandWidth Limit Ingress"),options:this.getOptions(r)}]}get DSCPMarkingCard(){var{rules:e=[]}=this.detailData,a=(0,l.default)(e).call(e,(e=>"dscp_marking"===e.type))||{},r=[{label:t("Value"),content:0===a.dscp_mark?"0":a.dscp_mark||"-"}];return{title:t("DSCP Marking"),options:r}}}a.BaseDetail=d;var u=(0,o.inject)("rootStore")((0,o.observer)(d));a.default=u},3723:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.LoadBalancerInstance=void 0,r(1117);var l=n(r(1118));r(1115);var o=n(r(1116)),s=n(r(52)),d=n(r(37)),u=n(r(0)),c=r(382),f=n(r(1114)),p=(r(167),r(528)),h=r(1127),m=r(83),v=r(1489);class g extends f.default{constructor(){var e;super(...arguments),e=this,(0,d.default)(this,"fetchDataByPage",function(){var t=(0,s.default)((function*(t){yield e.store.fetchListByPageWithFip(t),e.list.silent=!1}));return function(e){return t.apply(this,arguments)}}()),(0,d.default)(this,"fetchDownloadData",function(){var t=(0,s.default)((function*(t){return e.isFilterByBackend?yield e.downloadStore.fetchListByPageWithFip(e.updateFetchParamsByPage(t)):yield e.downloadStore.fetchList(e.updateFetchParams(t))}));return function(e){return t.apply(this,arguments)}}()),(0,d.default)(this,"getColumns",(()=>[{title:t("ID/Name"),dataIndex:"name",routeName:this.getRouteName("lbDetail")},{title:t("Project ID/Name"),dataIndex:"project_name",hidden:!this.isAdminPage,sortKey:"project_id"},{title:t("Network ID"),dataIndex:"vip_network_id"},{title:t("IP"),dataIndex:"vip_address"},{title:t("Floating IP"),dataIndex:"fip",render:e=>e||"-"},{title:t("Port ID"),dataIndex:"vip_port_id"},{title:t("Operating Status"),dataIndex:"operating_status",render:e=>h.operatingStatusCodes[e],titleTip:u.default.createElement(l.default,null,u.default.createElement(o.default,null,t("DRAINING: The member is not accepting new connections")),u.default.createElement(o.default,null,t("DEGRADED: One or more of the entitys components are in ERROR")))},{title:t("Provisioning Status"),dataIndex:"provisioning_status",render:e=>h.provisioningStatusCodes[e]},{title:t("Listener Number"),dataIndex:"listeners",render:e=>e.length},{title:t("Created At"),dataIndex:"created_at",valueRender:"toLocalTime",isHideable:!0}]))}init(){this.store=new p.LbaasStore,this.downloadStore=new p.LbaasStore}get fetchDataByCurrentProject(){return!0}get policy(){return"os_load-balancer_api:loadbalancer:get_all"}get checkEndpoint(){return!0}get endpoint(){return(0,m.lbEndpoint)()}get name(){return t("Load Balancers")}get isFilterByBackend(){return!0}get actionConfigs(){return this.isAdminPage?v.adminActions:v.actionConfigs}get adminPageHasProjectFilter(){return!0}get searchFilters(){return[{label:t("Name"),name:"name"}]}}a.LoadBalancerInstance=g;var _=(0,c.inject)("rootStore")((0,c.observer)(g));a.default=_},3724:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var l=n(r(65)),o=n(r(37)),s=r(382),d=r(1113),u=n(r(528));class c extends d.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"policy",(()=>"edit_load_balancer")),(0,o.default)(this,"onSubmit",(e=>u.default.update({id:this.item.id},e)))}get name(){return t("Edit Load Balancer")}get defaultValue(){var{item:e}=this;return{name:e.name,description:e.description}}get formItems(){return[{name:"name",label:t("Load Balancer Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea"}]}}a.Edit=c,(0,o.default)(c,"id","edit_load_balancer"),(0,o.default)(c,"title",t("Edit")),(0,o.default)(c,"policy","os_load-balancer_api:loadbalancer:put"),(0,o.default)(c,"allowed",((e,t)=>{var{isAdminPage:a=!1}=t;return l.default.resolve(!a&&"ACTIVE"===e.provisioning_status)}));var f=(0,s.inject)("rootStore")((0,s.observer)(c));a.default=f},3725:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(37)),o=r(1113),s=r(1123),d=n(r(528)),u=n(r(136));class c extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","os_load-balancer_api:loadbalancer:delete"),(0,l.default)(this,"confirmContext",(e=>{var a=this.getName(e);return t("Are you sure to {action} (instance: {name})?",{action:this.actionNameDisplay||this.title,name:a})+t("This will delete all child objects of the load balancer.")})),(0,l.default)(this,"allowedCheckFunc",(e=>!e||(this.isCurrentProject(e)&&"ACTIVE"===e.provisioning_status||"ERROR"===e.provisioning_status))),(0,l.default)(this,"onSubmit",(e=>d.default.delete(e)))}get id(){return"delete"}get title(){return t("Delete Load Balancer")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete load balancer")}isCurrentProject(e){var t=u.default;return!(!(0,s.checkSystemAdmin)()&&e.project_id!==t.user.project.id)}}a.default=c},3726:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.AssociateFip=void 0;var l=n(r(65)),o=n(r(52)),s=n(r(37)),d=r(382),u=n(r(323)),c=r(1113),f=r(1129),p=r(1151),h=r(1137);class m extends c.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"handleFixedIPChange",(e=>p.handleFixedIPChange.call(this,e))),(0,s.default)(this,"onSubmit",(e=>{var{fixed_ip:t,fip:a}=e,r=t.selectedRows[0],i=a.selectedRowKeys[0];return u.default.associateFip({id:i,port_id:this.item.vip_port_id,fixed_ip_address:r.ip_address})}))}init(){this.getInterfaces(),h.getCanReachSubnetIdsWithRouterIdInComponent.call(this),this.state={interfaces:[],fixed_ip:null,portFixedIPs:[],canAssociateFloatingIPs:[],canReachSubnetIdsWithRouterId:[],portLoading:!0}}static get modalSize(){return"large"}getModalSize(){return"large"}get name(){return t("Associate Floating IP")}getInterfaces(){var e=this;return(0,o.default)((function*(){var t=[{port_id:e.item.vip_port_id,network_id:e.item.vip_network_id,fixed_ips:[{ip_address:e.item.vip_address,subnet_id:e.item.vip_subnet_id}]}],a=yield(0,p.getInterfaceWithReason)(t);e.setState({interfaces:a,portLoading:!1})}))()}get ports(){var{interfaces:e,canReachSubnetIdsWithRouterId:t}=this.state;return f.getPortsAndReasons.call(this,e,t)}get defaultValue(){var{name:e}=this.item;return{lb:e}}getFIPFormItemExtra(){return(0,p.getFIPFormItemExtra)()}disableFIPAssociate(e){return(0,p.disableFIPAssociate)(e)}get formItems(){var e=(0,p.getFixedIPFormItemForAssociate)(t("Fixed IP"),this),a=(0,p.getFIPFormItemForAssociate)(this);return[{name:"lb",label:t("Load Balancer"),type:"label",iconType:"instance"},e,a]}}a.AssociateFip=m,(0,s.default)(m,"id","AssociateFip"),(0,s.default)(m,"title",t("Associate Floating IP")),(0,s.default)(m,"policy","update_floatingip"),(0,s.default)(m,"allowed",((e,t)=>{var{isAdminPage:a=!1}=t;return l.default.resolve(!a&&"ACTIVE"===e.provisioning_status&&function(e){return null===e.fip||void 0===e.fip}(e))}));var v=(0,d.inject)("rootStore")((0,d.observer)(m));a.default=v},3727:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.BaseStep=void 0;var l=n(r(65)),o=n(r(52)),s=n(r(37)),d=r(382),u=n(r(1121)),c=r(528),f=r(321),p=r(390);class h extends u.default{constructor(){var e;super(...arguments),e=this,(0,s.default)(this,"allowed",(()=>l.default.resolve())),(0,s.default)(this,"handleOwnedNetworkChange",(e=>{var{network_id:t}=this.state,a=e.selectedRowKeys[0];this.setState({network_id:a},(()=>{var{network_id:e}=this.state;t&&t!==e&&this.formRef.current.setFieldsValue({vip_address:void 0})})),this.getSubnets(a)})),(0,s.default)(this,"fetchSubnetDetails",function(){var t=(0,o.default)((function*(t){var a=yield e.subnetStore.fetchList({network_id:t});e.setState({subnetDetails:a||[]})}));return function(e){return t.apply(this,arguments)}}())}init(){this.store=new c.LbaasStore,this.networkStore=new f.NetworkStore,this.subnetStore=new p.SubnetStore}get title(){return"BaseStep"}get name(){return"BaseStep"}get isStep(){return!0}get defaultValue(){return{project_id:this.props.rootStore.user.project.id}}getSubnets(e){var t=this;return(0,o.default)((function*(){yield t.networkStore.fetchDetail({id:e}),yield t.fetchSubnetDetails(e)}))()}get formItems(){var{network_id:e,subnetDetails:a=[]}=this.state;return[{name:"name",label:t("Load Balancer Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea"},{name:"vip_network_id",label:t("Owned Network"),type:"network-select-table",onChange:this.handleOwnedNetworkChange,required:!0},{name:"vip_address",label:t("Owned Subnet"),type:"ip-distributor",subnets:a,formRef:this.formRef,maxNumber:1,hidden:!e,required:!0}]}}a.BaseStep=h;var m=(0,d.inject)("rootStore")((0,d.observer)(h));a.default=m},3728:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.ListenerStep=void 0;var l=n(r(65)),o=n(r(33)),s=n(r(37)),d=r(382),u=n(r(1121)),c=r(1127),f=r(1204),p=r(1205);class h extends u.default{constructor(){super(...arguments),(0,s.default)(this,"allowed",(()=>l.default.resolve()))}init(){this.containersStore=new f.ContainersStore,this.secretsStore=new p.SecretsStore,this.fetchContainers(),this.fetchSecrets()}get title(){return"Listener Detail"}get name(){return"Listener Detail"}get isStep(){return!0}fetchContainers(){this.containersStore.fetchList()}fetchSecrets(){this.secretsStore.fetchList({mode:"CA"})}get SERVERSecrets(){return this.containersStore.list.data||[]}get CASecrets(){return this.secretsStore.list.data||[]}get SNISecrets(){var e;return(0,o.default)(e=this.containersStore.list.data||[]).call(e,(e=>!!e.domain))}get defaultValue(){return{listener_ssl_parsing_method:"one-way",listener_sni_enabled:!1,listener_connection_limit:-1}}get nameForStateUpdate(){return["listener_protocol","listener_ssl_parsing_method","listener_sni_enabled"]}get formItems(){var e,{listener_protocol:a,listener_ssl_parsing_method:r,listener_sni_enabled:i}=this.state;return[{name:"listener_name",label:t("Listener Name"),type:"input-name",required:!0},{name:"listener_description",label:t("Listener Description"),type:"textarea"},{name:"listener_protocol",label:t("Listener Protocol"),type:"select",options:c.listenerProtocols,onChange:()=>{this.updateContext({pool_protocol:"",health_type:""})},required:!0},{name:"listener_ssl_parsing_method",label:t("SSL Parsing Method"),type:"select",options:c.sslParseMethod,required:!0,display:"TERMINATED_HTTPS"===a},{name:"listener_default_tls_container_ref",label:t("Server Certificate"),type:"select-table",required:!0,data:this.SERVERSecrets,isLoading:!1,isMulti:!1,filterParams:[{label:t("Name"),name:"name"}],columns:(0,c.getCertificateColumns)(this),display:"TERMINATED_HTTPS"===a},{name:"listener_client_ca_tls_container_ref",label:t("CA Certificate"),type:"select-table",required:!0,data:this.CASecrets,isLoading:!1,isMulti:!1,filterParams:[{label:t("Name"),name:"name"}],columns:(0,o.default)(e=(0,c.getCertificateColumns)(this)).call(e,(e=>"domain"!==e.dataIndex)),display:"TERMINATED_HTTPS"===a&&"two-way"===r},{name:"listener_sni_enabled",label:t("SNI Enabled"),type:"switch",display:"TERMINATED_HTTPS"===a},{name:"listener_sni_container_refs",label:t("SNI Certificate"),type:"select-table",required:!0,data:this.SNISecrets,isLoading:!1,isMulti:!0,filterParams:[{label:t("Name"),name:"name"}],columns:(0,c.getCertificateColumns)(this),display:"TERMINATED_HTTPS"===a&&i},{name:"listener_protocol_port",label:t("Listener Protocol Port"),type:"input-number",required:!0},{name:"listener_connection_limit",label:t("Listener Connection Limit"),type:"input-number",min:-1,extra:t("-1 means no connection limit"),required:!0}]}}a.ListenerStep=h;var m=(0,d.inject)("rootStore")((0,d.observer)(h));a.default=m},3729:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.PoolStep=void 0;var l=n(r(65)),o=n(r(33)),s=n(r(219)),d=n(r(37)),u=r(382),c=n(r(1121)),f=r(1322),p=r(1127);class h extends c.default{constructor(){super(...arguments),(0,d.default)(this,"allowed",(()=>l.default.resolve())),(0,d.default)(this,"handleAlgorithmChange",(e=>{this.setState({pool_lb_algorithm:e})}))}get title(){return"Pool Detail"}get name(){return"Pool Detail"}get isStep(){return!0}get filterOptions(){var{context:{listener_protocol:e=""}={}}=this.props;return(0,o.default)(p.poolProtocols).call(p.poolProtocols,(t=>(0,s.default)(e).call(e,t.label)))}init(){this.state={pool_lb_algorithm:void 0}}get formItems(){var{pool_lb_algorithm:e}=this.state;return[{name:"pool_name",label:t("Pool Name"),type:"input-name",required:!0},{name:"pool_description",label:t("Pool Description"),type:"textarea"},{name:"pool_lb_algorithm",label:t("Pool Algorithm"),type:"select",options:f.Algorithm,onChange:this.handleAlgorithmChange,extra:e&&f.algorithmTip[e],required:!0},{name:"pool_protocol",label:t("Pool Protocol"),type:"select",options:this.filterOptions,onChange:()=>{this.updateContext({health_type:""})},required:!0}]}}a.PoolStep=h;var m=(0,u.inject)("rootStore")((0,u.observer)(h));a.default=m},3730:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.default=t.MemberStep=void 0;var n=i(a(65)),l=i(a(33)),o=i(a(37)),s=a(382),d=i(a(1121)),u=a(529),c=a(521),f=a(47);class p extends d.default{constructor(){super(...arguments),(0,o.default)(this,"allowed",(()=>n.default.resolve()))}init(){this.store=new c.VirtualAdapterStore,this.portStore=new u.PortStore,this.state={ports:[]},this.store.fetchList().then((e=>{this.setState({ports:(0,l.default)(e).call(e,(e=>"network:dhcp"!==e.device_owner&&"network:router_gateway"!==e.device_owner))})}))}get title(){return"Member Detail"}get name(){return"Member Detail"}get isStep(){return!0}get wrapperCol(){return{xs:{span:16},sm:{span:12}}}get formItems(){return[{name:"extMembers",type:"member-allocator",lbSubnetId:(0,f.get)(this.props.context,"vip_address[0].subnet",""),isLoading:this.store.list.isLoading,ports:this.state.ports}]}}t.MemberStep=p;var h=(0,s.inject)("rootStore")((0,s.observer)(p));t.default=h},3731:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.HealthMonitorStep=void 0;var l=n(r(65)),o=n(r(33)),s=n(r(219)),d=n(r(37)),u=r(382),c=n(r(1121)),f=r(1127);class p extends c.default{constructor(){super(...arguments),(0,d.default)(this,"allowed",(()=>l.default.resolve()))}get title(){return"Health Monitor Detail"}get name(){return"Health Monitor Detail"}get isStep(){return!0}get filteredProtocolOptions(){var{context:{listener_protocol:e=""}={}}=this.props;return(0,o.default)(f.healthProtocols).call(f.healthProtocols,(t=>(0,s.default)(e).call(e,t.label)))}get defaultValue(){return{enableHealthMonitor:!0,health_delay:5,health_timeout:3,health_max_retries:3,health_type:""}}get formItems(){var{health_delay:e,enableHealthMonitor:a}=this.state;return[{name:"enableHealthMonitor",label:t("Enable HealthMonitor"),type:"radio",options:[{label:t("Yes"),value:!0},{label:t("No"),value:!1}]},{name:"health_name",label:t("Health Monitor Name"),type:"input-name",required:!0,hidden:!a},{name:"health_delay",label:t("Health Monitor Delay"),type:"input-number",onChange:e=>{this.setState({health_delay:e})},min:0,extra:t("Maximum interval time for each health check response"),required:!0,hidden:!a},{name:"health_max_retries",label:t("Health Monitor Max Retries"),type:"input-number",min:1,max:10,extra:t("That is, after how many consecutive failures of the health check, the health check status of the back-end cloud server is changed from normal to abnormal"),required:!0,hidden:!a},{name:"health_timeout",label:t("Health Monitor Timeout"),type:"input-number",min:e||0,extra:t("The timeout period of waiting for the return of the health check request, the check timeout will be judged as a check failure"),required:!0,hidden:!a},{name:"health_type",label:t("Health Monitor Type"),type:"select",options:this.filteredProtocolOptions,required:!0,hidden:!a}]}}a.HealthMonitorStep=p;var h=(0,u.inject)("rootStore")((0,u.observer)(p));a.default=h},3732:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(37)),o=r(1113),s=n(r(323));class d extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","update_floatingip"),(0,l.default)(this,"allowedCheckFunc",(e=>"ACTIVE"===e.provisioning_status&&!!e.fip_id)),(0,l.default)(this,"onSubmit",(()=>s.default.disassociateFip({id:this.item.fip_id})))}get id(){return"disassociate-fip-from-lb"}get title(){return t("Disassociate Floating IP")}get buttonText(){return t("Disassociate Floating IP")}get actionName(){return t("disassociate floating ip")}}a.default=d},3733:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.LoadBalancerDetail=void 0;var p=f(r(37)),h=r(382),m=f(r(1119)),v=r(528),g=r(1127),_=f(r(3734)),b=r(1489);function y(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=y(Object(r),!0)).call(a,(function(t){(0,p.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=y(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}class I extends m.default{constructor(){super(...arguments),(0,p.default)(this,"fetchData",(e=>{if(this.store.fetchDetailWithFip){var t=A(A(A({},this.params),e||{}),{},{silent:!0,all_projects:this.isAdminPage});this.store.fetchDetailWithFip(t).catch(this.catch)}}))}get name(){return t("load balancer")}get policy(){return"os_load-balancer_api:loadbalancer:get_one"}get listUrl(){return this.getRoutePath("lb")}get actionConfigs(){return this.isAdminPage?b.adminActions:b.actionConfigs}get detailInfos(){return[{title:t("Name"),dataIndex:"name"},{title:t("Status"),dataIndex:"provisioning_status",render:e=>g.provisioningStatusCodes[e]},{title:t("Network"),dataIndex:"vip_network_id"},{title:t("Subnet"),dataIndex:"vip_subnet_id"},{title:t("IP"),dataIndex:"vip_address"},{title:t("Floating IP"),dataIndex:"fip"},{title:t("Provider"),dataIndex:"provider"},{title:t("Description"),dataIndex:"description"}]}get tabs(){return[{title:t("Listener"),key:"listener",component:_.default}]}init(){this.store=new v.LbaasStore}}a.LoadBalancerDetail=I;var S=(0,h.inject)("rootStore")((0,h.observer)(I));a.default=S},3734:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Listeners=void 0;var p=f(r(71)),h=f(r(37)),m=r(382),v=f(r(1114)),g=r(1127),_=r(1172),b=r(1491);function y(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}class A extends v.default{constructor(){super(...arguments),(0,h.default)(this,"updateFetchParamsByPage",(e=>{var{id:t}=e;return function(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=y(Object(r),!0)).call(a,(function(t){(0,h.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=y(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}({loadbalancer_id:t},(0,p.default)(e,["id"]))})),(0,h.default)(this,"getColumns",(()=>[{title:t("ID/Name"),dataIndex:"name",routeName:this.getRouteName("lbListenerDetail"),routeParamsFunc:e=>({loadBalancerId:this.id,id:e.id})},{title:t("Status"),dataIndex:"provisioning_status",render:e=>g.provisioningStatusCodes[e],isHideable:!0},{title:t("Protocol"),dataIndex:"protocol",isHideable:!0,render:e=>("TERMINATED_HTTPS"===e?"HTTPS":e)||"-"},{title:t("Port"),dataIndex:"protocol_port",isHideable:!0},{title:t("Max connect"),dataIndex:"connection_limit"}]))}init(){this.store=new _.ListenerStore,this.downloadStore=new _.ListenerStore}get policy(){return"os_load-balancer_api:listener:get_all"}get name(){return t("listeners")}get id(){return this.params.id}get isFilterByBackend(){return!0}get forceRefreshTopDetailWhenListRefresh(){return!0}get actionConfigs(){return this.isAdminPage?b.adminActions:b.actionConfigs}get searchFilters(){return[{label:t("Name"),name:"name"}]}}a.Listeners=A;var I=(0,m.inject)("rootStore")((0,m.observer)(A));a.default=I},3735:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.CreatePool=void 0;var l=n(r(33)),o=n(r(219)),s=n(r(65)),d=n(r(52)),u=n(r(37)),c=r(382),f=r(1113),p=n(r(1262)),h=n(r(528)),m=r(1322),v=r(1127);class g extends f.ModalAction{constructor(){super(...arguments),(0,u.default)(this,"handleAlgorithmChange",(e=>{this.setState({algorithm:e})})),(0,u.default)(this,"onSubmit",(e=>(e.listener_id=this.item.id,p.default.create(e))))}get name(){return t("create default pool")}get labelCol(){return{xs:{span:8},sm:{span:8}}}get filterOptions(){var{protocol:e=""}=this.item;return(0,l.default)(v.poolProtocols).call(v.poolProtocols,(t=>(0,o.default)(e).call(e,t.label)))}init(){this.state={algorithm:void 0}}get formItems(){var{algorithm:e}=this.state;return[{name:"name",label:t("Pool Name"),type:"input-name",required:!0},{name:"description",label:t("Pool Description"),type:"textarea"},{name:"lb_algorithm",label:t("Pool Algorithm"),type:"select",options:m.Algorithm,onChange:this.handleAlgorithmChange,extra:e&&m.algorithmTip[e],required:!0},{name:"protocol",label:t("Pool Protocol"),type:"select",options:this.filterOptions,required:!0}]}}a.CreatePool=g,(0,u.default)(g,"id","pool-create"),(0,u.default)(g,"title",t("Create Default Pool")),(0,u.default)(g,"buttonText",t("Create Default Pool")),(0,u.default)(g,"policy","os_load-balancer_api:pool:post"),(0,u.default)(g,"allowed",function(){var e=(0,d.default)((function*(e,t){var{detail:a}=t||{};return a||(a=yield h.default.pureFetchDetail(e.loadbalancers[0])),s.default.resolve(!e.default_pool_id&&"ACTIVE"===e.provisioning_status&&"ACTIVE"===a.provisioning_status)}));return function(t,a){return e.apply(this,arguments)}}());var _=(0,c.inject)("rootStore")((0,c.observer)(g));a.default=_},3736:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(65)),o=n(r(52)),s=n(r(37)),d=r(1113),u=n(r(1172)),c=n(r(528));class f extends d.ConfirmAction{constructor(){super(...arguments),(0,s.default)(this,"policy","os_load-balancer_api:listener:delete"),(0,s.default)(this,"allowed",function(){var e=(0,o.default)((function*(e,t){var{detail:a}=t||{};return a||(a=yield c.default.pureFetchDetail(e.loadbalancers[0])),l.default.resolve(!e.default_pool_id&&"ACTIVE"===e.provisioning_status&&"ACTIVE"===a.provisioning_status)}));return function(t,a){return e.apply(this,arguments)}}()),(0,s.default)(this,"onSubmit",(e=>u.default.delete(e)))}get id(){return"delete"}get title(){return t("Delete Listener")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete listener")}}a.default=f},3737:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var p=f(r(62)),h=f(r(33)),m=f(r(219)),v=f(r(65)),g=f(r(52)),_=f(r(71)),b=f(r(37)),y=r(382),A=f(r(1172)),I=f(r(528)),S=r(1492);function C(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}class x extends S.Create{constructor(){super(...arguments),(0,b.default)(this,"onSubmit",(e=>{var t,{id:a}=this.item,{protocol:r,protocol_port:i,sni_enabled:n,ssl_parsing_method:l,default_tls_container_ref:f,client_ca_tls_container_ref:h,sni_container_refs:m}=e,v=function(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=C(Object(r),!0)).call(a,(function(t){(0,b.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=C(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}({},(0,_.default)(e,["protocol","protocol_port","sni_enabled","ssl_parsing_method","default_tls_container_ref","client_ca_tls_container_ref","sni_container_refs"]));"TERMINATED_HTTPS"===r&&(f&&(v.default_tls_container_ref=f.selectedRows[0].container_ref),"two-way"===l&&h?(v.client_ca_tls_container_ref=h.selectedRows[0].secret_ref,v.client_authentication="MANDATORY"):(v.client_ca_tls_container_ref=null,v.client_authentication="NONE"),v.sni_container_refs=n&&m?(0,p.default)(t=m.selectedRows).call(t,(e=>e.container_ref)):[]);return A.default.edit({id:a},v)}))}get name(){return t("Edit Listener")}get isEdit(){return!0}get defaultValue(){var{item:e}=this.props,t={name:e.name,description:e.description,protocol:e.protocol,protocol_port:e.protocol_port,connection_limit:e.connection_limit};if("TERMINATED_HTTPS"===e.protocol){if(e.default_tls_container_ref){var a,[,r]=e.default_tls_container_ref.split("/containers/");t.default_tls_container_ref={selectedRowKeys:[r],selectedRows:(0,h.default)(a=this.ServerCertificate).call(a,(e=>e.id===r))}}if(e.client_ca_tls_container_ref){var i,[,n]=e.client_ca_tls_container_ref.split("/secrets/");t.ssl_parsing_method="two-way",t.client_ca_tls_container_ref={selectedRowKeys:[n],selectedRows:(0,h.default)(i=this.CaCertificate).call(i,(e=>e.id===n))}}else t.ssl_parsing_method="one-way";if(e.sni_container_refs&&e.sni_container_refs.length){var l,o;t.sni_enabled=!0;var s=(0,p.default)(l=e.sni_container_refs).call(l,(e=>{var[,t]=e.split("/containers/");return t}));t.sni_container_refs={selectedRowKeys:s,selectedRows:(0,h.default)(o=this.SNICertificate).call(o,(e=>(0,m.default)(s).call(s,e.id)))}}else t.sni_enabled=!1}return t}}a.Edit=x,(0,b.default)(x,"id","edit-listener"),(0,b.default)(x,"title",t("Edit Listener")),(0,b.default)(x,"buttonText",t("Edit")),(0,b.default)(x,"policy","os_load-balancer_api:listener:put"),(0,b.default)(x,"allowed",function(){var e=(0,g.default)((function*(e,t){var{detail:a}=t||{};return a||(a=yield I.default.pureFetchDetail(e.loadbalancers[0])),v.default.resolve("ACTIVE"===e.provisioning_status&&"ACTIVE"===a.provisioning_status)}));return function(t,a){return e.apply(this,arguments)}}());var w=(0,y.inject)("rootStore")((0,y.observer)(x));a.default=w},3738:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.EditPoolInfo=void 0;var l=n(r(33)),o=n(r(219)),s=n(r(65)),d=n(r(52)),u=n(r(71)),c=n(r(37)),f=r(382),p=r(1113),h=n(r(1262)),m=r(1322),v=r(1127),g=n(r(528));class _ extends p.ModalAction{constructor(){super(...arguments),(0,c.default)(this,"onSubmit",(e=>{var{default_pool_id:t}=this.item,{protocol:a}=e,r=(0,u.default)(e,["protocol"]);return this.store.edit({id:t},r)}))}init(){this.state.pool={},this.store=h.default,this.getPoolDetail()}get name(){return t("edit default pool")}get labelCol(){return{xs:{span:8},sm:{span:8}}}get filteredProtocolOptions(){var{pool:{protocol:e=""}={}}=this.state;return(0,l.default)(v.poolProtocols).call(v.poolProtocols,(t=>(0,o.default)(e).call(e,t.label)))}get defaultValue(){var{pool:e}=this.state,{name:t,description:a,protocol:r,lb_algorithm:i}=e;return t&&this.formRef.current&&this.formRef.current.setFieldsValue({name:t,description:a,protocol:r,lb_algorithm:i}),{name:t,description:a,protocol:r,lb_algorithm:i}}getPoolDetail(){var e=this;return(0,d.default)((function*(){var{default_pool_id:t}=e.item,a=yield e.store.fetchDetail({id:t});e.setState({pool:a})}))()}get formItems(){return[{name:"name",label:t("Name"),type:"input-name",required:!0},{name:"description",label:t("Description"),type:"textarea",maxLength:255},{name:"protocol",label:t("Protocol"),type:"select",options:this.filteredProtocolOptions,required:!0},{name:"lb_algorithm",label:t("LB Algorithm"),type:"select",options:m.Algorithm,required:!0}]}}a.EditPoolInfo=_,(0,c.default)(_,"id","pool-edit"),(0,c.default)(_,"title",t("Edit Default Pool")),(0,c.default)(_,"buttonText",t("Edit Default Pool")),(0,c.default)(_,"policy","os_load-balancer_api:pool:put"),(0,c.default)(_,"allowed",function(){var e=(0,d.default)((function*(e,t){var{detail:a}=t||{};return a||(a=yield g.default.pureFetchDetail(e.loadbalancers[0])),s.default.resolve(!!e.default_pool_id&&"ACTIVE"===e.provisioning_status&&"ACTIVE"===a.provisioning_status)}));return function(t,a){return e.apply(this,arguments)}}());var b=(0,f.inject)("rootStore")((0,f.observer)(_));a.default=b},3739:function(e,a,r){"use strict";var i=r(156),n=r(19),l=r(25),o=r(21);n(a,"__esModule",{value:!0}),a.default=a.EditHealthMonitor=void 0;var s=o(r(33)),d=o(r(219)),u=o(r(65)),c=o(r(52)),f=o(r(71)),p=o(r(37)),h=r(382),m=r(1113),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=y(t);if(a&&a.has(e))return a.get(e);var r={},i=n&&l;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?l(e,o):null;s&&(s.get||s.set)?n(r,o,s):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(r(1493)),g=r(1127),_=r(1262),b=o(r(528));function y(e){if("function"!=typeof i)return null;var t=new i,a=new i;return(y=function(e){return e?a:t})(e)}class A extends m.ModalAction{constructor(){super(...arguments),(0,p.default)(this,"onSubmit",(e=>{var{default_pool_id:t}=this.item,{healthmonitor_id:a}=this.poolStore.detail||{};if(a){var{type:r}=e,i=(0,f.default)(e,["type"]);return v.default.edit({id:a},i)}return e.pool_id=t,v.default.create(e)}))}init(){this.store=new v.HealthMonitorStore,this.poolStore=new _.PoolStore,this.state={defaultData:!0,admin_state_up:!1}}componentDidMount(){this.getHealthMonitor()}get name(){return t("edit health monitor")}get labelCol(){return{xs:{span:8},sm:{span:8}}}get filteredProtocolOptions(){var{protocol:e=""}=this.item;return(0,s.default)(g.healthProtocols).call(g.healthProtocols,(t=>(0,d.default)(e).call(e,t.label)))}get defaultValue(){var{operating_status:e,type:t,delay:a,timeout:r,max_retries:i}=this.store.detail,{defaultData:n,admin_state_up:l}=this.state;return n&&e&&this.formRef.current&&(this.formRef.current.setFieldsValue({admin_state_up:l,operating_status:e,type:t,delay:a,timeout:r,max_retries:i}),this.setState({defaultData:!1})),{delay:5,timeout:3,max_retries:3}}getHealthMonitor(){var e=this;return(0,c.default)((function*(){var{default_pool_id:t}=e.item,a=yield e.poolStore.fetchDetail({id:t}),{healthmonitor_id:r}=a;if(r){var{admin_state_up:i}=yield e.store.fetchDetail({id:r});e.setState({admin_state_up:i}),e.formRef.current.setFieldsValue({admin_state_up:i})}}))()}get tips(){var{healthmonitor_id:e}=this.poolStore.detail||{};return e?"":t("First time edit automatically creates health monitor When pool does not have a health monitor")}get formItems(){var{admin_state_up:e}=this.state,{healthmonitor_id:a}=this.poolStore.detail||{};return[{name:"admin_state_up",label:t("Enable HealthMonitor"),type:"radio",required:!0,options:[{label:t("Yes"),value:!0},...a?[{label:t("No"),value:!1}]:[]]},{name:"type",label:t("HealthMonitor Type"),type:"select",options:this.filteredProtocolOptions,hidden:!e&&a,required:!0,disabled:!!a},{name:"delay",label:t("Delay Interval(s)"),type:"input-int",min:0,extra:t("Maximum interval time for each health check response"),hidden:!e&&a,required:!0},{name:"timeout",label:t("Timeout(s)"),type:"input-int",min:0,extra:t("The timeout period of waiting for the return of the health check request, the check timeout will be judged as a check failure"),hidden:!e&&a,required:!0},{name:"max_retries",label:t("Max Retries"),type:"input-int",min:0,extra:t("That is, after how many consecutive failures of the health check, the health check status of the back-end cloud server is changed from normal to abnormal"),hidden:!e&&a,required:!0}]}}a.EditHealthMonitor=A,(0,p.default)(A,"id","health-monitor-edit"),(0,p.default)(A,"title",t("Edit Health Monitor")),(0,p.default)(A,"buttonText",t("Edit Health Monitor")),(0,p.default)(A,"policy","os_load-balancer_api:healthmonitor:put"),(0,p.default)(A,"allowed",function(){var e=(0,c.default)((function*(e,t){var{detail:a}=t||{};return a||(a=yield b.default.pureFetchDetail(e.loadbalancers[0])),u.default.resolve(!!e.default_pool_id&&"ACTIVE"===e.provisioning_status&&"ACTIVE"===a.provisioning_status)}));return function(t,a){return e.apply(this,arguments)}}());var I=(0,h.inject)("rootStore")((0,h.observer)(A));a.default=I},3740:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(65)),o=n(r(52)),s=n(r(37)),d=r(1113),u=n(r(1262)),c=n(r(528));class f extends d.ConfirmAction{constructor(){super(...arguments),(0,s.default)(this,"policy","os_load-balancer_api:pool:delete"),(0,s.default)(this,"allowedCheckFunc",function(){var e=(0,o.default)((function*(e,t){var{detail:a}=t||{};return a||(a=yield c.default.pureFetchDetail(e.loadbalancers[0])),l.default.resolve(!!e.default_pool_id&&"ACTIVE"===e.provisioning_status&&"ACTIVE"===a.provisioning_status)}));return function(t,a){return e.apply(this,arguments)}}()),(0,s.default)(this,"onSubmit",(()=>u.default.delete({id:this.item.default_pool_id})))}get id(){return"delete"}get title(){return t("Delete Default Pool")}get isDanger(){return!0}get buttonText(){return t("Delete Default Pool")}get actionName(){return t("delete default pool")}isOwnerOrAdmin(){return!0}}a.default=f},3741:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.ListenerDetail=void 0;var l=r(382),o=r(1172),s=r(1127),d=n(r(1119)),u=n(r(3742)),c=n(r(3743)),f=r(1491);class p extends d.default{get name(){return t("listener")}get policy(){return"os_load-balancer_api:listener:get_one"}get listUrl(){var{loadBalancerId:e}=this.params;return this.getRoutePath("lbDetail",{id:e})}get actionConfigs(){return this.isAdminPage?f.adminActions:f.actionConfigs}get detailInfos(){return[{title:t("Listener Name"),dataIndex:"name"},{title:t("Protocol Type"),dataIndex:"protocol",render:e=>("TERMINATED_HTTPS"===e?"HTTPS":e)||"-"},{title:t("Port"),dataIndex:"protocol_port"},{title:t("Status"),dataIndex:"provisioning_status",render:e=>s.provisioningStatusCodes[e]},{title:t("Max connect"),dataIndex:"connection_limit"},{title:t("Description"),dataIndex:"description"}]}get tabs(){return[{title:t("Detail"),key:"detail",component:u.default},{title:t("Member"),key:"members",component:c.default}]}init(){this.store=new o.ListenerStore}}a.ListenerDetail=p;var h=(0,l.inject)("rootStore")((0,l.observer)(p));a.default=h},3742:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var l=n(r(35)),o=n(r(62)),s=n(r(82)),d=n(r(52)),u=n(r(37)),c=r(382),f=n(r(1172)),p=n(r(1122)),h=r(1493);class m extends p.default{constructor(){var e;super(...arguments),e=this,(0,u.default)(this,"fetchHealthMonitor",(0,d.default)((function*(){var{default_pool:{healthmonitor_id:t}}=e.detailData;yield e.healthmonitorStore.fetchDetail({id:t})})))}componentDidMount(){this.fetchData();var{default_pool:{healthmonitor_id:e}={}}=this.detailData;e&&this.fetchHealthMonitor()}get shouldFetchDetail(){return!0}init(){this.store=f.default,this.healthmonitorStore=new h.HealthMonitorStore}get leftCards(){return[this.PoolInfo,this.healthMonitor]}get rightCards(){var{protocol:e}=this.detailData||{};return"TERMINATED_HTTPS"===e?[this.certificateInfo]:[]}get PoolInfo(){var{default_pool:e={}}=this.detailData||{},{name:a,protocol:r,lb_algorithm:i,description:n}=e,l=[{label:t("Name"),content:a||"-"},{label:t("Protocol"),content:r||"-"},{label:t("LB Algorithm"),content:i||"-"},{label:t("Description"),content:n||"-"}];return{title:t("Pool Info"),options:l}}get healthMonitor(){var e=this.healthmonitorStore.detail||{},{admin_state_up:a,type:r,delay:i,timeout:n,max_retries:o}=e,s=[{label:t("Enable HealthMonitor"),content:a?t("Yes"):t("No")},{label:t("HealthMonitor Type"),content:a?r:"-"},{label:t("Delay Interval(s)"),content:a?i:"-"},{label:t("Timeout(s)"),content:a?n:"-"},{label:t("Max Retries"),content:a?o:"-"}];return 0===(0,l.default)(e).length&&(s[0].content="-"),{title:t("HealthMonitor"),options:s}}get certificateInfo(){var e=[{label:t("Server Certificate"),dataIndex:"serverCertificateId",render:e=>e?this.getLinkRender("certificateContainerDetail",e,{id:e},null):"-"},{label:t("CA Certificate"),dataIndex:"caCertificateId",render:e=>e?this.getLinkRender("certificateSecretDetail",e,{id:e},null):"-"},{label:t("SNI Certificate"),dataIndex:"sniCertificateId",render:e=>e.length?(0,o.default)(e).call(e,((t,a)=>{var r;return this.getLinkRender("certificateContainerDetail",(0,s.default)(r="".concat(t)).call(r,a===e.length-1?"":" , "),{id:t})}),null):"-"}];return{title:t("certificate"),options:e,labelCol:4}}}a.BaseDetail=m;var v=(0,c.inject)("rootStore")((0,c.observer)(m));a.default=v},3743:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.Members=void 0;var l=n(r(52)),o=n(r(37)),s=n(r(0)),d=r(382),u=n(r(1114)),c=r(1127),f=n(r(1263)),p=r(3744);class h extends u.default{constructor(){var e;super(...arguments),e=this,(0,o.default)(this,"fetchData",(0,l.default)((function*(){var{default_pool_id:t}=e.props.detail;t?e.fetchListWithTry((0,l.default)((function*(){yield e.store.fetchList({pool_id:t}),e.list.silent=!1}))):(e.list.data=[],e.list.isLoading=!1)}))),(0,o.default)(this,"getColumns",(()=>[{title:t("ID/Name"),dataIndex:"name",stringify:(e,t)=>e||t.id,render:(e,t)=>s.default.createElement(s.default.Fragment,null,t.id,s.default.createElement("div",null,e&&"(".concat(e,")")))},{title:t("Status"),dataIndex:"provisioning_status",render:e=>c.provisioningStatusCodes[e],isHideable:!0},{title:t("Ip Address"),dataIndex:"address",isHideable:!0},{title:t("Port"),dataIndex:"protocol_port",isHideable:!0},{title:t("Weight"),dataIndex:"weight"}]))}init(){this.store=f.default}get policy(){return"os_load-balancer_api:member:get_all"}get name(){return t("Members")}get id(){return this.params.id}get forceRefreshTopDetailWhenListRefresh(){return!0}get actionConfigs(){return this.isAdminPage?p.adminActions:p.actionConfigs}get searchFilters(){return[{label:t("Name"),name:"name"}]}}a.Members=h;var m=(0,d.inject)("rootStore")((0,d.observer)(h));a.default=m},3744:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.adminActions=t.actionConfigs=void 0;var n=i(a(3745)),l=i(a(3746)),o={rowActions:{firstAction:i(a(3747)).default,moreActions:[{action:n.default}]},batchActions:[],primaryActions:[l.default]};t.actionConfigs=o;var s={rowActions:{moreActions:[{action:n.default}]},batchActions:[],primaryActions:[]};t.adminActions=s},3745:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(37)),o=r(1113),s=n(r(1263));class d extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","os_load-balancer_api:member:delete"),(0,l.default)(this,"allowedCheckFunc",(e=>!e||this.isOwnerOrAdmin(e)&&"ACTIVE"===e.provisioning_status)),(0,l.default)(this,"onSubmit",(e=>{var{default_pool_id:t}=this.containerProps.detail;return s.default.delete({id:e.id,default_pool_id:t})}))}get id(){return"delete"}get title(){return t("Delete Member")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete member")}isOwnerOrAdmin(){return!0}}a.default=d},3746:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.CreateAction=void 0;var l=n(r(62)),o=n(r(28)),s=n(r(33)),d=n(r(65)),u=n(r(52)),c=n(r(37)),f=n(r(0)),p=r(382),h=r(1113),m=r(1263),v=r(521),g=r(32),_=r(47),b=n(r(528)),y=n(r(1310));class A extends h.ModalAction{constructor(){super(...arguments),(0,c.default)(this,"onSubmit",(e=>{var t,{default_pool_id:a}=this.item,{extMembers:r=[]}=e,i=(0,l.default)(t=(0,g.toJS)(this.memberStore.list.data)).call(t,(e=>{var{weight:t,protocol_port:a,address:r,name:i,subnet_id:n}=e;return{weight:t,protocol_port:a,address:r,name:i,subnet_id:n}}));return(0,o.default)(r).call(r,(e=>{var{ip:t,protocol_port:a,weight:r,name:n=null,subnet_id:l}=e.ip_address,o={weight:r,protocol_port:a,address:t,name:n,subnet_id:l};i.push(o)})),this.memberStore.batchUpdate({default_pool_id:a,data:(0,_.uniqWith)(i,y.default)})}))}get name(){return t("Add Member")}init(){this.store=new v.VirtualAdapterStore,this.memberStore=new m.PoolMemberStore,this.lbDetail={},this.state={ports:[]}}componentDidMount(){this.getMember(),b.default.fetchDetail({id:this.props.containerProps.match.params.loadBalancerId}).then((e=>(this.lbDetail=e,this.store.fetchList()))).then((e=>{this.setState({ports:(0,s.default)(e).call(e,(e=>"network:dhcp"!==e.device_owner&&"network:router_gateway"!==e.device_owner))})}))}static get modalSize(){return"large"}getMember(){var e=this;return(0,u.default)((function*(){var{default_pool_id:t}=e.item;yield e.memberStore.fetchList({pool_id:t})}))()}getModalSize(){return"large"}get item(){var{item:e}=this.props;return e||this.containerProps.detail}get defaultValue(){return{}}get tips(){return f.default.createElement("div",{style:{display:"inline-table"}},f.default.createElement("p",{style:{color:"#0068FF"}},t("The amphora instance is required for load balancing service setup and is not recommended")))}get formItems(){return[{name:"extMembers",type:"member-allocator",lbSubnetId:(0,_.get)(this.lbDetail,"vip_subnet_id",""),isLoading:this.store.list.isLoading,ports:this.state.ports,members:this.memberStore.list.data}]}}a.CreateAction=A,(0,c.default)(A,"id","manage-member"),(0,c.default)(A,"title",t("Add Member")),(0,c.default)(A,"policy","os_load-balancer_api:member:post"),(0,c.default)(A,"allowed",(e=>d.default.resolve("ACTIVE"===e.provisioning_status&&!!e.default_pool_id)));var I=(0,p.inject)("rootStore")((0,p.observer)(A));a.default=I},3747:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var l=n(r(62)),o=n(r(65)),s=n(r(37)),d=r(382),u=r(1113),c=n(r(1263)),f=r(32);class p extends u.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"onSubmit",(e=>{var{default_pool_id:t}=this.containerProps.detail,{id:a}=this.item,r=(0,f.toJS)(this.store.list.data),i=(0,l.default)(r).call(r,(t=>{if(t.id===a){var{weight:r,protocol_port:i}=e;t.weight=r,t.protocol_port=i}var{weight:n,protocol_port:l,address:o,name:s,subnet_id:d}=t;return{weight:n,protocol_port:l,address:o,name:s,subnet_id:d}}));return this.store.batchUpdate({default_pool_id:t,data:i})}))}init(){this.state={},this.store=c.default}get name(){return t("edit member")}get defaultValue(){var{weight:e,protocol_port:t}=this.item;return e&&t&&this.formRef.current&&this.formRef.current.setFieldsValue({weight:e,protocol_port:t}),{weight:e,protocol_port:t}}get formItems(){return[{name:"weight",label:t("Weight"),type:"input-number",required:!0},{name:"protocol_port",label:t("Port"),type:"input-number",required:!0}]}}a.Edit=p,(0,s.default)(p,"id","member-edit"),(0,s.default)(p,"title",t("Edit Member")),(0,s.default)(p,"buttonText",t("Edit Member")),(0,s.default)(p,"policy","os_load-balancer_api:member:put"),(0,s.default)(p,"allowed",(e=>o.default.resolve("ACTIVE"===e.provisioning_status)));var h=(0,d.inject)("rootStore")((0,d.observer)(p));a.default=h},3748:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.VPN=void 0;var l=r(382),o=n(r(1152)),s=r(83),d=n(r(3749)),u=n(r(3754)),c=n(r(3759)),f=n(r(3764)),p=n(r(3769));class h extends o.default{get name(){return t("VPN")}get checkEndpoint(){return!0}get endpoint(){return(0,s.vpnEndpoint)()}get tabs(){return[{title:t("VPN Gateway"),key:"vpn_gateway",component:d.default},{title:t("VPN EndPoint Group"),key:"vpn_endpoint_groups",component:u.default},{title:t("IKE Policy"),key:"ike_policy",component:c.default},{title:t("IPsec Policy"),key:"ipsec_policy",component:f.default},{title:t("IPsec Site Connections"),key:"ipsec_site_connections",component:p.default}]}}a.VPN=h;var m=(0,l.inject)("rootStore")((0,l.observer)(h));a.default=m},3749:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.VPNGateway=void 0;var l=n(r(37)),o=r(382),s=n(r(1114)),d=r(1222),u=r(1206),c=n(r(0)),f=r(3750);class p extends s.default{constructor(){super(...arguments),(0,l.default)(this,"getColumns",(()=>[{title:t("ID/Name"),dataIndex:"name",render:(e,t)=>c.default.createElement("div",null,c.default.createElement("div",null,t.id),c.default.createElement("div",null,e))},{title:t("Project ID/Name"),dataIndex:"project_name",hidden:!this.isAdminPage},{title:t("Description"),dataIndex:"description",render:e=>e||"-",isHideable:!0},{title:t("External IP"),dataIndex:"null",render:(e,t)=>t.external_v4_ip||t.external_v6_ip},{title:t("Router ID"),dataIndex:"router_id",isHideable:!0},{title:t("Status"),dataIndex:"status",render:e=>u.vpnStatus[e]}]))}init(){this.store=new d.VpnServicesStore,this.downloadStore=new d.VpnServicesStore}get isFilterByBackend(){return!0}get fetchDataByCurrentProject(){return!0}get policy(){return"get_vpnservice"}get name(){return t("vpn services")}get adminPageHasProjectFilter(){return!0}get actionConfigs(){return this.isAdminPage?f.adminConfigs:f.actionConfigs}get searchFilters(){return[{label:t("Name"),name:"name"},{label:t("Status"),name:"status",options:u.vpnStatusOptions},{label:t("Router ID"),name:"router_id"},{label:t("External IP(V4)"),name:"external_v4_ip"},{label:t("External IP(V6)"),name:"external_v6_ip"}]}}a.VPNGateway=p;var h=(0,o.inject)("rootStore")((0,o.observer)(p));a.default=h},3750:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.adminConfigs=t.actionConfigs=void 0;var n=i(a(3751)),l=i(a(3752)),o=i(a(3753)),s={rowActions:{firstAction:l.default,moreActions:[{action:o.default}]},batchActions:[o.default],primaryActions:[n.default]};t.actionConfigs=s;var d={rowActions:{moreActions:[{action:o.default}]},batchActions:[o.default]};t.adminConfigs=d},3751:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Create=void 0;var p=f(r(65)),h=f(r(37)),m=r(382),v=r(1113),g=r(526),_=f(r(1222)),b=r(1137);function y(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=y(Object(r),!0)).call(a,(function(t){(0,h.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=y(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}class I extends v.ModalAction{constructor(){super(...arguments),(0,h.default)(this,"onSubmit",(e=>{var{name:t,description:a,router_id:r}=e;return _.default.create({name:t,description:a,router_id:r.selectedRowKeys[0]})}))}get name(){return t("create vpn")}static get modalSize(){return"large"}getModalSize(){return"large"}init(){this.routerStore=new g.RouterStore}get formItems(){return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea",required:!1},A(A({name:"router_id",label:t("Router"),type:"select-table",backendPageStore:this.routerStore,extraParams:{project_id:this.currentProjectId}},(0,b.getRouterSelectTablePropsBackend)(this)),{},{disabledFunc:e=>!e.external_gateway_info,required:!0})]}}a.Create=I,(0,h.default)(I,"id","create-vpn"),(0,h.default)(I,"title",t("Create VPN")),(0,h.default)(I,"buttonText",t("Create")),(0,h.default)(I,"policy","create_vpnservice"),(0,h.default)(I,"allowed",(()=>p.default.resolve(!0)));var S=(0,m.inject)("rootStore")((0,m.observer)(I));a.default=S},3752:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var l=n(r(65)),o=n(r(37)),s=r(382),d=r(1113),u=n(r(1222));class c extends d.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"onSubmit",(e=>{var{name:t,description:a}=e;return u.default.update({id:this.item.id},{name:t,description:a})}))}get defaultValue(){return{name:this.item.name,description:this.item.description}}get formItems(){return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea",required:!1}]}}a.Edit=c,(0,o.default)(c,"id","edit-vpn"),(0,o.default)(c,"title",t("Edit VPN")),(0,o.default)(c,"buttonText",t("Edit")),(0,o.default)(c,"policy","update_vpnservice"),(0,o.default)(c,"allowed",(e=>"ACTIVE"!==e.status?l.default.resolve(!1):l.default.resolve(!0)));var f=(0,s.inject)("rootStore")((0,s.observer)(c));a.default=f},3753:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(82)),o=n(r(62)),s=n(r(65)),d=n(r(52)),u=n(r(37)),c=r(1113),f=r(1123),p=n(r(1222)),h=n(r(136)),m=n(r(1143));class v extends c.ConfirmAction{constructor(){var e;super(...arguments),e=this,(0,u.default)(this,"policy","delete_vpnservice"),(0,u.default)(this,"allowedCheckFunc",(e=>!e||this.isCurrentProject(e))),(0,u.default)(this,"onSubmit",function(){var a=(0,d.default)((function*(a){var r,i=yield m.default.fetchList({vpnservice_id:a.id});return i.length>0?(e.showConfirmErrorBeforeSubmit=!0,e.confirmErrorMessageBeforeSubmit=(0,l.default)(r="".concat(t("Unable to {action}, because : {reason}, instance: {name}.",{action:e.actionName||e.title,name:a.name,reason:t("the vpn gateway is in use")}),"\n\n        ")).call(r,t("Used by tunnel(s): {names}. ID(s): {ids}",{names:(0,o.default)(i).call(i,(e=>e.name)).join(", "),ids:(0,o.default)(i).call(i,(e=>e.id)).join(", ")})),s.default.reject({errorMsg:e.confirmErrorMessageBeforeSubmit})):p.default.delete(a)}));return function(e){return a.apply(this,arguments)}}())}get id(){return"delete-vpnservice"}get title(){return t("Delete VPN")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete vpn")}isCurrentProject(e){var t=h.default;return!(!f.checkSystemAdmin&&e.project_id!==t.user.project.id)}}a.default=v},3754:function(e,a,r){"use strict";var i=r(156),n=r(19),l=r(25),o=r(21);n(a,"__esModule",{value:!0}),a.default=a.EndpointGroup=void 0;var s=o(r(82)),d=o(r(62)),u=o(r(65));r(324);var c=o(r(325));r(1117);var f=o(r(1118));r(1115);var p=o(r(1116)),h=o(r(52));r(532);var m=o(r(533)),v=o(r(551)),g=o(r(37)),_=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=C(t);if(a&&a.has(e))return a.get(e);var r={},i=n&&l;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?l(e,o):null;s&&(s.get||s.set)?n(r,o,s):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(r(0)),b=r(382),y=o(r(1114)),A=r(1223),I=(r(167),r(513),r(390)),S=r(3755);function C(e){if("function"!=typeof i)return null;var t=new i,a=new i;return(C=function(e){return e?a:t})(e)}class x extends y.default{constructor(){super(...arguments),(0,g.default)(this,"getColumns",(()=>[{title:t("ID/Name"),dataIndex:"name",render:(e,t)=>_.default.createElement("div",null,_.default.createElement("div",null,t.id),_.default.createElement("div",null,e))},{title:t("Project ID/Name"),dataIndex:"project_name",hidden:!this.isAdminPage},{title:t("Description"),dataIndex:"description",render:e=>e||"-",isHideable:!0},{title:t("Type"),dataIndex:"type",isHideable:!0,render:e=>{switch(e){case"subnet":return t("Local");case"cidr":return t("Peer");default:return""}}},{title:t("Endpoint Counts"),dataIndex:"endpoints",render:(e,a)=>{var r=_.default.createElement(w,{record:a});return _.default.createElement(_.default.Fragment,null,e.length," ",_.default.createElement(m.default,{content:r,title:"cidr"===a.type?t("Peer Network"):t("Local Network"),destroyTooltipOnHide:!0},_.default.createElement(v.default,null)))},stringify:e=>{var t;return(0,s.default)(t="".concat(e.length,"(")).call(t,e.join(","),")")}}]))}init(){this.store=new A.VpnEndPointGroupStore,this.downloadStore=new A.VpnEndPointGroupStore}get isFilterByBackend(){return!0}get fetchDataByCurrentProject(){return!0}get policy(){return"get_endpoint_group"}get aliasPolicy(){return"neutron:get_endpoint_group"}get name(){return t("vpn endpoint groups")}get adminPageHasProjectFilter(){return!0}get actionConfigs(){return this.isAdminPage?S.adminConfigs:S.actionConfigs}get searchFilters(){return[{label:t("Name"),name:"name"}]}}function w(e){var{record:t}=e,{type:a,endpoints:r}=t,[i,n]=(0,_.useState)([]);return(0,_.useEffect)((()=>{"subnet"===a&&0===i.length&&(0,h.default)((function*(){var e=(0,d.default)(r).call(r,(e=>(new I.SubnetStore).fetchDetail({id:e}))),t=yield u.default.all(e);n(t)}))()})),"cidr"===a?_.default.createElement(f.default,null,(0,d.default)(r).call(r,(e=>{var a;return _.default.createElement(p.default,{span:24,key:(0,s.default)(a="".concat(e,"_")).call(a,t.id)},e)}))):0===i.length?_.default.createElement(c.default,null):_.default.createElement(f.default,{style:{maxWidth:550}},(0,d.default)(i).call(i,(e=>{var a;return _.default.createElement(p.default,{span:24,key:(0,s.default)(a="".concat(e,"_")).call(a,t.id)},_.default.createElement(f.default,{gutter:24},_.default.createElement(p.default,{span:6},e.name),_.default.createElement(p.default,{span:6},e.cidr),_.default.createElement(p.default,{span:12},e.id)))})))}a.EndpointGroup=x;var P=(0,b.inject)("rootStore")((0,b.observer)(x));a.default=P},3755:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.adminConfigs=t.actionConfigs=void 0;var n=i(a(3756)),l=i(a(3757)),o=i(a(3758)),s={rowActions:{firstAction:l.default,moreActions:[{action:o.default}]},batchActions:[o.default],primaryActions:[n.default]};t.actionConfigs=s;var d={rowActions:{moreActions:[{action:o.default}]},batchActions:[o.default]};t.adminConfigs=d},3756:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Create=void 0;var p=f(r(33)),h=f(r(1194)),m=f(r(320)),v=f(r(65)),g=f(r(52)),_=f(r(71)),b=f(r(37)),y=r(382),A=r(1113),I=r(514),S=r(526),C=r(390),x=f(r(1223)),w=r(1137),P=r(1151);function E(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=E(Object(r),!0)).call(a,(function(t){(0,b.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=E(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}var{isCidr:D,isIPv6CidrOnly:B}=I.ipValidate;class N extends A.ModalAction{constructor(){var e;super(...arguments),e=this,(0,b.default)(this,"onSubmit",(e=>{var{type:t}=this.state,{name:a,description:r}=e,i=(0,_.default)(e,["name","description"]),n={name:a,description:r,type:t};if("subnet"===t){var{subnet_id:l}=i;n.endpoints=l.selectedRowKeys}else if("cidr"===t){var{endpoints:o}=i;n.endpoints=o.split("\n")}return x.default.create(n)})),(0,b.default)(this,"handleRouterChange",function(){var t=(0,g.default)((function*(t){var a;e.setState({subnetLoading:!0});var r=yield(0,P.getPortsWithFixedIPs)(),i=(0,P.getSubnetToRouter)(r,t.selectedRows,!1);e.setState({subnets:(0,p.default)(a=e.allSubnets).call(a,(e=>(0,h.default)(i).call(i,(t=>t.subnet_id===e.id))>-1)),subnetLoading:!1}),e.formRef.current.resetFields(["subnet_id"])}));return function(e){return t.apply(this,arguments)}}())}get name(){return t("create vpn endpoint group")}static get modalSize(){return"large"}getModalSize(){return"large"}init(){this.routerStore=new S.RouterStore,this.subnetStore=new C.SubnetStore,this.state={subnets:[],type:"subnet",subnetLoading:!0},this.getAllSubnets()}getAllSubnets(){var e=this;return(0,g.default)((function*(){e.allSubnets=yield e.subnetStore.pureFetchList(),e.setState({subnetLoading:!1})}))()}get defaultValue(){return{type:"subnet"}}get formItems(){var{subnets:e,type:a,subnetLoading:r}=this.state,i="subnet"===a;return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea",required:!1},{name:"type",label:t("Type"),type:"select",options:[{label:t("Peer"),value:"cidr"},{label:t("Local"),value:"subnet"}],onChange:e=>{this.setState({type:e})}},k(k({name:"router_id",label:t("Router"),type:"select-table",backendPageStore:this.routerStore,extraParams:{project_id:this.currentProjectId}},(0,w.getRouterSelectTablePropsBackend)(this)),{},{required:!0,onChange:this.handleRouterChange,hidden:!i}),{name:"subnet_id",label:t("Subnet"),type:"select-table",data:e,isLoading:r,isMulti:!0,columns:[{title:t("Name"),dataIndex:"name",isLink:!0},{title:t("CIDR"),dataIndex:"cidr"}],required:!0,hidden:!i},{name:"endpoints",label:t("Peer Network Segment"),type:"textarea",validator:(e,a)=>{var r;return(0,m.default)(r=a.split("\n")).call(r,(e=>!D(e)&&!B(e)))?v.default.reject(new Error(t("Invalid: CIDR Format Error(e.g. 10.10.10.0/24)"))):v.default.resolve(!0)},extra:t("Please fill in the peer network segment and subnet mask of CIDR format, the written subnets should be under the same router, one per line."),hidden:i,required:!0}]}}a.Create=N,(0,b.default)(N,"id","create-vpn-endpoint-group"),(0,b.default)(N,"title",t("Create VPN Endpoint Group")),(0,b.default)(N,"buttonText",t("Create")),(0,b.default)(N,"policy","create_endpoint_group"),(0,b.default)(N,"aliasPolicy","neutron:create_endpoint_group"),(0,b.default)(N,"allowed",(()=>v.default.resolve(!0)));var M=(0,y.inject)("rootStore")((0,y.observer)(N));a.default=M},3757:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var l=n(r(65)),o=n(r(37)),s=r(382),d=r(1113),u=n(r(1223));class c extends d.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"onSubmit",(e=>{var{name:t,description:a}=e;return u.default.update({id:this.item.id},{name:t,description:a})}))}get defaultValue(){return{name:this.item.name,description:this.item.description}}get formItems(){return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea",required:!1}]}}a.Edit=c,(0,o.default)(c,"id","edit-vpn-endpoint-groups"),(0,o.default)(c,"title",t("Edit VPN EndPoint Groups")),(0,o.default)(c,"buttonText",t("Edit")),(0,o.default)(c,"policy","update_endpoint_group"),(0,o.default)(c,"aliasPolicy","neutron:update_endpoint_group"),(0,o.default)(c,"allowed",(()=>l.default.resolve(!0)));var f=(0,s.inject)("rootStore")((0,s.observer)(c));a.default=f},3758:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(82)),o=n(r(62)),s=n(r(65)),d=n(r(52)),u=n(r(37)),c=r(1113),f=r(1123),p=n(r(1223)),h=n(r(1143)),m=n(r(136));class v extends c.ConfirmAction{constructor(){var e;super(...arguments),e=this,(0,u.default)(this,"policy","delete_endpoint_group"),(0,u.default)(this,"aliasPolicy","neutron:delete_endpoint_group"),(0,u.default)(this,"allowedCheckFunc",(e=>!e||this.isCurrentProject(e))),(0,u.default)(this,"onSubmit",function(){var a=(0,d.default)((function*(a){var r;switch(a.type){case"cidr":r={peer_ep_group_id:a.id};break;case"subnet":r={local_ep_group_id:a.id}}var i,n=yield h.default.fetchList(r);return n.length>0?(e.showConfirmErrorBeforeSubmit=!0,e.confirmErrorMessageBeforeSubmit=(0,l.default)(i="".concat(t("Unable to {action}, because : {reason}, instance: {name}.",{action:e.actionName||e.title,name:a.name,reason:t("the policy is in use")}),"\n\n        ")).call(i,t("Used by tunnel(s): {names}. ID(s): {ids}",{names:(0,o.default)(n).call(n,(e=>e.name)).join(", "),ids:(0,o.default)(n).call(n,(e=>e.id)).join(", ")})),s.default.reject({errorMsg:e.confirmErrorMessageBeforeSubmit})):p.default.delete(a)}));return function(e){return a.apply(this,arguments)}}())}get id(){return"delete-vpn-endpoint-group"}get title(){return t("Delete VPN EndPoint Groups")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete vpn endpoint groups")}isCurrentProject(e){var t=m.default;return!(!(0,f.checkSystemAdmin)()&&e.project_id!==t.user.project.id)}}a.default=v},3759:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.IKEPolicy=void 0;var l=n(r(62)),o=n(r(35)),s=n(r(82)),d=n(r(37)),u=n(r(0)),c=r(382),f=n(r(1114)),p=r(1207),h=r(1206),m=r(3760);class v extends f.default{constructor(){super(...arguments),(0,d.default)(this,"getColumns",(()=>[{title:t("ID/Name"),dataIndex:"name",render:(e,t)=>u.default.createElement("div",null,u.default.createElement("div",null,t.id),u.default.createElement("div",null,e))},{title:t("Project ID/Name"),dataIndex:"project_name",hidden:!this.isAdminPage},{title:t("Description"),dataIndex:"description",render:e=>e||"-",isHideable:!0},{title:t("Auth Algorithm"),dataIndex:"auth_algorithm",isHideable:!0},{title:t("Encryption Algorithm"),dataIndex:"encryption_algorithm",isHideable:!0},{title:t("IKE Version"),dataIndex:"ike_version",isHideable:!0},{title:t("Lifetime"),dataIndex:"lifetime",isHideable:!0,render:e=>{var t;return u.default.createElement("ul",{style:{listStyle:"none",paddingLeft:0}},(0,l.default)(t=(0,o.default)(e)).call(t,((t,a)=>{var r,i;return u.default.createElement("li",{key:(0,s.default)(r="".concat(a,"_")).call(r,e[t],"_lifeTime")},(0,s.default)(i="".concat(t,": ")).call(i,e[t]))})))},stringify:e=>{var t;return(0,l.default)(t=(0,o.default)(e)).call(t,(t=>{var a;return(0,s.default)(a="".concat(t,": ")).call(a,e[t])})).join(" | ")}},{title:t("PFS"),dataIndex:"pfs",isHideable:!0}]))}init(){this.store=new p.VpnIKEPolicyStore,this.downloadStore=new p.VpnIKEPolicyStore}get isFilterByBackend(){return!0}get fetchDataByCurrentProject(){return!0}get policy(){return"get_ikepolicy"}get name(){return t("vpn IKE policy")}get adminPageHasProjectFilter(){return!0}get actionConfigs(){return this.isAdminPage?m.adminConfigs:m.actionConfigs}get searchFilters(){return[{label:t("Name"),name:"name"},{label:t("Auth Algorithm"),name:"auth_algorithm",options:h.authAlgorithmOptions},{label:t("Encryption Algorithm"),name:"encryption_algorithm",options:h.encryptionAlgorithmOptions},{label:t("IKE Version"),name:"ike_version",options:h.ikePolicyIKEVersionOptions},{label:t("PFS"),name:"pfs",options:h.pfsOptions}]}}a.IKEPolicy=v;var g=(0,c.inject)("rootStore")((0,c.observer)(v));a.default=g},3760:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.adminConfigs=t.actionConfigs=void 0;var n=i(a(3761)),l=i(a(3762)),o=i(a(3763)),s={rowActions:{firstAction:l.default,moreActions:[{action:o.default}]},batchActions:[o.default],primaryActions:[n.default]};t.actionConfigs=s;var d={rowActions:{moreActions:[{action:o.default}]},batchActions:[o.default]};t.adminConfigs=d},3761:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Create=void 0;var p=f(r(65)),h=f(r(71)),m=f(r(37)),v=r(382),g=r(1113),_=f(r(1207)),b=r(1206);function y(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}class A extends g.ModalAction{constructor(){super(...arguments),(0,m.default)(this,"onSubmit",(e=>{var{lifetimeValue:t}=e,a=function(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=y(Object(r),!0)).call(a,(function(t){(0,m.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=y(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}({lifetime:{units:"seconds",value:t}},(0,h.default)(e,["lifetimeValue"]));return _.default.create(a)}))}get name(){return t("create vpn ike policy")}get defaultValue(){return{auth_algorithm:"sha1",encryption_algorithm:"aes-128",pfs:"group5",lifetimeValue:3600,ike_version:"v1"}}get formItems(){return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea",required:!1},{name:"auth_algorithm",label:t("Auth Algorithm"),type:"select",options:b.authAlgorithmOptions,required:!0},{name:"encryption_algorithm",label:t("Encryption Algorithm"),type:"select",options:b.encryptionAlgorithmOptions,required:!0},{name:"pfs",label:t("PFS"),type:"select",options:b.pfsOptions,required:!0},{name:"lifetimeValue",label:t("Lifetime Value"),type:"input-number",min:0,required:!0},{name:"ike_version",label:t("IKE Version"),type:"select",options:b.ikePolicyIKEVersionOptions,required:!0}]}}a.Create=A,(0,m.default)(A,"id","create-vpn-ike-policy"),(0,m.default)(A,"title",t("Create VPN IKE Policy")),(0,m.default)(A,"buttonText",t("Create")),(0,m.default)(A,"policy","create_ikepolicy"),(0,m.default)(A,"allowed",(()=>p.default.resolve(!0)));var I=(0,v.inject)("rootStore")((0,v.observer)(A));a.default=I},3762:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var p=f(r(65)),h=f(r(82)),m=f(r(62)),v=f(r(71)),g=f(r(37)),_=f(r(0)),b=r(382),y=r(1113),A=f(r(1207)),I=f(r(1143));function S(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=S(Object(r),!0)).call(a,(function(t){(0,g.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=S(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}class x extends y.ModalAction{constructor(){super(...arguments),(0,g.default)(this,"onSubmit",(e=>{var{lifetimeValue:t,canSubmit:a}=e,r=C({lifetime:{units:"seconds",value:t}},(0,v.default)(e,["lifetimeValue","canSubmit"]));return A.default.update({id:this.item.id},r)}))}init(){this.state={canSubmit:!0,connections:[]},I.default.fetchList({ikepolicy_id:this.item.id}).then((e=>{e.length>0&&this.setState({canSubmit:!1,connections:e})}))}get defaultValue(){var e=this.item,{lifetime:t}=e;return C(C({},(0,v.default)(e,["lifetime"])),{},{lifetimeValue:t.value})}get formItems(){var e,a,r,i,{canSubmit:n}=this.state;return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"canSubmit",label:t("Status"),component:_.default.createElement(_.default.Fragment,null,t("In Use")),validator:()=>{var e,{connections:a}=this.state;return n?p.default.resolve(!0):p.default.reject(new Error((0,h.default)(e="".concat(t("Unable to {action}, because : {reason}, instance: {name}.",{action:this.name,name:this.item.name,reason:t("the policy is in use")}),"\n\n        ")).call(e,t("Used by tunnel(s): {names}. ID(s): {ids}",{names:(0,m.default)(a).call(a,(e=>e.name)).join(", "),ids:(0,m.default)(a).call(a,(e=>e.id)).join(", ")}))))},hidden:n},{name:"description",label:t("Description"),type:"textarea",required:!1},{name:"auth_algorithm",label:t("Auth Algorithm"),type:"select",options:(0,m.default)(e=["sha1","sha256","sha384","sha512"]).call(e,(e=>({label:e.toUpperCase(),value:e}))),required:!0},{name:"encryption_algorithm",label:t("Encryption Algorithm"),type:"select",options:(0,m.default)(a=["3des","aes-128","aes-192","aes-256"]).call(a,(e=>({label:e.toUpperCase(),value:e}))),required:!0},{name:"pfs",label:t("PFS"),type:"select",options:(0,m.default)(r=["group2","group5","group14"]).call(r,(e=>({label:e,value:e}))),required:!0},{name:"lifetimeValue",label:t("Lifetime Value"),type:"input-number",min:0,required:!0},{name:"ike_version",label:t("IKE Version"),type:"select",options:(0,m.default)(i=["v1","v2"]).call(i,(e=>({label:e,value:e}))),required:!0}]}}a.Edit=x,(0,g.default)(x,"id","edit-vpn-ike-policy"),(0,g.default)(x,"title",t("Edit VPN IKE Policy")),(0,g.default)(x,"buttonText",t("Edit")),(0,g.default)(x,"policy","update_ikepolicy"),(0,g.default)(x,"allowed",(()=>p.default.resolve(!0)));var w=(0,b.inject)("rootStore")((0,b.observer)(x));a.default=w},3763:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(82)),o=n(r(62)),s=n(r(65)),d=n(r(52)),u=n(r(37)),c=r(1113),f=r(1123),p=n(r(1207)),h=n(r(1143)),m=n(r(136));class v extends c.ConfirmAction{constructor(){var e;super(...arguments),e=this,(0,u.default)(this,"policy","delete_ikepolicy"),(0,u.default)(this,"allowedCheckFunc",(e=>!e||this.isCurrentProject(e))),(0,u.default)(this,"onSubmit",function(){var a=(0,d.default)((function*(a){var r,i=yield h.default.fetchList({ikepolicy_id:a.id});return i.length>0?(e.showConfirmErrorBeforeSubmit=!0,e.confirmErrorMessageBeforeSubmit=(0,l.default)(r="".concat(t("Unable to {action}, because : {reason}, instance: {name}.",{action:e.actionName||e.title,name:a.name,reason:t("the policy is in use")}),"\n\n        ")).call(r,t("Used by tunnel(s): {names}. ID(s): {ids}",{names:(0,o.default)(i).call(i,(e=>e.name)).join(", "),ids:(0,o.default)(i).call(i,(e=>e.id)).join(", ")})),s.default.reject({errorMsg:e.confirmErrorMessageBeforeSubmit})):p.default.delete(a)}));return function(e){return a.apply(this,arguments)}}())}get id(){return"delete-vpn-ike-policy"}get title(){return t("Delete VPN IKE Policy")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete vpn IKE policy")}isCurrentProject(e){var t=m.default;return!(!(0,f.checkSystemAdmin)()&&e.project_id!==t.user.project.id)}}a.default=v},3764:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.IPsecPolicy=void 0;var l=n(r(62)),o=n(r(35)),s=n(r(82)),d=n(r(37)),u=n(r(0)),c=r(382),f=n(r(1114)),p=r(1208),h=r(1206),m=r(3765);class v extends f.default{constructor(){super(...arguments),(0,d.default)(this,"getColumns",(()=>[{title:t("ID/Name"),dataIndex:"name",render:(e,t)=>u.default.createElement("div",null,u.default.createElement("div",null,t.id),u.default.createElement("div",null,e))},{title:t("Project ID/Name"),dataIndex:"project_name",hidden:!this.isAdminPage},{title:t("Description"),dataIndex:"description",render:e=>e||"-",isHideable:!0},{title:t("Auth Algorithm"),dataIndex:"auth_algorithm",isHideable:!0},{title:t("Encapsulation Mode"),dataIndex:"encapsulation_mode",isHideable:!0},{title:t("Encryption Algorithm"),dataIndex:"encryption_algorithm",isHideable:!0},{title:t("Transform Protocol"),dataIndex:"transform_protocol",idHideable:!0},{title:t("Lifetime"),dataIndex:"lifetime",isHideable:!0,render:e=>{var t;return u.default.createElement("ul",{style:{listStyle:"none",paddingLeft:0}},(0,l.default)(t=(0,o.default)(e)).call(t,((t,a)=>{var r,i;return u.default.createElement("li",{key:(0,s.default)(r="".concat(a,"_")).call(r,e[t],"_lifeTime")},(0,s.default)(i="".concat(t,": ")).call(i,e[t]))})))},stringify:e=>{var t;return(0,l.default)(t=(0,o.default)(e)).call(t,(t=>{var a;return(0,s.default)(a="".concat(t,": ")).call(a,e[t])})).join(" | ")}},{title:t("PFS"),dataIndex:"pfs",isHideable:!0}]))}init(){this.store=new p.VpnIPsecPolicyStore,this.downloadStore=new p.VpnIPsecPolicyStore}get isFilterByBackend(){return!0}get fetchDataByCurrentProject(){return!0}get policy(){return"get_ipsecpolicy"}get name(){return t("vpn IPsec policy")}get adminPageHasProjectFilter(){return!0}get actionConfigs(){return this.isAdminPage?m.adminConfigs:m.actionConfigs}get searchFilters(){return[{label:t("Name"),name:"name"},{label:t("Auth Algorithm"),name:"auth_algorithm",options:h.authAlgorithmOptions},{label:t("Encapsulation Mode"),name:"encapsulation_mode",options:h.ipsecPolicyEncapsulationModeOptions},{label:t("Encryption Algorithm"),name:"encryption_algorithm",options:h.encryptionAlgorithmOptions},{label:t("Transform Protocol"),name:"transform_protocol",options:h.ipsecPolicyTransformProtocolOptions},{label:t("PFS"),name:"pfs",options:h.pfsOptions}]}}a.IPsecPolicy=v;var g=(0,c.inject)("rootStore")((0,c.observer)(v));a.default=g},3765:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.adminConfigs=t.actionConfigs=void 0;var n=i(a(3766)),l=i(a(3767)),o=i(a(3768)),s={rowActions:{firstAction:l.default,moreActions:[{action:o.default}]},batchActions:[o.default],primaryActions:[n.default]};t.actionConfigs=s;var d={rowActions:{moreActions:[{action:o.default}]},batchActions:[o.default]};t.adminConfigs=d},3766:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Create=void 0;var p=f(r(65)),h=f(r(71)),m=f(r(37)),v=r(382),g=r(1113),_=f(r(1208)),b=r(1206);function y(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}class A extends g.ModalAction{constructor(){super(...arguments),(0,m.default)(this,"onSubmit",(e=>{var{lifetimeValue:t}=e,a=function(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=y(Object(r),!0)).call(a,(function(t){(0,m.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=y(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}({lifetime:{units:"seconds",value:t}},(0,h.default)(e,["lifetimeValue"]));return _.default.create(a)}))}get name(){return t("create vpn ipsec policy")}get defaultValue(){return{auth_algorithm:"sha1",encryption_algorithm:"aes-128",pfs:"group5",encapsulation_mode:"tunnel",lifetimeValue:3600,transform_protocol:"esp"}}get formItems(){return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea",required:!1},{name:"auth_algorithm",label:t("Auth Algorithm"),type:"select",options:b.authAlgorithmOptions,required:!0},{name:"encapsulation_mode",label:t("Encapsulation Mode"),type:"select",options:b.ipsecPolicyEncapsulationModeOptions,required:!0},{name:"encryption_algorithm",label:t("Encryption Algorithm"),type:"select",options:b.encryptionAlgorithmOptions,required:!0},{name:"pfs",label:t("PFS"),type:"select",options:b.pfsOptions,required:!0},{name:"lifetimeValue",label:t("Lifetime Value"),type:"input-number",min:0,required:!0},{name:"transform_protocol",label:t("Transform Protocol"),type:"select",options:b.ipsecPolicyTransformProtocolOptions,required:!0}]}}a.Create=A,(0,m.default)(A,"id","create-vpn-ipsec-policy"),(0,m.default)(A,"title",t("Create VPN IPsec Policy")),(0,m.default)(A,"buttonText",t("Create")),(0,m.default)(A,"policy","create_ipsecpolicy"),(0,m.default)(A,"allowed",(()=>p.default.resolve(!0)));var I=(0,v.inject)("rootStore")((0,v.observer)(A));a.default=I},3767:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var p=f(r(65)),h=f(r(82)),m=f(r(62)),v=f(r(71)),g=f(r(37)),_=f(r(0)),b=r(382),y=r(1113),A=f(r(1208)),I=f(r(1143));function S(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=S(Object(r),!0)).call(a,(function(t){(0,g.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=S(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}class x extends y.ModalAction{constructor(){super(...arguments),(0,g.default)(this,"onSubmit",(e=>{var{lifetimeValue:t}=e,a=C({lifetime:{units:"seconds",value:t}},(0,v.default)(e,["lifetimeValue"]));return A.default.update({id:this.item.id},a)}))}init(){this.state={canSubmit:!0,connections:[]},I.default.fetchList({ipsecpolicy_id:this.item.id}).then((e=>{e.length>0&&this.setState({canSubmit:!1,connections:e})}))}get defaultValue(){var e=this.item,{lifetime:t,canSubmit:a}=e;return C(C({},(0,v.default)(e,["lifetime","canSubmit"])),{},{lifetimeValue:t.value})}get formItems(){var e,a,r,i,n,{canSubmit:l}=this.state;return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"canSubmit",label:t("Status"),component:_.default.createElement(_.default.Fragment,null,t("In Use")),validator:()=>{var e,{connections:a}=this.state;return l?p.default.resolve(!0):p.default.reject(new Error((0,h.default)(e="".concat(t("Unable to {action}, because : {reason}, instance: {name}.",{action:this.name,name:this.item.name,reason:t("the policy is in use")}),"\n\n        ")).call(e,t("Used by tunnel(s): {names}. ID(s): {ids}",{names:(0,m.default)(a).call(a,(e=>e.name)).join(", "),ids:(0,m.default)(a).call(a,(e=>e.id)).join(", ")}))))},hidden:l},{name:"description",label:t("Description"),type:"textarea",required:!1},{name:"auth_algorithm",label:t("Auth Algorithm"),type:"select",options:(0,m.default)(e=["sha1","sha256","sha384","sha512"]).call(e,(e=>({label:e.toUpperCase(),value:e}))),required:!0},{name:"encapsulation_mode",label:t("Encapsulation Mode"),type:"select",options:(0,m.default)(a=["tunnel","transport"]).call(a,(e=>({label:e,value:e}))),required:!0},{name:"encryption_algorithm",label:t("Encryption Algorithm"),type:"select",options:(0,m.default)(r=["3des","aes-128","aes-192","aes-256"]).call(r,(e=>({label:e.toUpperCase(),value:e}))),required:!0},{name:"pfs",label:t("PFS"),type:"select",options:(0,m.default)(i=["group2","group5","group14"]).call(i,(e=>({label:e,value:e}))),required:!0},{name:"lifetimeValue",label:t("Lifetime Value"),type:"input-number",min:0,required:!0},{name:"transform_protocol",label:t("Transform Protocol"),type:"select",options:(0,m.default)(n=["esp","ah","ah-esp"]).call(n,(e=>({label:e,value:e}))),required:!0}]}}a.Edit=x,(0,g.default)(x,"id","edit-vpn-ipsec-policy"),(0,g.default)(x,"title",t("Edit VPN IPsec Policy")),(0,g.default)(x,"buttonText",t("Edit")),(0,g.default)(x,"policy","update_ipsecpolicy"),(0,g.default)(x,"allowed",(()=>p.default.resolve(!0)));var w=(0,b.inject)("rootStore")((0,b.observer)(x));a.default=w},3768:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(82)),o=n(r(62)),s=n(r(65)),d=n(r(52)),u=n(r(37)),c=r(1113),f=r(1123),p=n(r(1208)),h=n(r(1143)),m=n(r(136));class v extends c.ConfirmAction{constructor(){var e;super(...arguments),e=this,(0,u.default)(this,"policy","delete_ipsecpolicy"),(0,u.default)(this,"allowedCheckFunc",(e=>!e||this.isCurrentProject(e))),(0,u.default)(this,"onSubmit",function(){var a=(0,d.default)((function*(a){var r,i=yield h.default.fetchList({ipsecpolicy_id:a.id});return i.length>0?(e.showConfirmErrorBeforeSubmit=!0,e.confirmErrorMessageBeforeSubmit=(0,l.default)(r="".concat(t("Unable to {action}, because : {reason}, instance: {name}.",{action:e.actionName||e.title,name:a.name,reason:t("the policy is in use")}),"\n\n        ")).call(r,t("Used by tunnel(s): {names}. ID(s): {ids}",{names:(0,o.default)(i).call(i,(e=>e.name)).join(", "),ids:(0,o.default)(i).call(i,(e=>e.id)).join(", ")})),s.default.reject({errorMsg:e.confirmErrorMessageBeforeSubmit})):p.default.delete(a)}));return function(e){return a.apply(this,arguments)}}())}get id(){return"delete-vpn-ipsec-policy"}get title(){return t("Delete VPN IPsec Policy")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete vpn IPsec policy")}isCurrentProject(e){var t=m.default;return!(!(0,f.checkSystemAdmin)()&&e.project_id!==t.user.project.id)}}a.default=v},3769:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.IPsecSiteConnection=void 0;var l=n(r(37)),o=r(382),s=n(r(1114)),d=r(1143),u=r(1206),c=r(1494);class f extends s.default{constructor(){super(...arguments),(0,l.default)(this,"getColumns",(()=>[{title:t("ID/Name"),dataIndex:"name",routeName:this.getRouteName("ipsecDetail")},{title:t("Project ID/Name"),dataIndex:"project_name",hidden:!this.isAdminPage},{title:t("Description"),dataIndex:"description",render:e=>e||"-",isHideable:!0},{title:t("Local Endpoint Group ID"),dataIndex:"local_ep_group_id",isHideable:!0},{title:t("Peer Endpoint Group ID"),dataIndex:"peer_ep_group_id",isHideable:!0},{title:t("Peer Address"),dataIndex:"peer_address",isHideable:!0},{title:t("Status"),dataIndex:"status",render:e=>u.vpnStatus[e]}]))}init(){this.store=new d.VpnIPsecConnectionStore,this.downloadStore=new d.VpnIPsecConnectionStore}get isFilterByBackend(){return!0}get fetchDataByCurrentProject(){return!0}get policy(){return"get_ipsec_site_connection"}get name(){return t("ipsec site connection")}get adminPageHasProjectFilter(){return!0}get actionConfigs(){return this.isAdminPage?c.adminConfigs:c.actionConfigs}get searchFilters(){return[{label:t("Name"),name:"name"},{label:t("Local Endpoint Group ID"),name:"local_ep_group_id"},{label:t("Peer Endpoint Group ID"),name:"peer_ep_group_id"},{label:t("Peer Address"),name:"peer_address"},{label:t("Status"),name:"status",options:u.vpnStatusOptions}]}}a.IPsecSiteConnection=f;var p=(0,o.inject)("rootStore")((0,o.observer)(f));a.default=p},3770:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Create=void 0;var p=f(r(65)),h=f(r(62)),m=f(r(33)),v=f(r(82)),g=f(r(101));r(1117);var _=f(r(1118));r(1115);var b=f(r(1116));r(398);var y=f(r(401)),A=f(r(52)),I=f(r(71)),S=f(r(37)),C=f(r(0)),x=r(382),w=r(1113),P=r(514),E=f(r(1222)),k=f(r(1207)),D=f(r(1208)),B=f(r(1223)),N=(r(167),r(47)),M=f(r(1143)),R=f(r(3771));function j(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=j(Object(r),!0)).call(a,(function(t){(0,S.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=j(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}var{isIPv4:F,isIpv6:Q}=P.ipValidate;class L extends w.ModalAction{constructor(){super(...arguments),(0,S.default)(this,"onSubmit",(e=>{var t=(0,N.merge)({},this.defaultValue,e),{interval:a,timeout:r,action:i,password:n,confirmPassword:l,more:o}=t,s=(0,I.default)(t,["interval","timeout","action","password","confirmPassword","more"]),d=T(T({},s),{},{psk:n,peer_id:s.peer_address,dpd:{interval:a,timeout:r,action:i}});return M.default.create(d)}))}get name(){return t("create ipsec site connection")}init(){this.vpnServiceStore=E.default,this.ikePolicyStore=k.default,this.ipsecPolicyStore=D.default,this.endpointGroupStore=B.default,this.fetchData()}fetchData(){var e=this;return(0,A.default)((function*(){yield p.default.all([e.vpnServiceStore.fetchList(),e.ikePolicyStore.fetchList(),e.ipsecPolicyStore.fetchList(),e.endpointGroupStore.fetchList()])}))()}get defaultValue(){return{mtu:1500,initiator:"bi-directional",action:"hold",interval:30,timeout:120}}get formItems(){var e,a,r,i,n,l,o,s,d,u,c,{local_ep_group_id:f,peer_ep_group_id:A,more:I}=this.state;return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea",required:!1},{name:"vpnservice_id",label:t("VPN Service"),type:"select",options:(0,h.default)(e=this.vpnServiceStore.list.data).call(e,(e=>({label:e.name,value:e.id}))),required:!0},{name:"ikepolicy_id",label:t("IKE Policy"),type:"select",options:(0,h.default)(a=this.ikePolicyStore.list.data).call(a,(e=>({label:e.name,value:e.id}))),required:!0},{name:"ipsecpolicy_id",label:t("IPsec Policy"),type:"select",options:(0,h.default)(r=this.ipsecPolicyStore.list.data).call(r,(e=>({label:e.name,value:e.id}))),required:!0},{name:"local_ep_group_id",label:t("Local Endpoint Group"),type:"select",options:(0,h.default)(i=(0,m.default)(n=this.endpointGroupStore.list.data).call(n,(e=>"subnet"===e.type))).call(i,(e=>({label:e.name,value:e.id}))),onChange:e=>{this.setState({local_ep_group_id:e})},required:!0},{name:"local_subnet",type:"label",label:t("Local Subnet"),component:C.default.createElement(R.default,{data:this.endpointGroupStore.list.data,local_ep_group_id:f})},{name:"peer_address",type:"input",label:t("Peer Gateway Public Address"),extra:t("Peer gateway public address for the IPsec site connection"),validator:(e,a)=>{var r;return F(a)||Q(a)?p.default.resolve():p.default.reject(new Error((0,v.default)(r="".concat(t("Invalid")," ")).call(r,t("Peer Gateway Public Address"))))},required:!0},{name:"peer_ep_group_id",label:t("Peer Endpoint Group"),type:"select",options:(0,h.default)(l=(0,m.default)(o=this.endpointGroupStore.list.data).call(o,(e=>"cidr"===e.type))).call(l,(e=>({label:e.name,value:e.id}))),onChange:e=>{this.setState({peer_ep_group_id:e})},required:!0},{name:"peer_cidrs",type:"label",label:t("Peer Cidrs"),component:C.default.createElement(_.default,null,A?(0,h.default)(s=(0,g.default)(d=this.endpointGroupStore.list.data).call(d,(e=>e.id===A)).endpoints).call(s,(e=>C.default.createElement(b.default,{span:24},e))):C.default.createElement(b.default,{span:24},C.default.createElement(y.default,null)))},{name:"password",type:"input-password",label:t("Pre-Shared Key(PSK) String"),otherRule:(0,P.getPasswordOtherRule)("password","instance"),required:!0},{name:"confirmPassword",type:"input-password",label:t("Confirm Shared Key"),otherRule:(0,P.getPasswordOtherRule)("confirmPassword","instance",void 0,t("Pre-Shared Key must be the same with Confirm Shared Key.")),required:!0},{name:"mtu",type:"input-number",label:t("MTU"),min:68,tip:t("The maximum transmission unit (MTU) value to address fragmentation. Minimum value is 68 for IPv4, and 1280 for IPv6."),required:!0,hidden:!I},{name:"initiator",label:t("Initiator Mode"),type:"select",options:(0,h.default)(u=["bi-directional","response-only"]).call(u,(e=>({label:e,value:e}))),tip:t("Indicates whether this VPN can only respond to connections or both respond to and initiate connections."),required:!0,hidden:!I},{name:"action",label:t("DPD Action"),type:"select",options:(0,h.default)(c=["clear","hold","restart","disabled","restart-by-peer"]).call(c,(e=>({label:e,value:e}))),tip:t("DPD actions controls the use of Dead Peer Detection Protocol."),required:!0,hidden:!I},{name:"interval",type:"input-number",label:t("DPD Interval (sec)"),min:0,tip:t("Sec for DPD delay, > 0"),required:!0,hidden:!I},{name:"timeout",type:"input-number",label:t("DPD timeout (sec)"),min:0,tip:t("Sec for DPD timeout, > 0 & > DPD Interval"),required:!0,hidden:!I},{name:"more",label:t("Advanced Options"),type:"more"}]}}a.Create=L,(0,S.default)(L,"id","create-ipsec-site-connection"),(0,S.default)(L,"title",t("Create IPsec Site Connection")),(0,S.default)(L,"buttonText",t("Create")),(0,S.default)(L,"policy","create_ipsec_site_connection"),(0,S.default)(L,"allowed",(()=>p.default.resolve(!0)));var O=(0,x.inject)("rootStore")((0,x.observer)(L));a.default=O},3771:function(e,t,a){"use strict";var r=a(156),i=a(19),n=a(25),l=a(21);i(t,"__esModule",{value:!0}),t.default=void 0,a(324);var o=l(a(325));a(1115);var s=l(a(1116));a(398);var d=l(a(401)),u=l(a(52)),c=l(a(101)),f=l(a(62)),p=l(a(65)),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=_(t);if(a&&a.has(e))return a.get(e);var r={},l=i&&n;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=l?n(e,o):null;s&&(s.get||s.set)?i(r,o,s):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(a(0)),m=l(a(16)),v=(a(167),a(47)),g=a(390);function _(e){if("function"!=typeof r)return null;var t=new r,a=new r;return(_=function(e){return e?a:t})(e)}class b extends h.Component{constructor(e){super(e),this.state={subnets:[],isLoading:!0}}componentDidUpdate(e){var{local_ep_group_id:t}=this.props,{local_ep_group_id:a}=e;t!==a&&this.getSubnets()}get currentEndpoints(){var{data:e,local_ep_group_id:t}=this.props;return(0,v.get)((0,c.default)(e).call(e,(e=>e.id===t)),"endpoints",[])}getSubnets(){var e=this;return(0,u.default)((function*(){var t;e.setState({isLoading:!0});var a=(0,f.default)(t=e.currentEndpoints).call(t,(e=>(new g.SubnetStore).fetchDetail({id:e}))),r=yield p.default.all(a);e.setState({subnets:r,isLoading:!1})}))()}render(){var e,{local_ep_group_id:t}=this.props,{subnets:a,isLoading:r}=this.state;return t?r?h.default.createElement(s.default,null,h.default.createElement(o.default,null)):h.default.createElement(h.default.Fragment,null,(0,f.default)(e=this.currentEndpoints).call(e,((e,t)=>h.default.createElement(s.default,{span:24,key:"cep_".concat(t)},(0,v.get)(a[t],"cidr"))))):h.default.createElement(s.default,null,h.default.createElement(d.default,null))}}b.propTypes={data:m.default.array,local_ep_group_id:m.default.string},b.defaultProps={data:[],local_ep_group_id:void 0};var y=b;t.default=y},3772:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.Edit=void 0;var l=n(r(65)),o=n(r(91)),s=n(r(37)),d=r(382),u=r(1113),c=n(r(1143)),f=["ACTIVE","DOWN"];class p extends u.ModalAction{constructor(){super(...arguments),(0,s.default)(this,"onSubmit",(e=>{var{name:t,description:a}=e;return c.default.update({id:this.item.id},{name:t,description:a})}))}get defaultValue(){return{name:this.item.name,description:this.item.description}}get formItems(){return[{name:"name",label:t("Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea",required:!1}]}}a.Edit=p,(0,s.default)(p,"id","edit-ipsec-site-connection"),(0,s.default)(p,"title",t("Edit IPsec Site Connection")),(0,s.default)(p,"buttonText",t("Edit")),(0,s.default)(p,"policy","update_ipsec_site_connection"),(0,s.default)(p,"allowed",(e=>l.default.resolve((0,o.default)(f).call(f,e.status)>-1)));var h=(0,d.inject)("rootStore")((0,d.observer)(p));a.default=h},3773:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(37)),o=r(1113),s=r(1123),d=n(r(1143)),u=n(r(136));class c extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","delete_ipsec_site_connection"),(0,l.default)(this,"allowedCheckFunc",(e=>!e||this.isCurrentProject(e))),(0,l.default)(this,"onSubmit",(e=>d.default.delete(e)))}get id(){return"delete-ipsec-site-connection"}get title(){return t("Delete IPsec Site Connection")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete ipsec site connection")}isCurrentProject(e){var t=u.default;return!(!(0,s.checkSystemAdmin)()&&e.project_id!==t.user.project.id)}}a.default=c},3774:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.IPsecSiteConnection=void 0;var l=r(382),o=n(r(1119)),s=r(1143),d=n(r(3775)),u=r(1494);class c extends o.default{init(){this.store=new s.VpnIPsecConnectionStore}get name(){return t("IPsec Site Connection")}get policy(){return"get_ipsec_site_connection"}get listUrl(){return this.getRoutePath("vpn",null,{tab:"ipsec_site_connections"})}get actionConfigs(){return this.isAdminPage?u.adminConfigs:u.actionConfigs}get detailInfos(){return[{title:t("Name"),dataIndex:"name"},{title:t("Project ID"),dataIndex:"project_id",hidden:!this.isAdminPage},{title:t("VPN Service ID"),dataIndex:"vpnservice_id"},{title:t("Status"),dataIndex:"status"},{title:t("Local Endpoint Group ID"),dataIndex:"local_ep_group_id"},{title:t("Peer Endpoint Group ID"),dataIndex:"peer_ep_group_id"},{title:t("Peer Address"),dataIndex:"peer_address"},{title:t("Peer ID"),dataIndex:"peer_id"},{title:t("Admin State"),dataIndex:"admin_state_up",valueRender:"yesNo"},{title:t("Description"),dataIndex:"description"}]}get tabs(){return[{title:t("BaseDetail"),key:"BaseDetail",component:d.default}]}}a.IPsecSiteConnection=c;var f=(0,l.inject)("rootStore")((0,l.observer)(c));a.default=f},3775:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var p=f(r(62)),h=f(r(35)),m=f(r(82)),v=f(r(52)),g=f(r(37)),_=r(382),b=f(r(1122)),y=r(1143),A=f(r(0)),I=r(32);function S(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}class C extends b.default{constructor(){var e;super(...arguments),e=this,(0,g.default)(this,"fetchData",function(){var t=(0,v.default)((function*(t){e.store.fetchDetailWithPolicyDetail(function(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=S(Object(r),!0)).call(a,(function(t){(0,g.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=S(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}({id:e.id,ikePolicyID:e.props.detail.ikepolicy_id,ipsecPolicyID:e.props.detail.ipsecpolicy_id},t)).catch(e.catch)}));return function(e){return t.apply(this,arguments)}}())}init(){this.store=new y.VpnIPsecConnectionStore}get detailData(){return(0,I.toJS)(this.store.detail)}get leftCards(){return[this.ikeInfoCard,this.ipsecInfoCard]}get rightCards(){return[this.advancedInfo]}get ikeInfoCard(){var e=[{label:t("Name"),dataIndex:"name"},{label:t("Description"),dataIndex:"description",render:e=>e||"-"},{label:t("Auth Algorithm"),dataIndex:"auth_algorithm"},{label:t("Encryption Algorithm"),dataIndex:"encryption_algorithm"},{label:t("IKE Version"),dataIndex:"ike_version"},{label:t("Lifetime"),dataIndex:"lifetime",render:e=>{var t;return e&&A.default.createElement("ul",{style:{listStyle:"none",paddingLeft:0}},(0,p.default)(t=(0,h.default)(e)).call(t,((t,a)=>{var r,i;return A.default.createElement("li",{key:(0,m.default)(r="".concat(a,"_")).call(r,e[t],"_lifeTime")},(0,m.default)(i="".concat(t,": ")).call(i,e[t]))})))}},{label:t("PFS"),dataIndex:"pfs"}];return{title:t("IKE Policy"),options:e,sourceData:this.detailData.ikeDetail}}get ipsecInfoCard(){var e=[{label:t("Name"),dataIndex:"name"},{label:t("Description"),dataIndex:"description"},{label:t("Auth Algorithm"),dataIndex:"auth_algorithm"},{label:t("Encapsulation Mode"),dataIndex:"encapsulation_mode"},{label:t("Encryption Algorithm"),dataIndex:"encryption_algorithm"},{label:t("Transform Protocol"),dataIndex:"transform_protocol"},{label:t("Lifetime"),dataIndex:"lifetime",render:e=>{var t;return e&&A.default.createElement("ul",{style:{listStyle:"none",paddingLeft:0}},(0,p.default)(t=(0,h.default)(e)).call(t,((t,a)=>{var r,i;return A.default.createElement("li",{key:(0,m.default)(r="".concat(a,"_")).call(r,e[t],"_lifeTime")},(0,m.default)(i="".concat(t,": ")).call(i,e[t]))})))}},{label:t("PFS"),dataIndex:"pfs"}];return{title:t("IPsec Policy"),options:e,sourceData:this.detailData.ipsecDetail}}get advancedInfo(){var e=[{label:t("MTU"),dataIndex:"mtu"},{label:t("Initiator Mode"),dataIndex:"initiator"},{label:t("DPD Action"),dataIndex:"dpd",render:e=>e&&e.action},{label:t("DPD Interval (sec)"),dataIndex:"dpd",render:e=>e&&e.interval},{label:t("DPD timeout (sec)"),dataIndex:"dpd",render:e=>e&&e.timeout}];return{title:t("Advanced Params"),options:e}}}a.BaseDetail=C;var x=(0,_.inject)("rootStore")((0,_.observer)(C));a.default=x},3776:function(e,a,r){"use strict";var i=r(156),n=r(19),l=r(25),o=r(21);n(a,"__esModule",{value:!0}),a.default=a.SecurityGroups=void 0;var s=o(r(219)),d=o(r(37)),u=r(382),c=o(r(1114)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=m(t);if(a&&a.has(e))return a.get(e);var r={},i=n&&l;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?l(e,o):null;s&&(s.get||s.set)?n(r,o,s):r[o]=e[o]}r.default=e,a&&a.set(e,r);return r}(r(392)),p=r(319),h=o(r(1495));function m(e){if("function"!=typeof i)return null;var t=new i,a=new i;return(m=function(e){return e?a:t})(e)}class v extends c.default{constructor(){super(...arguments),(0,d.default)(this,"getColumns",(()=>[{title:t("ID/Name"),dataIndex:"name",routeName:this.getRouteName("securityGroupDetail")},{title:t("Project ID/Name"),dataIndex:"project_name",isHideable:!0,hidden:!this.isAdminPage},{title:t("Description"),dataIndex:"description",isHideable:!0},{title:t("Created At"),dataIndex:"created_at",valueRender:"sinceTime"}]))}init(){this.store=f.default,this.downloadStore=new f.SecurityGroupStore}get policy(){return"get_security_group"}get name(){return t("security groups")}get isRecycleBinDetail(){var e;return this.inDetailPage&&(0,s.default)(e=this.path).call(e,"recycle-bin")}get actionConfigs(){return this.isRecycleBinDetail?p.emptyActionConfig:this.isAdminPage?h.default.actionConfigsAdmin:h.default.actionConfigs}get isFilterByBackend(){return!0}get fetchDataByCurrentProject(){return!0}get adminPageHasProjectFilter(){return!0}get searchFilters(){return[{label:t("Name"),name:"name"}]}}a.SecurityGroups=v;var g=(0,u.inject)("rootStore")((0,u.observer)(v));a.default=g},3777:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.CreateAction=void 0;var p=f(r(65)),h=f(r(52)),m=f(r(37)),v=r(382),g=r(1113),_=f(r(392)),b=f(r(384));function y(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=y(Object(r),!0)).call(a,(function(t){(0,m.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=y(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}var I=(e,t)=>{var{left:a=0}=e||{},{left:r=0}=t||{};return 0!==a&&(r>=2||-1===r)?1:0};class S extends g.ModalAction{constructor(){super(...arguments),(0,m.default)(this,"onSubmit",(e=>_.default.create(e)))}get name(){return t("Create security group")}init(){this.state.groupQuota={},this.state.ruleQuota={},this.state.quotaLoading=!0,this.projectStore=b.default,this.getQuota()}static get disableSubmit(){var{neutronQuota:{security_group:e={},security_group_rule:t={}}={}}=b.default;return 0===I(e,t)}static get showQuota(){return!0}get showQuota(){return!0}getQuota(){var e=this;return(0,h.default)((function*(){var t=yield e.projectStore.fetchProjectNeutronQuota(),{security_group:a={},security_group_rule:r={}}=t||{};e.setState({groupQuota:a,ruleQuota:r,quotaLoading:!1})}))()}get tips(){return t("This operation creates a security group with default security group rules for the IPv4 and IPv6 ether types.")}get quotaInfo(){var{groupQuota:e={},ruleQuota:a={},quotaLoading:r}=this.state;if(r)return[];var i=I(e,a);return[A(A({},e),{},{add:i,name:"security_group",title:t("Security Group")}),A(A({},a),{},{add:2*i,name:"security_group_rule",title:t("Security Group Rule"),type:"line"})]}get defaultValue(){return{}}get formItems(){return[{name:"name",label:t("Name"),type:"input-name",placeholder:t("Please input name"),required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea"}]}}a.CreateAction=S,(0,m.default)(S,"id","create"),(0,m.default)(S,"title",t("Create Security Group")),(0,m.default)(S,"policy","create_security_group"),(0,m.default)(S,"allowed",(()=>p.default.resolve(!0)));var C=(0,v.inject)("rootStore")((0,v.observer)(S));a.default=C},3778:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.EditAction=void 0;var l=n(r(65)),o=n(r(37)),s=r(382),d=r(1113),u=n(r(392));class c extends d.ModalAction{constructor(){super(...arguments),(0,o.default)(this,"onSubmit",(e=>{var{id:t}=this.item;return u.default.edit({id:t},e)}))}get defaultValue(){var{name:e,description:t}=this.item;return{name:e,description:t}}get formItems(){return[{name:"name",label:t("Name"),type:"input-name",placeholder:t("Please input name"),required:!0,withoutChinese:!0},{name:"description",label:t("Description"),type:"textarea"}]}}a.EditAction=c,(0,o.default)(c,"id","edit"),(0,o.default)(c,"title",t("Edit")),(0,o.default)(c,"policy","update_security_group"),(0,o.default)(c,"allowed",(e=>l.default.resolve("default"!==e.name)));var f=(0,s.inject)("rootStore")((0,s.observer)(c));a.default=f},3779:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(37)),o=r(1113),s=n(r(392));class d extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","delete_security_group"),(0,l.default)(this,"hasNoProject",(e=>!e.project_name||"-"===e.project_name)),(0,l.default)(this,"allowedCheckFunc",(e=>this.isAdminPage&&this.hasNoProject(e)||"default"!==e.name)),(0,l.default)(this,"onSubmit",(e=>{var{id:t}=e;return s.default.delete({id:t})}))}get id(){return"delete"}get title(){return t("Delete Security Group")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("Delete Security Group")}}a.default=d},3780:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.SecurityGroupDetail=void 0;var l=r(382),o=r(392),s=n(r(1119)),d=r(47),u=n(r(3781)),c=n(r(1495));class f extends s.default{get name(){return t("security group")}get policy(){return"get_security_group"}get listUrl(){return this.getRoutePath("securityGroup")}get actionConfigs(){return this.isAdminPage?c.default.actionConfigsAdmin:c.default.actionConfigs}get detailInfos(){return[{title:t("Name"),dataIndex:"name"},{title:t("Project ID"),dataIndex:"tenant_id",hidden:!this.isAdminPage},{title:t("Description"),dataIndex:"description"}]}get tabs(){return[{title:t("Rules"),key:"rules",component:u.default}]}init(){this.store=new o.SecurityGroupStore}componentDidUpdate(e){(0,d.isEqual)(this.props.match.params,e.match.params)||this.fetchDataWithPolicy()}}a.SecurityGroupDetail=f;var p=(0,l.inject)("rootStore")((0,l.observer)(f));a.default=p},3781:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(21);c(a,"__esModule",{value:!0}),a.default=a.Rule=void 0;var p=f(r(71)),h=f(r(52)),m=f(r(37)),v=r(382),g=f(r(1114)),_=f(r(562)),b=r(332),y=r(517),A=f(r(3782));function I(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=I(Object(r),!0)).call(a,(function(t){(0,m.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=I(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}class C extends g.default{constructor(){super(...arguments),(0,m.default)(this,"getColumns",(()=>(0,b.getSelfColumns)(this)))}init(){this.store=_.default}get policy(){return"get_security_group_rule"}get name(){return t("security group rules")}getDetailUrl(e){var t=this.isAdminPage?"securityGroupDetailAdmin":"securityGroupDetail";return(0,y.getPath)({key:t,params:{id:e}})}get actionConfigs(){return this.isAdminPage?A.default.actionConfigsAdmin:A.default.actionConfigs}get searchFilters(){return b.filterParams}getData(){var e=arguments,t=this;return(0,h.default)((function*(){var a=e.length>0&&void 0!==e[0]?e[0]:{},{silent:r}=a,i=(0,p.default)(a,["silent"]),{detail:n={}}=t.props,{id:l}=n;r&&(t.list.silent=!0),l&&(yield t.store.fetchList(S(S({},i),{},{security_group_id:l}))),t.list.silent=!1}))()}}a.Rule=C;var x=(0,v.inject)("rootStore")((0,v.observer)(C));a.default=x},3782:function(e,t,a){"use strict";var r=a(19),i=a(21);r(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(1496)),l=i(a(3783)),o={actionConfigs:{rowActions:{firstAction:l.default},batchActions:[l.default],primaryActions:[n.default]},actionConfigsAdmin:{rowActions:{firstAction:l.default,moreActions:[]},batchActions:[l.default],primaryActions:[]}};t.default=o},3783:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(221)),o=n(r(82)),s=n(r(37)),d=r(1113),u=n(r(562));class c extends d.ConfirmAction{constructor(){super(...arguments),(0,s.default)(this,"policy","delete_security_group_rule"),(0,s.default)(this,"getItemName",(e=>{var a,r,i;if(e.name)return e.name;var n,s,d,u,{ethertype:c,port_range_min:f,port_range_max:p,protocol:h,remote_group_id:m,remote_ip_prefix:v}=e,g="",_=(0,l.default)(f,10),b=(0,l.default)(p,10),y=h.toLowerCase();_&&(g=_===b?(0,o.default)(s="".concat(_," / ")).call(s,y):(0,o.default)(d=(0,o.default)(u="".concat(_," - ")).call(u,b," / ")).call(d,y));var A="egress"===e.direction?"to":"from";return n=m||(v||t("ANY")),(0,o.default)(a=(0,o.default)(r=(0,o.default)(i="ALLOW ".concat(c," ")).call(i,g," ")).call(r,A," ")).call(a,n)})),(0,s.default)(this,"onSubmit",(e=>u.default.delete(e)))}get id(){return"delete"}get title(){return t("Delete Rule")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("Delete Rule")}}a.default=c},3784:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.Certificate=void 0;var l=r(382),o=n(r(1152)),s=n(r(3785));class d extends o.default{get tabs(){return[{title:t("Server Certificate"),key:"SERVER",component:s.default},{title:t("CA Certificate"),key:"CA",component:s.default}]}}a.Certificate=d;var u=(0,l.inject)("rootStore")((0,l.observer)(d));a.default=u},3785:function(e,a,r){"use strict";var i=r(35),n=r(44),l=r(33),o=r(25),s=r(28),d=r(45),u=r(46),c=r(19),f=r(156),p=r(21);c(a,"__esModule",{value:!0}),a.default=a.Certificate=void 0;var h=p(r(62)),m=p(r(195)),v=p(r(37)),g=p(r(0)),_=r(382),b=p(r(1114)),y=P(r(1204)),A=r(1123),I=P(r(1205)),S=r(1127),C=r(327),x=p(r(1323));function w(e){if("function"!=typeof f)return null;var t=new f,a=new f;return(w=function(e){return e?a:t})(e)}function P(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=w(t);if(a&&a.has(e))return a.get(e);var r={},i=c&&o;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var l=i?o(e,n):null;l&&(l.get||l.set)?c(r,n,l):r[n]=e[n]}return r.default=e,a&&a.set(e,r),r}function E(e,t){var a=i(e);if(n){var r=n(e);t&&(r=l(r).call(r,(function(t){return o(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a,r=null!=arguments[t]?arguments[t]:{};if(t%2)s(a=E(Object(r),!0)).call(a,(function(t){(0,v.default)(e,t,r[t])}));else if(d)u(e,d(r));else{var i;s(i=E(Object(r))).call(i,(function(t){c(e,t,o(r,t))}))}}return e}class D extends b.default{constructor(){super(...arguments),(0,v.default)(this,"updateFetchParams",(e=>k(k({},e),{},{mode:this.currentMode}))),(0,v.default)(this,"getColumns",(()=>[{title:this.showDetail?t("ID/Name"):t("Name"),dataIndex:"name",routeName:this.showDetail?this.getRouteName(this.routeLinkPath):null},{title:t("Certificate Type"),dataIndex:"mode",render:e=>S.certificateMode[e]||e,isHideable:!0},{title:t("Expires At"),dataIndex:"expiration",valueRender:"toLocalTime",isHideable:!0},{title:t("Domain Name"),dataIndex:"domain",render:e=>e||"-",hidden:"CA"===this.currentMode,isHideable:!0},{title:t("Listener"),dataIndex:"listener",render:e=>e?(0,h.default)(e).call(e,(e=>g.default.createElement("div",{key:e.id},this.getLinkRender("lbListenerDetail",e.name,{loadBalancerId:e.lb,id:e.id},null)))):"-",isHideable:!0,stringify:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,h.default)(e).call(e,(e=>e.name)).join(",")||"-"}},{title:t("Status"),dataIndex:"status",render:e=>S.certificateStatus[e]||e},{title:t("Created At"),dataIndex:"created",valueRender:"toLocalTime",isHideable:!0}]))}init(){"SERVER"===this.currentMode?(this.store=y.default,this.downloadStore=new y.ContainersStore):(this.store=I.default,this.downloadStore=new I.SecretsStore)}get policy(){return["containers:get","secrets:get"]}get aliasPolicy(){return["barbican:containers:get","barbican:secrets:get"]}get showDetail(){return(0,A.checkPolicyRule)("barbican:secret:decrypt")}get name(){return t("certificate")}get actionConfigs(){return"SERVER"===this.currentMode?x.default.actionConfigsContainer:x.default.actionConfigsSecret}get currentMode(){var e,t=(0,C.parse)((0,m.default)(e=this.props.location.search).call(e,1)),{tab:a="SERVER"}=t;return a}get routeLinkPath(){return"SERVER"===this.currentMode?"certificateContainerDetail":"certificateSecretDetail"}get searchFilters(){return[{label:t("Name"),name:"name"}]}}a.Certificate=D;var B=(0,_.inject)("rootStore")((0,_.observer)(D));a.default=B},3786:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.CreateAction=void 0;var l=n(r(65)),o=n(r(1150)),s=n(r(195)),d=n(r(33)),u=n(r(37)),c=r(382),f=r(1113),p=r(135),h=r(514),m=r(1127),v=r(3787),g=n(r(1204)),_=n(r(115)),b=r(327);class y extends f.ModalAction{constructor(){super(...arguments),(0,u.default)(this,"validateDomain",((e,a)=>{if(void 0===a||""===a)return l.default.resolve();var r=a.split(","),i=(0,o.default)(r).call(r,(e=>e.length<=100&&(0,h.isDomain)(e)));return r.length>30||!i?l.default.reject(t("Please enter a correct domain, format is refer to the left tip!")):l.default.resolve()})),(0,u.default)(this,"validateCertificateContent",((e,a)=>{if(!a)return l.default.reject();var r=a.split(/\n/g),i=r[0],n=r[r.length-1]||r[r.length-2];return"-----BEGIN CERTIFICATE-----"===i&&"-----END CERTIFICATE-----"===n?l.default.resolve():l.default.reject(t("Please enter a correct certificate content, format is refer to the left tip!"))})),(0,u.default)(this,"validateCertificateKeyPair",((e,a)=>{if(!a)return l.default.reject();var r=a.split(/\n/g),i=r[0],n=r[r.length-1]||r[r.length-2];return"-----BEGIN RSA PRIVATE KEY-----"===i&&"-----END RSA PRIVATE KEY-----"===n?l.default.resolve():l.default.reject(t("Please enter a correct private key, format is refer to the left tip!"))})),(0,u.default)(this,"onSubmit",(e=>this.store.create(e)))}init(){this.store=g.default}get name(){return t("Create Certificate")}static get modalSize(){return"large"}getModalSize(){return"large"}get defaultValue(){return{mode:this.typeTab}}get typeTab(){var{location:{search:e=""}={}}=this.containerProps;return(0,b.parse)((0,s.default)(e).call(e,1)).tab||"SERVER"}get certificateModeOptions(){var e;return(0,d.default)(e=(0,p.getOptions)(m.certificateMode)).call(e,(e=>e.value===this.typeTab))}get formItems(){var{mode:e}=this.state;return[{name:"name",label:t("Certificate Name"),type:"input-name",required:!0,withoutChinese:!0},{name:"mode",label:t("Certificate Type"),type:"radio",options:this.certificateModeOptions},{name:"certificate",label:t("Certificate Content"),type:"textarea-from-file",placeholder:t("PEM encoding"),accept:".crt,.pem",tip:v.certificateContentTip,validator:this.validateCertificateContent,required:!0,rows:6},{name:"private_key",label:t("Private Key"),type:"textarea-from-file",placeholder:t("PEM encoding"),accept:".key,.pem",tip:v.certificateKeyPairTip,validator:this.validateCertificateKeyPair,required:!0,display:"SERVER"===e,rows:6},{name:"domain",label:t("Domain Name"),type:"textarea",placeholder:t("Please input"),maxLength:1024,hidden:"CA"===e,validator:this.validateDomain,tip:t("The domain name can only be composed of letters, numbers, dashes, in A dash cannot be at the beginning or end, and a single string cannot exceed more than 63 characters, separated by dots; At most can support 30 domain names, separated by commas;The length of a single domain name does not exceed 100 characters, and the total length degree does not exceed 1024 characters."),extra:t("If it is an SNI type certificate, a domain name needs to be specified")},{name:"expiration",label:t("Expires At"),type:"date-picker",showToday:!1,disabledDate:e=>e&&e<=(0,_.default)().endOf("d")}]}}a.CreateAction=y,(0,u.default)(y,"id","create-certificate"),(0,u.default)(y,"title",t("Create Certificate")),(0,u.default)(y,"policy",["secrets:post","containers:post"]),(0,u.default)(y,"allowed",(()=>l.default.resolve(!0)));var A=(0,c.inject)("rootStore")((0,c.observer)(y));a.default=A},3787:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.certificateKeyPairTip=a.certificateContentTip=void 0;var l=n(r(0)),o=l.default.createElement("div",null,l.default.createElement("p",null,t('The certificate contains information such as the public key and signature of the certificate. The extension of the certificate is "pem" or "crt", you can directly enter certificate content or upload certificate file.')),l.default.createElement("p",null,t('The format of the certificate content is: by "----BEGIN CERTIFICATE-----" as the beginning,"-----END CERTIFICATE----" as the end, 64 characters per line, the last line does not exceed 64 characters, and there cannot be blank lines.')));a.certificateContentTip=o;var s=l.default.createElement("div",null,l.default.createElement("p",null,t('The private key of the certificate, the extension of the private key is "key", you can directly enter the content of the private key file or upload a private key that conforms to the format document.')),l.default.createElement("p",null,t('The private key content format is: with "-----BEGIN RSA PRIVATE KEY-----" as the beginning,"-----END RSA PRIVATE KEY-----" as the end, 64 characters per line, the last line does not exceed 64 characters, and there cannot be blank lines.')));a.certificateKeyPairTip=s},3788:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(37)),o=r(1113),s=n(r(1204));class d extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy",["secret:delete","container:delete"]),(0,l.default)(this,"aliasPolicy",["barbican:secret:delete","barbican:container:delete"]),(0,l.default)(this,"allowedCheckFunc",(e=>!e.listener)),(0,l.default)(this,"onSubmit",(e=>s.default.delete(e)))}get id(){return"delete"}get title(){return t("Delete Certificate")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete certificate")}}a.default=d},3789:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(37)),o=r(1113),s=n(r(1205));class d extends o.ConfirmAction{constructor(){super(...arguments),(0,l.default)(this,"policy","secret:delete"),(0,l.default)(this,"allowedCheckFunc",(e=>!e.listener)),(0,l.default)(this,"onSubmit",(e=>s.default.delete(e)))}get id(){return"delete"}get title(){return t("Delete Certificate")}get isDanger(){return!0}get buttonText(){return t("Delete")}get actionName(){return t("delete certificate")}}a.default=d},3790:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.Detail=void 0;var l=r(382),o=n(r(1119)),s=r(1204),d=r(1127),u=n(r(3791)),c=n(r(1323));class f extends o.default{init(){this.store=new s.ContainersStore}get policy(){return"container:get"}get aliasPolicy(){return"barbican:container:get"}get name(){return"Certificate Detail"}get listUrl(){return this.getRoutePath("certificate",null,{tab:"SERVER"})}get actionConfigs(){return c.default.actionConfigsContainer}get detailInfos(){return(0,d.getCertificateColumns)(this)}get tabs(){return[{title:t("BaseDetail"),key:"detail_info",component:u.default}]}}a.Detail=f;var p=(0,l.inject)("rootStore")((0,l.observer)(f));a.default=p},3791:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var l=n(r(101)),o=n(r(0)),s=r(382),d=n(r(1122));class u extends d.default{get leftCardsStyle(){return{flex:1}}get leftCards(){return[this.contentCard]}get rightCards(){return[this.keyPairCard]}get contentCard(){var{secret_refs:e=[]}=this.props.detail,{secret_info:a={}}=(0,l.default)(e).call(e,(e=>"certificate"===e.name))||{},r=[{content:o.default.createElement("pre",null,a.payload),copyable:{text:a.payload}}];return{title:t("Certificate Content"),labelCol:0,contentCol:24,options:r}}get keyPairCard(){var{secret_refs:e=[]}=this.props.detail,{secret_info:a={}}=(0,l.default)(e).call(e,(e=>"private_key"===e.name))||{},r=[{content:o.default.createElement("pre",null,a.payload),copyable:{text:a.payload}}];return{title:t("Private Key"),labelCol:0,contentCol:24,options:r}}}a.BaseDetail=u;var c=(0,s.inject)("rootStore")((0,s.observer)(u));a.default=c},3792:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.Detail=void 0;var l=n(r(33)),o=r(382),s=n(r(1119)),d=r(1205),u=r(1127),c=n(r(3793)),f=n(r(1323));class p extends s.default{init(){this.store=new d.SecretsStore}get policy(){return"secret:get"}get name(){return"Certificate Detail"}get listUrl(){return this.getRoutePath("certificate",null,{tab:"CA"})}get actionConfigs(){return f.default.actionConfigsSecret}get detailInfos(){var e;return(0,l.default)(e=(0,u.getCertificateColumns)(this)).call(e,(e=>"domain"!==e.dataIndex))}get tabs(){return[{title:t("BaseDetail"),key:"detail_info",component:c.default}]}}a.Detail=p;var h=(0,o.inject)("rootStore")((0,o.observer)(p));a.default=h},3793:function(e,a,r){"use strict";var i=r(19),n=r(21);i(a,"__esModule",{value:!0}),a.default=a.BaseDetail=void 0;var l=n(r(0)),o=r(382),s=n(r(1122));class d extends s.default{get leftCardsStyle(){return{flex:1}}get leftCards(){return[this.contentCard]}get contentCard(){var{payload:e}=this.props.detail,a=[{content:l.default.createElement("pre",null,e),copyable:{text:e}}];return{title:t("Certificate Content"),labelCol:0,contentCol:24,options:a}}}a.BaseDetail=d;var u=(0,o.inject)("rootStore")((0,o.observer)(d));a.default=u}}]);